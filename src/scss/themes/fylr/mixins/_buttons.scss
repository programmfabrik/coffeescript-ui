// Button sizes
@mixin button-size($height, $padding-x, $font-size, $border-radius) {
	// padding: 0 $padding-x;
	height: $height;
	min-width: 1.1*$height; // make icon-only buttons optically square
	font-size: $font-size;
	line-height: $height;
	border-radius: $border-radius;

	.cui-button-left {
		padding-left: $padding-x;
		margin-right: -0.5*$padding-x;

		// reset, do not use :not, so we can easily override these styles if needed
		&:empty,
		&:only-child {
			padding-left: 0;
			margin-right: 0;
		}
	}

	.cui-button-right {
		padding-right: $padding-x;
		margin-left: -0.5*$padding-x;

		// reset, do not use :not, so we can easily override these styles if needed
		&:empty,
		&:only-child {
			padding-right: 0;
			margin-left: 0;
		}
	}

	.cui-button-center {
		@include text-truncate();

		padding: 0 $padding-x;

		// there are some button that have an empty center element
		&:empty:last-child {
			margin-left: -0.5*$padding-x;
		}
	}
}

@mixin button-size-base() {
	.cui-button-visual {
		@include button-size($btn-height, $btn-padding-x, $btn-font-size, $btn-border-radius);
	}
}

@mixin button-size-sm() {
	.cui-button-visual {
		@include button-size($btn-height-sm, $btn-padding-x-sm, $btn-font-size-sm, $btn-border-radius-sm);
	}
}

@mixin button-size-lg() {
	.cui-button-visual {
		@include button-size($btn-height-lg, $btn-padding-x-lg, $btn-font-size-lg, $btn-border-radius-lg);
	}
}

@mixin button-color($background: transparent, $color: $body-color, $background-hover: rgba(gray('200'), 0.75), $color-hover: inherit, $background-active: $background-hover, $color-active: theme-color('primary')) {
	.cui-button-visual {
		background-color: $background;
		color: $color;
	}

	&:hover,
	&:focus {
		.cui-button-visual {
			color: $color-hover;
			background-color: $background-hover;
		}
	}

	&:focus {
		outline: none;

		.cui-button-visual {
			@include button-focus();
		}
	}

	&.cui-active {
		&:hover,
		&:focus {
			.cui-button-visual {
				color: $color-active;
				background-color: $background-active;
			}
		}
	}

	&.cui-layer-open,
	&:active,
	&.cui-active {
		.cui-button-visual {
			color: $color-active;
		}
	}
}

@mixin button-color-reset($background: transparent, $color: $body-color) {
	@include button-color(transparent, $body-color, transparent, $body-color, transparent, $body-color);
}

@mixin button-primary() {
	$background: $btn-primary-background;
	$color: color-yiq($btn-primary-background);

	$background-hover: darken($btn-primary-background, 10%);
	$color-hover: $color;

	$background-active: $background-hover;
	$color-active: $color;

	@include button-color($background, $color, $background-hover, $color-hover, $background-active, $color-active);
}

@mixin button-link() {
	@include button-color(transparent, $link-color, transparent, $link-color, transparent, $link-color);

	.cui-button-visual {
		height: auto;

		.cui-button-center {
			text-decoration: underline;
			word-break: break-all;
		}
	}

	&:hover,
	&:focus {
		.cui-button-visual .cui-button-center {
			text-decoration: none;
		}
	}
}

@mixin button-bordered($border-color: currentColor) {
	.cui-button-visual {
		border: $btn-border-width solid $border-color;
	}

	&:focus .cui-button-visual {
		border-color: theme-color('focused');
	}

	&.cui-button--primary {
		.cui-button-visual {
			border-color: $btn-primary-background;
		}

		&:focus .cui-button-visual {
			border-color: darken($btn-primary-background, 15%);
		}
	}
}

@mixin button-focus() {
	// todo: find focus color that works with all colored buttons, see mixins/_forms
	@if $enable-btn-border-radius {
		box-shadow: $btn-focus-shadow !important; // keeps border-radius, but what about buttongroup buttons ?
	}

	@else {
		outline: 3px solid rgba(theme-color('focused'), 0.3); // use outline and not box-shadow because flat buttons remove the shadow
	}

	z-index: 1; // put forward to see outline
}

// Control button
// e.g. multi-input-tag-button (language selection), delete icon button in --deleteable
@mixin input-control-button($width: 22px, $height: 20px) {
	// @include button-flat();

	.cui-button-visual {
		color: gray('600');
		font-size: 10px;
		width: $width;
		height: $height;
		min-width: 0;
		margin: 2px;

		.cui-button-center {
			padding: 0 $spacer-xs;
		}
	}
}
