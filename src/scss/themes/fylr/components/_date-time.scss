// Calendar Popup
.cui-date-time-popover .cui-date-time-popover-inner {
	--calendar-background: #{$calendar-background};
	--calendar-static-cells-background: #{$calendar-static-cells-background};

	background-color: var(--calendar-background);
	flex: 1 1 auto;

	.cui-date-time-header {
		display: none; // todo: remove from markup?
	}

	&[browser='time'] {
		.cui-date-time-calendar {
			margin-left: -100%;
		}
	}

	.cui-date-time-browser {
		display: flex;
		// overflow: hidden; cuts off year-picker outline
		flex: 1 1 auto;

		.cui-date-time-calendar,
		.cui-date-time-clock {
			width: 100%;
		}

		.cui-date-time-calendar {
			transition: margin-left 0.5s ease-out;
		}
	}
}

.cui-date-time-clock {
	display: none; // todo: remove from markup?
}

// Calendar
// DateTime Format | Day:Month:Year | Hour:Minute |
.cui-date-time-calendar {
	font-size: $calendar-font-size;

	// todo: there is no way we can mark these up as flat buttons
	.cui-button-select,
	.cui-button {
		@include button-flat(transparent, $body-color, $input-background, theme-color('primary'));
		@include button-size-sm();

		.cui-button-visual {
			background-color: $input-background;

			&::after {
				display: none !important; // button flat
			}
		}
	}

	.cui-select {
		.cui-button-center {
			min-width: 32px;

			span:empty::after {
				content: '\2013\2013';
				color: theme-color('muted');
				letter-spacing: 0.1em;
			}
		}

		&.cui-date-time-am-pm-select .cui-button-center {
			min-width: 38px;
			margin-left: -5px;

			span:empty::after {
				content: 'am';
				display: block;
				position: relative;
				top: -1px;
				color: theme-color('muted');
				font-size: 10px;
			}
		}
	}

	.cui-buttonbar {
		padding: $spacer-sm;
		justify-content: space-between;
	}

	.cui-buttonbar-group-date,
	.cui-buttonbar-group-time {
		position: relative;
		padding-top: 1.75rem;

		&::before {
			position: absolute;
			top: 0.15rem;
			left: 0.5rem;
			font-weight: bold;
		}
	}

	.cui-buttonbar-group-date {
		&::before {
			// todo: add in the markup?, localization?
			content: 'Datum';
		}
	}

	.cui-buttonbar-group-time {
		background: $input-background;

		&::before {
			// todo: add in the markup?, localization?
			content: 'Uhrzeit';
		}

		.cui-select:not(.cui-date-time-am-pm-select):not(:first-child)::before {
			content: ':';
			position: relative;
			top: 1px;
			color: theme-color('muted');
		}
	}
}

.cui-date-time-footer {
	overflow: visible !important; // show year input outline

	.cui-buttonbar > *:not(:last-child) {
		margin-right: 0;
	}

	[cui-data-field-name='year'] input {
		$year-padding: $spacer-xs;

		@include input-size-mini();

		width: calc(4ch + 4 * #{$year-padding});
		min-width: 0;
		text-align: center;
		position: relative;
		padding: 0 $year-padding;

		.cui-browser-ie:not(.cui-browser-edge) & {
			width: calc(6ch + 4 * #{$year-padding});
		}
	}

	.cui-label {
		cursor: default;
	}

	> .cui-horizontal-layout-left {
		flex: 1 0 auto;
		margin-right: $spacer;

		.cui-label { // June, September
			flex: 1 1 auto;
			justify-content: center;
			margin: 0;
		}
	}

	> .cui-horizontal-layout-center {
		flex-grow: 0 !important;
	}

	> .cui-horizontal-layout-right {
		overflow: visible !important; // show year input outline
	}
}

.cui-date-time-date {
	width: 100%;
	flex-grow: 1;

	.cui-tr {
		padding: 0;
		display: flex;

		&:last-child {
			.cui-td {
				margin-bottom: 0;
			}
		}

		&.cui-date-time-month-header {
			position: relative;
			background: var(--calendar-static-cells-background);

			&::after {
				content: '';
				position: absolute;
				bottom: 0;
				left: 0;
				height: 1px;
				width: 100%;
				background-color: var(--calendar-background);
			}
		}
	}

	.cui-td,
	.cui-th {
		$width: calc((100% - 7px) / #{$calendar-cell-count});

		position: relative;
		width: $width;
		padding: 0;
		padding-top: calc(#{$width} * 0.95); // make the cells visually square
		display: flex;
		justify-content: center;
		align-self: center;
		border-right: 1px solid var(--calendar-background);
		border-bottom: 1px solid var(--calendar-background);
		cursor: default;

		&:last-child {
			border-right: 0;
		}

		&::after {
			display: none;
		}

		span,
		div {
			position: absolute;
			display: flex;
			justify-content: center;
			align-items: center;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);
			width: $calendar-cell-size;
			height: $calendar-cell-size;
			line-height: $calendar-cell-size;
			text-align: center;
			border-radius: 999px;
		}
	}

	.cui-th {
		font-size: $calendar-font-size * 0.8575;
		border: 0;
	}

	.cui-date-time-week {
		font-size: $calendar-font-size * 0.8575;
		background: var(--calendar-static-cells-background);
		color: $calendar-static-cells-color;
	}

	.cui-date-time-week-title {
		color: $calendar-static-cells-color;
	}

	.cui-date-time-day {
		background: $white;
		cursor: pointer;

		&:hover {
			span {
				color: $body-color;
				background-color: $calendar-date-hover-background;
			}
		}
	}

	.cui-date-time-previous-month,
	.cui-date-time-next-month {
		color: $calendar-date-previous-color;
	}

	.cui-date-time-now {
		span {
			border: 1px solid currentColor;
		}
	}

	.cui-date-time-selected {
		&:hover span,
		span {
			color: $white;
			background: $calendar-date-active-background;
		}
	}
}

// DateTime Popover
// todo: is this obsolete ??
.cui-menu.cui-date-time-60-select {
	.cui-item-list-body {
		box-sizing: content-box;
		width: 370px;
		display: flex;
		flex-direction: row;
		flex-wrap: wrap;

		> * {
			box-sizing: border-box;
		}

		.cui-button {
			width: 37px;
			height: 30px;
			align-items: center;
			text-align: center;
		}
	}
}
