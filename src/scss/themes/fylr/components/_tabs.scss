// todo: tabs within list-view
// * Tabs

/*
<div class="cui-tabs [ cui-tabs--horizontal | cui-tabs--vertical ] cui-pane cui-maximize cui-maximize-horizontal cui-maximize-vertical cui-vertical-layout">
	<div class="cui-vertical-layout-top">
		<div class="cui-pane-header cui-tabs-pane-header cui-toolbar cui-maximize-horizontal cui-horizontal-layout [cui-tabs-pane-header--overflow]">
			<div class="cui-horizontal-layout-left"></div>
			<div class="cui-horizontal-layout-center">
				<div class="cui-buttonbar cui-buttonbar--stack-horizontal">
					<div class="cui-buttonbar-group cui-buttonbar-group-tabs">
						<div class="cui-button cui-tab-header-button cui-button-button"> ... </div>
					</div>
				</div>
				<div class="cui-tabs-active-marker"></div>
			</div>
			<div class="cui-horizontal-layout-right">
				[ <div class="cui-button cui-tab-header-button-overflow cui-button-button"> ... </div> ]
			</div>
		</div>
	</div>
	<div class="cui-vertical-layout-center">
		<div class="cui-tabs-bodies">
			<div class="cui-tab-body cui-tab [cui-tab-hidden]">
				...
			</div>
		</div>
	</div>
	<div class="cui-vertical-layout-bottom">
		<div class="cui-pane-footer cui-toolbar cui-maximize-horizontal cui-horizontal-layout">
			<div class="cui-horizontal-layout-left"></div>
			<div class="cui-horizontal-layout-center"></div>
			<div class="cui-horizontal-layout-right">
				[ <div class="cui-buttonbar cui-buttonbar--stack-horizontal"> ... </div> ]
			</div>
		</div>
	</div>
</div>
*/

// * Tab Layout

.cui-tabs {
	background-color: transparent; // reset cui-pane

	&.cui-absolute > .cui-vertical-layout-center {
		top: $toolbar-height + 1px; // todo: find use-case
	}

	.cui-toolbar {
		background-color: transparent; // reset cui-toolbar
	}

	> .cui-vertical-layout-center {
		flex-grow: 1;

		> .cui-tabs-bodies {
			display: flex;
			flex: 1 1 auto;
			overflow: hidden;

			> .cui-tab-body {
				display: flex;
				flex-direction: column;
				margin-left: 0 !important;
				flex: 1 1 auto;
				overflow: auto;
				-webkit-overflow-scrolling: touch;

				&.cui-tab-hidden {
					display: none;
				}

				&.cui-tab--padded {
					padding: $tabs-padding;
				}

				> .cui-empty-label:only-child {
					margin: $spacer-sm 0;
				}
			}
		}
	}
}

// * Tab Header with Buttons

.cui-tabs-pane-header {
	padding: 0; // reset .cui-toolbar
	min-height: 0; // reset .cui-toolbar
	border-bottom: 1px solid $tabs-header-border-color;
	margin-bottom: $spacer-sm;

	> .cui-horizontal-layout-center {
		overflow: auto !important; //! need to reset "visible !important" in .cui-toolbar > .cui-horizontal-layout-center to calculate if the modifier --overflow should be applied
		justify-content: flex-start; // reset .cui-toolbar
	}

	.cui-buttonbar {
		min-width: 0;
		position: relative;

		&::after {
			content: '';
			position: absolute;
			display: block;
			background: theme-color('primary');
			width: var(--active-tab-width);
			height: $tabs-header-border-width;
			bottom: 0;
			left: 0;
			transform: translate(var(--active-tab-left), 0);
			transition: all 0.3s ease;
			z-index: 1;
		}
	}

	.cui-buttonbar-group {
		@include ungroup-visually();
	}

	// overflowing tabs
	&.cui-tabs-pane-header--overflow {
		> .cui-horizontal-layout-center {
			padding-right: 0;
			margin-right: 0;
			overflow: hidden !important; // overwrite toolbar > center overflow visible
		}
	}

	// * Buttons

	.cui-tab-header-button,
	.cui-tab-header-button-overflow {
		margin: 0;

		.cui-button-visual {
			text-transform: uppercase;
			height: $tabs-header-height;
			padding: 0 $spacer-sm;
			border-radius: 0;
		}

		&:focus {
			.cui-button-visual {
				box-shadow: none !important;
			}
		}

		&:active,
		&.cui-active {
			.cui-button-visual {
				background-color: gray('100');
				color: $btn-hover-color;
			}
		}
	}

	// * Overflow Button

	.cui-tab-header-button-overflow {
		align-self: center;
		position: relative;
		z-index: 1; // to overlap active buttons
		border-bottom: 1px solid $tabs-overflow-button-background;

		// white blocker gradient
		&::before {
			content: '';
			display: block;
			position: absolute;
			left: 0;
			top: 0;
			bottom: 0;
			width: 40px;
			transform: translateX(-100%);
			opacity: 0.6;

			@include scrim-gradient($body-bg, $direction: 'to left');
		}

		// shadow gradient
		&::after {
			content: '';
			display: block;
			position: absolute;
			left: 0;
			top: 0;
			bottom: 0;
			width: 10px;
			transform: translateX(-100%);
			opacity: 0.1;

			@include scrim-gradient($body-color, $direction: 'to left');
		}

		.cui-button-visual {
			position: relative;
			background-color: $tabs-overflow-button-background;
			color: $tabs-overflow-button-color;
			border-top-left-radius: 0 !important;
			border-bottom-left-radius: 0 !important;
			border-bottom-right-radius: 0 !important;
		}

		&:hover,
		&:focus {
			.cui-button-visual {
				background-color: darken($tabs-overflow-button-background, 8%);
			}
		}
	}
}

// Hide tab Marker, will be rendered in .cui-buttonbar
.cui-tabs-active-marker {
	display: none;
}
