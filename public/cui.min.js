!function webpackUniversalModuleDefinition(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.CUI=e():t.CUI=e()}(this,function(){return function(t){function __webpack_require__(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,__webpack_require__),n.l=!0,n.exports}var e={};return __webpack_require__.m=t,__webpack_require__.c=e,__webpack_require__.i=function(t){return t},__webpack_require__.d=function(t,e,i){__webpack_require__.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},__webpack_require__.n=function(t){var e=t&&t.__esModule?function getDefault(){return t.default}:function getModuleExports(){return t};return __webpack_require__.d(e,"a",e),e},__webpack_require__.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=168)}([function(t,e,i){var n,o;o=i(2),n=function(){function CUI(){}return CUI.__readyFuncs=[],CUI.__themes=[],CUI.__ng__=!0,CUI.start=function(){var t,e;return e=function(t){return function(){return CUI.Events.trigger({type:"viewport-resize"})}}(),CUI.Events.listen({type:"resize",node:window,call:function(t){return function(t,i){CUI.browser.ie?CUI.scheduleCallback({ms:500,call:e}):e()}}()}),CUI.Events.listen({type:"drop",node:document.documentElement,call:function(t){return t.preventDefault()}}),CUI.Events.listen({type:"keyup",node:window,capture:!0,call:function(t){if("C+U+I"===t.getKeyboard())return CUI.toaster({text:"CUI!"})}}),CUI.Events.listen({type:"keydown",node:window,call:function(t){var e,i,n,o,r;if("c+"===t.getKeyboard()&&CUI.toaster({text:"CUI!"}),8===t.keyCode()){for(o=CUI.dom.elementsUntil(t.getTarget(),null,document.documentElement),e=0,i=o.length;e<i;e++){if(n=o[e],"INPUT"===(r=n.tagName)||"TEXTAREA"===r)return;if("true"===n.getAttribute("contenteditable"))return}t.preventDefault()}}}),document.body.scrollTop=0,t=i(199),CUI.Template.loadText(t),CUI.Template.load(),this.chainedCall.apply(this,this.__readyFuncs).always(function(t){return function(){return t.__ready=!0}}(this)),this},CUI.getPathToScript=function(){var t,e,i;return this.__pathToScript||(i=document.getElementsByTagName("script"),t=i[i.length-1],(e=t.src.match("(.*/).*?.js$"))?this.__pathToScript=e[1]:CUI.util.assert(this.__pathToScript,"CUI","Could not determine script path.")),this.__pathToScript},CUI.ready=function(t){return this.__ready?t.call(this):this.__readyFuncs.push(t)},CUI.defaults={FileUpload:{name:"files[]"},debug:!0,asserts:!0,asserts_alert:"js",class:{}},CUI.resolvedPromise=function(){var t;return t=new CUI.Deferred,t.resolve.apply(t,arguments),t.promise()},CUI.rejectedPromise=function(){var t;return t=new CUI.Deferred,t.reject.apply(t,arguments),t.promise()},CUI.chainedCall=function(){var t,e,i,n,o,r,s,a;return r=0,t=this,n=function(t){var e,i,n,o;for(e=[],n=0,o=t.length;n<o;n++)i=t[n],e.push(i);return e},o=function(t){var e;return e=n(t),0===e.length?void 0:1===e.length?e[0]:e},e=n(arguments),a=[],s=function(n){return function(){var n;if(r===e.length)return void i.resolve.apply(i,a);n=CUI.util.isFunction(e[r])?t!==CUI?e[r].call(t):e[r]():e[r],r++,CUI.util.isPromise(n)?n.done(function(){return a.push(o(arguments)),s()}).fail(function(){return a.push(o(arguments)),i.reject.apply(i,a)}):(a.push(n),s())}}(),i=new CUI.Deferred,s(),i.promise()},CUI.chunkWork=function(t){var e,i,n,o,r,s,a;return null==t&&(t={}),s=CUI.Element.readOpts(t,"CUI.chunkWork",{items:{mandatory:!0,check:function(t){return CUI.util.isArray(t)}},chunk_size:{mandatory:!0,default:10,check:function(t){return t>=1}},timeout:{mandatory:!0,default:0,check:function(t){return t>=-1}},call:{mandatory:!0,check:function(t){return t instanceof Function}}}),e=s.chunk_size,a=s.timeout,CUI.util.assert(this!==CUI,"CUI.chunkWork","Cannot call CUI.chunkWork with 'this' not set to the caller."),n=0,o=s.items.length,r=function(t){return function(){var l,u,c;if(u=n+1+" - "+Math.min(o,n+e)+" / "+o,i.notify({progress:u,idx:n,len:o,chunk_size:e}),l=function(){n+e>=o?i.resolve():(n+=e,-1===a?r():CUI.setTimeout({ms:a,call:r}))},!1===(c=s.call.call(t,s.items.slice(n,n+s.chunk_size),n,o)))return void i.reject();CUI.util.isPromise(c)?c.fail(i.reject).done(l):l()}}(this),i=new CUI.Deferred,CUI.setTimeout({ms:Math.min(0,a),call:function(t){return function(){return o>0?r():i.resolve()}}()}),i.promise()},CUI.chunkWorkOLD=function(t,e,i){var n,o,r;return null==e&&(e=10),null==i&&(i=0),n=new CUI.Deferred,r=0,o=function(s){return function(){var s;for(s=0;r<t.length&&(s<e||0===e);){if("rejected"===n.state())return;if(n.notify(t[r],r),r===t.length-1)return void n.resolve();r++,s++}if(r<t.length)return CUI.setTimeout(o,i)}}(),0===t.length?CUI.setTimeout(function(t){return function(){if("rejected"!==n.state())return n.resolve()}}()):CUI.setTimeout(o),n},CUI.proxyMethods=function(t,e,i){var n,o,r,s;for(s=[],n=0,r=i.length;n<r;n++)o=i[n],s.push(t.prototype[o]=e.prototype[o]);return s},CUI.__timeouts=[],CUI.__timeoutCallbacks=[],CUI.__callTimeoutChangeCallbacks=function(){var t,e,i,n;for(n=this.countTimeouts(),i=this.__timeoutCallbacks,t=0,e=i.length;t<e;t++)(0,i[t])(n)},CUI.__removeTimeout=function(t){CUI.util.removeFromArray(t,this.__timeouts)&&t.track&&this.__callTimeoutChangeCallbacks()},CUI.__getTimeoutById=function(t,e){var i,n,o,r;for(null==e&&(e=!1),o=this.__timeouts,i=0,n=o.length;i<n;i++)if(r=o[i],r.id===t)return r;return CUI.util.assert(e,"CUI.__getTimeoutById","Timeout #"+t+" not found."),null},CUI.resetTimeout=function(t){var e;return e=this.__getTimeoutById(t),CUI.util.assert(!e.__isRunning,"CUI.resetTimeout","Timeout "+t+" cannot be resetted while running.",{timeout:e}),"function"==typeof e.onReset&&e.onReset(e),window.clearTimeout(e.real_id),e.real_id,this.__startTimeout(e)},CUI.registerTimeoutChangeCallback=function(t){return this.__timeoutCallbacks.push(t)},CUI.setTimeout=function(t,e,i){var n,o,r,s;return null==e&&(e=0),CUI.util.isPlainObject(t)?(e=t.ms||0,i=t.track,n=t.call,o=t.onDone,r=t.onReset):n=t,CUI.util.isNull(i)&&(i=0!==e),CUI.util.assert(CUI.util.isFunction(n),"CUI.setTimeout","Function needs to be a Function (opts.call)",{parameter:t}),s={call:function(t){return function(){return s.__isRunning=!0,n(),t.__removeTimeout(s),"function"==typeof s.onDone?s.onDone(s):void 0}}(this),ms:e,func:n,track:i,onDone:o,onReset:r},this.__timeouts.push(s),i&&e>0&&this.__callTimeoutChangeCallbacks(),this.__startTimeout(s)},CUI.__scheduledCallbacks=[],CUI.scheduleCallback=function(t){var e,i,n,o,r;return o=CUI.Element.readOpts(t,"CUI.scheduleCallback",{call:{mandatory:!0,check:Function},ms:{default:0,check:function(t){return CUI.util.isInteger(t)&&t>=0}},track:{default:!1,check:Boolean}}),n=CUI.util.idxInArray(o.call,this.__scheduledCallbacks,function(t){return t.call===o.call}),n>-1&&CUI.isTimeoutRunning(this.__scheduledCallbacks[n].timeoutID)&&(n=-1),-1!==n?(CUI.resetTimeout(this.__scheduledCallbacks[n].timeoutID),this.__scheduledCallbacks[n].promise):(n=this.__scheduledCallbacks.length,i=new CUI.Deferred,r=CUI.setTimeout({ms:o.ms,track:o.track,call:function(t){return function(){return o.call(),i.resolve()}}()}),e=this.__scheduledCallbacks[n]={call:o.call,timeoutID:r,promise:i.promise()},i.done(function(t){return function(){return CUI.util.removeFromArray(o.call,t.__scheduledCallbacks,function(t){return t.call===o.call})}}(this)),e.promise)},CUI.scheduleCallbackCancel=function(t){var e,i;return i=CUI.Element.readOpts(t,"CUI.scheduleCallbackCancel",{call:{mandatory:!0,check:Function}}),(e=CUI.util.idxInArray(i.call,this.__scheduledCallbacks,function(t){return t.call===i.call}))>-1&&!CUI.isTimeoutRunning(this.__scheduledCallbacks[e].timeoutID)&&(CUI.clearTimeout(this.__scheduledCallbacks[e].timeoutID),this.__scheduledCallbacks.splice(e,1),!0)},CUI.utf8ArrayBufferToString=function(t){var e,i,n,o,r,s,a;for(a=[],e=new Uint8Array(t),s=e.length,r=0;r<s;)switch((i=e[r++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a.push(String.fromCharCode(i));break;case 12:case 13:n=e[r++],a.push(String.fromCharCode((31&i)<<6|63&n));break;case 14:n=e[r++],o=e[r++],a.push(String.fromCharCode((15&i)<<12|(63&n)<<6|(63&o)<<0))}return a.join("")},CUI.__startTimeout=function(t){var e;return e=window.setTimeout(t.call,t.ms),t.id||(t.id=e),t.real_id=e,t.id},CUI.countTimeouts=function(){var t,e,i,n,o;for(o=0,i=this.__timeouts,t=0,e=i.length;t<e;t++)n=i[t],n.track&&o++;return o},CUI.clearTimeout=function(t){var e;if(e=this.__getTimeoutById(t,!0))return window.clearTimeout(e.real_id),this.__removeTimeout(e),e.id},CUI.isTimeoutRunning=function(t){var e;return!(null==(e=this.__getTimeoutById(t,!0))||!e.__isRunning)},CUI.setInterval=function(t,e){return window.setInterval(t,e)},CUI.clearInterval=function(t){return window.clearInterval(t)},CUI.startWebdriverTest=function(){var t;return t="body",CUI.dom.addClass(t,"cui-webdriver-test")},CUI.getParameterByName=function(t,e){var i,n;return null==e&&(e=document.location.search),t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),i=new RegExp("[\\?&]"+t+"=([^&#]*)"),n=i.exec(e),null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))},CUI.setSessionStorage=function(t,e){return this.__setStorage("sessionStorage",t,e)},CUI.getSessionStorage=function(t){return null==t&&(t=null),this.__getStorage("sessionStorage",t)},CUI.clearSessionStorage=function(){return this.__clearStorage("sessionStorage")},CUI.setLocalStorage=function(t,e){return this.__setStorage("localStorage",t,e)},CUI.getLocalStorage=function(t){return null==t&&(t=null),this.__getStorage("localStorage",t)},CUI.clearLocalStorage=function(){return this.__clearStorage("localStorage")},CUI.__storage={localStorage:null,sessionStorage:null},CUI.__setStorage=function(t,e,i){var n,o;n=this.__getStorage(t),void 0===i?delete n[e]:n[e]=i;try{window[t].setItem("CUI",JSON.stringify(n))}catch(e){o=e,console.warn("CUI.__setStorage: Storage not available.",o),this.__storage[t]=JSON.stringify(n)}return n},CUI.__getStorage=function(t,e){var i,n,o;null==e&&(e=null);try{n=window[t].getItem("CUI")}catch(e){o=e,console.warn("CUI.__getStorage: Storage not available.",o),n=this.__storage[t]}return i=n?JSON.parse(n):{},null!==e?i[e]:i},CUI.__clearStorage=function(t){var e;try{return window[t].removeItem("CUI")}catch(i){return e=i,console.warn("CUI.__clearStorage: Storage not available.",e),this.__storage[t]=null}},CUI.encodeUrlData=function(t,e,i,n){var o,r,s,a,l,u,c;null==e&&(e=null),null==i&&(i="&"),null==n&&(n="="),u=[],r=e?CUI.util.isFunction(e)?e:function(t){return CUI.util.stringMapReplace(t+"",replace_map)}:function(t){return encodeURIComponent(t)};for(a in t)if(c=t[a],CUI.util.isArray(c))for(s=0,l=c.length;s<l;s++)o=c[s],u.push(r(a)+n+r(o));else CUI.util.isEmpty(c)?void 0!==c&&u.push(r(a)):u.push(r(a)+n+r(c));return u.join(i)},CUI.encodeURIComponentNicely=function(t){var e,i,n,o,r;for(null==t&&(t=""),o=[],n=(t+"").split(""),e=0,i=n.length;e<i;e++)r=n[e],","===r||":"===r?o.push(r):o.push(encodeURIComponent(r));return o.join("")},CUI.decodeURIComponentNicely=function(t){return decodeURIComponent(t)},CUI.decodeUrlData=function(t,e,i,n,o){var r,s,a,l,u,c,h,d,p;for(null==e&&(e=null),null==i&&(i="&"),null==n&&(n="="),null==o&&(o=!1),c={},r=e?CUI.util.isFunction(e)?e:function(t){return CUI.util.stringMapReplace(t+"",e)}:function(t){return decodeURIComponent(t)},d=t.split(i),s=0,l=d.length;s<l;s++)h=d[s],0!==h.length&&(h.indexOf(n)>-1?(u=h.split(n),a=r(u[0]),p=r(u[1])):(a=r(h),p=""),o?(c[a]||(c[a]=[]),c[a].push(p)):c[a]=p);return c},CUI.decodeUrlDataArray=function(t,e,i,n){return null==e&&(e=null),null==i&&(i="&"),null==n&&(n="="),this.decodeUrlData(t,e,i,n,!0)},CUI.mergeMap=function(t,e){var i,n;for(i in e)n=e[i],t.hasOwnProperty(i)?CUI.util.isPlainObject(t[i])&&CUI.util.isPlainObject(n)&&CUI.util.mergeMap(t[i],n):t[i]=n;return t},CUI.revertMap=function(t){var e,i,n;i={};for(e in t)n=t[e],i[n]=e;return i},CUI.stringMapReplace=function(t,e){var i,n;n=[];for(i in e)CUI.util.isEmpty(i)||n.push(i.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"));return n.length>0?t.replace(new RegExp(n.join("|"),"g"),function(t){return e[t]}):t},CUI.isFunction=function(t){return t&&"function"==typeof t},CUI.isPlainObject=function(t){var e;return t&&"object"==typeof t&&(null!=(e=t.constructor)?e.prototype.hasOwnProperty("isPrototypeOf"):void 0)},CUI.isEmptyObject=function(t){var e;for(e in t)return!1;return!0},CUI.isMap=function(t){return this.isPlainObject(t)},CUI.isArray=function(t){return Array.isArray(t)},CUI.inArray=function(t,e){return e.indexOf(t)},CUI.isString=function(t){return"string"==typeof t},CUI.downloadData=function(t,e){var i,n;return i=new Blob([t],{type:"octet/stream"}),window.navigator.msSaveOrOpenBlob?window.navigator.msSaveOrOpenBlob(i,e):(n=window.URL.createObjectURL(i),this.__downloadDataElement.href=n,this.__downloadDataElement.download=e,this.__downloadDataElement.click(),window.URL.revokeObjectURL(n))},CUI.urlRegex=new RegExp("^(?:(?:(ftp|ftps|https|http))://|)(?:(\\S+?)(?::(\\S*))?@)?((?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:[a-z\\u00a1-\\uffff0-9-*][a-z\\u00a1-\\uffff0-9-]*\\.)*(?:[a-z\\u00a1-\\uffff]{2,})))|)(?::(\\d{2,5}))?(?:([/?#]\\S*))?$","i"),CUI.evalCode=function(t){var e;return e=document.createElement("script"),e.text=t,document.head.appendChild(e).parentNode.removeChild(e)},CUI.appendToUrl=function(t,e){var i,n;for(i in e)void 0!==(n=e[i])&&(t.match(/\?/)?t+="&":t+="?",t+=encodeURIComponent(i)+"="+encodeURIComponent(n));return t},CUI.parseLocation=function(t){var e,i,n;return CUI.util.isFunction(null!=t?t.match:void 0)&&0!==t.length&&(i=t.match(this.urlRegex))?(n={protocol:i[1]||"",user:i[2]||"",password:i[3]||"",hostname:i[4]||"",port:i[5]||"",path:i[6]||"",origin:""},n.hostname?(n.protocol||(n.protocol="http"),n.origin=n.protocol+"://"+n.hostname,n.port&&(n.origin+=":"+n.port),n.url=n.protocol+"://",n.user&&(n.url=n.url+n.user+":"+n.password+"@"),n.url=n.url+n.hostname,n.port&&(n.url=n.url+":"+n.port)):n.url="",n.path.length>0?(e=n.path.match(/(.*?)(|\?.*?)(|\#.*)$/),n.pathname=e[1],n.search=e[2],"?"===n.search&&(n.search=""),n.fragment=e[3]):(n.search="",n.pathname="",n.fragment=""),n.href=n.origin+n.path,n.hash=n.fragment,n.login&&(n.auth=btoa(n.user+":"+n.password)),n.url=n.url+n.path,n):null},CUI.escapeAttribute=function(t){return CUI.util.isNull(t)||!CUI.util.isString(t)?"":t=t.replace(/"/g,"&quot;").replace(/\'/g,"&#39;")},CUI.browser=function(){var t;return t={opera:!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,firefox:"undefined"!=typeof InstallTrigger,safari:Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0,ie:!!document.documentMode,chrome:!!window.chrome&&!!window.chrome.webstore},t.edge=!t.ie&&!!window.StyleMedia,t.blink=(t.chrome||t.opera)&&!!window.CSS,t}(),CUI}(),n.ready(function(t){return function(){var t,e;for(t in n.browser)n.browser[t]&&document.body.classList.add("cui-browser-"+t);return n.defaults.marked_opts={renderer:new o.Renderer,gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!0,smartLists:!0,smartypants:!1},o.setOptions(n.defaults.marked_opts),e=n.dom.htmlToNodes("\x3c!-- CUI.CUI --\x3e<a style='display: none;'></a>\x3c!-- /CUI.CUI --\x3e"),n.__downloadDataElement=e[1],n.dom.append(document.body,e)}}()),window.addEventListener?window.addEventListener("load",function(t){return function(){return n.start()}}()):alert("Your browser is not supported. Please update to a current version of Google Chrome, Mozilla Firefox or Internet Explorer."),t.exports=n},function(t,e,i){(function(t){!function(e,i){t.exports=i()}(0,function(){"use strict";function hooks(){return e.apply(null,arguments)}function isArray(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function isObject(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function isObjectEmpty(t){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;var e;for(e in t)if(t.hasOwnProperty(e))return!1;return!0}function isUndefined(t){return void 0===t}function isNumber(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)}function isDate(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function map(t,e){var i,n=[];for(i=0;i<t.length;++i)n.push(e(t[i],i));return n}function hasOwnProp(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function extend(t,e){for(var i in e)hasOwnProp(e,i)&&(t[i]=e[i]);return hasOwnProp(e,"toString")&&(t.toString=e.toString),hasOwnProp(e,"valueOf")&&(t.valueOf=e.valueOf),t}function createUTC(t,e,i,n){return createLocalOrUTC(t,e,i,n,!0).utc()}function defaultParsingFlags(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function getParsingFlags(t){return null==t._pf&&(t._pf=defaultParsingFlags()),t._pf}function isValid(t){if(null==t._isValid){var e=getParsingFlags(t),i=n.call(e.parsedDateParts,function(t){return null!=t}),o=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&i);if(t._strict&&(o=o&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour),null!=Object.isFrozen&&Object.isFrozen(t))return o;t._isValid=o}return t._isValid}function createInvalid(t){var e=createUTC(NaN);return null!=t?extend(getParsingFlags(e),t):getParsingFlags(e).userInvalidated=!0,e}function copyConfig(t,e){var i,n,r;if(isUndefined(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),isUndefined(e._i)||(t._i=e._i),isUndefined(e._f)||(t._f=e._f),isUndefined(e._l)||(t._l=e._l),isUndefined(e._strict)||(t._strict=e._strict),isUndefined(e._tzm)||(t._tzm=e._tzm),isUndefined(e._isUTC)||(t._isUTC=e._isUTC),isUndefined(e._offset)||(t._offset=e._offset),isUndefined(e._pf)||(t._pf=getParsingFlags(e)),isUndefined(e._locale)||(t._locale=e._locale),o.length>0)for(i=0;i<o.length;i++)n=o[i],r=e[n],isUndefined(r)||(t[n]=r);return t}function Moment(t){copyConfig(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===r&&(r=!0,hooks.updateOffset(this),r=!1)}function isMoment(t){return t instanceof Moment||null!=t&&null!=t._isAMomentObject}function absFloor(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function toInt(t){var e=+t,i=0;return 0!==e&&isFinite(e)&&(i=absFloor(e)),i}function compareArrays(t,e,i){var n,o=Math.min(t.length,e.length),r=Math.abs(t.length-e.length),s=0;for(n=0;n<o;n++)(i&&t[n]!==e[n]||!i&&toInt(t[n])!==toInt(e[n]))&&s++;return s+r}function warn(t){!1===hooks.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function deprecate(t,e){var i=!0;return extend(function(){if(null!=hooks.deprecationHandler&&hooks.deprecationHandler(null,t),i){for(var n,o=[],r=0;r<arguments.length;r++){if(n="","object"==typeof arguments[r]){n+="\n["+r+"] ";for(var s in arguments[0])n+=s+": "+arguments[0][s]+", ";n=n.slice(0,-2)}else n=arguments[r];o.push(n)}warn(t+"\nArguments: "+Array.prototype.slice.call(o).join("")+"\n"+(new Error).stack),i=!1}return e.apply(this,arguments)},e)}function deprecateSimple(t,e){null!=hooks.deprecationHandler&&hooks.deprecationHandler(t,e),s[t]||(warn(e),s[t]=!0)}function isFunction(t){return t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function set(t){var e,i;for(i in t)e=t[i],isFunction(e)?this[i]=e:this["_"+i]=e;this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function mergeConfigs(t,e){var i,n=extend({},t);for(i in e)hasOwnProp(e,i)&&(isObject(t[i])&&isObject(e[i])?(n[i]={},extend(n[i],t[i]),extend(n[i],e[i])):null!=e[i]?n[i]=e[i]:delete n[i]);for(i in t)hasOwnProp(t,i)&&!hasOwnProp(e,i)&&isObject(t[i])&&(n[i]=extend({},n[i]));return n}function Locale(t){null!=t&&this.set(t)}function calendar(t,e,i){var n=this._calendar[t]||this._calendar.sameElse;return isFunction(n)?n.call(e,i):n}function longDateFormat(t){var e=this._longDateFormat[t],i=this._longDateFormat[t.toUpperCase()];return e||!i?e:(this._longDateFormat[t]=i.replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t])}function invalidDate(){return this._invalidDate}function ordinal(t){return this._ordinal.replace("%d",t)}function relativeTime(t,e,i,n){var o=this._relativeTime[i];return isFunction(o)?o(t,e,i,n):o.replace(/%d/i,t)}function pastFuture(t,e){var i=this._relativeTime[t>0?"future":"past"];return isFunction(i)?i(e):i.replace(/%s/i,e)}function addUnitAlias(t,e){var i=t.toLowerCase();d[i]=d[i+"s"]=d[e]=t}function normalizeUnits(t){return"string"==typeof t?d[t]||d[t.toLowerCase()]:void 0}function normalizeObjectUnits(t){var e,i,n={};for(i in t)hasOwnProp(t,i)&&(e=normalizeUnits(i))&&(n[e]=t[i]);return n}function addUnitPriority(t,e){p[t]=e}function getPrioritizedUnits(t){var e=[];for(var i in t)e.push({unit:i,priority:p[i]});return e.sort(function(t,e){return t.priority-e.priority}),e}function zeroFill(t,e,i){var n=""+Math.abs(t),o=e-n.length;return(t>=0?i?"+":"":"-")+Math.pow(10,Math.max(0,o)).toString().substr(1)+n}function addFormatToken(t,e,i,n){var o=n;"string"==typeof n&&(o=function(){return this[n]()}),t&&(g[t]=o),e&&(g[e[0]]=function(){return zeroFill(o.apply(this,arguments),e[1],e[2])}),i&&(g[i]=function(){return this.localeData().ordinal(o.apply(this,arguments),t)})}function removeFormattingTokens(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function makeFormatFunction(t){var e,i,n=t.match(_);for(e=0,i=n.length;e<i;e++)g[n[e]]?n[e]=g[n[e]]:n[e]=removeFormattingTokens(n[e]);return function(e){var o,r="";for(o=0;o<i;o++)r+=isFunction(n[o])?n[o].call(e,t):n[o];return r}}function formatMoment(t,e){return t.isValid()?(e=expandFormat(e,t.localeData()),m[e]=m[e]||makeFormatFunction(e),m[e](t)):t.localeData().invalidDate()}function expandFormat(t,e){function replaceLongDateFormatTokens(t){return e.longDateFormat(t)||t}var i=5;for(f.lastIndex=0;i>=0&&f.test(t);)t=t.replace(f,replaceLongDateFormatTokens),f.lastIndex=0,i-=1;return t}function addRegexToken(t,e,i){B[t]=isFunction(e)?e:function(t,n){return t&&i?i:e}}function getParseRegexForToken(t,e){return hasOwnProp(B,t)?B[t](e._strict,e._locale):new RegExp(unescapeFormat(t))}function unescapeFormat(t){return regexEscape(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,i,n,o){return e||i||n||o}))}function regexEscape(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function addParseToken(t,e){var i,n=e;for("string"==typeof t&&(t=[t]),isNumber(e)&&(n=function(t,i){i[e]=toInt(t)}),i=0;i<t.length;i++)V[t[i]]=n}function addWeekParseToken(t,e){addParseToken(t,function(t,i,n,o){n._w=n._w||{},e(t,n._w,n,o)})}function addTimeToArrayFromToken(t,e,i){null!=e&&hasOwnProp(V,t)&&V[t](e,i._a,i,t)}function daysInYear(t){return isLeapYear(t)?366:365}function isLeapYear(t){return t%4==0&&t%100!=0||t%400==0}function getIsLeapYear(){return isLeapYear(this.year())}function makeGetSet(t,e){return function(i){return null!=i?(set$1(this,t,i),hooks.updateOffset(this,e),this):get(this,t)}}function get(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function set$1(t,e,i){t.isValid()&&!isNaN(i)&&("FullYear"===e&&isLeapYear(t.year())&&1===t.month()&&29===t.date()?t._d["set"+(t._isUTC?"UTC":"")+e](i,t.month(),daysInMonth(i,t.month())):t._d["set"+(t._isUTC?"UTC":"")+e](i))}function stringGet(t){return t=normalizeUnits(t),isFunction(this[t])?this[t]():this}function stringSet(t,e){if("object"==typeof t){t=normalizeObjectUnits(t);for(var i=getPrioritizedUnits(t),n=0;n<i.length;n++)this[i[n].unit](t[i[n].unit])}else if(t=normalizeUnits(t),isFunction(this[t]))return this[t](e);return this}function mod(t,e){return(t%e+e)%e}function daysInMonth(t,e){if(isNaN(t)||isNaN(e))return NaN;var i=mod(e,12);return t+=(e-i)/12,1===i?isLeapYear(t)?29:28:31-i%7%2}function localeMonths(t,e){return t?isArray(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||G).test(e)?"format":"standalone"][t.month()]:isArray(this._months)?this._months:this._months.standalone}function localeMonthsShort(t,e){return t?isArray(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[G.test(e)?"format":"standalone"][t.month()]:isArray(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function handleStrictParse(t,e,i){var n,o,r,s=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)r=createUTC([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(r,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(r,"").toLocaleLowerCase();return i?"MMM"===e?(o=Z.call(this._shortMonthsParse,s),-1!==o?o:null):(o=Z.call(this._longMonthsParse,s),-1!==o?o:null):"MMM"===e?-1!==(o=Z.call(this._shortMonthsParse,s))?o:(o=Z.call(this._longMonthsParse,s),-1!==o?o:null):-1!==(o=Z.call(this._longMonthsParse,s))?o:(o=Z.call(this._shortMonthsParse,s),-1!==o?o:null)}function localeMonthsParse(t,e,i){var n,o,r;if(this._monthsParseExact)return handleStrictParse.call(this,t,e,i);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(o=createUTC([2e3,n]),i&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(o,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(o,"").replace(".","")+"$","i")),i||this._monthsParse[n]||(r="^"+this.months(o,"")+"|^"+this.monthsShort(o,""),this._monthsParse[n]=new RegExp(r.replace(".",""),"i")),i&&"MMMM"===e&&this._longMonthsParse[n].test(t))return n;if(i&&"MMM"===e&&this._shortMonthsParse[n].test(t))return n;if(!i&&this._monthsParse[n].test(t))return n}}function setMonth(t,e){var i;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=toInt(e);else if(e=t.localeData().monthsParse(e),!isNumber(e))return t;return i=Math.min(t.date(),daysInMonth(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,i),t}function getSetMonth(t){return null!=t?(setMonth(this,t),hooks.updateOffset(this,!0),this):get(this,"Month")}function getDaysInMonth(){return daysInMonth(this.year(),this.month())}function monthsShortRegex(t){return this._monthsParseExact?(hasOwnProp(this,"_monthsRegex")||computeMonthsParse.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(hasOwnProp(this,"_monthsShortRegex")||(this._monthsShortRegex=J),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function monthsRegex(t){return this._monthsParseExact?(hasOwnProp(this,"_monthsRegex")||computeMonthsParse.call(this),t?this._monthsStrictRegex:this._monthsRegex):(hasOwnProp(this,"_monthsRegex")||(this._monthsRegex=X),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function computeMonthsParse(){function cmpLenRev(t,e){return e.length-t.length}var t,e,i=[],n=[],o=[];for(t=0;t<12;t++)e=createUTC([2e3,t]),i.push(this.monthsShort(e,"")),n.push(this.months(e,"")),o.push(this.months(e,"")),o.push(this.monthsShort(e,""));for(i.sort(cmpLenRev),n.sort(cmpLenRev),o.sort(cmpLenRev),t=0;t<12;t++)i[t]=regexEscape(i[t]),n[t]=regexEscape(n[t]);for(t=0;t<24;t++)o[t]=regexEscape(o[t]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+i.join("|")+")","i")}function createDate(t,e,i,n,o,r,s){var a=new Date(t,e,i,n,o,r,s);return t<100&&t>=0&&isFinite(a.getFullYear())&&a.setFullYear(t),a}function createUTCDate(t){var e=new Date(Date.UTC.apply(null,arguments));return t<100&&t>=0&&isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t),e}function firstWeekOffset(t,e,i){var n=7+e-i;return-(7+createUTCDate(t,0,n).getUTCDay()-e)%7+n-1}function dayOfYearFromWeeks(t,e,i,n,o){var r,s,a=(7+i-n)%7,l=firstWeekOffset(t,n,o),u=1+7*(e-1)+a+l;return u<=0?(r=t-1,s=daysInYear(r)+u):u>daysInYear(t)?(r=t+1,s=u-daysInYear(t)):(r=t,s=u),{year:r,dayOfYear:s}}function weekOfYear(t,e,i){var n,o,r=firstWeekOffset(t.year(),e,i),s=Math.floor((t.dayOfYear()-r-1)/7)+1;return s<1?(o=t.year()-1,n=s+weeksInYear(o,e,i)):s>weeksInYear(t.year(),e,i)?(n=s-weeksInYear(t.year(),e,i),o=t.year()+1):(o=t.year(),n=s),{week:n,year:o}}function weeksInYear(t,e,i){var n=firstWeekOffset(t,e,i),o=firstWeekOffset(t+1,e,i);return(daysInYear(t)-n+o)/7}function localeWeek(t){return weekOfYear(t,this._week.dow,this._week.doy).week}function localeFirstDayOfWeek(){return this._week.dow}function localeFirstDayOfYear(){return this._week.doy}function getSetWeek(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")}function getSetISOWeek(t){var e=weekOfYear(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")}function parseWeekday(t,e){return"string"!=typeof t?t:isNaN(t)?(t=e.weekdaysParse(t),"number"==typeof t?t:null):parseInt(t,10)}function parseIsoWeekday(t,e){return"string"==typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function localeWeekdays(t,e){return t?isArray(this._weekdays)?this._weekdays[t.day()]:this._weekdays[this._weekdays.isFormat.test(e)?"format":"standalone"][t.day()]:isArray(this._weekdays)?this._weekdays:this._weekdays.standalone}function localeWeekdaysShort(t){return t?this._weekdaysShort[t.day()]:this._weekdaysShort}function localeWeekdaysMin(t){return t?this._weekdaysMin[t.day()]:this._weekdaysMin}function handleStrictParse$1(t,e,i){var n,o,r,s=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)r=createUTC([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(r,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(r,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(r,"").toLocaleLowerCase();return i?"dddd"===e?(o=Z.call(this._weekdaysParse,s),-1!==o?o:null):"ddd"===e?(o=Z.call(this._shortWeekdaysParse,s),-1!==o?o:null):(o=Z.call(this._minWeekdaysParse,s),-1!==o?o:null):"dddd"===e?-1!==(o=Z.call(this._weekdaysParse,s))?o:-1!==(o=Z.call(this._shortWeekdaysParse,s))?o:(o=Z.call(this._minWeekdaysParse,s),-1!==o?o:null):"ddd"===e?-1!==(o=Z.call(this._shortWeekdaysParse,s))?o:-1!==(o=Z.call(this._weekdaysParse,s))?o:(o=Z.call(this._minWeekdaysParse,s),-1!==o?o:null):-1!==(o=Z.call(this._minWeekdaysParse,s))?o:-1!==(o=Z.call(this._weekdaysParse,s))?o:(o=Z.call(this._shortWeekdaysParse,s),-1!==o?o:null)}function localeWeekdaysParse(t,e,i){var n,o,r;if(this._weekdaysParseExact)return handleStrictParse$1.call(this,t,e,i);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(o=createUTC([2e3,1]).day(n),i&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(o,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(o,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(o,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[n]||(r="^"+this.weekdays(o,"")+"|^"+this.weekdaysShort(o,"")+"|^"+this.weekdaysMin(o,""),this._weekdaysParse[n]=new RegExp(r.replace(".",""),"i")),i&&"dddd"===e&&this._fullWeekdaysParse[n].test(t))return n;if(i&&"ddd"===e&&this._shortWeekdaysParse[n].test(t))return n;if(i&&"dd"===e&&this._minWeekdaysParse[n].test(t))return n;if(!i&&this._weekdaysParse[n].test(t))return n}}function getSetDayOfWeek(t){if(!this.isValid())return null!=t?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=parseWeekday(t,this.localeData()),this.add(t-e,"d")):e}function getSetLocaleDayOfWeek(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")}function getSetISODayOfWeek(t){if(!this.isValid())return null!=t?this:NaN;if(null!=t){var e=parseIsoWeekday(t,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7}function weekdaysRegex(t){return this._weekdaysParseExact?(hasOwnProp(this,"_weekdaysRegex")||computeWeekdaysParse.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(hasOwnProp(this,"_weekdaysRegex")||(this._weekdaysRegex=nt),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function weekdaysShortRegex(t){return this._weekdaysParseExact?(hasOwnProp(this,"_weekdaysRegex")||computeWeekdaysParse.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(hasOwnProp(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=ot),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function weekdaysMinRegex(t){return this._weekdaysParseExact?(hasOwnProp(this,"_weekdaysRegex")||computeWeekdaysParse.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(hasOwnProp(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=rt),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function computeWeekdaysParse(){function cmpLenRev(t,e){return e.length-t.length}var t,e,i,n,o,r=[],s=[],a=[],l=[];for(t=0;t<7;t++)e=createUTC([2e3,1]).day(t),i=this.weekdaysMin(e,""),n=this.weekdaysShort(e,""),o=this.weekdays(e,""),r.push(i),s.push(n),a.push(o),l.push(i),l.push(n),l.push(o);for(r.sort(cmpLenRev),s.sort(cmpLenRev),a.sort(cmpLenRev),l.sort(cmpLenRev),t=0;t<7;t++)s[t]=regexEscape(s[t]),a[t]=regexEscape(a[t]),l[t]=regexEscape(l[t]);this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+r.join("|")+")","i")}function hFormat(){return this.hours()%12||12}function kFormat(){return this.hours()||24}function meridiem(t,e){addFormatToken(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function matchMeridiem(t,e){return e._meridiemParse}function localeIsPM(t){return"p"===(t+"").toLowerCase().charAt(0)}function localeMeridiem(t,e,i){return t>11?i?"pm":"PM":i?"am":"AM"}function normalizeLocale(t){return t?t.toLowerCase().replace("_","-"):t}function chooseLocale(t){for(var e,i,n,o,r=0;r<t.length;){for(o=normalizeLocale(t[r]).split("-"),e=o.length,i=normalizeLocale(t[r+1]),i=i?i.split("-"):null;e>0;){if(n=loadLocale(o.slice(0,e).join("-")))return n;if(i&&i.length>=e&&compareArrays(o,i,!0)>=e-1)break;e--}r++}return st}function loadLocale(e){var n=null;if(!ct[e]&&void 0!==t&&t&&t.exports)try{n=st._abbr;i(198)("./"+e),getSetGlobalLocale(n)}catch(t){}return ct[e]}function getSetGlobalLocale(t,e){var i;return t&&(i=isUndefined(e)?getLocale(t):defineLocale(t,e),i?st=i:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),st._abbr}function defineLocale(t,e){if(null!==e){var i,n=ut;if(e.abbr=t,null!=ct[t])deprecateSimple("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=ct[t]._config;else if(null!=e.parentLocale)if(null!=ct[e.parentLocale])n=ct[e.parentLocale]._config;else{if(null==(i=loadLocale(e.parentLocale)))return ht[e.parentLocale]||(ht[e.parentLocale]=[]),ht[e.parentLocale].push({name:t,config:e}),null;n=i._config}return ct[t]=new Locale(mergeConfigs(n,e)),ht[t]&&ht[t].forEach(function(t){defineLocale(t.name,t.config)}),getSetGlobalLocale(t),ct[t]}return delete ct[t],null}function updateLocale(t,e){if(null!=e){var i,n,o=ut;n=loadLocale(t),null!=n&&(o=n._config),e=mergeConfigs(o,e),i=new Locale(e),i.parentLocale=ct[t],ct[t]=i,getSetGlobalLocale(t)}else null!=ct[t]&&(null!=ct[t].parentLocale?ct[t]=ct[t].parentLocale:null!=ct[t]&&delete ct[t]);return ct[t]}function getLocale(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return st;if(!isArray(t)){if(e=loadLocale(t))return e;t=[t]}return chooseLocale(t)}function listLocales(){return a(ct)}function checkOverflow(t){var e,i=t._a;return i&&-2===getParsingFlags(t).overflow&&(e=i[z]<0||i[z]>11?z:i[A]<1||i[A]>daysInMonth(i[R],i[z])?A:i[Y]<0||i[Y]>24||24===i[Y]&&(0!==i[H]||0!==i[N]||0!==i[U])?Y:i[H]<0||i[H]>59?H:i[N]<0||i[N]>59?N:i[U]<0||i[U]>999?U:-1,getParsingFlags(t)._overflowDayOfYear&&(e<R||e>A)&&(e=A),getParsingFlags(t)._overflowWeeks&&-1===e&&(e=j),getParsingFlags(t)._overflowWeekday&&-1===e&&(e=W),getParsingFlags(t).overflow=e),t}function defaults(t,e,i){return null!=t?t:null!=e?e:i}function currentDateArray(t){var e=new Date(hooks.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function configFromArray(t){var e,i,n,o,r,s=[];if(!t._d){for(n=currentDateArray(t),t._w&&null==t._a[A]&&null==t._a[z]&&dayOfYearFromWeekInfo(t),null!=t._dayOfYear&&(r=defaults(t._a[R],n[R]),(t._dayOfYear>daysInYear(r)||0===t._dayOfYear)&&(getParsingFlags(t)._overflowDayOfYear=!0),i=createUTCDate(r,0,t._dayOfYear),t._a[z]=i.getUTCMonth(),t._a[A]=i.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=s[e]=n[e];for(;e<7;e++)t._a[e]=s[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[Y]&&0===t._a[H]&&0===t._a[N]&&0===t._a[U]&&(t._nextDay=!0,t._a[Y]=0),t._d=(t._useUTC?createUTCDate:createDate).apply(null,s),o=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[Y]=24),t._w&&void 0!==t._w.d&&t._w.d!==o&&(getParsingFlags(t).weekdayMismatch=!0)}}function dayOfYearFromWeekInfo(t){var e,i,n,o,r,s,a,l;if(e=t._w,null!=e.GG||null!=e.W||null!=e.E)r=1,s=4,i=defaults(e.GG,t._a[R],weekOfYear(createLocal(),1,4).year),n=defaults(e.W,1),((o=defaults(e.E,1))<1||o>7)&&(l=!0);else{r=t._locale._week.dow,s=t._locale._week.doy;var u=weekOfYear(createLocal(),r,s);i=defaults(e.gg,t._a[R],u.year),n=defaults(e.w,u.week),null!=e.d?((o=e.d)<0||o>6)&&(l=!0):null!=e.e?(o=e.e+r,(e.e<0||e.e>6)&&(l=!0)):o=r}n<1||n>weeksInYear(i,r,s)?getParsingFlags(t)._overflowWeeks=!0:null!=l?getParsingFlags(t)._overflowWeekday=!0:(a=dayOfYearFromWeeks(i,n,o,r,s),t._a[R]=a.year,t._dayOfYear=a.dayOfYear)}function configFromISO(t){var e,i,n,o,r,s,a=t._i,l=dt.exec(a)||pt.exec(a);if(l){for(getParsingFlags(t).iso=!0,e=0,i=ft.length;e<i;e++)if(ft[e][1].exec(l[1])){o=ft[e][0],n=!1!==ft[e][2];break}if(null==o)return void(t._isValid=!1);if(l[3]){for(e=0,i=mt.length;e<i;e++)if(mt[e][1].exec(l[3])){r=(l[2]||" ")+mt[e][0];break}if(null==r)return void(t._isValid=!1)}if(!n&&null!=r)return void(t._isValid=!1);if(l[4]){if(!_t.exec(l[4]))return void(t._isValid=!1);s="Z"}t._f=o+(r||"")+(s||""),configFromStringAndFormat(t)}else t._isValid=!1}function extractFromRFC2822Strings(t,e,i,n,o,r){var s=[untruncateYear(t),$.indexOf(e),parseInt(i,10),parseInt(n,10),parseInt(o,10)];return r&&s.push(parseInt(r,10)),s}function untruncateYear(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function preprocessRFC2822(t){return t.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function checkWeekday(t,e,i){if(t){if(et.indexOf(t)!==new Date(e[0],e[1],e[2]).getDay())return getParsingFlags(i).weekdayMismatch=!0,i._isValid=!1,!1}return!0}function calculateOffset(t,e,i){if(t)return vt[t];if(e)return 0;var n=parseInt(i,10),o=n%100;return(n-o)/100*60+o}function configFromRFC2822(t){var e=yt.exec(preprocessRFC2822(t._i));if(e){var i=extractFromRFC2822Strings(e[4],e[3],e[2],e[5],e[6],e[7]);if(!checkWeekday(e[1],i,t))return;t._a=i,t._tzm=calculateOffset(e[8],e[9],e[10]),t._d=createUTCDate.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),getParsingFlags(t).rfc2822=!0}else t._isValid=!1}function configFromString(t){var e=gt.exec(t._i);if(null!==e)return void(t._d=new Date(+e[1]));configFromISO(t),!1===t._isValid&&(delete t._isValid,configFromRFC2822(t),!1===t._isValid&&(delete t._isValid,hooks.createFromInputFallback(t)))}function configFromStringAndFormat(t){if(t._f===hooks.ISO_8601)return void configFromISO(t);if(t._f===hooks.RFC_2822)return void configFromRFC2822(t);t._a=[],getParsingFlags(t).empty=!0;var e,i,n,o,r,s=""+t._i,a=s.length,l=0;for(n=expandFormat(t._f,t._locale).match(_)||[],e=0;e<n.length;e++)o=n[e],i=(s.match(getParseRegexForToken(o,t))||[])[0],i&&(r=s.substr(0,s.indexOf(i)),r.length>0&&getParsingFlags(t).unusedInput.push(r),s=s.slice(s.indexOf(i)+i.length),l+=i.length),g[o]?(i?getParsingFlags(t).empty=!1:getParsingFlags(t).unusedTokens.push(o),addTimeToArrayFromToken(o,i,t)):t._strict&&!i&&getParsingFlags(t).unusedTokens.push(o);getParsingFlags(t).charsLeftOver=a-l,s.length>0&&getParsingFlags(t).unusedInput.push(s),t._a[Y]<=12&&!0===getParsingFlags(t).bigHour&&t._a[Y]>0&&(getParsingFlags(t).bigHour=void 0),getParsingFlags(t).parsedDateParts=t._a.slice(0),getParsingFlags(t).meridiem=t._meridiem,t._a[Y]=meridiemFixWrap(t._locale,t._a[Y],t._meridiem),configFromArray(t),checkOverflow(t)}function meridiemFixWrap(t,e,i){var n;return null==i?e:null!=t.meridiemHour?t.meridiemHour(e,i):null!=t.isPM?(n=t.isPM(i),n&&e<12&&(e+=12),n||12!==e||(e=0),e):e}function configFromStringAndArray(t){var e,i,n,o,r;if(0===t._f.length)return getParsingFlags(t).invalidFormat=!0,void(t._d=new Date(NaN));for(o=0;o<t._f.length;o++)r=0,e=copyConfig({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[o],configFromStringAndFormat(e),isValid(e)&&(r+=getParsingFlags(e).charsLeftOver,r+=10*getParsingFlags(e).unusedTokens.length,getParsingFlags(e).score=r,(null==n||r<n)&&(n=r,i=e));extend(t,i||e)}function configFromObject(t){if(!t._d){var e=normalizeObjectUnits(t._i);t._a=map([e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],function(t){return t&&parseInt(t,10)}),configFromArray(t)}}function createFromConfig(t){var e=new Moment(checkOverflow(prepareConfig(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function prepareConfig(t){var e=t._i,i=t._f;return t._locale=t._locale||getLocale(t._l),null===e||void 0===i&&""===e?createInvalid({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),isMoment(e)?new Moment(checkOverflow(e)):(isDate(e)?t._d=e:isArray(i)?configFromStringAndArray(t):i?configFromStringAndFormat(t):configFromInput(t),isValid(t)||(t._d=null),t))}function configFromInput(t){var e=t._i;isUndefined(e)?t._d=new Date(hooks.now()):isDate(e)?t._d=new Date(e.valueOf()):"string"==typeof e?configFromString(t):isArray(e)?(t._a=map(e.slice(0),function(t){return parseInt(t,10)}),configFromArray(t)):isObject(e)?configFromObject(t):isNumber(e)?t._d=new Date(e):hooks.createFromInputFallback(t)}function createLocalOrUTC(t,e,i,n,o){var r={};return!0!==i&&!1!==i||(n=i,i=void 0),(isObject(t)&&isObjectEmpty(t)||isArray(t)&&0===t.length)&&(t=void 0),r._isAMomentObject=!0,r._useUTC=r._isUTC=o,r._l=i,r._i=t,r._f=e,r._strict=n,createFromConfig(r)}function createLocal(t,e,i,n){return createLocalOrUTC(t,e,i,n,!1)}function pickBy(t,e){var i,n;if(1===e.length&&isArray(e[0])&&(e=e[0]),!e.length)return createLocal();for(i=e[0],n=1;n<e.length;++n)e[n].isValid()&&!e[n][t](i)||(i=e[n]);return i}function min(){return pickBy("isBefore",[].slice.call(arguments,0))}function max(){return pickBy("isAfter",[].slice.call(arguments,0))}function isDurationValid(t){for(var e in t)if(-1===Z.call(Dt,e)||null!=t[e]&&isNaN(t[e]))return!1;for(var i=!1,n=0;n<Dt.length;++n)if(t[Dt[n]]){if(i)return!1;parseFloat(t[Dt[n]])!==toInt(t[Dt[n]])&&(i=!0)}return!0}function isValid$1(){return this._isValid}function createInvalid$1(){return createDuration(NaN)}function Duration(t){var e=normalizeObjectUnits(t),i=e.year||0,n=e.quarter||0,o=e.month||0,r=e.week||0,s=e.day||0,a=e.hour||0,l=e.minute||0,u=e.second||0,c=e.millisecond||0;this._isValid=isDurationValid(e),this._milliseconds=+c+1e3*u+6e4*l+1e3*a*60*60,this._days=+s+7*r,this._months=+o+3*n+12*i,this._data={},this._locale=getLocale(),this._bubble()}function isDuration(t){return t instanceof Duration}function absRound(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function offset(t,e){addFormatToken(t,0,0,function(){var t=this.utcOffset(),i="+";return t<0&&(t=-t,i="-"),i+zeroFill(~~(t/60),2)+e+zeroFill(~~t%60,2)})}function offsetFromString(t,e){var i=(e||"").match(t);if(null===i)return null;var n=i[i.length-1]||[],o=(n+"").match(xt)||["-",0,0],r=60*o[1]+toInt(o[2]);return 0===r?0:"+"===o[0]?r:-r}function cloneWithOffset(t,e){var i,n;return e._isUTC?(i=e.clone(),n=(isMoment(t)||isDate(t)?t.valueOf():createLocal(t).valueOf())-i.valueOf(),i._d.setTime(i._d.valueOf()+n),hooks.updateOffset(i,!1),i):createLocal(t).local()}function getDateOffset(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function getSetOffset(t,e,i){var n,o=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null!=t){if("string"==typeof t){if(null===(t=offsetFromString(P,t)))return this}else Math.abs(t)<16&&!i&&(t*=60);return!this._isUTC&&e&&(n=getDateOffset(this)),this._offset=t,this._isUTC=!0,null!=n&&this.add(n,"m"),o!==t&&(!e||this._changeInProgress?addSubtract(this,createDuration(t-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,hooks.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?o:getDateOffset(this)}function getSetZone(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function setOffsetToUTC(t){return this.utcOffset(0,t)}function setOffsetToLocal(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(getDateOffset(this),"m")),this}function setOffsetToParsedOffset(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var t=offsetFromString(I,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this}function hasAlignedHourOffset(t){return!!this.isValid()&&(t=t?createLocal(t).utcOffset():0,(this.utcOffset()-t)%60==0)}function isDaylightSavingTime(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function isDaylightSavingTimeShifted(){if(!isUndefined(this._isDSTShifted))return this._isDSTShifted;var t={};if(copyConfig(t,this),t=prepareConfig(t),t._a){var e=t._isUTC?createUTC(t._a):createLocal(t._a);this._isDSTShifted=this.isValid()&&compareArrays(t._a,e.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function isLocal(){return!!this.isValid()&&!this._isUTC}function isUtcOffset(){return!!this.isValid()&&this._isUTC}function isUtc(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}function createDuration(t,e){var i,n,o,r=t,s=null;return isDuration(t)?r={ms:t._milliseconds,d:t._days,M:t._months}:isNumber(t)?(r={},e?r[e]=t:r.milliseconds=t):(s=Mt.exec(t))?(i="-"===s[1]?-1:1,r={y:0,d:toInt(s[A])*i,h:toInt(s[Y])*i,m:toInt(s[H])*i,s:toInt(s[N])*i,ms:toInt(absRound(1e3*s[U]))*i}):(s=Ct.exec(t))?(i="-"===s[1]?-1:(s[1],1),r={y:parseIso(s[2],i),M:parseIso(s[3],i),w:parseIso(s[4],i),d:parseIso(s[5],i),h:parseIso(s[6],i),m:parseIso(s[7],i),s:parseIso(s[8],i)}):null==r?r={}:"object"==typeof r&&("from"in r||"to"in r)&&(o=momentsDifference(createLocal(r.from),createLocal(r.to)),r={},r.ms=o.milliseconds,r.M=o.months),n=new Duration(r),isDuration(t)&&hasOwnProp(t,"_locale")&&(n._locale=t._locale),n}function parseIso(t,e){var i=t&&parseFloat(t.replace(",","."));return(isNaN(i)?0:i)*e}function positiveMomentsDifference(t,e){var i={milliseconds:0,months:0};return i.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(i.months,"M").isAfter(e)&&--i.months,i.milliseconds=+e-+t.clone().add(i.months,"M"),i}function momentsDifference(t,e){var i;return t.isValid()&&e.isValid()?(e=cloneWithOffset(e,t),t.isBefore(e)?i=positiveMomentsDifference(t,e):(i=positiveMomentsDifference(e,t),i.milliseconds=-i.milliseconds,i.months=-i.months),i):{milliseconds:0,months:0}}function createAdder(t,e){return function(i,n){var o,r;return null===n||isNaN(+n)||(deprecateSimple(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),r=i,i=n,n=r),i="string"==typeof i?+i:i,o=createDuration(i,n),addSubtract(this,o,t),this}}function addSubtract(t,e,i,n){var o=e._milliseconds,r=absRound(e._days),s=absRound(e._months);t.isValid()&&(n=null==n||n,s&&setMonth(t,get(t,"Month")+s*i),r&&set$1(t,"Date",get(t,"Date")+r*i),o&&t._d.setTime(t._d.valueOf()+o*i),n&&hooks.updateOffset(t,r||s))}function getCalendarFormat(t,e){var i=t.diff(e,"days",!0);return i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse"}function calendar$1(t,e){var i=t||createLocal(),n=cloneWithOffset(i,this).startOf("day"),o=hooks.calendarFormat(this,n)||"sameElse",r=e&&(isFunction(e[o])?e[o].call(this,i):e[o]);return this.format(r||this.localeData().calendar(o,this,createLocal(i)))}function clone(){return new Moment(this)}function isAfter(t,e){var i=isMoment(t)?t:createLocal(t);return!(!this.isValid()||!i.isValid())&&(e=normalizeUnits(isUndefined(e)?"millisecond":e),"millisecond"===e?this.valueOf()>i.valueOf():i.valueOf()<this.clone().startOf(e).valueOf())}function isBefore(t,e){var i=isMoment(t)?t:createLocal(t);return!(!this.isValid()||!i.isValid())&&(e=normalizeUnits(isUndefined(e)?"millisecond":e),"millisecond"===e?this.valueOf()<i.valueOf():this.clone().endOf(e).valueOf()<i.valueOf())}function isBetween(t,e,i,n){return n=n||"()",("("===n[0]?this.isAfter(t,i):!this.isBefore(t,i))&&(")"===n[1]?this.isBefore(e,i):!this.isAfter(e,i))}function isSame(t,e){var i,n=isMoment(t)?t:createLocal(t);return!(!this.isValid()||!n.isValid())&&(e=normalizeUnits(e||"millisecond"),"millisecond"===e?this.valueOf()===n.valueOf():(i=n.valueOf(),this.clone().startOf(e).valueOf()<=i&&i<=this.clone().endOf(e).valueOf()))}function isSameOrAfter(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function isSameOrBefore(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function diff(t,e,i){var n,o,r;if(!this.isValid())return NaN;if(n=cloneWithOffset(t,this),!n.isValid())return NaN;switch(o=6e4*(n.utcOffset()-this.utcOffset()),e=normalizeUnits(e)){case"year":r=monthDiff(this,n)/12;break;case"month":r=monthDiff(this,n);break;case"quarter":r=monthDiff(this,n)/3;break;case"second":r=(this-n)/1e3;break;case"minute":r=(this-n)/6e4;break;case"hour":r=(this-n)/36e5;break;case"day":r=(this-n-o)/864e5;break;case"week":r=(this-n-o)/6048e5;break;default:r=this-n}return i?r:absFloor(r)}function monthDiff(t,e){var i,n,o=12*(e.year()-t.year())+(e.month()-t.month()),r=t.clone().add(o,"months");return e-r<0?(i=t.clone().add(o-1,"months"),n=(e-r)/(r-i)):(i=t.clone().add(o+1,"months"),n=(e-r)/(i-r)),-(o+n)||0}function toString(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function toISOString(t){if(!this.isValid())return null;var e=!0!==t,i=e?this.clone().utc():this;return i.year()<0||i.year()>9999?formatMoment(i,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):isFunction(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",formatMoment(i,"Z")):formatMoment(i,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function inspect(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="";this.isLocal()||(t=0===this.utcOffset()?"moment.utc":"moment.parseZone",e="Z");var i="["+t+'("]',n=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",o=e+'[")]';return this.format(i+n+"-MM-DD[T]HH:mm:ss.SSS"+o)}function format(t){t||(t=this.isUtc()?hooks.defaultFormatUtc:hooks.defaultFormat);var e=formatMoment(this,t);return this.localeData().postformat(e)}function from(t,e){return this.isValid()&&(isMoment(t)&&t.isValid()||createLocal(t).isValid())?createDuration({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function fromNow(t){return this.from(createLocal(),t)}function to(t,e){return this.isValid()&&(isMoment(t)&&t.isValid()||createLocal(t).isValid())?createDuration({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function toNow(t){return this.to(createLocal(),t)}function locale(t){var e;return void 0===t?this._locale._abbr:(e=getLocale(t),null!=e&&(this._locale=e),this)}function localeData(){return this._locale}function startOf(t){switch(t=normalizeUnits(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.weekday(0),"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this}function endOf(t){return void 0===(t=normalizeUnits(t))||"millisecond"===t?this:("date"===t&&(t="day"),this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms"))}function valueOf(){return this._d.valueOf()-6e4*(this._offset||0)}function unix(){return Math.floor(this.valueOf()/1e3)}function toDate(){return new Date(this.valueOf())}function toArray(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function toObject(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function toJSON(){return this.isValid()?this.toISOString():null}function isValid$2(){return isValid(this)}function parsingFlags(){return extend({},getParsingFlags(this))}function invalidAt(){return getParsingFlags(this).overflow}function creationData(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function addWeekYearFormatToken(t,e){addFormatToken(0,[t,t.length],0,e)}function getSetWeekYear(t){return getSetWeekYearHelper.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function getSetISOWeekYear(t){return getSetWeekYearHelper.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function getISOWeeksInYear(){return weeksInYear(this.year(),1,4)}function getWeeksInYear(){var t=this.localeData()._week;return weeksInYear(this.year(),t.dow,t.doy)}function getSetWeekYearHelper(t,e,i,n,o){var r;return null==t?weekOfYear(this,n,o).year:(r=weeksInYear(t,n,o),e>r&&(e=r),setWeekAll.call(this,t,e,i,n,o))}function setWeekAll(t,e,i,n,o){var r=dayOfYearFromWeeks(t,e,i,n,o),s=createUTCDate(r.year,0,r.dayOfYear);return this.year(s.getUTCFullYear()),this.month(s.getUTCMonth()),this.date(s.getUTCDate()),this}function getSetQuarter(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)}function getSetDayOfYear(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")}function parseMs(t,e){e[U]=toInt(1e3*("0."+t))}function getZoneAbbr(){return this._isUTC?"UTC":""}function getZoneName(){return this._isUTC?"Coordinated Universal Time":""}function createUnix(t){return createLocal(1e3*t)}function createInZone(){return createLocal.apply(null,arguments).parseZone()}function preParsePostFormat(t){return t}function get$1(t,e,i,n){var o=getLocale(),r=createUTC().set(n,e);return o[i](r,t)}function listMonthsImpl(t,e,i){if(isNumber(t)&&(e=t,t=void 0),t=t||"",null!=e)return get$1(t,e,i,"month");var n,o=[];for(n=0;n<12;n++)o[n]=get$1(t,n,i,"month");return o}function listWeekdaysImpl(t,e,i,n){"boolean"==typeof t?(isNumber(e)&&(i=e,e=void 0),e=e||""):(e=t,i=e,t=!1,isNumber(e)&&(i=e,e=void 0),e=e||"");var o=getLocale(),r=t?o._week.dow:0;if(null!=i)return get$1(e,(i+r)%7,n,"day");var s,a=[];for(s=0;s<7;s++)a[s]=get$1(e,(s+r)%7,n,"day");return a}function listMonths(t,e){return listMonthsImpl(t,e,"months")}function listMonthsShort(t,e){return listMonthsImpl(t,e,"monthsShort")}function listWeekdays(t,e,i){return listWeekdaysImpl(t,e,i,"weekdays")}function listWeekdaysShort(t,e,i){return listWeekdaysImpl(t,e,i,"weekdaysShort")}function listWeekdaysMin(t,e,i){return listWeekdaysImpl(t,e,i,"weekdaysMin")}function abs(){var t=this._data;return this._milliseconds=Rt(this._milliseconds),this._days=Rt(this._days),this._months=Rt(this._months),t.milliseconds=Rt(t.milliseconds),t.seconds=Rt(t.seconds),t.minutes=Rt(t.minutes),t.hours=Rt(t.hours),t.months=Rt(t.months),t.years=Rt(t.years),this}function addSubtract$1(t,e,i,n){var o=createDuration(e,i);return t._milliseconds+=n*o._milliseconds,t._days+=n*o._days,t._months+=n*o._months,t._bubble()}function add$1(t,e){return addSubtract$1(this,t,e,1)}function subtract$1(t,e){return addSubtract$1(this,t,e,-1)}function absCeil(t){return t<0?Math.floor(t):Math.ceil(t)}function bubble(){var t,e,i,n,o,r=this._milliseconds,s=this._days,a=this._months,l=this._data;return r>=0&&s>=0&&a>=0||r<=0&&s<=0&&a<=0||(r+=864e5*absCeil(monthsToDays(a)+s),s=0,a=0),l.milliseconds=r%1e3,t=absFloor(r/1e3),l.seconds=t%60,e=absFloor(t/60),l.minutes=e%60,i=absFloor(e/60),l.hours=i%24,s+=absFloor(i/24),o=absFloor(daysToMonths(s)),a+=o,s-=absCeil(monthsToDays(o)),n=absFloor(a/12),a%=12,l.days=s,l.months=a,l.years=n,this}function daysToMonths(t){return 4800*t/146097}function monthsToDays(t){return 146097*t/4800}function as(t){if(!this.isValid())return NaN;var e,i,n=this._milliseconds;if("month"===(t=normalizeUnits(t))||"year"===t)return e=this._days+n/864e5,i=this._months+daysToMonths(e),"month"===t?i:i/12;switch(e=this._days+Math.round(monthsToDays(this._months)),t){case"week":return e/7+n/6048e5;case"day":return e+n/864e5;case"hour":return 24*e+n/36e5;case"minute":return 1440*e+n/6e4;case"second":return 86400*e+n/1e3;case"millisecond":return Math.floor(864e5*e)+n;default:throw new Error("Unknown unit "+t)}}function valueOf$1(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*toInt(this._months/12):NaN}function makeAs(t){return function(){return this.as(t)}}function clone$1(){return createDuration(this)}function get$2(t){return t=normalizeUnits(t),this.isValid()?this[t+"s"]():NaN}function makeGetter(t){return function(){return this.isValid()?this._data[t]:NaN}}function weeks(){return absFloor(this.days()/7)}function substituteTimeAgo(t,e,i,n,o){return o.relativeTime(e||1,!!i,t,n)}function relativeTime$1(t,e,i){var n=createDuration(t).abs(),o=Qt(n.as("s")),r=Qt(n.as("m")),s=Qt(n.as("h")),a=Qt(n.as("d")),l=Qt(n.as("M")),u=Qt(n.as("y")),c=o<=te.ss&&["s",o]||o<te.s&&["ss",o]||r<=1&&["m"]||r<te.m&&["mm",r]||s<=1&&["h"]||s<te.h&&["hh",s]||a<=1&&["d"]||a<te.d&&["dd",a]||l<=1&&["M"]||l<te.M&&["MM",l]||u<=1&&["y"]||["yy",u];return c[2]=e,c[3]=+t>0,c[4]=i,substituteTimeAgo.apply(null,c)}function getSetRelativeTimeRounding(t){return void 0===t?Qt:"function"==typeof t&&(Qt=t,!0)}function getSetRelativeTimeThreshold(t,e){return void 0!==te[t]&&(void 0===e?te[t]:(te[t]=e,"s"===t&&(te.ss=e-1),!0))}function humanize(t){if(!this.isValid())return this.localeData().invalidDate();var e=this.localeData(),i=relativeTime$1(this,!t,e);return t&&(i=e.pastFuture(+this,i)),e.postformat(i)}function sign(t){return(t>0)-(t<0)||+t}function toISOString$1(){if(!this.isValid())return this.localeData().invalidDate();var t,e,i,n=ee(this._milliseconds)/1e3,o=ee(this._days),r=ee(this._months);t=absFloor(n/60),e=absFloor(t/60),n%=60,t%=60,i=absFloor(r/12),r%=12;var s=i,a=r,l=o,u=e,c=t,h=n?n.toFixed(3).replace(/\.?0+$/,""):"",d=this.asSeconds();if(!d)return"P0D";var p=d<0?"-":"",_=sign(this._months)!==sign(d)?"-":"",f=sign(this._days)!==sign(d)?"-":"",m=sign(this._milliseconds)!==sign(d)?"-":"";return p+"P"+(s?_+s+"Y":"")+(a?_+a+"M":"")+(l?f+l+"D":"")+(u||c||h?"T":"")+(u?m+u+"H":"")+(c?m+c+"M":"")+(h?m+h+"S":"")}var e,n;n=Array.prototype.some?Array.prototype.some:function(t){for(var e=Object(this),i=e.length>>>0,n=0;n<i;n++)if(n in e&&t.call(this,e[n],n,e))return!0;return!1};var o=hooks.momentProperties=[],r=!1,s={};hooks.suppressDeprecationWarnings=!1,hooks.deprecationHandler=null;var a;a=Object.keys?Object.keys:function(t){var e,i=[];for(e in t)hasOwnProp(t,e)&&i.push(e);return i};var l={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},u={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},c=/\d{1,2}/,h={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},d={},p={},_=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,f=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,m={},g={},y=/\d/,v=/\d\d/,b=/\d{3}/,w=/\d{4}/,k=/[+-]?\d{6}/,D=/\d\d?/,x=/\d\d\d\d?/,M=/\d\d\d\d\d\d?/,C=/\d{1,3}/,O=/\d{1,4}/,T=/[+-]?\d{1,6}/,L=/\d+/,S=/[+-]?\d+/,I=/Z|[+-]\d\d:?\d\d/gi,P=/Z|[+-]\d\d(?::?\d\d)?/gi,F=/[+-]?\d+(\.\d{1,3})?/,E=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,B={},V={},R=0,z=1,A=2,Y=3,H=4,N=5,U=6,j=7,W=8;addFormatToken("Y",0,0,function(){var t=this.year();return t<=9999?""+t:"+"+t}),addFormatToken(0,["YY",2],0,function(){return this.year()%100}),addFormatToken(0,["YYYY",4],0,"year"),addFormatToken(0,["YYYYY",5],0,"year"),addFormatToken(0,["YYYYYY",6,!0],0,"year"),addUnitAlias("year","y"),addUnitPriority("year",1),addRegexToken("Y",S),addRegexToken("YY",D,v),addRegexToken("YYYY",O,w),addRegexToken("YYYYY",T,k),addRegexToken("YYYYYY",T,k),addParseToken(["YYYYY","YYYYYY"],R),addParseToken("YYYY",function(t,e){e[R]=2===t.length?hooks.parseTwoDigitYear(t):toInt(t)}),addParseToken("YY",function(t,e){e[R]=hooks.parseTwoDigitYear(t)}),addParseToken("Y",function(t,e){e[R]=parseInt(t,10)}),hooks.parseTwoDigitYear=function(t){return toInt(t)+(toInt(t)>68?1900:2e3)};var Z,q=makeGetSet("FullYear",!0);Z=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},addFormatToken("M",["MM",2],"Mo",function(){return this.month()+1}),addFormatToken("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),addFormatToken("MMMM",0,0,function(t){return this.localeData().months(this,t)}),addUnitAlias("month","M"),addUnitPriority("month",8),addRegexToken("M",D),addRegexToken("MM",D,v),addRegexToken("MMM",function(t,e){return e.monthsShortRegex(t)}),addRegexToken("MMMM",function(t,e){return e.monthsRegex(t)}),addParseToken(["M","MM"],function(t,e){e[z]=toInt(t)-1}),addParseToken(["MMM","MMMM"],function(t,e,i,n){var o=i._locale.monthsParse(t,n,i._strict);null!=o?e[z]=o:getParsingFlags(i).invalidMonth=t});var G=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,K="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),$="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),J=E,X=E;addFormatToken("w",["ww",2],"wo","week"),addFormatToken("W",["WW",2],"Wo","isoWeek"),addUnitAlias("week","w"),addUnitAlias("isoWeek","W"),addUnitPriority("week",5),addUnitPriority("isoWeek",5),addRegexToken("w",D),addRegexToken("ww",D,v),addRegexToken("W",D),addRegexToken("WW",D,v),addWeekParseToken(["w","ww","W","WW"],function(t,e,i,n){e[n.substr(0,1)]=toInt(t)});var Q={dow:0,doy:6};addFormatToken("d",0,"do","day"),addFormatToken("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),addFormatToken("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),addFormatToken("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),addFormatToken("e",0,0,"weekday"),addFormatToken("E",0,0,"isoWeekday"),addUnitAlias("day","d"),addUnitAlias("weekday","e"),addUnitAlias("isoWeekday","E"),addUnitPriority("day",11),addUnitPriority("weekday",11),addUnitPriority("isoWeekday",11),addRegexToken("d",D),addRegexToken("e",D),addRegexToken("E",D),addRegexToken("dd",function(t,e){return e.weekdaysMinRegex(t)}),addRegexToken("ddd",function(t,e){return e.weekdaysShortRegex(t)}),addRegexToken("dddd",function(t,e){return e.weekdaysRegex(t)}),addWeekParseToken(["dd","ddd","dddd"],function(t,e,i,n){var o=i._locale.weekdaysParse(t,n,i._strict);null!=o?e.d=o:getParsingFlags(i).invalidWeekday=t}),addWeekParseToken(["d","e","E"],function(t,e,i,n){e[n]=toInt(t)});var tt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),et="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),it="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),nt=E,ot=E,rt=E;addFormatToken("H",["HH",2],0,"hour"),addFormatToken("h",["hh",2],0,hFormat),addFormatToken("k",["kk",2],0,kFormat),addFormatToken("hmm",0,0,function(){return""+hFormat.apply(this)+zeroFill(this.minutes(),2)}),addFormatToken("hmmss",0,0,function(){return""+hFormat.apply(this)+zeroFill(this.minutes(),2)+zeroFill(this.seconds(),2)}),addFormatToken("Hmm",0,0,function(){return""+this.hours()+zeroFill(this.minutes(),2)}),addFormatToken("Hmmss",0,0,function(){return""+this.hours()+zeroFill(this.minutes(),2)+zeroFill(this.seconds(),2)}),meridiem("a",!0),meridiem("A",!1),addUnitAlias("hour","h"),addUnitPriority("hour",13),addRegexToken("a",matchMeridiem),addRegexToken("A",matchMeridiem),addRegexToken("H",D),addRegexToken("h",D),addRegexToken("k",D),addRegexToken("HH",D,v),addRegexToken("hh",D,v),addRegexToken("kk",D,v),addRegexToken("hmm",x),addRegexToken("hmmss",M),addRegexToken("Hmm",x),addRegexToken("Hmmss",M),addParseToken(["H","HH"],Y),addParseToken(["k","kk"],function(t,e,i){var n=toInt(t);e[Y]=24===n?0:n}),addParseToken(["a","A"],function(t,e,i){i._isPm=i._locale.isPM(t),i._meridiem=t}),addParseToken(["h","hh"],function(t,e,i){e[Y]=toInt(t),getParsingFlags(i).bigHour=!0}),addParseToken("hmm",function(t,e,i){var n=t.length-2;e[Y]=toInt(t.substr(0,n)),e[H]=toInt(t.substr(n)),getParsingFlags(i).bigHour=!0}),addParseToken("hmmss",function(t,e,i){var n=t.length-4,o=t.length-2;e[Y]=toInt(t.substr(0,n)),e[H]=toInt(t.substr(n,2)),e[N]=toInt(t.substr(o)),getParsingFlags(i).bigHour=!0}),addParseToken("Hmm",function(t,e,i){var n=t.length-2;e[Y]=toInt(t.substr(0,n)),e[H]=toInt(t.substr(n))}),addParseToken("Hmmss",function(t,e,i){var n=t.length-4,o=t.length-2;e[Y]=toInt(t.substr(0,n)),e[H]=toInt(t.substr(n,2)),e[N]=toInt(t.substr(o))});var st,at=/[ap]\.?m?\.?/i,lt=makeGetSet("Hours",!0),ut={calendar:l,longDateFormat:u,invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:c,relativeTime:h,months:K,monthsShort:$,week:Q,weekdays:tt,weekdaysMin:it,weekdaysShort:et,meridiemParse:at},ct={},ht={},dt=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,pt=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,_t=/Z|[+-]\d\d(?::?\d\d)?/,ft=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],mt=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],gt=/^\/?Date\((\-?\d+)/i,yt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,vt={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};hooks.createFromInputFallback=deprecate("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),hooks.ISO_8601=function(){},hooks.RFC_2822=function(){};var bt=deprecate("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=createLocal.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:createInvalid()}),wt=deprecate("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=createLocal.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:createInvalid()}),kt=function(){return Date.now?Date.now():+new Date},Dt=["year","quarter","month","week","day","hour","minute","second","millisecond"];offset("Z",":"),offset("ZZ",""),addRegexToken("Z",P),addRegexToken("ZZ",P),addParseToken(["Z","ZZ"],function(t,e,i){i._useUTC=!0,i._tzm=offsetFromString(P,t)});var xt=/([\+\-]|\d\d)/gi;hooks.updateOffset=function(){};var Mt=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Ct=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;createDuration.fn=Duration.prototype,createDuration.invalid=createInvalid$1;var Ot=createAdder(1,"add"),Tt=createAdder(-1,"subtract");hooks.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",hooks.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Lt=deprecate("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)});addFormatToken(0,["gg",2],0,function(){return this.weekYear()%100}),addFormatToken(0,["GG",2],0,function(){return this.isoWeekYear()%100}),addWeekYearFormatToken("gggg","weekYear"),addWeekYearFormatToken("ggggg","weekYear"),addWeekYearFormatToken("GGGG","isoWeekYear"),addWeekYearFormatToken("GGGGG","isoWeekYear"),addUnitAlias("weekYear","gg"),addUnitAlias("isoWeekYear","GG"),addUnitPriority("weekYear",1),addUnitPriority("isoWeekYear",1),addRegexToken("G",S),addRegexToken("g",S),addRegexToken("GG",D,v),addRegexToken("gg",D,v),addRegexToken("GGGG",O,w),addRegexToken("gggg",O,w),addRegexToken("GGGGG",T,k),addRegexToken("ggggg",T,k),addWeekParseToken(["gggg","ggggg","GGGG","GGGGG"],function(t,e,i,n){e[n.substr(0,2)]=toInt(t)}),addWeekParseToken(["gg","GG"],function(t,e,i,n){e[n]=hooks.parseTwoDigitYear(t)}),addFormatToken("Q",0,"Qo","quarter"),addUnitAlias("quarter","Q"),addUnitPriority("quarter",7),addRegexToken("Q",y),addParseToken("Q",function(t,e){e[z]=3*(toInt(t)-1)}),addFormatToken("D",["DD",2],"Do","date"),addUnitAlias("date","D"),addUnitPriority("date",9),addRegexToken("D",D),addRegexToken("DD",D,v),addRegexToken("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient}),addParseToken(["D","DD"],A),addParseToken("Do",function(t,e){e[A]=toInt(t.match(D)[0])});var St=makeGetSet("Date",!0);addFormatToken("DDD",["DDDD",3],"DDDo","dayOfYear"),addUnitAlias("dayOfYear","DDD"),addUnitPriority("dayOfYear",4),addRegexToken("DDD",C),addRegexToken("DDDD",b),addParseToken(["DDD","DDDD"],function(t,e,i){i._dayOfYear=toInt(t)}),addFormatToken("m",["mm",2],0,"minute"),addUnitAlias("minute","m"),addUnitPriority("minute",14),addRegexToken("m",D),addRegexToken("mm",D,v),addParseToken(["m","mm"],H);var It=makeGetSet("Minutes",!1);addFormatToken("s",["ss",2],0,"second"),addUnitAlias("second","s"),addUnitPriority("second",15),addRegexToken("s",D),addRegexToken("ss",D,v),addParseToken(["s","ss"],N);var Pt=makeGetSet("Seconds",!1);addFormatToken("S",0,0,function(){return~~(this.millisecond()/100)}),addFormatToken(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),addFormatToken(0,["SSS",3],0,"millisecond"),addFormatToken(0,["SSSS",4],0,function(){return 10*this.millisecond()}),addFormatToken(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),addFormatToken(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),addFormatToken(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),addFormatToken(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),addFormatToken(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),addUnitAlias("millisecond","ms"),addUnitPriority("millisecond",16),addRegexToken("S",C,y),addRegexToken("SS",C,v),addRegexToken("SSS",C,b);var Ft;for(Ft="SSSS";Ft.length<=9;Ft+="S")addRegexToken(Ft,L);for(Ft="S";Ft.length<=9;Ft+="S")addParseToken(Ft,parseMs);var Et=makeGetSet("Milliseconds",!1);addFormatToken("z",0,0,"zoneAbbr"),addFormatToken("zz",0,0,"zoneName");var Bt=Moment.prototype;Bt.add=Ot,Bt.calendar=calendar$1,Bt.clone=clone,Bt.diff=diff,Bt.endOf=endOf,Bt.format=format,Bt.from=from,Bt.fromNow=fromNow,Bt.to=to,Bt.toNow=toNow,Bt.get=stringGet,Bt.invalidAt=invalidAt,Bt.isAfter=isAfter,Bt.isBefore=isBefore,Bt.isBetween=isBetween,Bt.isSame=isSame,Bt.isSameOrAfter=isSameOrAfter,Bt.isSameOrBefore=isSameOrBefore,Bt.isValid=isValid$2,Bt.lang=Lt,Bt.locale=locale,Bt.localeData=localeData,Bt.max=wt,Bt.min=bt,Bt.parsingFlags=parsingFlags,Bt.set=stringSet,Bt.startOf=startOf,Bt.subtract=Tt,Bt.toArray=toArray,Bt.toObject=toObject,Bt.toDate=toDate,Bt.toISOString=toISOString,Bt.inspect=inspect,Bt.toJSON=toJSON,Bt.toString=toString,Bt.unix=unix,Bt.valueOf=valueOf,Bt.creationData=creationData,Bt.year=q,Bt.isLeapYear=getIsLeapYear,Bt.weekYear=getSetWeekYear,Bt.isoWeekYear=getSetISOWeekYear,Bt.quarter=Bt.quarters=getSetQuarter,Bt.month=getSetMonth,Bt.daysInMonth=getDaysInMonth,Bt.week=Bt.weeks=getSetWeek,Bt.isoWeek=Bt.isoWeeks=getSetISOWeek,Bt.weeksInYear=getWeeksInYear,Bt.isoWeeksInYear=getISOWeeksInYear,Bt.date=St,Bt.day=Bt.days=getSetDayOfWeek,Bt.weekday=getSetLocaleDayOfWeek,Bt.isoWeekday=getSetISODayOfWeek,Bt.dayOfYear=getSetDayOfYear,Bt.hour=Bt.hours=lt,Bt.minute=Bt.minutes=It,Bt.second=Bt.seconds=Pt,Bt.millisecond=Bt.milliseconds=Et,Bt.utcOffset=getSetOffset,Bt.utc=setOffsetToUTC,Bt.local=setOffsetToLocal,Bt.parseZone=setOffsetToParsedOffset,Bt.hasAlignedHourOffset=hasAlignedHourOffset,Bt.isDST=isDaylightSavingTime,Bt.isLocal=isLocal,Bt.isUtcOffset=isUtcOffset,Bt.isUtc=isUtc,Bt.isUTC=isUtc,Bt.zoneAbbr=getZoneAbbr,Bt.zoneName=getZoneName,Bt.dates=deprecate("dates accessor is deprecated. Use date instead.",St),Bt.months=deprecate("months accessor is deprecated. Use month instead",getSetMonth),Bt.years=deprecate("years accessor is deprecated. Use year instead",q),Bt.zone=deprecate("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",getSetZone),Bt.isDSTShifted=deprecate("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",isDaylightSavingTimeShifted);var Vt=Locale.prototype;Vt.calendar=calendar,Vt.longDateFormat=longDateFormat,Vt.invalidDate=invalidDate,Vt.ordinal=ordinal,Vt.preparse=preParsePostFormat,Vt.postformat=preParsePostFormat,Vt.relativeTime=relativeTime,Vt.pastFuture=pastFuture,Vt.set=set,Vt.months=localeMonths,Vt.monthsShort=localeMonthsShort,Vt.monthsParse=localeMonthsParse,Vt.monthsRegex=monthsRegex,Vt.monthsShortRegex=monthsShortRegex,Vt.week=localeWeek,Vt.firstDayOfYear=localeFirstDayOfYear,Vt.firstDayOfWeek=localeFirstDayOfWeek,Vt.weekdays=localeWeekdays,Vt.weekdaysMin=localeWeekdaysMin,Vt.weekdaysShort=localeWeekdaysShort,Vt.weekdaysParse=localeWeekdaysParse,Vt.weekdaysRegex=weekdaysRegex,Vt.weekdaysShortRegex=weekdaysShortRegex,Vt.weekdaysMinRegex=weekdaysMinRegex,Vt.isPM=localeIsPM,Vt.meridiem=localeMeridiem,getSetGlobalLocale("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===toInt(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}}),hooks.lang=deprecate("moment.lang is deprecated. Use moment.locale instead.",getSetGlobalLocale),hooks.langData=deprecate("moment.langData is deprecated. Use moment.localeData instead.",getLocale);var Rt=Math.abs,zt=makeAs("ms"),At=makeAs("s"),Yt=makeAs("m"),Ht=makeAs("h"),Nt=makeAs("d"),Ut=makeAs("w"),jt=makeAs("M"),Wt=makeAs("y"),Zt=makeGetter("milliseconds"),qt=makeGetter("seconds"),Gt=makeGetter("minutes"),Kt=makeGetter("hours"),$t=makeGetter("days"),Jt=makeGetter("months"),Xt=makeGetter("years"),Qt=Math.round,te={ss:44,s:45,m:45,h:22,d:26,M:11},ee=Math.abs,ie=Duration.prototype;return ie.isValid=isValid$1,ie.abs=abs,ie.add=add$1,ie.subtract=subtract$1,ie.as=as,ie.asMilliseconds=zt,ie.asSeconds=At,ie.asMinutes=Yt,ie.asHours=Ht,ie.asDays=Nt,ie.asWeeks=Ut,ie.asMonths=jt,ie.asYears=Wt,ie.valueOf=valueOf$1,ie._bubble=bubble,ie.clone=clone$1,ie.get=get$2,ie.milliseconds=Zt,ie.seconds=qt,ie.minutes=Gt,ie.hours=Kt,ie.days=$t,ie.weeks=weeks,ie.months=Jt,ie.years=Xt,ie.humanize=humanize,ie.toISOString=toISOString$1,ie.toString=toISOString$1,ie.toJSON=toISOString$1,ie.locale=locale,ie.localeData=localeData,ie.toIsoString=deprecate("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",toISOString$1),ie.lang=Lt,addFormatToken("X",0,0,"unix"),addFormatToken("x",0,0,"valueOf"),addRegexToken("x",S),addRegexToken("X",F),addParseToken("X",function(t,e,i){i._d=new Date(1e3*parseFloat(t,10))}),addParseToken("x",function(t,e,i){i._d=new Date(toInt(t))}),hooks.version="2.22.2",function setHookCallback(t){e=t}(createLocal),hooks.fn=Bt,hooks.min=min,hooks.max=max,hooks.now=kt,hooks.utc=createUTC,hooks.unix=createUnix,hooks.months=listMonths,hooks.isDate=isDate,hooks.locale=getSetGlobalLocale,hooks.invalid=createInvalid,hooks.duration=createDuration,hooks.isMoment=isMoment,hooks.weekdays=listWeekdays,hooks.parseZone=createInZone,hooks.localeData=getLocale,hooks.isDuration=isDuration,hooks.monthsShort=listMonthsShort,hooks.weekdaysMin=listWeekdaysMin,hooks.defineLocale=defineLocale,hooks.updateLocale=updateLocale,hooks.locales=listLocales,hooks.weekdaysShort=listWeekdaysShort,hooks.normalizeUnits=normalizeUnits,hooks.relativeTimeRounding=getSetRelativeTimeRounding,hooks.relativeTimeThreshold=getSetRelativeTimeThreshold,hooks.calendarFormat=getCalendarFormat,hooks.prototype=Bt,hooks.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"YYYY-[W]WW",MONTH:"YYYY-MM"},hooks})}).call(e,i(201)(t))},function(t,e,i){(function(e){!function(e){"use strict";function Lexer(t){this.tokens=[],this.tokens.links={},this.options=t||marked.defaults,this.rules=i.normal,this.options.gfm&&(this.options.tables?this.rules=i.tables:this.rules=i.gfm)}function InlineLexer(t,e){if(this.options=e||marked.defaults,this.links=t,this.rules=n.normal,this.renderer=this.options.renderer||new Renderer,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.options.breaks?this.rules=n.breaks:this.rules=n.gfm:this.options.pedantic&&(this.rules=n.pedantic)}function Renderer(t){this.options=t||{}}function TextRenderer(){}function Parser(t){this.tokens=[],this.token=null,this.options=t||marked.defaults,this.options.renderer=this.options.renderer||new Renderer,this.renderer=this.options.renderer,this.renderer.options=this.options}function escape(t,e){return t.replace(e?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function unescape(t){return t.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,function(t,e){return e=e.toLowerCase(),"colon"===e?":":"#"===e.charAt(0)?"x"===e.charAt(1)?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""})}function edit(t,e){return t=t.source,e=e||"",{replace:function(e,i){return i=i.source||i,i=i.replace(/(^|[^\[])\^/g,"$1"),t=t.replace(e,i),this},getRegex:function(){return new RegExp(t,e)}}}function resolveUrl(t,e){return o[" "+t]||(/^[^:]+:\/*[^\/]*$/.test(t)?o[" "+t]=t+"/":o[" "+t]=t.replace(/[^\/]*$/,"")),t=o[" "+t],"//"===e.slice(0,2)?t.replace(/:[\s\S]*/,":")+e:"/"===e.charAt(0)?t.replace(/(:\/*[^\/]*)[\s\S]*/,"$1")+e:t+e}function noop(){}function merge(t){for(var e,i,n=1;n<arguments.length;n++){e=arguments[n];for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t}function marked(t,e,i){if(void 0===t||null===t)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof t)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");if(i||"function"==typeof e){i||(i=e,e=null),e=merge({},marked.defaults,e||{});var n,o,r=e.highlight,s=0;try{n=Lexer.lex(t,e)}catch(t){return i(t)}o=n.length;var a=function(t){if(t)return e.highlight=r,i(t);var o;try{o=Parser.parse(n,e)}catch(e){t=e}return e.highlight=r,t?i(t):i(null,o)};if(!r||r.length<3)return a();if(delete e.highlight,!o)return a();for(;s<n.length;s++)!function(t){"code"!==t.type?--o||a():r(t.text,t.lang,function(e,i){return e?a(e):null==i||i===t.text?--o||a():(t.text=i,t.escaped=!0,void(--o||a()))})}(n[s])}else try{return e&&(e=merge({},marked.defaults,e)),Parser.parse(Lexer.lex(t,e),e)}catch(t){if(t.message+="\nPlease report this to https://github.com/markedjs/marked.",(e||marked.defaults).silent)return"<p>An error occurred:</p><pre>"+escape(t.message+"",!0)+"</pre>";throw t}}var i={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:noop,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:noop,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,table:noop,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,paragraph:/^([^\n]+(?:\n?(?!hr|heading|lheading| {0,3}>|tag)[^\n]+)+)/,text:/^[^\n]+/};i._label=/(?:\\[\[\]]|[^\[\]])+/,i._title=/(?:"(?:\\"|[^"]|"[^"\n]*")*"|'\n?(?:[^'\n]+\n?)*'|\([^()]*\))/,i.def=edit(i.def).replace("label",i._label).replace("title",i._title).getRegex(),i.bullet=/(?:[*+-]|\d+\.)/,i.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,i.item=edit(i.item,"gm").replace(/bull/g,i.bullet).getRegex(),i.list=edit(i.list).replace(/bull/g,i.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+i.def.source+")").getRegex(),i._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b",i.html=edit(i.html).replace("comment",/<!--[\s\S]*?-->/).replace("closed",/<(tag)[\s\S]+?<\/\1>/).replace("closing",/<tag(?:"[^"]*"|'[^']*'|\s[^'"\/>\s]*)*?\/?>/).replace(/tag/g,i._tag).getRegex(),i.paragraph=edit(i.paragraph).replace("hr",i.hr).replace("heading",i.heading).replace("lheading",i.lheading).replace("tag","<"+i._tag).getRegex(),i.blockquote=edit(i.blockquote).replace("paragraph",i.paragraph).getRegex(),i.normal=merge({},i),i.gfm=merge({},i.normal,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\n? *\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),i.gfm.paragraph=edit(i.paragraph).replace("(?!","(?!"+i.gfm.fences.source.replace("\\1","\\2")+"|"+i.list.source.replace("\\1","\\3")+"|").getRegex(),i.tables=merge({},i.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),Lexer.rules=i,Lexer.lex=function(t,e){return new Lexer(e).lex(t)},Lexer.prototype.lex=function(t){return t=t.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(t,!0)},Lexer.prototype.token=function(t,e){t=t.replace(/^ +$/gm,"");for(var n,o,r,s,a,l,u,c,h,d,p;t;)if((r=this.rules.newline.exec(t))&&(t=t.substring(r[0].length),r[0].length>1&&this.tokens.push({type:"space"})),r=this.rules.code.exec(t))t=t.substring(r[0].length),r=r[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?r:r.replace(/\n+$/,"")});else if(r=this.rules.fences.exec(t))t=t.substring(r[0].length),this.tokens.push({type:"code",lang:r[2],text:r[3]||""});else if(r=this.rules.heading.exec(t))t=t.substring(r[0].length),this.tokens.push({type:"heading",depth:r[1].length,text:r[2]});else if(e&&(r=this.rules.nptable.exec(t))){for(t=t.substring(r[0].length),l={type:"table",header:r[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:r[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:r[3].replace(/\n$/,"").split("\n")},c=0;c<l.align.length;c++)/^ *-+: *$/.test(l.align[c])?l.align[c]="right":/^ *:-+: *$/.test(l.align[c])?l.align[c]="center":/^ *:-+ *$/.test(l.align[c])?l.align[c]="left":l.align[c]=null;for(c=0;c<l.cells.length;c++)l.cells[c]=l.cells[c].split(/ *\| */);this.tokens.push(l)}else if(r=this.rules.hr.exec(t))t=t.substring(r[0].length),this.tokens.push({type:"hr"});else if(r=this.rules.blockquote.exec(t))t=t.substring(r[0].length),this.tokens.push({type:"blockquote_start"}),r=r[0].replace(/^ *> ?/gm,""),this.token(r,e),this.tokens.push({type:"blockquote_end"});else if(r=this.rules.list.exec(t)){for(t=t.substring(r[0].length),s=r[2],p=s.length>1,this.tokens.push({type:"list_start",ordered:p,start:p?+s:""}),r=r[0].match(this.rules.item),n=!1,d=r.length,c=0;c<d;c++)l=r[c],u=l.length,l=l.replace(/^ *([*+-]|\d+\.) +/,""),~l.indexOf("\n ")&&(u-=l.length,l=this.options.pedantic?l.replace(/^ {1,4}/gm,""):l.replace(new RegExp("^ {1,"+u+"}","gm"),"")),this.options.smartLists&&c!==d-1&&(a=i.bullet.exec(r[c+1])[0],s===a||s.length>1&&a.length>1||(t=r.slice(c+1).join("\n")+t,c=d-1)),o=n||/\n\n(?!\s*$)/.test(l),c!==d-1&&(n="\n"===l.charAt(l.length-1),o||(o=n)),this.tokens.push({type:o?"loose_item_start":"list_item_start"}),this.token(l,!1),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(r=this.rules.html.exec(t))t=t.substring(r[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===r[1]||"script"===r[1]||"style"===r[1]),text:r[0]});else if(e&&(r=this.rules.def.exec(t)))t=t.substring(r[0].length),r[3]&&(r[3]=r[3].substring(1,r[3].length-1)),h=r[1].toLowerCase(),this.tokens.links[h]||(this.tokens.links[h]={href:r[2],title:r[3]});else if(e&&(r=this.rules.table.exec(t))){for(t=t.substring(r[0].length),l={type:"table",header:r[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:r[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:r[3].replace(/(?: *\| *)?\n$/,"").split("\n")},c=0;c<l.align.length;c++)/^ *-+: *$/.test(l.align[c])?l.align[c]="right":/^ *:-+: *$/.test(l.align[c])?l.align[c]="center":/^ *:-+ *$/.test(l.align[c])?l.align[c]="left":l.align[c]=null;for(c=0;c<l.cells.length;c++)l.cells[c]=l.cells[c].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(l)}else if(r=this.rules.lheading.exec(t))t=t.substring(r[0].length),this.tokens.push({type:"heading",depth:"="===r[2]?1:2,text:r[1]});else if(e&&(r=this.rules.paragraph.exec(t)))t=t.substring(r[0].length),this.tokens.push({type:"paragraph",text:"\n"===r[1].charAt(r[1].length-1)?r[1].slice(0,-1):r[1]});else if(r=this.rules.text.exec(t))t=t.substring(r[0].length),this.tokens.push({type:"text",text:r[0]});else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0));return this.tokens};var n={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:noop,tag:/^<!--[\s\S]*?-->|^<\/?[a-zA-Z0-9\-]+(?:"[^"]*"|'[^']*'|\s[^<'">\/\s]*)*?\/?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^_([^\s_](?:[^_]|__)+?[^\s_])_\b|^\*((?:\*\*|[^*])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`]?)\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:noop,text:/^[\s\S]+?(?=[\\<!\[`*]|\b_| {2,}\n|$)/};n._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,n._email=/[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,n.autolink=edit(n.autolink).replace("scheme",n._scheme).replace("email",n._email).getRegex(),n._inside=/(?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]]|\](?=[^\[]*\]))*/,n._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,n.link=edit(n.link).replace("inside",n._inside).replace("href",n._href).getRegex(),n.reflink=edit(n.reflink).replace("inside",n._inside).getRegex(),n.normal=merge({},n),n.pedantic=merge({},n.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),n.gfm=merge({},n.normal,{escape:edit(n.escape).replace("])","~|])").getRegex(),url:edit(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("email",n._email).getRegex(),_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:edit(n.text).replace("]|","~]|").replace("|","|https?://|ftp://|www\\.|[a-zA-Z0-9.!#$%&'*+/=?^_`{\\|}~-]+@|").getRegex()}),n.breaks=merge({},n.gfm,{br:edit(n.br).replace("{2,}","*").getRegex(),text:edit(n.gfm.text).replace("{2,}","*").getRegex()}),InlineLexer.rules=n,InlineLexer.output=function(t,e,i){return new InlineLexer(e,i).output(t)},InlineLexer.prototype.output=function(t){for(var e,i,n,o,r="";t;)if(o=this.rules.escape.exec(t))t=t.substring(o[0].length),r+=o[1];else if(o=this.rules.autolink.exec(t))t=t.substring(o[0].length),"@"===o[2]?(i=escape(this.mangle(o[1])),n="mailto:"+i):(i=escape(o[1]),n=i),r+=this.renderer.link(n,null,i);else if(this.inLink||!(o=this.rules.url.exec(t))){if(o=this.rules.tag.exec(t))!this.inLink&&/^<a /i.test(o[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(o[0])&&(this.inLink=!1),t=t.substring(o[0].length),r+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(o[0]):escape(o[0]):o[0];else if(o=this.rules.link.exec(t))t=t.substring(o[0].length),this.inLink=!0,r+=this.outputLink(o,{href:o[2],title:o[3]}),this.inLink=!1;else if((o=this.rules.reflink.exec(t))||(o=this.rules.nolink.exec(t))){if(t=t.substring(o[0].length),e=(o[2]||o[1]).replace(/\s+/g," "),!(e=this.links[e.toLowerCase()])||!e.href){r+=o[0].charAt(0),t=o[0].substring(1)+t;continue}this.inLink=!0,r+=this.outputLink(o,e),this.inLink=!1}else if(o=this.rules.strong.exec(t))t=t.substring(o[0].length),r+=this.renderer.strong(this.output(o[2]||o[1]));else if(o=this.rules.em.exec(t))t=t.substring(o[0].length),r+=this.renderer.em(this.output(o[2]||o[1]));else if(o=this.rules.code.exec(t))t=t.substring(o[0].length),r+=this.renderer.codespan(escape(o[2].trim(),!0));else if(o=this.rules.br.exec(t))t=t.substring(o[0].length),r+=this.renderer.br();else if(o=this.rules.del.exec(t))t=t.substring(o[0].length),r+=this.renderer.del(this.output(o[1]));else if(o=this.rules.text.exec(t))t=t.substring(o[0].length),r+=this.renderer.text(escape(this.smartypants(o[0])));else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0))}else o[0]=this.rules._backpedal.exec(o[0])[0],t=t.substring(o[0].length),"@"===o[2]?(i=escape(o[0]),n="mailto:"+i):(i=escape(o[0]),n="www."===o[1]?"http://"+i:i),r+=this.renderer.link(n,null,i);return r},InlineLexer.prototype.outputLink=function(t,e){var i=escape(e.href),n=e.title?escape(e.title):null;return"!"!==t[0].charAt(0)?this.renderer.link(i,n,this.output(t[1])):this.renderer.image(i,n,escape(t[1]))},InlineLexer.prototype.smartypants=function(t){return this.options.smartypants?t.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014\/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014\/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):t},InlineLexer.prototype.mangle=function(t){if(!this.options.mangle)return t;for(var e,i="",n=t.length,o=0;o<n;o++)e=t.charCodeAt(o),Math.random()>.5&&(e="x"+e.toString(16)),i+="&#"+e+";";return i},Renderer.prototype.code=function(t,e,i){if(this.options.highlight){var n=this.options.highlight(t,e);null!=n&&n!==t&&(i=!0,t=n)}return e?'<pre><code class="'+this.options.langPrefix+escape(e,!0)+'">'+(i?t:escape(t,!0))+"\n</code></pre>\n":"<pre><code>"+(i?t:escape(t,!0))+"\n</code></pre>"},Renderer.prototype.blockquote=function(t){return"<blockquote>\n"+t+"</blockquote>\n"},Renderer.prototype.html=function(t){return t},Renderer.prototype.heading=function(t,e,i){return"<h"+e+' id="'+this.options.headerPrefix+i.toLowerCase().replace(/[^\w]+/g,"-")+'">'+t+"</h"+e+">\n"},Renderer.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},Renderer.prototype.list=function(t,e,i){var n=e?"ol":"ul";return"<"+n+(e&&1!==i?' start="'+i+'"':"")+">\n"+t+"</"+n+">\n"},Renderer.prototype.listitem=function(t){return"<li>"+t+"</li>\n"},Renderer.prototype.paragraph=function(t){return"<p>"+t+"</p>\n"},Renderer.prototype.table=function(t,e){return"<table>\n<thead>\n"+t+"</thead>\n<tbody>\n"+e+"</tbody>\n</table>\n"},Renderer.prototype.tablerow=function(t){return"<tr>\n"+t+"</tr>\n"},Renderer.prototype.tablecell=function(t,e){var i=e.header?"th":"td";return(e.align?"<"+i+' style="text-align:'+e.align+'">':"<"+i+">")+t+"</"+i+">\n"},Renderer.prototype.strong=function(t){return"<strong>"+t+"</strong>"},Renderer.prototype.em=function(t){return"<em>"+t+"</em>"},Renderer.prototype.codespan=function(t){return"<code>"+t+"</code>"},Renderer.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},Renderer.prototype.del=function(t){return"<del>"+t+"</del>"},Renderer.prototype.link=function(t,e,i){if(this.options.sanitize){try{var n=decodeURIComponent(unescape(t)).replace(/[^\w:]/g,"").toLowerCase()}catch(t){return i}if(0===n.indexOf("javascript:")||0===n.indexOf("vbscript:")||0===n.indexOf("data:"))return i}this.options.baseUrl&&!r.test(t)&&(t=resolveUrl(this.options.baseUrl,t));var o='<a href="'+t+'"';return e&&(o+=' title="'+e+'"'),o+=">"+i+"</a>"},Renderer.prototype.image=function(t,e,i){this.options.baseUrl&&!r.test(t)&&(t=resolveUrl(this.options.baseUrl,t));var n='<img src="'+t+'" alt="'+i+'"';return e&&(n+=' title="'+e+'"'),n+=this.options.xhtml?"/>":">"},Renderer.prototype.text=function(t){return t},TextRenderer.prototype.strong=TextRenderer.prototype.em=TextRenderer.prototype.codespan=TextRenderer.prototype.del=TextRenderer.prototype.text=function(t){return t},TextRenderer.prototype.link=TextRenderer.prototype.image=function(t,e,i){return""+i},TextRenderer.prototype.br=function(){return""},Parser.parse=function(t,e){return new Parser(e).parse(t)},Parser.prototype.parse=function(t){this.inline=new InlineLexer(t.links,this.options),this.inlineText=new InlineLexer(t.links,merge({},this.options,{renderer:new TextRenderer})),this.tokens=t.reverse();for(var e="";this.next();)e+=this.tok();return e},Parser.prototype.next=function(){return this.token=this.tokens.pop()},Parser.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},Parser.prototype.parseText=function(){for(var t=this.token.text;"text"===this.peek().type;)t+="\n"+this.next().text;return this.inline.output(t)},Parser.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,unescape(this.inlineText.output(this.token.text)));case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var t,e,i,n,o="",r="";for(i="",t=0;t<this.token.header.length;t++)i+=this.renderer.tablecell(this.inline.output(this.token.header[t]),{header:!0,align:this.token.align[t]});for(o+=this.renderer.tablerow(i),t=0;t<this.token.cells.length;t++){for(e=this.token.cells[t],i="",n=0;n<e.length;n++)i+=this.renderer.tablecell(this.inline.output(e[n]),{header:!1,align:this.token.align[n]});r+=this.renderer.tablerow(i)}return this.renderer.table(o,r);case"blockquote_start":for(r="";"blockquote_end"!==this.next().type;)r+=this.tok();return this.renderer.blockquote(r);case"list_start":r="";for(var s=this.token.ordered,a=this.token.start;"list_end"!==this.next().type;)r+=this.tok();return this.renderer.list(r,s,a);case"list_item_start":for(r="";"list_item_end"!==this.next().type;)r+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(r);case"loose_item_start":for(r="";"list_item_end"!==this.next().type;)r+=this.tok();return this.renderer.listitem(r);case"html":var l=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(l);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}};var o={},r=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;noop.exec=noop,marked.options=marked.setOptions=function(t){return merge(marked.defaults,t),marked},marked.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,sanitizer:null,mangle:!0,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new Renderer,xhtml:!1,baseUrl:null},marked.Parser=Parser,marked.parser=Parser.parse,marked.Renderer=Renderer,marked.TextRenderer=TextRenderer,marked.Lexer=Lexer,marked.lexer=Lexer.lex,marked.InlineLexer=InlineLexer,marked.inlineLexer=InlineLexer.output,marked.parse=marked,t.exports=marked}(this||"undefined"!=typeof window&&window)}).call(e,i(200))},function(t,e,i){!function(t,e){e(i(1))}(0,function(t){"use strict";function processRelativeTime(t,e,i,n){var o={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[t+" Tage",t+" Tagen"],M:["ein Monat","einem Monat"],MM:[t+" Monate",t+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[t+" Jahre",t+" Jahren"]};return e?o[i][0]:o[i][1]}return t.defineLocale("de-at",{months:"Jänner_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jän._Feb._März_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:processRelativeTime,mm:"%d Minuten",h:processRelativeTime,hh:"%d Stunden",d:processRelativeTime,dd:processRelativeTime,M:processRelativeTime,MM:processRelativeTime,y:processRelativeTime,yy:processRelativeTime},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(t,e,i){!function(t,e){e(i(1))}(0,function(t){"use strict";function processRelativeTime(t,e,i,n){var o={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[t+" Tage",t+" Tagen"],M:["ein Monat","einem Monat"],MM:[t+" Monate",t+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[t+" Jahre",t+" Jahren"]};return e?o[i][0]:o[i][1]}return t.defineLocale("de-ch",{months:"Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._März_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:processRelativeTime,mm:"%d Minuten",h:processRelativeTime,hh:"%d Stunden",d:processRelativeTime,dd:processRelativeTime,M:processRelativeTime,MM:processRelativeTime,y:processRelativeTime,yy:processRelativeTime},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(t,e,i){!function(t,e){e(i(1))}(0,function(t){"use strict";function processRelativeTime(t,e,i,n){var o={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[t+" Tage",t+" Tagen"],M:["ein Monat","einem Monat"],MM:[t+" Monate",t+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[t+" Jahre",t+" Jahren"]};return e?o[i][0]:o[i][1]}return t.defineLocale("de",{months:"Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._März_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:processRelativeTime,mm:"%d Minuten",h:processRelativeTime,hh:"%d Stunden",d:processRelativeTime,dd:processRelativeTime,M:processRelativeTime,MM:processRelativeTime,y:processRelativeTime,yy:processRelativeTime},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(t,e,i){!function(t,e){e(i(1))}(0,function(t){"use strict";return t.defineLocale("en-au",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")},week:{dow:1,doy:4}})})},function(t,e,i){!function(t,e){e(i(1))}(0,function(t){"use strict";return t.defineLocale("en-ca",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"YYYY-MM-DD",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}})})},function(t,e,i){!function(t,e){e(i(1))}(0,function(t){"use strict";return t.defineLocale("en-gb",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")},week:{dow:1,doy:4}})})},function(t,e,i){!function(t,e){e(i(1))}(0,function(t){"use strict";return t.defineLocale("en-ie",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")},week:{dow:1,doy:4}})})},function(t,e,i){!function(t,e){e(i(1))}(0,function(t){"use strict";return t.defineLocale("en-nz",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")},week:{dow:1,doy:4}})})},function(t,e,i){!function(t,e){e(i(1))}(0,function(t){"use strict";var e="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),i="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),n=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],o=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;return t.defineLocale("es-do",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(t,n){return t?/-MMM-/.test(n)?i[t.month()]:e[t.month()]:e},monthsRegex:o,monthsShortRegex:o,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:n,longMonthsParse:n,shortMonthsParse:n,weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY h:mm A",LLLL:"dddd, D [de] MMMM [de] YYYY h:mm A"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[mañana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})})},function(t,e,i){!function(t,e){e(i(1))}(0,function(t){"use strict";var e="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),i="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),n=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],o=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;return t.defineLocale("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(t,n){return t?/-MMM-/.test(n)?i[t.month()]:e[t.month()]:e},monthsRegex:o,monthsShortRegex:o,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:n,longMonthsParse:n,shortMonthsParse:n,weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[mañana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})})},function(t,e,i){!function(t,e){e(i(1))}(0,function(t){"use strict";return t.defineLocale("it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"domenica_lunedì_martedì_mercoledì_giovedì_venerdì_sabato".split("_"),weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",lastDay:"[Ieri alle] LT",lastWeek:function(){switch(this.day()){case 0:return"[la scorsa] dddd [alle] LT";default:return"[lo scorso] dddd [alle] LT"}},sameElse:"L"},relativeTime:{future:function(t){return(/^[0-9].+$/.test(t)?"tra":"in")+" "+t},past:"%s fa",s:"alcuni secondi",ss:"%d secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})})},function(t,e){},,function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.CSSLoader=function(i){function CSSLoader(){return CSSLoader.__super__.constructor.apply(this,arguments)}return e(CSSLoader,i),CSSLoader.prototype.readOpts=function(){return CSSLoader.__super__.readOpts.call(this),this.__cssName="cui-css-"+this.getUniqueId()},CSSLoader.prototype.__getCSSNodes=function(){return t.dom.matchSelector(document.documentElement,'link[name="'+this.__cssName+'"]')},CSSLoader.prototype.getActiveCSS=function(){var e,i,n,o;for(o=this.__getCSSNodes(),i=0,n=o.length;i<n;i++)if(e=o[i],!t.dom.getAttribute(e,"data-cui-loading"))return{url:t.dom.getAttribute(e,"data-cui-url"),theme:t.dom.getAttribute(e,"data-cui-theme")};return null},CSSLoader.prototype.load=function(e){var i,n,o,r,s,a,l,u,c;for(null==e&&(e={}),l=t.Element.readOpts(e,"CSSLoader",{theme:{check:String},url:{mandatory:!0,check:String}}),u=this.__getCSSNodes(),r=0,s=u.length;r<s;r++)if(a=u[r],t.dom.getAttribute(a,"data-cui-loading"))return console.warn("CSSLoader.load. CSS already loading.",{opts:l}),t.rejectedPromise();return c=l.url,o=new t.Deferred,n=c.startsWith("http://")||c.startsWith("https://")||c.startsWith("file://")?c:c.startsWith("/")?document.location.origin+c:t.getPathToScript()+c,i=t.dom.element("LINK",{rel:"stylesheet",charset:"utf-8",name:this.__cssName,"data-cui-loading":"1","data-cui-theme":l.theme,"data-cui-url":l.url,href:n}),o.always(function(e){return function(){return t.dom.removeAttribute(i,"data-cui-loading")}}()),o.fail(function(e){return function(e){return console.error("CSSLoader: Loading failed, removing node.",e),t.dom.remove(i)}}()),t.Events.listen({node:i,type:"load",call:function(e){return function(r,s){var a,u,c,h,d,p,_,f,m,g,y;if("pending"!==o.state())return void console.warn("CSSLoader.loadTheme: Caught event load second time, ignoring. IE does that for some reason.");if(t.browser.ie){for(u=!1,f=document.styleSheets,c=0,d=f.length;c<d;c++)if(y=f[c],y.href===n){try{if(!(null!=(m=y.cssRules)?m.length:void 0))return console.error("CSSLoader: Loaded a stylesheet with no rules: ",n,y),void o.reject(n);u=!0}catch(t){t}break}if(!u)return console.error("CSSLoader: Stylesheet not correctly loaded: ",n),void o.reject(n)}for(_=[],g=t.dom.matchSelector(document.head,"link[name='"+e.__cssName+"']"),h=0,p=g.length;h<p;h++)(a=g[h])!==i&&(t.dom.remove(a),_.push(a));t.dom.setAttribute(document.body,"data-cui-theme",l.theme),t.Events.trigger({type:"viewport-resize",info:{css_load:!0}}),o.resolve(n)}}(this)}),t.Events.listen({node:i,type:"error",call:function(t){return function(t,e){console.error("CSS.load: loading error:",c),o.reject(n)}}()}),document.head.appendChild(i),o.promise()},CSSLoader}(t.Element)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty,n=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1};t.CSVData=function(i){function CSVData(){return CSVData.__super__.constructor.apply(this,arguments)}return e(CSVData,i),CSVData.prototype.initOpts=function(){return CSVData.__super__.initOpts.call(this),this.addOpts({rows:{check:function(e){return t.util.isArray(e)&&e.length>0}}})},CSVData.prototype.readOpts=function(){CSVData.__super__.readOpts.call(this),this.__max_column_count=0,this._rows?this.rows=this._rows:this.rows=[],this.giveAllRowsSameNumberOfColumns()},CSVData.prototype.giveAllRowsSameNumberOfColumns=function(){var t,e,i,n,o,r,s,a,l,u,c,h;for(this.__max_column_count=0,a=this.rows,e=0,r=a.length;e<r;e++)h=a[e],(t=h.length)>this.__max_column_count&&(this.__max_column_count=t);for(l=this.rows,n=0,s=l.length;n<s;n++)if(h=l[n],h.length<this.__max_column_count)for(i=o=u=h.length,c=this.__max_column_count;u<=c?o<c:o>c;i=u<=c?++o:--o)h[i]=null},CSVData.prototype.getMaxColumnCount=function(){return this.__max_column_count},CSVData.prototype.getRows=function(){return this.rows},CSVData.prototype.getRow=function(t){return this.rows[t]},CSVData.prototype.getRowsCount=function(){return this.rows.length},CSVData.prototype.debug=function(){return console.debug("rows:",this.rows)},CSVData.prototype.toText=function(e){var i,n,o,r,s,a,l,u,c,h,d,p,_,f,m;for(null==e&&(e={}),d=t.Element.readOpts(e,"CSVData.toText",{delimiter:{mandatory:!0,default:";",check:function(e){return function(e){return t.util.isString(e)&&e.length>0}}()},quotechar:{mandatory:!0,default:'"',check:function(e){return function(e){return t.util.isString(e)&&e.length>0}}()},always_quote:{mandatory:!0,default:!0,check:Boolean},equal_columns:{mandatory:!0,default:!0,check:Boolean},newline:{mandatory:!0,default:String.fromCharCode(10),check:function(e){return function(e){return t.util.isString(e)&&e.length>0}}()}}),d.equal_columns&&this.giveAllRowsSameNumberOfColumns(),h=String.fromCharCode(10),r=String.fromCharCode(13),n=[],_=this.rows,s=0,u=_.length;s<u;s++){for(f=_[s],i=[],a=l=0,c=f.length;l<c;a=++l)o=f[a],a>0&&i.push(d.delimiter),m=t.util.isEmpty(o)?"":""+o,p=!!d.always_quote||(m.indexOf(d.delimiter)>-1||(m.indexOf(d.quotechar)>-1||(m.indexOf(h)>-1||m.indexOf(r)>-1))),p?i.push(t.CSVData.quote(m,d.quotechar)):i.push(m);n.push(i.join(""))}return n.join(d.newline)},CSVData.prototype.parse=function(e){var i,o,r,s,a,l,u,c,h,d,p,_,f,m,g;return null==e&&(e={}),f=t.Element.readOpts(e,"CSVData.parse",{text:{mandatory:!0,check:String},delimiter:{check:String},quotechar:{check:String},defer:{mandatory:!0,default:!0,check:Boolean}}),this.rows=[],g=f.text,a=[],s=0,r=[],p=g.length,h=0,d=!1,_=0,o=['"',"'"],i=[",",";","\t"],l=void 0!==f.delimiter?f.delimiter:null,m=void 0!==f.quotechar?f.quotechar:null,f.defer&&(u=new t.Deferred),c=function(e){return function(){var y,v,b,w,k,D;for(b=function(){a[s]=r.join(""),r.splice(0),s+=1},w=function(){a.length>0&&(_+=1,e.rows.push(a),a=[]),s=0};h<p;)if(y=g.charAt(h),null===m&&n.call(o,y)>=0&&(m=y),null===l&&n.call(i,y)>=0&&(l=y),y!==m)if(y!==l){if(v=g.charCodeAt(h),D=g.charCodeAt(h+1),13!==v&&10!==v)r.push(y),h+=1;else if(h+=13===v&&10===D?2:1,d)r.push(String.fromCharCode(10));else if(b(),w(),_%1e3==0&&f.defer)return u.notify({row_count:_,file_read_idx:h,file_length:p}),void t.setTimeout({ms:10,call:c})}else{if(d){r.push(y),h+=1;continue}b(),h+=1}else{if(d){if(g[h+1]===m){r.push(y),h+=2;continue}d=!1,h+=1;continue}d=!0,h+=1}return r.length>0&&b(),a.length>0&&w(),e.giveAllRowsSameNumberOfColumns(),k={row_count:_,file_length:p,rows:e.rows},f.defer?u.resolve(k):k}}(this),f.defer?(t.setTimeout({ms:0,call:c}),u.done(function(t){return function(){}}()),u.promise()):c()},CSVData.quote=function(e,i){return null==i&&(i='"'),i+e.replace(new RegExp(t.util.escapeRegExp(i),"g"),i+i)+i},CSVData}(t.Element)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.DOMElement=function(i){function DOMElement(){return DOMElement.__super__.constructor.apply(this,arguments)}return e(DOMElement,i),DOMElement.defaults={qa:!1},DOMElement.prototype.initOpts=function(){return DOMElement.__super__.initOpts.call(this),this.addOpts({class:{default:"",check:String},id:{check:String},qa:{check:String},attr:{check:"PlainObject"}})},DOMElement.prototype.registerTemplate=function(e,i){return null==i&&(i=!0),t.util.assert(e instanceof t.Template,t.util.getObjectClass(this)+".registerDOMElement","template must be instance of Template but is "+t.util.getObjectClass(e)+".",{template:e}),this.__template&&(console.warn(t.util.getObjectClass(this)+".registerDO MElement","Already called before, destroying existing template",{template:this.__template}),this.__template.destroy()),this.__template=e,this.registerDOMElement(this.__template.DOM,i)},DOMElement.prototype.getDOMElementClasses=function(){return"cui-"+t.util.toDash(this.__cls)},DOMElement.prototype.registerDOMElement=function(e,i){return this.DOM=e,null==i&&(i=!0),i&&t.dom.addClass(this.DOM,this.getDOMElementClasses()),this._attr&&t.dom.setAttributeMap(this.DOM,this._attr),this._id&&t.dom.setAttribute(this.DOM,"id",this._id),this._class&&t.dom.addClass(this.DOM,this._class),this._qa&&t.DOMElement.defaults.qa&&t.dom.setAttribute(this.DOM,"data-qa",this._qa),t.dom.data(this.DOM,"element",this),this},DOMElement.prototype.getElementForLayer=function(){return this.DOM},DOMElement.prototype.unregisterDOMElement=function(){return t.dom.removeClass(this.DOM,this.getDOMElementClasses()),t.dom.removeAttribute(this.DOM,"id"),this._class&&t.dom.removeClass(this.DOM,this._class),t.dom.removeData(this.DOM,"element"),delete this.DOM,this},DOMElement.prototype.__assertDOMElement=function(e){return t.util.assert(this.DOM,this.__cls+"."+e,'registerDOMElement needs to be called before "'+e+'" is supported.')},DOMElement.prototype.__assertTemplateElement=function(e){return t.util.assert(this.__template,this.__cls+"."+e,'registerTemplateElement needs to be called before "'+e+'" is supported.')},DOMElement.prototype.addClass=function(e,i){return t.util.assert(1===arguments.length||2===arguments.length,"addClass","Only 'className' and 'key' parameters are allowed."),i?(this.__assertTemplateElement("addClass"),this.__template.addClass.call(this.__template,e,i,this)):(this.__assertDOMElement("addClass"),t.dom.addClass(this.DOM,e))},DOMElement.prototype.setAria=function(e,i){return this.__assertDOMElement("setAria"),t.dom.setAria(this.DOM,e,i)},DOMElement.prototype.removeClass=function(e,i){return t.util.assert(1===arguments.length||2===arguments.length,"removeClass","Only 'className' and 'key' parameters are allowed."),i?(this.__assertTemplateElement("removeClass"),this.__template.removeClass.call(this.__template,e,i,this)):(this.__assertDOMElement("removeClass"),t.dom.removeClass(this.DOM,e))},DOMElement.prototype.hide=function(e){return t.util.isEmpty(e)?(this.__assertDOMElement("hide"),t.dom.hideElement(this.DOM)):(this.__assertTemplateElement("hide"),this.__template.hide.call(this.__template,e))},DOMElement.prototype.show=function(e){return t.util.isEmpty(e)?(this.__assertDOMElement("show"),t.dom.showElement(this.DOM)):(this.__assertTemplateElement("show"),this.__template.show.call(this.__template,e))},DOMElement.prototype.hasClass=function(e){return t.util.assert(1===arguments.length,"CUI.dom.hasClass","Only one parameter allowed."),this.__assertDOMElement("hasClass"),t.dom.hasClass(this.DOM,e)},DOMElement.prototype.isDestroyed=function(t){var e;return null!=(e=this.__template)?e.isDestroyed.call(this.__template,t):void 0},DOMElement.prototype.empty=function(t){return this.__assertTemplateElement("empty"),this.__template.empty.call(this.__template,t)},DOMElement.prototype.replace=function(t,e){return this.__assertTemplateElement("replace"),this.__template.replace.call(this.__template,t,e,this)},DOMElement.prototype.append=function(t,e){return this.__assertTemplateElement("append"),this.__template.append.call(this.__template,t,e,this)},DOMElement.prototype.prepend=function(t,e){return this.__assertTemplateElement("prepend"),this.__template.prepend.call(this.__template,t,e,this)},DOMElement.prototype.text=function(t,e){return this.__assertTemplateElement("text"),this.__template.text.call(this.__template,t,e,this)},DOMElement.prototype.get=function(t){return this.__assertTemplateElement("get"),this.__template.get.call(this.__template,t,this)},DOMElement.prototype.getFlexHandle=function(t,e){return this.__assertTemplateElement("getFlexHandle"),this.__template.getFlexHandle.call(this.__template,t,e)},DOMElement.prototype.destroy=function(){var e;return DOMElement.__super__.destroy.call(this),this.__template?null!=(e=this.__template)&&e.destroy():this.DOM&&t.dom.remove(this.DOM),this},DOMElement}(t.Element)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.CheckValueError=function(t){function CheckValueError(){return CheckValueError.__super__.constructor.apply(this,arguments)}return e(CheckValueError,t),CheckValueError}(window.Error)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},n={}.hasOwnProperty,o=[].slice;t.Template.loadTemplateText(i(169)),t.DataField=function(i){function DataField(e){var i;this.opts=null!=e?e:{},DataField.__super__.constructor.call(this,this.opts),t.util.assertImplements(this,["render"]),this._name&&t.util.assertImplements(this,["getDefaultValue"]),this.__checkChangedValue=void 0,this.initTemplate(),this.addClass("cui-data-field"),this.maximizeAddClasses(),t.Events.listen({type:"data-changed",node:this.DOM,call:function(e){return function(i,n){if(!(null!=n?n.element:void 0))return void console.warn(t.util.getObjectClass(e)+"[DataField].listen[data-changed]: received event with element not set.",i,n,e);"function"==typeof e._onDataChanged&&e._onDataChanged(e.getData(),n.element,i,n)}}(this)}),this.getName()&&this.DOM.setAttribute("cui-data-field-name",this.getName()),this.init(),this._data&&!t.util.isFunction(this._data)&&this.setData(this._data),this.__initDisabled(),this._hidden&&this.hide(),this._tooltip&&(this._tooltip.text||this._tooltip.content)&&(i=t.util.copyObject(this._tooltip),i.element=this.DOM,this.__tooltip=new t.Tooltip(i)),this.__opacity=1,"function"==typeof this._onInit&&this._onInit(this)}return e(DataField,i),DataField.changed_marker_css_class="cui-data-field-changed-marker",DataField.defaults={undo_and_changed_support:!1},DataField.prototype.initOpts=function(){return DataField.__super__.initOpts.call(this),this.addOpts({name:this.getNameOpt(),maximize:{check:Boolean},maximize_horizontal:{check:Boolean,default:!1},maximize_vertical:{check:Boolean,default:!1},data:{check:function(e){return t.util.isFunction(null!=e?e.hasOwnProperty:void 0)||t.util.isFunction(e)}},data_not_for_others:{default:!1,check:Boolean},disabled:{default:!1,check:function(e){return t.util.isBoolean(e)||t.util.isFunction(e)}},disabled_depends_on_data:{check:Function},tooltip:{check:"PlainObject"},hidden:{check:Boolean},form:{},undo_and_changed_support:{check:Boolean},undo_support:{default:t.DataField.defaults.undo_and_changed_support,check:Boolean},mark_changed:{default:t.DataField.defaults.undo_and_changed_support,check:Boolean},check_changed:{default:t.DataField.defaults.undo_and_changed_support,check:Boolean},onDataChanged:{check:Function},onDataInit:{check:Function},onInit:{check:Function},onRender:{check:Function},render_as_block:{check:Boolean}})},DataField.prototype.readOpts=function(){var e,i,n,o;if(this.opts.hasOwnProperty("undo_and_changed_support"))for(o=["undo_support","check_changed","mark_changed"],e=0,n=o.length;e<n;e++)i=o[e],this.opts.hasOwnProperty(i)||(this.opts[i]=this.opts.undo_and_changed_support);return DataField.__super__.readOpts.call(this),t.Layout.prototype.maximizeReadOpts.call(this)},DataField.prototype.maximizeAddClasses=function(){return t.Layout.prototype.maximizeAddClasses.call(this)},DataField.prototype.getUniqueIdForLabel=function(){return null},DataField.prototype.initTemplate=function(){return this.registerTemplate(this.getTemplate())},DataField.prototype.getTemplate=function(){return new t.Template({name:"data-field"})},DataField.prototype.isResizable=function(){return!1},DataField.prototype.init=function(){},DataField.prototype.debug=function(){if(console.debug("----"+this+"----",this),this.__data)return console.debug("data:",this.getData()),console.debug("value:",this.getValue()),console.debug("init-value:",this.getInitValue()),console.debug("check-changed-value:",this.getCheckChangedValue())},DataField.prototype.toString=function(){return"["+this.__cls+"["+this.__uniqueId+", "+(this._name||"<no name>")+"]}"},DataField.prototype.reload=function(){return this.remove(),this.render(),this.displayValue(),"function"==typeof this._onRender&&this._onRender(this),this},DataField.prototype.remove=function(){return this.callOnOthers("remove"),this.isDestroyed()||this.empty(),this.__isRendered=!1},DataField.prototype.getNameOpt=function(){return{check:String}},DataField.prototype.registerLabel=function(t){return t.setAttribute("for",this.getUniqueIdForLabel())},DataField.prototype.getLabel=function(){return this._label},DataField.prototype.getMaximizeHorizontal=function(){return this.__maximize_horizontal},DataField.prototype.setForm=function(e){return t.util.assertImplements(e,["getFieldsByName","getFieldByIdx","getData","getFields"]),this.__form=e,this.getForm().getFormPath?(this.__form.getMaximizeHorizontal()&&!1!==this.getOpt("maximize_horizontal")&&this.addClass("cui-maximize-horizontal"),this.setFormDepth(),this):this},DataField.prototype.getFormDepth=function(){return parseInt(t.dom.getAttribute(this.DOM,"cui-form-depth"))},DataField.prototype.setFormDepth=function(){var e;return e=this.getFormPath(),t.dom.setAttribute(this.DOM,"cui-form-depth",e.length),this.callOnOthers("setFormDepth"),e.length},DataField.prototype.getFormPath=function(e,i,n){var o;return null==e&&(e=!1),null==i&&(i=[]),null==n&&(n=0),t.util.assert(n<100,"CUI.DataField.getPath","Recursion detected."),(null!=(o=this.getForm())?o.getFormPath:void 0)&&this.getForm().getFormPath(!0,i,n+1),e&&i.push(this),i},DataField.prototype.getForm=function(){return this.__form},DataField.prototype.getOtherField=function(t){var e,i;return null!=(e=this.__form)&&null!=(i=e.getFieldsByName(t))?i[0]:void 0},DataField.prototype.getRootForm=function(){return this.__form?this.__form.getRootForm():this instanceof t.Form?this:null},DataField.prototype.__initDisabled=function(){this._disabled&&(!0===this._disabled||this._disabled.call(this,this))&&this.disable()},DataField.prototype.enable=function(){return this.removeClass("cui-data-field-disabled"),this.callOnOthers("enable"),this},DataField.prototype.disable=function(){return this.addClass("cui-data-field-disabled"),this.callOnOthers("disable"),this},DataField.prototype.isDisabled=function(){return this.hasClass("cui-data-field-disabled")},DataField.prototype.isHidden=function(){return this.hasClass("cui-data-field-hidden")},DataField.prototype.isShown=function(){return!this.isHidden()},DataField.prototype.updateData=function(e){return t.util.isFunction(this._data)?this.__data=this._data.call(this,e,this):this.__data=e,this.displayValue()},DataField.prototype.setData=function(e,i){var n;if(null==i&&(i=!0),!this.__data||!this._data||t.util.isFunction(this._data))return t.util.assert(!this.__data,this+".setData","data is already set.",{opts:this.opts,data:this.__data}),t.util.isFunction(this._data)?this.__data=this._data.call(this,e,this):this.__data=e,t.util.assert(t.util.isPlainObject(this.__data)||(null!=(n=this.__data)&&"function"==typeof n.hasOwnProperty?n.hasOwnProperty(this.getName()):void 0),this+".setData",'data needs to be PlainObject or have a property "'+this.getName()+'".',{data:e,opts:this.opts}),this.setDataOnOthers()&&this.callOnOthers("setData",this.__data,i),i&&this.initData(),this},DataField.prototype.setDataOnOthers=function(){return!this._data_not_for_others},DataField.prototype.hide=function(e){return null==e&&(e=!1),this.addClass("cui-data-field-hidden"),this.callOnOthers("hide"),e&&t.Events.trigger({type:"form-check-row-visibility",node:this.DOM,info:{element:this}}),this},DataField.prototype.show=function(e){return null==e&&(e=!1),this.removeClass("cui-data-field-hidden"),this.callOnOthers("show"),e&&t.Events.trigger({type:"form-check-row-visibility",node:this.DOM,info:{element:this}}),this},DataField.prototype.isRendered=function(){return this.__isRendered},DataField.prototype.render=function(){return t.util.assert(!this.__isRendered,this.__cls+".render","Cannot be called when already rendered.",{opts:this.opts,dataField:this}),this.__isRendered=!0,this.isDisabled()&&this.disable(),this.isHidden()&&this.hide(!0),this.callOnOthers("render"),"function"==typeof this._onRender&&this._onRender(this),this},DataField.prototype.displayValue=function(){return t.util.assert(!this.isDestroyed(),this.__cls+".displayValue","DataField already destroyed, cannot display value.",{data_field:this}),t.util.assert(this.__isRendered,this.__cls+".displayValue","not rendered yet, cannot display.",{opts:this.opts,data:this.__data}),this.checkChanged(),this.callOnOthers("displayValue")},DataField.prototype.start=function(){return t.util.assert(!this.__isRendered,this.__cls+".start","Cannot be called when already rendered.",{opts:this.opts,dataField:this}),this.__initDisabled(),this.render(),this.displayValue(),this},DataField.prototype.getAllDataFields=function(t){return null==t&&(t=!1),this.getDataFields(!0)},DataField.prototype.getDataFields=function(t,e){return null==t&&(t=!1),null==e&&(e=[]),(this.isDataField()||t)&&e.push(this),this.callOnOthers("getDataFields",t,e),e},DataField.prototype.renderAsBlock=function(){return!!this._render_as_block},DataField.prototype.isDataField=function(){return this.hasData()},DataField.prototype.callOnOthers=function(){var e,i,n,r,s,a;for(n=arguments[0],e=2<=arguments.length?o.call(arguments,1):[],a=this.getFields?this.getFields(n).slice(0):[],r=0,s=a.length;r<s;r++){if(!(i=a[r])||!t.util.isFunction(i[n]))return t.util.assert(!1,"CUI.DataField.callOnOthers",'Field found in other fields has no Function "'+n+'".',{field:i,other_fields:a}),this;i[n].apply(i,e)}return this},DataField.prototype.getData=function(){return this.__data},DataField.prototype.hasData=function(){return!(t.util.isEmpty(this._name)||!this.__data)},DataField.prototype.hasUserData=function(e){return this._name&&!t.util.isEmpty(e[this._name])},DataField.prototype.getArrayFromOpt=function(e,i,n){var o,r;return null==n&&(n=!1),r=this["_"+e],t.util.isFunction(r)?(o=r.call(this,this,i),t.util.assert(t.util.isArray(o)||t.util.isPromise(o)&&n,this.__cls+".getArrayFromOpt","opts."+e+"(dataField) did not return Array or Promise.",{options:o,opts:this.opts})):o=r,o},DataField.prototype.getName=function(){return this._name},DataField.prototype.getDefaultValue=function(){},DataField.prototype.getValue=function(){return this.__data[this._name]},DataField.prototype.checkValue=function(){throw new Error(this.__cls+".checkValue is unimplemtented.")},DataField.prototype.setValue=function(e,i){var n,o;if(null==i&&(i={}),!this.hasData())return this.isRendered()&&this.displayValue(),this;if(e===this.getValue())return this;try{this.checkValue(e,i)}catch(i){if(!((n=i)instanceof t.CheckValueError))throw n;throw new Error(this.__cls+".setValue: "+e+", Error: "+n)}return!1!==(o=i.no_trigger)&&!0!==o&&(i.no_trigger=!0),this.storeValue(e,i),this.isRendered()&&this.displayValue(),this},DataField.prototype.getInitValue=function(){var t;if(t=this.getUndo())return t.values[0]},DataField.prototype.getLastValue=function(){var e;if(t.util.assert(this._undo_support,"DataField.getLastValue","Needs opts.undo_support to be set.",{opts:this.opts}),e=this.getUndo())return e.values[e.idx-1]},DataField.prototype.reset=function(){var t;return(t=this.getUndo())&&(this.__data[this._name]=t.values[0],t.values.splice(1),t.idx=0,this.displayValue(),this.triggerDataChanged({action:"reset",undo_idx:0})),this},DataField.prototype.undo=function(){var t;return(t=this.getUndo())?0!==t.idx&&(this.__data[this._name]=t.values[--t.idx],this.displayValue(),this.triggerDataChanged({action:"undo",undo_idx:t.idx}),!0):null},DataField.prototype.redo=function(){var t;return(t=this.getUndo())?t.idx!==t.values.length-1&&(this.__data[this._name]=t.values[++t.idx],this.displayValue(),this.triggerDataChanged({action:"redo",undo_idx:t.idx}),!0):null},DataField.prototype.goto=function(e){var i;return(i=this.getUndo())?!t.util.isUndef(i.values[e])&&(i.idx=e,this.__data[this._name]=i.values[i.idx],this.displayValue(),this.triggerDataChanged({action:"goto",undo_idx:e}),!0):null},DataField.prototype.initData=function(){var e;if("function"==typeof this._onDataInit&&this._onDataInit(this,this.__data),this.hasData())return this.initValue(),e=this.getUndo(),t.util.isPlainObject(e)&&t.util.isEmptyObject(e)&&(e.values=[this.getValue()],e.idx=0),t.util.isUndef(this.getCheckChangedValue())&&this.setCheckChangedValue(e?this.getInitValue():this.getValue()),this.setDataOnOthers()&&this.callOnOthers("initData"),this},DataField.prototype.initValue=function(){return t.util.isUndef(this.__data[this._name])&&(this.__data[this._name]=this.getDefaultValue()),this},DataField.prototype.setCheckChangedValue=function(e){if(t.util.assert(this.hasData(),this.__cls+".setCheckChangedValue","Cannot set without data.",{opts:this.opts,value:e,dataField:this}),!1!==this._check_changed)return this.__checkChangedValue=JSON.stringify(e)},DataField.prototype.getCheckChangedValue=function(){if(!1!==this._check_changed)return t.util.assert(this.hasData(),this.__cls+".getCheckChangedValue","No data set.",{opts:this.opts}),this.__checkChangedValue},DataField.prototype.getUndo=function(){var e;return!(!this.hasData()||!1===this._undo_support)&&(t.util.isUndef(this.__data._undo)&&(this.__data._undo={}),t.util.isUndef(e=this.__data._undo[this._name])&&(e=this.__data._undo[this._name]={}),e)},DataField.prototype.storeValue=function(t,e){var i,n;return null==e&&(e={}),!!this.hasData()&&(i=!0!==e.initial_activate&&!0!==e.no_store,i&&(n=this.getUndo())&&(n.values[++n.idx]=t,n.values.splice(n.idx+1)),this.__data[this._name]=t,this.checkChanged(),i&&!e.no_trigger&&this.triggerDataChanged({action:"store",undo_idx:null!=n?n.idx:void 0}),this)},DataField.prototype.triggerDataChanged=function(e){return null==e&&(e={}),e.element=this,t.Events.trigger({type:"data-changed",node:this.DOM,info:e})},DataField.prototype.isChanged=function(){if(this.hasData()&&!1!==this._check_changed)return this.getCheckChangedValue()!==JSON.stringify(this.getValue())},DataField.prototype.checkChanged=function(){if(!1!==this._check_changed)return this.isChanged()?this.addClass("changed"):this.removeClass("changed"),this},DataField.prototype.getChangedMarker=function(){if(!1!==this._mark_changed&&!1!==this._check_changed)return this.checkChanged(),t.dom.div(t.DataField.changed_marker_css_class)},DataField.prototype.destroy=function(){var t;return this.remove(!0),null!=(t=this.__tooltip)&&t.destroy(),DataField.__super__.destroy.call(this)},DataField.new=function(e,i,n){var o,r,s,a,l;if(null==i&&(i=[]),null==n&&(n={}),e instanceof t.DataField)return e;t.util.assert(t.util.isPlainObject(e),"CUI.DataField.new","field needs to be PlainObject.",{field:e,delete_keys:i,default_data:n}),r={};for(s in e)l=e[s],"type"!==s?i.indexOf(s)>-1||(r[s]=l):a=l;for(s in n)l=n[s],r.hasOwnProperty(s)||(r[s]=l);return t.util.assert(t.util.isFunction(a),"CUI.DataField.new",'type is unknown: "'+a+'".',{field:e}),o=new a(r),t.util.assert(o instanceof t.DataField,"CUI.DataField.new","field.type needs to be of class DataField, but is "+t.util.getObjectClass(o)+".",{field:e}),o},DataField}(t.DOMElement),t.Events.registerEvent({type:"data-changed",bubble:!0})}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.DataFieldInput=function(i){function DataFieldInput(e){this.opts=null!=e?e:{},DataFieldInput.__super__.constructor.call(this,this.opts),t.dom.setAttributeMap(this.DOM,this._attr),this.addClass("cui-data-field-input")}return e(DataFieldInput,i),DataFieldInput.prototype.initOpts=function(){return DataFieldInput.__super__.initOpts.call(this),this.addOpts({group:{check:String},attr:{default:{},check:"PlainObject"}})},DataFieldInput.prototype.getGroup=function(){return this._group},DataFieldInput.prototype.isResizable=function(){return!0},DataFieldInput}(t.DataField)}).call(e,i(0))},function(t,e,i){(function(t){var e=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1};t.Deferred=function(){function Deferred(){this.__state="pending",this.__callbacks=[],this.notify=function(t){return function(){return t.__notify.apply(t,arguments)}}(this),this.resolve=function(t){return function(){return t.__resolve.apply(t,arguments)}}(this),this.reject=function(t){return function(){return t.__reject.apply(t,arguments)}}(this),this.__uniqueId=t.Deferred.uniqueId++,this.__runningCallbacks=null,this.__finished_args=null}return Deferred.prototype.getUniqueId=function(){return this.__uniqueId},Deferred.prototype.__callback=function(t,i){var n,o,r,s;for(this.__runningCallbacks=!0,o=0;o<this.__callbacks.length;)n=this.__callbacks[o],r=n.type,e.call(t,r)>=0&&(n.func.apply(this,i),"done"===(s=n.type)||"always"===s||"fail"===s)?this.__callbacks.splice(o,1):o++;return this.__runningCallbacks=!1,this},Deferred.prototype.__register=function(e,i){if(t.util.assert(t.util.isFunction(i),"Deferred."+e+": Callback needs to be Function.",{callback:i}),!("rejected"===this.__state&&"done"===e||"resolved"===this.__state&&"fail"===e)){if(this.__callbacks.push({type:e,func:i}),"pending"!==this.__state&&!this.__runningCallbacks)switch(this.__state){case"resolved":this.__callback(["done","always"],this.__finished_args);break;case"rejected":this.__callback(["fail","always"],this.__finished_args)}return this}},Deferred.prototype.done=function(t){return this.__register("done",t),this},Deferred.prototype.fail=function(t){return this.__register("fail",t),this},Deferred.prototype.always=function(t){return this.__register("always",t),this},Deferred.prototype.progress=function(t){return this.__register("progress",t),this},Deferred.prototype.__notify=function(){return t.util.assert("pending"===this.__state,"CUI.Deferred.notify","Cannot notify state "+this.__state+"."),this.__callback(["progress"],arguments),this},Deferred.prototype.__resolve=function(){return t.util.assert("pending"===this.__state,"CUI.Deferred.resolve","Cannot resolve state "+this.__state+"."),this.__finished_args=arguments,this.__state="resolved",this.__callback(["done","always"],arguments),this},Deferred.prototype.__reject=function(){return t.util.assert("pending"===this.__state,"CUI.Deferred.reject","Cannot reject state "+this.__state+"."),this.__finished_args=arguments,this.__state="rejected",this.__callback(["fail","always"],arguments),this},Deferred.prototype.state=function(){return this.__state},Deferred.prototype.promise=function(){return new t.Promise(this)},Deferred.uniqueId=0,Deferred}()}).call(e,i(0))},function(t,e,i){(function(t){t.Promise=function(){function Promise(e){this.__deferred=e,t.util.assert(this.__deferred instanceof t.Deferred,"new Promise","parameter needs to be instanceof CUI.Deferred",{parameter:this.__deferred})}return Promise.prototype.done=function(){return this.__deferred.done.apply(this.__deferred,arguments),this},Promise.prototype.fail=function(){return this.__deferred.fail.apply(this.__deferred,arguments),this},Promise.prototype.always=function(){return this.__deferred.always.apply(this.__deferred,arguments),this},Promise.prototype.progress=function(){return this.__deferred.progress.apply(this.__deferred,arguments),this},Promise.prototype.state=function(){return this.__deferred.state.apply(this.__deferred,arguments)},Promise.prototype.getUniqueId=function(){return this.__deferred.getUniqueId()},Promise}()}).call(e,i(0))},function(t,e,i){(function(t){t.decide=function(e){return function(e){var i;return i=new t.Deferred,t.util.isPromise(e)?(e.done(i.resolve),e.fail(i.reject)):!1===e?i.reject(!1):i.resolve(e),i.promise()}}()}).call(e,i(0))},function(t,e,i){(function(t){t.whenAll=function(e){return function(){var i;return i=[!1],i.push.apply(i,arguments),t.__when.apply(e,i)}}(this),t.when=function(e){return function(){var i;return i=[!0],i.push.apply(i,arguments),t.__when.apply(e,i)}}(this),t.__when=function(e){return function(){var e,i,n,o,r,s,a,l,u,c,h,d,p,_,f,m,g,y,v;for(y=[],n=function(e,i){t.util.assert(t.util.isPromise(e)||t.util.isDeferred(e),"CUI.when","arg["+i+"] needs to be instanceof CUI.Promise or CUI.Deferred.",{arg:e}),y.push(e)},v=null,h=c=0,_=arguments.length;c<_;h=++c)if(o=arguments[h],0!==h)if(o instanceof Array)for(i=d=0,f=o.length;d<f;i=++d)e=o[i],n(e,h+"["+i+"]");else n(o,h);else v=o;if(0===y.length)return t.resolvedPromise();for(r=new t.Deferred,l=[],s=0,a=v?"done":"always",u=function(t,e){return t[a](function(){var i,n,a;if(s++,v&&arguments.length<=1)switch(arguments.length){case 0:l[e]=void 0;break;case 1:l[e]=arguments[0]}else{for(i=[],n=0,a=arguments.length;n<a;n++)o=arguments[n],i.push(o);l[e]=v?i:{state:t.state(),args:i}}s===y.length&&r.resolve.apply(r,l)}),v&&t.fail(function(){"rejected"!==r.state()&&r.reject.apply(r,arguments)}),t.progress(function(){"pending"===r.state()&&r.notify.apply(r,arguments)})},h=p=0,m=y.length;p<m;h=++p)g=y[h],u(g,h);return r.promise()}}()}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.DragDropSelect=function(i){function DragDropSelect(t){this.opts=null!=t?t:{},DragDropSelect.__super__.constructor.call(this,this.opts),this.init()}return e(DragDropSelect,i),DragDropSelect.prototype.initOpts=function(){return DragDropSelect.__super__.initOpts.call(this),this.addOpts({element:{mandatory:!0,check:function(e){return t.dom.isNode(e)}}}),this},DragDropSelect.prototype.readOpts=function(){var e;return DragDropSelect.__super__.readOpts.call(this),this.cls=t[this.__cls].cls,t.util.assert(this.cls,"new "+this.__cls,this.__cls+".cls is not set.",{opts:this.opts}),this.element=this._element,null!=(e=t.DragDropSelect.getInstance(this.element,this.cls))&&e.destroy(),t.dom.data(this.element,"drag-drop-select-"+this.cls,this),t.dom.addClass(this.element,this.getClass())},DragDropSelect.prototype.getClass=function(){return"cui-drag-drop-select cui-drag-drop-select-"+this.cls},DragDropSelect.prototype.destroy=function(){return t.dom.removeClass(this.element,this.getClass()),t.dom.removeData(this.element,"drag-drop-select-"+this.cls),t.Events.ignore({instance:this}),DragDropSelect.__super__.destroy.call(this)},DragDropSelect.prototype.init=function(){throw"overwrite Drag.init"},DragDropSelect.destroy=function(t,e){var i;return null==e&&(e=this.cls),i=this.getInstance(t,e),null!=i?i.destroy():void 0},DragDropSelect.getInstance=function(e,i){return null==i&&(i=this.cls),t.util.assert("DragDropSelect"!==i,"DragDropSelect.getInstance","cls cannot be DragDropSelect"),t.dom.data(e,"drag-drop-select-"+i)},DragDropSelect}(t.Element),t.ready(function(e){return function(){return t.Events.registerEvent({type:"cui-drop",bubble:!0}),t.Events.registerEvent({type:"cui-dragenter",bubble:!0}),t.Events.registerEvent({type:"cui-dragend",bubble:!0}),t.Events.registerEvent({type:"cui-dragleave",bubble:!0}),t.Events.registerEvent({type:"cui-dragover",bubble:!0}),t.Events.registerEvent({type:"dragover-scroll",bubble:!0,eventClass:t.DragoverScrollEvent}),t.Events.listen({type:"dragover-scroll",node:document,selector:"div.cui-drag-scroll,div.cui-drag-drop-select",call:function(e,i){var n,o,r,s,a,l,u,c,h,d,p,_,f,m,g,y,v,b;if(h=e.getOriginalEvent(),y=.01*e.getCount()+.9,b=30,a=e.getCurrentTarget(),s=t.dom.getDimensions(a),t.dom.is(a,"body,html")?(l=!0,d={top:0,left:0,bottom:0,right:0,height:s.height,width:s.width}):d=s.clientBoundingRect,v=0,g=0,a.scrollWidth>d.width&&(a.scrollLeft,n=h.clientX(),0<(p=r=n-d.left)&&p<b?g=-(b-r)*y:0<(_=r=d.right-n-s.verticalScrollbarWidth)&&_<b&&(g=(b-r)*y),e.stopPropagation()),a.scrollHeight>d.height&&(a.scrollTop,o=h.clientY(),0<(f=r=o-d.top)&&f<b?v=-(b-r)*y:0<(m=r=d.bottom-o-s.horizontalScrollbarHeight)&&m<b&&(v=(b-r)*y)),v||g)return c=a.scrollTop,u=a.scrollLeft,v&&(a.scrollTop+=v),g&&(a.scrollLeft+=g),l&&(h.scrollPageY||(h.scrollPageY=0),h.scrollPageY+=a.scrollTop-c,h.scrollPageX||(h.scrollPageX=0),h.scrollPageX+=h.scrollLeft-u),e.stopPropagation()}})}}())}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty,n=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1};t.Draggable=function(i){function Draggable(){return Draggable.__super__.constructor.apply(this,arguments)}return e(Draggable,i),Draggable.cls="draggable",Draggable.prototype.initOpts=function(){return Draggable.__super__.initOpts.call(this),this.addOpts({dragClass:{default:"cui-dragging",check:String},helper:{default:"clone",check:function(e){return"clone"===e||t.util.isElement(e)||t.util.isFunction(e)||null}},helper_contain_element:{check:function(e){return t.util.isElement(e)}},helper_set_pos:{check:Function},get_cursor:{check:Function},support_touch:{check:Boolean},dragend:{check:Function},dragstop:{check:Function},dragstart:{check:Function},dragging:{check:Function},create:{default:function(){return!0},check:Function},axis:{check:["x","y"]},threshold:{default:2,check:function(t){return t>=0}},selector:{check:function(e){return function(e){return t.util.isString(e)||t.util.isFunction(e)}}()}})},Draggable.prototype.readOpts=function(){return Draggable.__super__.readOpts.call(this),this.__autoRepeatTimeout=null,this.supportTouch()?this.__event_types={start:["mousedown","touchstart"],end:["mouseup","touchend"],move:["mousemove","touchmove"]}:this.__event_types={start:["mousedown"],end:["mouseup"],move:["mousemove"]},this},Draggable.prototype.getClass=function(){return this._selector?Draggable.__super__.getClass.call(this):"cui-draggable "+Draggable.__super__.getClass.call(this)},Draggable.prototype.supportTouch=function(){return!!this._support_touch},Draggable.prototype.__killTimeout=function(){return this.__autoRepeatTimeout&&(t.clearTimeout(this.__autoRepeatTimeout),this.__autoRepeatTimeout=null),this},Draggable.prototype.__cleanup=function(){var e;this.__killTimeout(),this.__ref&&(t.Events.ignore({instance:this.__ref}),this.__ref=null),(null!=(e=t.globalDrag)?e.instance:void 0)===this&&(t.globalDrag=null)},Draggable.prototype.destroy=function(){var e;return t.dom.removeClass(this.element,"no-user-select"),Draggable.__super__.destroy.call(this),t.dom.remove(null!=(e=t.globalDrag)?e.helperNode:void 0),this.__cleanup(),this},Draggable.prototype.init=function(){return t.util.assert(!this._helper_contain_element||t.dom.closest(this._element,this._helper_contain_element),"new CUI.sDraggable","opts.helper_contain_element needs to be parent of opts.element",{opts:this.opts}),t.dom.addClass(this.element,"no-user-select"),t.Events.listen({type:this.__event_types.start,node:this.element,instance:this,selector:this._selector,call:function(e){return function(i){var n,o,r,s,a;if(!(i.getButton()>0&&"mousedown"===i.getType()||t.globalDrag)){if(r=t.util.elementGetPosition(t.util.getCoordinatesFromEvent(i),i.getTarget()),o=t.dom.getDimensions(i.getTarget()),o.clientWidthScaled>0&&r.left-o.scrollLeftScaled>o.clientWidthScaled)return void console.warn("Mousedown on a vertical scrollbar, not starting drag.");if(o.clientHeightScaled>0&&r.top-o.scrollTopScaled>o.clientHeightScaled)return void console.warn("Mousedown on a horizontal scrollbar, not starting drag.");s=i.getCurrentTarget(),a=t.dom.getDimensions(s),t.dom.isInDOM(s)&&0!==a.clientWidth&&0!==a.clientHeight&&(t.dom.closest(i.getTarget(),"input,textarea,select")||(n=s,e.init_drag(i,n)))}}}(this)})},Draggable.prototype.init_drag=function(e,i){var n,o,r,s,a,l,u,c,h;if(i&&(t.globalDrag="function"==typeof this._create?this._create(e,i):void 0,!1!==t.globalDrag)){(t.util.isNull(t.globalDrag)||!0===t.globalDrag)&&(t.globalDrag={}),t.util.assert(t.util.isPlainObject(t.globalDrag),"CUI.Draggable.init_drag","returned data must be a plain object",{data:t.globalDrag}),u=t.util.getCoordinatesFromEvent(e),c=t.util.elementGetPosition(u,i),s={$source:i,startEvent:e,startCoordinates:u,instance:this,startScroll:{top:i.scrollTop,left:i.scrollLeft},start:c,threshold:this._threshold};for(a in s)h=s[a],t.globalDrag[a]=h;e.stopPropagation(),this.before_drag(e,i),this.__ref=new t.Dummy,n=0,l=null,o=function(e){return function(){var i;return i=l.getPointTarget()||l.getTarget(),t.Events.trigger({type:"dragover-scroll",node:i,count:n,originalEvent:l}),n+=1,e.__killTimeout(),e.__autoRepeatTimeout=t.setTimeout({ms:100,track:!1,call:o})}}(this),t.Events.listen({node:document,type:this.__event_types.move,instance:this.__ref,call:function(e){return function(n){var r,s,a;if(t.globalDrag&&(n.preventDefault(),a=t.browser.firefox?n.getPointTarget():n.getTarget(),i=a,!t.globalDrag.ended)){switch(r=t.util.getCoordinatesFromEvent(n),s={x:r.pageX-t.globalDrag.startCoordinates.pageX,y:r.pageY-t.globalDrag.startCoordinates.pageY,eventPoint:r},e.get_axis()){case"x":s.y=0;break;case"y":s.x=0}s.bare_x=s.x,s.bare_y=s.y,s.x+=t.globalDrag.$source.scrollLeft-t.globalDrag.startScroll.left,s.y+=t.globalDrag.$source.scrollTop-t.globalDrag.startScroll.top,(Math.abs(s.x)>=t.globalDrag.threshold||Math.abs(s.y)>=t.globalDrag.threshold||t.globalDrag.dragStarted)&&(t.globalDrag.dragDiff=s,t.globalDrag.dragStarted||(t.globalDrag.startEvent.preventDefault(),e.__startDrag(n,i,s),e._get_cursor?document.body.setAttribute("data-cursor",e._get_cursor(t.globalDrag)):document.body.setAttribute("data-cursor",e.getCursor())),l=n,o(),e.do_drag(n,i,s),"function"==typeof e._dragging&&e._dragging(n,t.globalDrag,s))}}}(this)}),r=function(e){return function(i,n){var o,r,s;null==n&&(n=!1),r=t.globalDrag.$source,s=t.dom.parents(r),t.globalDrag.ended=!0,document.body.removeAttribute("data-cursor"),n?(t.globalDrag.stopped=!0,e.stop_drag(i),"function"==typeof e._dragstop&&e._dragstop(i,t.globalDrag,e)):(e.end_drag(i),"function"==typeof e._dragend&&e._dragend(i,t.globalDrag,e)),e.isDestroyed()||(o=t.globalDrag.noClickKill,e.__cleanup(),o||function(){var e,i,n,o,a;for(a=t.dom.parents(r),i=e=0,n=s.length;e<n;i=++e)if(o=s[i],a[i]!==o)return!1;return!0}&&t.dom.isInDOM(i.getTarget())&&t.Events.listen({type:"click",capture:!0,only_once:!0,node:window,call:function(t){return t.stop()}}))}}(this),t.Events.listen({node:document,type:["keyup"],capture:!0,instance:this.__ref,call:function(e){return function(i){return t.globalDrag.dragStarted?27===i.keyCode()?(r(i,!0),i.stop()):void 0:void e.__cleanup()}}(this)}),t.Events.listen({node:document,type:this.__event_types.end,capture:!0,instance:this.__ref,call:function(e){return function(i){if(t.globalDrag)return t.globalDrag.dragStarted?(r(i),i.stop()):void e.__cleanup()}}(this)})}},Draggable.prototype.getCursor=function(){return"grabbing"},Draggable.prototype.__startDrag=function(e,i,n){return"function"==typeof this._dragstart&&this._dragstart(e,t.globalDrag),this.init_helper(e,i,n),t.dom.addClass(t.globalDrag.$source,this._dragClass),this.start_drag(e,i,n),t.globalDrag.dragStarted=!0},Draggable.prototype.before_drag=function(){},Draggable.prototype.start_drag=function(t,e,i){},Draggable.prototype.do_drag=function(e,i,n){this.position_helper(e,i,n),t.globalDrag.dragoverTarget&&t.globalDrag.dragoverTarget!==i&&(t.Events.trigger({type:"cui-dragleave",node:t.globalDrag.dragoverTarget,info:{globalDrag:t.globalDrag,originalEvent:e}}),t.globalDrag.dragoverTarget=null),t.globalDrag.dragoverTarget||(t.globalDrag.dragoverTarget=i,t.Events.trigger({type:"cui-dragenter",node:t.globalDrag.dragoverTarget,info:{globalDrag:t.globalDrag,originalEvent:e}})),t.Events.trigger({node:t.globalDrag.dragoverTarget,type:"cui-dragover",info:{globalDrag:t.globalDrag,originalEvent:e}})},Draggable.prototype.cleanup_drag=function(e){if(!this.isDestroyed())return t.dom.removeClass(t.globalDrag.$source,this._dragClass),t.dom.remove(t.globalDrag.helperNode)},Draggable.prototype.stop_drag=function(t){return this.__finish_drag(t),this.cleanup_drag(t)},Draggable.prototype.__finish_drag=function(e){if(t.globalDrag.dragoverTarget)return t.Events.trigger({node:t.globalDrag.dragoverTarget,type:"cui-dragleave",info:{globalDrag:t.globalDrag,originalEvent:e}}),t.globalDrag.stopped||t.Events.trigger({type:"cui-drop",node:t.globalDrag.dragoverTarget,info:{globalDrag:t.globalDrag,originalEvent:e}}),t.Events.trigger({node:t.globalDrag.dragoverTarget,type:"cui-dragend",info:{globalDrag:t.globalDrag,originalEvent:e}}),t.globalDrag.dragoverTarget=null,this},Draggable.prototype.end_drag=function(t){if(!this.isDestroyed())return this.__finish_drag(t),this.cleanup_drag(t),this},Draggable.prototype.get_helper_pos=function(e,i,n){return{top:t.globalDrag.helperNodeStart.top+n.y,left:t.globalDrag.helperNodeStart.left+n.x,width:t.globalDrag.helperNodeStart.width,height:t.globalDrag.helperNodeStart.height}},Draggable.prototype.get_helper_contain_element=function(){return this._helper_contain_element},Draggable.prototype.position_helper=function(e,i,n){var o,r,s,a,l,u;t.globalDrag.helperNode&&(s=this.get_helper_pos(e,t.globalDrag,n),u={x:s.left,y:s.top,w:s.width,h:s.height},r=this.get_helper_contain_element(e,i,n),r?(o=t.dom.getDimensions(r),0!==o.clientWidth&&0!==o.clientHeight||console.warn("Draggable[position_helper]: Containing element has no dimensions.",r),t.Draggable.limitRect(u,{min_x:o.viewportLeft+o.borderLeftWidth,max_x:o.viewportRight-o.borderRightWidth-t.globalDrag.helperNodeStart.marginHorizontal,min_y:o.viewportTop+o.borderTopWidth,max_y:o.viewportBottom-o.borderBottomWidth-t.globalDrag.helperNodeStart.marginVertical})):(o=t.globalDrag.helperNodeStart.body_dim,t.Draggable.limitRect(u,{min_x:o.borderLeftWidth,max_x:o.scrollWidth-o.borderRightWidth-t.globalDrag.helperNodeStart.marginHorizontal,min_y:o.borderTopWidth,max_y:o.scrollHeight-o.borderBottomWidth-t.globalDrag.helperNodeStart.marginVertical})),s.top=u.y,s.left=u.x,s.dragDiff={x:s.left-t.globalDrag.helperNodeStart.left,y:s.top-t.globalDrag.helperNodeStart.top},s.width!==t.globalDrag.helperNodeStart.width&&(l=s.width),s.height!==t.globalDrag.helperNodeStart.height&&(a=s.height),t.dom.setStyle(t.globalDrag.helperNode,{transform:t.globalDrag.helperNodeStart.transform+" translateX("+s.dragDiff.x+"px) translateY("+s.dragDiff.y+"px)"}),t.dom.setDimensions(t.globalDrag.helperNode,{borderBoxWidth:l,borderBoxHeight:a}))},Draggable.prototype.getCloneSourceForHelper=function(){return t.globalDrag.$source},Draggable.prototype.get_axis=function(){return this._axis},Draggable.prototype.get_helper=function(t,e,i){return this._helper},Draggable.prototype.get_init_helper_pos=function(t,e,i){return null==i&&(i={top:0,left:0}),{top:e.startCoordinates.pageY-i.top,left:e.startCoordinates.pageX-i.left}},Draggable.prototype.init_helper=function(e,i,n){var o,r,s,a,l,u,c;if((s=this.get_helper(e,t.globalDrag,n))&&("clone"===s?(o=this.getCloneSourceForHelper(),a=o.cloneNode(!0),a.classList.remove("cui-selected"),l={top:t.globalDrag.start.top,left:t.globalDrag.start.left}):t.util.isFunction(s)?(a=t.globalDrag.helperNode=s(t.globalDrag),u=null):a=t.globalDrag.helperNode=s,a))return t.globalDrag.helperNode=a,t.dom.addClass(a,"cui-drag-drop-select-helper"),document.body.appendChild(a),c=this.get_init_helper_pos(a,t.globalDrag,l),t.dom.setStyle(a,c),"clone"===s&&(u=t.dom.getDimensions(o),t.dom.setDimensions(a,{marginBoxWidth:u.marginBoxWidth,marginBoxHeight:u.marginBoxHeight})),r=t.dom.getDimensions(a),c.width=r.borderBoxWidth,c.height=r.borderBoxHeight,c.marginTop=r.marginTop,c.marginLeft=r.marginLeft,c.marginVertical=r.marginVertical,c.marginHorizontal=r.marginHorizontal,c.transform=r.computedStyle.transform,"none"===c.transform&&(c.transform=""),c.body_dim=t.dom.getDimensions(document.body),t.globalDrag.helperNodeStart=c},Draggable.limitRect=function(e,i,o){var r,s,a,l,u,c,h,d,p,_;null==o&&(o={}),e.fix=e.fix||[];for(a in o)p=o[a],t.util.isUndef(e[a])&&(e[a]=p);for(h=["min_w","max_w","min_h","max_h","min_x","max_x","min_y","max_y"],s=0,u=h.length;s<u;s++)l=h[s],_=i[l],t.util.isUndef(_)||(t.util.assert(!isNaN(_),t.util.getObjectClass(this)+".limitRect","key "+l+" in pos isNaN",{pos:e,defaults:o,limitRect:i}),d=l.substring(4),c=l.substring(0,3),"max_x"===l&&(_-=e.w),"max_y"===l&&(_-=e.h),r=e[d]-_,"min"===c&&r>=0||"max"===c&&r<=0||("y"===d&&n.call(e.fix,"n")>=0?e.h-=r:"x"===d&&n.call(e.fix,"w")>=0?e.w-=r:(e[d]-=r,"h"===d&&n.call(e.fix,"s")>=0&&(e.y+=r),"w"===d&&n.call(e.fix,"e")>=0&&(e.x+=r),"x"===d&&n.call(e.fix,"e")>=0&&(e.w+=r),"y"===d&&n.call(e.fix,"s")>=0&&(e.h+=r))));return e},Draggable}(t.DragDropSelect)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.DragoverScrollEvent=function(i){function DragoverScrollEvent(){return DragoverScrollEvent.__super__.constructor.apply(this,arguments)}return e(DragoverScrollEvent,i),DragoverScrollEvent.prototype.initOpts=function(){return DragoverScrollEvent.__super__.initOpts.call(this),this.addOpts({count:{mandatory:!0,check:function(e){return function(e){return t.util.isPosInt(e)}}()},originalEvent:{mandatory:!0,check:t.Event}})},DragoverScrollEvent.prototype.getCount=function(){return this._count},DragoverScrollEvent.prototype.getOriginalEvent=function(){return this._originalEvent},DragoverScrollEvent}(t.Event)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.Dragscroll=function(i){function Dragscroll(){return Dragscroll.__super__.constructor.apply(this,arguments)}return e(Dragscroll,i),Dragscroll.prototype.initOpts=function(){return Dragscroll.__super__.initOpts.call(this),this.removeOpt("helper"),this.addOpts({scroll_element:{check:function(e){return t.util.isElement(e)}}})},Dragscroll.prototype.readOpts=function(){return Dragscroll.__super__.readOpts.call(this),this._scroll_element?this.__scroll_element=this._scroll_element:this.__scroll_element=this._element},Dragscroll.prototype.supportTouch=function(){return void 0===this._support_touch||Dragscroll.__super__.supportTouch.call(this)},Dragscroll.prototype.start_drag=function(){return this.__scroll={top:this.__scroll_element.scrollTop,left:this.__scroll_element.scrollLeft}},Dragscroll.prototype.do_drag=function(t,e,i){var n,o;return o=this.__scroll.top-i.bare_y,n=this.__scroll.left-i.bare_x,this.__scroll_element.scrollTop=o,this.__scroll_element.scrollLeft=n},Dragscroll}(t.Draggable)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.Droppable=function(i){function Droppable(){return Droppable.__super__.constructor.apply(this,arguments)}return e(Droppable,i),Droppable.cls="droppable",Droppable.prototype.initOpts=function(){return Droppable.__super__.initOpts.call(this),this.addOpts({accept:{check:Function},drop:{default:function(e){return function(e,i){var n;return n=i.dropTargetPos||"on",t.alert({markdown:!0,text:"You dropped me **"+n+"**: "+t.dom.getAttribute(i.dropTarget,"class")})}}(),check:Function},hoverClass:{default:"cui-droppable",check:String},dropHelper:{mandatory:!0,default:!1,check:Boolean},targetHelper:{mandatory:!0,default:!1,check:Boolean},selector:{check:function(e){return function(e){return t.util.isString(e)||t.util.isFunction(e)}}()}})},Droppable.prototype.accept=function(t,e){return"function"==typeof this._accept?this._accept(t,e):void 0},Droppable.prototype.destroy=function(){return this.removeHelper(),Droppable.__super__.destroy.call(this)},Droppable.prototype.readOpts=function(){Droppable.__super__.readOpts.call(this),this._targetHelper&&t.util.assert(this._selector,"new CUI.Droppable","opts.targetHelper needs opts.selector to be set.",{opts:this.opts}),this._dropHelper&&(t.util.assert(!this._selector||this._targetHelper,"new CUI.Droppable","opts.dropHelper does only work without opts.selector or with opts.targetHelper and opts.selector. needs opts.selector to be set.",{opts:this.opts}),this.__dropHelper=t.dom.element("DIV",{class:"cui-droppable-drop-helper"}))},Droppable.prototype.removeHelper=function(){var e,i,n,o;if(this.resetMargin(),this.__selectedTarget&&(t.dom.removeClass(this.__selectedTarget,this._hoverClass),this.__selectedTarget=null),this.__dropHelper&&t.dom.remove(this.__dropHelper),this._targetHelper)for(o=t.dom.findElements(this._element,this._selector),i=0,n=o.length;i<n;i++)e=o[i],e.classList.remove("cui-droppable-target-helper");return this.__dropTarget=void 0,this.__dropTargetPos=void 0},Droppable.prototype.resetMargin=function(){if(this.__resetMargin)return this.__resetMargin.classList.remove(this.__resetMargin.__target_helper_class),delete this.__resetMargin.__target_helper_class,delete this.__resetMargin,delete this.__saveZoneDims},Droppable.prototype.insideSaveZone=function(t){var e,i,n,o,r,s,a;if(!this.__saveZoneDims)return!1;for(e=5,o=this.__saveZoneDims,i=0,n=o.length;i<n;i++)if(a=o[i],a.viewportTopMargin-e<=(r=t.pageY)&&r<=a.viewportBottomMargin+e&&a.viewportLeftMargin-e<=(s=t.pageX)&&s<=a.viewportRightMargin+e)return!0;return!1},Droppable.prototype.syncDropHelper=function(){var e,i;return e=t.dom.getDimensions(this._element),document.body.appendChild(this.__dropHelper),t.dom.setDimensions(this.__dropHelper,{contentBoxWidth:e.borderBoxWidth,contentBoxHeight:e.borderBoxHeight}),i=t.dom.getDimensions(this.__dropHelper),t.dom.setStyle(this.__dropHelper,{position:"absolute",top:e.viewportTop-i.borderTopWidth-i.marginTop,left:e.viewportLeft-i.borderLeftWidth-i.marginLeft})},Droppable.prototype.syncTargetHelper=function(e,i){var n,o,r,s,a,l,u,c,h,d,p,_,f;if(f=e.getTarget(),o=t.util.getCoordinatesFromEvent(i.originalEvent),"cui-dragleave"===e.getType()){if(p=i.originalEvent.getTarget(),t.dom.closest(p,".cui-drag-drop-select-droppable")!==this._element)return this.removeHelper(),!0;if(this._targetHelper||!this._selector)return}if(n=function(t){return function(n,o){return i.dropTarget=n,t._targetHelper&&(i.dropTargetPos=o),!1!==t.accept(e,i)||(t.removeHelper(),!1)}}(this),void 0===this.__dropTarget){for(h=null,this.__axis=null,_=t.dom.findElements(this._element,this._selector),c=0,d=_.length;c<d;c++)l=_[c],r=t.dom.getDimensions(l),h&&!this.__axis&&(h.viewportLeft===r.viewportLeft&&(this.__axis="y"),h.viewportTop===r.viewportTop&&(this.__axis="x")),this._targetHelper&&l.classList.add("cui-droppable-target-helper"),h=r;this.__axis||(this.__axis="x"),this.__dropTargetPos=null,this.__dropTarget=null}if(t.dom.removeClass(this.__selectedTarget,this._hoverClass),this._selector?this.__selectedTarget=t.dom.closest(f,this._selector):this.__selectedTarget=this._element,!this._targetHelper){if(!n(this.__selectedTarget)){if(this.removeHelper(),this._selector&&!this.__selectedTarget)return!0;return}return this.__dropTarget=this.__selectedTarget,this.__dropTargetPos=null,t.dom.addClass(this.__selectedTarget,this._hoverClass),void(this.__dropHelper&&this.syncDropHelper())}if(!this.__selectedTarget){if(this.insideSaveZone(o))return void console.info("Inside save zone...");if(this.resetMargin(),!this.__dropHelper)return console.info("No selected target, no dropHelper..."),this.removeHelper(),!0;if(!n(this._element))return;return this.__dropTarget=this._element,this.__dropTargetPos=null,this.syncDropHelper(),void 0}if(t.dom.remove(this.__dropHelper),r=t.dom.getDimensions(this.__selectedTarget),a="x"===this.__axis&&o.pageX>r.viewportCenterLeft||"y"===this.__axis&&o.pageY>r.viewportCenterTop?"after":"before",s=this.__selectedTarget,!n(s,a))return void this.removeHelper();this.__dropTarget=s,this.__dropTargetPos=a,u="cui-droppable-target-helper-"+this.__axis+"--"+this.__dropTargetPos,this.__resetMargin===this.__selectedTarget&&this.__selectedTarget.__target_helper_class===u||(this.resetMargin(),this.__saveZoneDims=[t.dom.getDimensions(this.__selectedTarget)],this.__selectedTarget.__target_helper_class=u,t.dom.addClass(this.__selectedTarget,this.__selectedTarget.__target_helper_class),this.__saveZoneDims.push(t.dom.getDimensions(this.__selectedTarget)),this.__resetMargin=this.__selectedTarget)},Droppable.prototype.init=function(){return t.Events.listen({node:this.element,type:"cui-dragend",instance:this,call:function(t){return function(e,i){return t.removeHelper()}}(this)}),t.Events.listen({node:this.element,type:"cui-drop",instance:this,call:function(e){return function(i,n){e.__dropTarget&&(n.dropTarget=e.__dropTarget,e._targetHelper&&(n.dropTargetPos=e.__dropTargetPos),!1!==e.accept(i,n)&&(i.stopPropagation(),t.setTimeout({call:function(){return e._drop(i,n)}})))}}(this)}),t.Events.listen({node:this.element,type:["cui-dragover","cui-dragenter","cui-dragleave"],instance:this,call:function(t){return function(e,i){t.syncTargetHelper(e,i),e.stopPropagation()}}(this)})},Droppable}(t.DragDropSelect)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty,n=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1};t.Lasso=function(i){function Lasso(){return Lasso.__super__.constructor.apply(this,arguments)}return e(Lasso,i),Lasso.cls="lasso",Lasso.prototype.initOpts=function(){return Lasso.__super__.initOpts.call(this),this.addOpts({filter:{check:String},selected:{default:function(t,e){return alert("You lassoed "+e.elements.length+" elements.")},check:Function},lasso_filter:{check:String},lassoed_element_class:{default:"cui-selected",check:String}}),this.removeOpt("helper")},Lasso.prototype.readOpts=function(){return Lasso.__super__.readOpts.call(this),this._helper=null},Lasso.prototype.destroy=function(){return t.dom.removeClass(this.element,"cui-lasso-area"),Lasso.__super__.destroy.call(this)},Lasso.prototype.init=function(){return Lasso.__super__.init.call(this),t.dom.addClass(this.element,"cui-lasso-area"),this.position=null},Lasso.prototype.start_drag=function(e,i,n){if(!t.dom.isInDOM(this.element))throw"DragDropSelect: Creating lasso failed, element is not in DOM.";return t.globalDrag.lasso=t.dom.div("cui-lasso"),t.dom.append(this.element,t.globalDrag.lasso),t.globalDrag.elements=[]},Lasso.prototype.getCursor=function(){return"default"},Lasso.prototype.do_drag=function(e,i,o){var r,s,a,l,u,c,h,d,p,_,f,m;for(c=0,f=0,m=0,s=0,o.x<=0?(c=t.globalDrag.start.left+o.x,m=-o.x,(p=-c)>0&&(m-=p,c=0)):(c=t.globalDrag.start.left,m=o.x,(p=c+m-this.element.scrollWidth)>0&&(m-=p)),o.y<=0?(f=t.globalDrag.start.top+o.y,s=-o.y,(p=-f)>0&&(s-=p,f=0)):(f=t.globalDrag.start.top,s=o.y,(p=f+s-this.element.scrollHeight)>0&&(s-=p)),u=this.get_lassoed_elements(),a=0,h=u.length;a<h;a++)r=u[a],n.call(t.globalDrag.elements,r)<0&&(t.globalDrag.elements.push(r),t.dom.toggleClass(r,this._lassoed_element_class));for(_=t.globalDrag.elements.slice(0),l=0,d=_.length;l<d;l++)r=_[l],n.call(u,r)<0&&(t.util.removeFromArray(r,t.globalDrag.elements),t.dom.toggleClass(r,this._lassoed_element_class));return t.dom.setStyle(t.globalDrag.lasso,{left:c,top:f,width:m,height:s})},Lasso.prototype.get_lassoed_elements=function(){var e,i,n,o,r,s,a,l,u,c,h,d,p,_,f;if(n=function(t){return t.getBoundingClientRect()},e=function(t,e){var i,n,o,r,s,a,l,u;return s=t.left,l=t.top,o=t.width,i=t.height,a=e.left,u=e.top,r=e.width,n=e.height,!(u+n<=l||l+i<=u||a+r<=s||s+o<=a)},t.globalDrag.lasso_dim=n(t.globalDrag.lasso),a=[],this._lasso_filter)for(p=t.dom.matchSelector(t.globalDrag.$source,this._lasso_filter),o=0,u=p.length;o<u;o++)i=p[o],e(t.globalDrag.lasso_dim,n(i))&&(this._filter?l=t.dom.closest(i,this._filter,t.globalDrag.$source):(d=t.dom.parentsUntil(i,t.globalDrag.$source),l=d[d.length-2]),l&&t.util.pushOntoArray(l,a));else if(this._filter)for(_=t.dom.matchSelector(t.globalDrag.$source,this._filter),r=0,c=_.length;r<c;r++)i=_[r],e(t.globalDrag.lasso_dim,n(i))&&t.util.pushOntoArray(i,a);else for(f=t.globalDrag.$source.children,s=0,h=f.length;s<h;s++)i=f[s],e(t.globalDrag.lasso_dim,n(i))&&a.push(i);return a},Lasso.prototype.stop_drag=function(e){var i,n,o,r;for(r=t.globalDrag.elements.slice(0),n=0,o=r.length;n<o;n++)i=r[n],t.util.removeFromArray(i,t.globalDrag.elements),t.dom.toggleClass(i,this._lassoed_element_class);return Lasso.__super__.stop_drag.call(this,e)},Lasso.prototype.cleanup_drag=function(e){return Lasso.__super__.cleanup_drag.call(this,e),t.dom.remove(t.globalDrag.lasso)},Lasso.prototype.end_drag=function(e){return this._selected(e,t.globalDrag),Lasso.__super__.end_drag.call(this,e)},Lasso}(t.Draggable)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.Movable=function(i){function Movable(){return Movable.__super__.constructor.apply(this,arguments)}return e(Movable,i),Movable.cls="movable",Movable.prototype.initOpts=function(){return Movable.__super__.initOpts.call(this),this.addOpts({limitRect:{default:{},check:function(e){return t.util.isPlainObject(e)||e instanceof Function}},onPositioned:{check:Function},onPosition:{check:Function},start_drag:{check:Function},do_drag:{check:Function}}),this.removeOpt("helper")},Movable.prototype.readOpts=function(){return Movable.__super__.readOpts.call(this),this._helper=null},Movable.prototype.getLimitRect=function(){return t.util.isFunction(this._limitRect)?this._limitRect():this._limitRect},Movable.prototype.setElementCss=function(e){var i;return t.util.assert(t.util.isPlainObject(e),t.util.getObjectClass(this),"opts.position must return a PlainObject containing any of x, y, w, h",{pos:e}),i={},t.util.isEmpty(e.x)||(i.left=e.x),t.util.isEmpty(e.y)||(i.top=e.y),t.util.isEmpty(e.w)||(i.marginBoxWidth=e.w),t.util.isEmpty(e.h)||(i.marginBoxHeight=e.h),t.dom.setDimensions(this.element,i),"function"==typeof this._onPositioned?this._onPositioned(e):void 0},Movable.prototype.init_drag=function(e,i){if(!t.dom.closest(e.getTarget(),".cui-resizable-handle"))return Movable.__super__.init_drag.call(this,e,i)},Movable.prototype.before_drag=function(){var e;return e=t.dom.getDimensions(this.element),this.start={x:e.left||0,y:e.top||0,w:e.marginBoxWidth,h:e.marginBoxHeight},this},Movable.prototype.start_drag=function(t,e,i){return this._start_drag&&this._start_drag(t,e,i,this),this},Movable.prototype.do_drag=function(t,e,i){var n,o;return this._do_drag?(this._do_drag(t,e,i,this),this):(n={x:i.x+this.start.x,y:i.y+this.start.y,w:this.start.w,h:this.start.h},this._onPosition?(o=this._onPosition(n.x,n.y,this.start,i),n.x=o[0],n.y=o[1]):this.limitRect(n,this.start),this.setElementCss(n),this)},Movable.prototype.limitRect=function(e,i,n){return null==i&&(i={}),null==n&&(n=this.getLimitRect()),t.Draggable.limitRect(e,n,i)},Movable}(t.Draggable)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function ctor(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},n={}.hasOwnProperty;t.Resizable=function(n){function Resizable(){return this.getResizePos=e(this.getResizePos,this),Resizable.__super__.constructor.apply(this,arguments)}return i(Resizable,n),Resizable.cls="resizable",Resizable.prototype.initOpts=function(){return Resizable.__super__.initOpts.call(this),this.removeOpt("selector")},Resizable.prototype.readOpts=function(){return Resizable.__super__.readOpts.call(this),this._selector=".cui-resizable-handle"},Resizable.prototype.init=function(){var e,i,n,o,r;for(Resizable.__super__.init.call(this),o=["ne","nw","se","sw","s","n","e","w"],r=[],i=0,n=o.length;i<n;i++)e=o[i],r.push(t.dom.append(this.element,t.dom.element("DIV",{"cui-drag-drop-select-resizable":e,class:"cui-resizable-handle cui-resizable-handle-"+e})));return r},Resizable.prototype.before_drag=function(e,i){return Resizable.__super__.before_drag.call(this,e,i),t.globalDrag.resize=i.getAttribute("cui-drag-drop-select-resizable")},Resizable.prototype.init_drag=function(e,i){return t.Draggable.prototype.init_drag.call(this,e,i)},Resizable.prototype.start_drag=function(t,e,i){if(this._start_drag)return this._start_drag(t,e,i,this)},Resizable.prototype.do_drag=function(t,e,i){return this._do_drag?this._do_drag(t,e,i,this):this.setElementCss(this.getResizePos(this.start,i))},Resizable.prototype.getResizePos=function(e,i,n){var o;switch(null==n&&(n=this.getLimitRect()),t.globalDrag.resize){case"se":o={w:e.w+i.x,h:e.h+i.y,fix:["n","w"]};break;case"sw":o={w:e.w-i.x,x:e.x+i.x,h:e.h+i.y,fix:["n","e"]};break;case"ne":o={w:e.w+i.x,y:e.y+i.y,h:e.h-i.y,fix:["s","e"]};break;case"nw":o={w:e.w-i.x,x:e.x+i.x,y:e.y+i.y,h:e.h-i.y,fix:["e","s"]};break;case"s":o={h:e.h+i.y,fix:["n"]};break;case"n":o={h:e.h-i.y,y:e.y+i.y,fix:["s"]};break;case"e":o={w:e.w+i.x,fix:["w"]};break;case"w":o={w:e.w-i.x,x:e.x+i.x,fix:["e"]}}return this.limitRect(o,e,n)},Resizable}(t.Movable)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.Sortable=function(i){function Sortable(){return Sortable.__super__.constructor.apply(this,arguments)}return e(Sortable,i),Sortable.cls="sortable",Sortable.prototype.initOpts=function(){return Sortable.__super__.initOpts.call(this),this.addOpts({allowSort:{mandatory:!0,default:function(t,e,i){return!0},check:Function},sorted:{mandatory:!0,default:function(t,e,i){return alert("You sorted item "+e+" to "+i+".")},check:Function}}),this.removeOpt("helper_contain_element")},Sortable.prototype.getSortTarget=function(e,i){var n;return n=t.dom.elementsUntil(e,null,i),n.length>1?n[n.length-2]:null},Sortable.prototype.getClass=function(){return this._selector?"cui-drag-drop-select":Sortable.__super__.getClass.call(this)},Sortable.prototype.readOpts=function(){return Sortable.__super__.readOpts.call(this),this._helper_contain_element=this._element},Sortable.prototype.get_child_number=function(t){var e,i,n,o;for(o=this.element.children,i=e=0,n=o.length;e<n;i=++e)if(o[i]===t)return i;return null},Sortable.prototype.move_element=function(e,i){var n,o;if(o=this.element.children[e],n=this.element.children[i],e!==i)return e<i?(t.globalDrag.noClickKill=!0,t.dom.insertAfter(n,o)):e>i&&(t.globalDrag.noClickKill=!0,t.dom.insertBefore(n,o)),t.dom.syncAnimatedClone(this.element),this},Sortable.prototype.start_drag=function(e,i,n){return t.globalDrag.sort_source=this.__findClosestSon(t.globalDrag.$source),t.globalDrag.sort_source.classList.add("cui-sortable-placeholder"),t.globalDrag.start_idx=this.get_child_number(t.globalDrag.sort_source),t.dom.addClass(this.element,"cui-sorting"),t.dom.initAnimatedClone(this.element)},Sortable.prototype.getCloneSourceForHelper=function(){return this.__findClosestSon(t.globalDrag.$source)},Sortable.prototype.__findClosestSon=function(e){var i;if(i=t.dom.parentsUntil(e,null,this.element),i[i.length-1]===window)return null;switch(i.length){case 0:return null;case 1:return e;default:return i[i.length-2]}},Sortable.prototype.do_drag=function(e,i,n){var o,r,s;if(this.position_helper(e,i,n),s=this.__findClosestSon(i))return r=this.get_child_number(t.globalDrag.sort_source),o=this.get_child_number(s),this._allowSort(e,r,o)&&this.move_element(r,o),this},Sortable.prototype.init_drag=function(t,e){return Sortable.__super__.init_drag.call(this,t,this.getSortTarget(t.getTarget(),this._element))},Sortable.prototype.stop_drag=function(t){return Sortable.__super__.stop_drag.call(this,t),this.__end_drag(t,!0)},Sortable.prototype.end_drag=function(t){return Sortable.__super__.end_drag.call(this,t),this.__end_drag(t,!1)},Sortable.prototype.cleanup_drag=function(e){return Sortable.__super__.cleanup_drag.call(this,e),t.dom.removeClass(this.element,"cui-sorting"),t.globalDrag.sort_source.classList.remove("cui-sortable-placeholder"),t.dom.removeAnimatedClone(this.element)},Sortable.prototype.__end_drag=function(e,i){var n;n=this.get_child_number(t.globalDrag.sort_source),t.globalDrag.start_idx!==n&&(i?this.move_element(n,t.globalDrag.start_idx):this._sorted(e,t.globalDrag.start_idx,n))},Sortable}(t.Draggable)}).call(e,i(0))},function(t,e,i){(function(t){t.Dummy=function(){function Dummy(){this.__uniqueId=t.Dummy.uniqueId++,this.__cls=t.util.getObjectClass(this)}return Dummy.prototype.getUniqueId=function(){return this.__uniqueId},Dummy.uniqueId=0,Dummy}(),t.Dummy}).call(e,i(0))},function(t,e,i){(function(t){t.Element=function(){function Element(e){this.opts=null!=e?e:{},this.__uniqueId=t.Element.uniqueId++,this.__cls=t.util.getObjectClass(this),this.__destroyed=!1,this.__check_map={},this.__mapped_keys=[],this.initOpts(),t.Element.__dont_read_opts||(this.readOpts(),this.__initOptsCalled||console.warn("new "+this.__cls+": CUI.Element::initOpts not called.",{opts:this.opts}),"function"==typeof this._onConstruct&&this._onConstruct(this))}return Element.prototype.getElementClass=function(){return this.__cls},Element.prototype.getUniqueId=function(){return this.__uniqueId},Element.prototype.getOpts=function(){return this.opts},Element.prototype.getOpt=function(t){return this.opts[t]},Element.prototype.hasOpt=function(t){return this.opts.hasOwnProperty(t)},Element.prototype.getSetOpt=function(t){return this["_"+t]},Element.prototype.hasSetOpt=function(t){return this.hasOwnProperty("_"+t)},Element.prototype.initOpts=function(){return this.__initOptsCalled=!0,this.addOpts({debug:{},onConstruct:{check:Function},onDestroy:{check:Function}})},Element.prototype.copy=function(){var e;return e=t[this.__cls],e?new e(this.opts):new window[this.__cls](this.opts)},Element.prototype.mergeOpt=function(t,e){var i,n,o;null==e&&(e={}),n=this.__check_map[t]||{};for(i in e)o=e[i],n[i]=o;return this.addOpt(t,n,"mergeOpt")},Element.prototype.removeOpt=function(t){return delete this.__check_map[t]},Element.prototype.addOpt=function(e,i,n){if(null==n&&(n="addOpt"),t.util.assert(t.util.isString(e),this.__cls+"."+n,"key needs to be String",{key:e,check_map:i}),!t.util.isNull(i))return t.util.assert(t.util.isPlainObject(i),this.__cls+"."+n,"check_map needs to be Map",{key:e,check_map:i}),this.__check_map[e]=i,this},Element.prototype.addOpts=function(e){var i,n;t.util.assert(t.util.isPlainObject(e),this.__cls+".addOpts","Parameter needs to be Map",{map:e});for(i in e)n=e[i],this.addOpt(i,n);return this},Element.prototype.mergeOpts=function(e){var i,n;t.util.assert(t.util.isPlainObject(e),this.__cls+".mergeOpts","Parameter needs to be Map",{map:e});for(i in e)n=e[i],this.mergeOpt(i,n);return this},Element.prototype.__getCheckMap=function(){return this.__check_map},Element.prototype.readOpts=function(e,i,n){return null==e&&(e=this.opts),null==i&&(i=this.__cls),null==n&&(n=this.__check_map),t.Element.readOpts.call(this,e,i,n,!0)},Element.prototype.readOptsFromAttr=function(e){var i,n,o,r,s,a,l,u;if(s={},!(null!=e?e.split:void 0))return s;for(a=e.split(";"),i=0,r=a.length;i<r;i++)o=a[i],t.util.isEmpty(o.trim())||(l=o.split(":"),n=l[0],u=l[1],n=n.trim(),u=null!=u?u.trim():void 0,t.util.assert(!t.util.isEmpty(n)&&!t.util.isEmpty(u),this.__cls+".readOptsFromAttr",'Parsing error in "'+e+'".'),"true"===u?u=!0:"false"===u?u=!1:isNaN(parseInt(u))||(u=parseInt(u)),s[n]=u);return s},Element.prototype.proxy=function(e,i){var n,o,r,s;for(t.util.assert(e instanceof t.Element,"CUI.Element.proxy","element given must be instance of CUI.Element.",{element:e,methods:i}),t.util.assert(t.util.isArray(i),"Element.proxy","methods given must be Array.",{element:e,methods:i}),n=function(t){return function(i){return t[i]=function(){return e[i].apply(e,arguments)}}}(this),o=0,r=i.length;o<r;o++)s=i[o],n(s);return this},Element.prototype.destroy=function(){var e,i,n;for(t.util.assert(this.__mapped_keys,t.util.getObjectClass(this)+".destroy","__mapped_keys not found, that means the top level constructor was not called.",{element:this}),n=this.__mapped_keys,e=0,i=n.length;e<i;e++)n[e];return this.__mapped_keys=[],"function"==typeof this._onDestroy&&this._onDestroy(this),this.__destroyed=!0},Element.prototype.isDestroyed=function(){return this.__destroyed},Element.uniqueId=0,Element.getOptKeys=function(){var e;return t.Element.__dont_read_opt=!0,e=new this,delete t.Element.__dont_read_opts,Object.keys(e.__getCheckMap())},Element.readOpts=function(e,i,n,o){var r,s,a,l,u,c,h,d,p;if(!0!==o&&!1!==o&&this!==Element&&(t.util.assert(this!==window,"CUI.Element.readOpts","this cannot be window."),o=!0),!t.defaults.asserts){h={};for(u in n)d=n[u],e.hasOwnProperty(u)&&void 0!==e[u]?(h[u]=this["_"+u]=e[u],o&&this.__mapped_keys.push(u)):d.hasOwnProperty("default")&&(h[u]=this["_"+u]=d.default,o&&this.__mapped_keys.push(u));return h}t.util.assert(t.util.isPlainObject(e),i,"opts needs to be PlainObject.",{opts:e,check_map:n}),t.util.assert(t.util.isPlainObject(n),i,"check_map needs to be PlainObject.",{opts:e,check_map:n}),h={};for(u in n){if(d=n[u],e.hasOwnProperty(u)&&void 0!==e[u]?(p=e[u],l=!0):d.hasOwnProperty("default")?(p=d.default,l=!0):l=!1,c=t.util.isFunction(d.mandatory)?d.mandatory.call(this,p):d.mandatory,l)d.deprecated&&(d.deprecated.length>0?d.deprecated:"",console.warn(i+": opts."+u+" is deprecated.",p));else{if(!c)continue;t.util.assert(!1,i,"opts."+u+" needs to be set.",{opts:e,check_map:n})}!d.check||t.util.isNull(p)&&!c||(t.util.isArray(d.check)?t.util.assert(d.check.indexOf(p)>-1,i,"opts."+u+' needs to be one of ["'+d.check.join('","')+'"].',{opts:e}):d.check===Boolean||d.check===String||d.check===Function||d.check===Array?t.util.assertInstanceOf.call(this,u,d.check,void 0,p):t.util.isFunction(d.check)&&!d.check.__super__?(t.util.assert(t.util.isEmpty(d.check.name)||"check"===d.check.name,i,u+'.check is "'+d.check.name+'" but has no "__super__" method. Use "extends CUI.Element" or "extends CUI.Dummy" to fix that.',{opts:e,key:u,value:d}),s=d.check.call(this,p),t.util.isNull(s)||t.util.isBoolean(s)||t.util.isString(s)||(r=s,console.error("CUI.Element.readOpts: check needs to return Boolean, null, undefined or String.","opts:",e,"opt:",d,"return:",r),s=!!r),!0!==s&&(a=t.util.isString(s)?s:"needs to match\n\n"+d.check.toString(),t.util.assert(!1,i,"opts."+u+": "+a+".",{opts:e}))):t.util.isPlainObject(d.check)?p=t.Element.readOpts(p,i+" [opts."+u+"]",d.check):t.util.isNull(p)&&c?t.util.assert(!1,i,"opts."+u+" is mandatory, but is "+p+".",{opts:e}):t.util.assertInstanceOf.call(this,u,d.check,void 0,p)),o&&(this["_"+u]=p,this instanceof t.Element&&this.__mapped_keys.push(u)),h[u]=p}for(u in e)void 0===(d=e[u])||h.hasOwnProperty(u)||u.startsWith("_")||console.warn(i+": opts."+u+", not supported. check_map: ",n,"opts:",e);return h},Element}()}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.CUIEvent=function(t){function CUIEvent(){return CUIEvent.__super__.constructor.apply(this,arguments)}return e(CUIEvent,t),CUIEvent}(t.Event)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.Event=function(i){function Event(e){this.opts=null!=e?e:{},Event.__super__.constructor.call(this,this.opts),this._require_node_in_dom&&(console.debug("require node in dom",this.isInDOM(),this.__node),t.util.assert(this.isInDOM(),"new Event","node is not in DOM, unable to create event.",{opts:this.opts})),this.__propagationStopped=!1,this.__propagationImmediateStopped=!1,this.__preventDefault=!1,this.__dragPrevented=!1}return e(Event,i),Event.prototype.initOpts=function(){return Event.__super__.initOpts.call(this),this.addOpts({type:{mandatory:!0,check:function(e){return t.util.isString(e)&&!t.util.isEmpty(e)&&1===e.split(/\s+/).length}},node:{default:document.documentElement,mandatory:!0,check:function(e){return t.dom.isNode(e)}},require_node_in_dom:{default:!1,mandatory:!0,check:Boolean},bubble:{default:!1,check:Boolean},sink:{default:!1,check:Boolean},exclude_self:{default:!1,check:Boolean},info:{default:{},check:"PlainObject"},prevent_default:{default:!1,check:Boolean}})},Event.prototype.readOpts=function(){return Event.__super__.readOpts.call(this),this.__node=t.dom.getNode(this._node),this._preventDefault&&this.preventDefault(),this.__listenerClass=null,this.__isInDOM=null},Event.prototype.__setListener=function(e){return this.__listenerClass?t.util.assert(this.__listenerClass===e.getElementClass(),"Event.setListener","listener class cannot change during an events life cycle.",{listener:e,listenerClass:this.__listenerClass}):this.__listenerClass=e.getElementClass(),this},Event.prototype.__setPhase=function(t){this.__phase=t},Event.prototype.isExcludeSelf=function(){return this._exclude_self},Event.prototype.getPhase=function(){return this.__phase},Event.prototype.getType=function(){return this._type},Event.prototype.getDebug=function(){return this._type+"["+this.getUniqueId()+"]"},Event.prototype.getInfo=function(){return this._info},Event.prototype.getNode=function(){return this.__node},Event.prototype.getElement=function(){return t.dom.data(this.getNode(),"element")},Event.prototype.isBubble=function(){return this._bubble},Event.prototype.isSink=function(){return this._sink},Event.prototype.isInDOM=function(){return null!==this.__isInDOM?this.__isInDOM:this.__node===document||this.__node===window?this.__isInDOM=!0:this.__isInDOM=t.dom.isInDOM(this.__node)},Event.prototype.setNativeEvent=function(e){return t.util.assert("object"==typeof e,"CUI.Event.setNativeEvent","Event needs to be instanceof Event",{Event:e}),this.__NativeEvent=e,this},Event.prototype.getNativeEvent=function(){return this.__NativeEvent},Event.prototype.getPointTarget=function(){return document.elementFromPoint(this.clientX(),this.clientY())},Event.prototype.getTarget=function(){var t;return this.__target||(null!=(t=this.getNativeEvent())?t.target:void 0)},Event.prototype.setTarget=function(t){return this.__target=t},Event.prototype.getCurrentTarget=function(){return this.__currentTarget||this.getTarget()},Event.prototype.setCurrentTarget=function(t){return this.__currentTarget=t},Event.prototype.getModifiers=function(){var t,e,i,n;e=[],i={meta:"Meta",ctrl:"Control",alt:"Alt",shift:"Shift"};for(t in i)n=i[t],this[t+"Key"]()&&e.push(n);return e},Event.prototype.hasModifierKey=function(t){return null==t&&(t=!1),this.metaKey()||this.ctrlKey()||this.altKey()||t&&this.shiftKey()},Event.prototype.getButton=function(){var t;return null!=(t=this.getNativeEvent())?t.button:void 0},Event.prototype.keyCode=function(){var t;return null!=(t=this.getNativeEvent())?t.which:void 0},Event.prototype.metaKey=function(){var t;return null!=(t=this.getNativeEvent())?t.metaKey:void 0},Event.prototype.ctrlKey=function(){var t;return null!=(t=this.getNativeEvent())?t.ctrlKey:void 0},Event.prototype.altKey=function(){var t;return null!=(t=this.getNativeEvent())?t.altKey:void 0},Event.prototype.shiftKey=function(){var t;return null!=(t=this.getNativeEvent())?t.shiftKey:void 0},Event.prototype.clientX=function(){var t;return null!=(t=this.getNativeEvent())?t.clientX:void 0},Event.prototype.clientY=function(){var t;return null!=(t=this.getNativeEvent())?t.clientY:void 0},Event.prototype.pageX=function(){var t;return null!=(t=this.getNativeEvent())?t.pageX:void 0},Event.prototype.pageY=function(){var t;return null!=(t=this.getNativeEvent())?t.pageY:void 0},Event.prototype.stopImmediatePropagation=function(){var t;return this.__propagationImmediateStopped=!0,null!=(t=this.getNativeEvent())&&t.stopImmediatePropagation(),this},Event.prototype.stopPropagation=function(){var t;return this.__propagationStopped=!0,null!=(t=this.getNativeEvent())&&t.stopPropagation(),this},Event.prototype.preventDefault=function(){var t;return this.__defaultPrevented=!0,null!=(t=this.getNativeEvent())&&t.preventDefault(),this},Event.prototype.isImmediatePropagationStopped=function(){return this.__propagationImmediateStopped},Event.prototype.isPropagationStopped=function(){return this.__propagationStopped},Event.prototype.isDefaultPrevented=function(){return this.__defaultPrevented},Event.prototype.dispatch=function(){var e,i;return t.util.assert(!this.getNativeEvent(),"CUI.Event.dispatch","Can only dispatch once.",{event:this}),e=document.createEvent("Event"),e.initEvent(this.getType(),this.isBubble(),!0),e.__cui_event=this,i=this.isExcludeSelf()?t.dom.parent(this.getNode()):this.getNode(),this.isDefaultPrevented()&&e.preventDefault(),this.setNativeEvent(e),i.dispatchEvent(e),e},Event.prototype.dump=function(){var t,e;return e=this.__cls+": **"+this.getType()+"**",t=this.getModifiers(),t.length>0&&(e+=" Modifiers: **"+t.join("+")+"**"),e},Event.prototype.stop=function(){return this.preventDefault(),this.stopPropagation(),this.stopImmediatePropagation(),!1},Event.require=function(e,i){var n,o,r;return t.util.isPlainObject(e)?(o=t.Events.getEventType(e.type),r=o.eventClass?o.eventClass:t.Event,t.util.mergeMap(e,o),delete e.eventClass,delete e.listenerClass,n=new r(e)):n=e,t.util.assert(n instanceof t.Event,""+i,"event needs to be PlainObject or instance of CUI.Event."),n},Event.createFromDOMEvent=function(e,i){var n,o;return o=t.Events.getEventType(e.type),i||(i=o.eventClass?o.eventClass:t.Event),n=new i({type:e.type,bubble:e.bubbles,node:e.target}),n.setNativeEvent(e),n},Event}(t.Element)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty,n=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1};t.Events=function(i){function Events(){return Events.__super__.constructor.apply(this,arguments)}return e(Events,i),Events.defaults={maxWait:1500},Events.__listeners=[],Events.__eventRegistry={},Events.__getListenersForNode=function(e){return e===document||e===window?this.__listeners:t.dom.data(e,"listeners")},Events.__registerListener=function(e){var i,n;return t.util.assert(e instanceof t.Listener,"CUI.Events.__registerListener","listener needs to be instance of Listener",{listener:e}),n=e.getNode(),i=this.__getListenersForNode(n),i||(i=[],t.dom.data(n,"listeners",i)),i.push(e),n instanceof HTMLElement&&n.setAttribute("data-cui-listeners",""),this},Events.__getActiveListeners=function(e){var i,n,o,r,s;for(null==e&&(e=document),e===document?r=this.__listeners.slice(0):(r=[],t.dom.matches(e,"[data-cui-listeners]")&&r.push.apply(r,t.dom.data(e,"listeners"))),s=t.dom.matchSelector(e,"[data-cui-listeners]"),n=0,o=s.length;n<o;n++)i=s[n],r.push.apply(r,t.dom.data(i,"listeners"));return r},Events.unregisterListener=function(e){var i,n;return n=e.getNode(),i=this.__getListenersForNode(n),t.util.assert(i,"CUI.Events.unregisterListeners","Listeners not found for node.",{node:n,listener:e}),t.util.removeFromArray(e,i),0===i.length&&n instanceof HTMLElement&&(n.removeAttribute("cui-events-listener-element"),t.dom.removeData(n,"listeners")),this},Events.wait=function(e){var i,n,o,r,s,a;return a=t.Element.readOpts(e,"CUI.Events.wait",{type:{mandatory:!0,check:String},node:{mandatory:!0,check:function(e){return t.dom.isNode(e)}},maxWait:{default:t.defaults.class.Events.defaults.maxWait,check:function(t){var e;return e=parseInt(t),!isNaN(e)&&(-1===e||e>=0)}}}),o=[],r=[],i=t.dom.getNode(a.node),n=new t.Deferred,r.push(t.Events.listen({type:a.type,node:i,call:function(){n.resolve()}})),o.push(n),s=new t.Deferred,s.always(function(){var t,e,i;for(t=0,e=r.length;t<e;t++)i=r[t],i.destroy()}),t.when(o).fail(function(){return s.reject()}).done(function(){return s.resolve()}),a.maxWait>=0&&t.setTimeout({ms:a.maxWait,call:function(){var t,e;for(t=0,e=o.length;t<e;t++)n=o[t],"pending"===n.state()&&n.reject()}}),s.promise()},Events.listen=function(e){var i;return i=t.Listener.require(e,"CUI.Events.listen"),this.__registerListener(i),i},Events.trigger=function(e){var i,o,r,s,a,l,u,c,h,d,p,_,f,m,g,y,v,b,w,k,D,x,M,C,O;if(o=t.Event.require(e,"CUI.Events.trigger"),a=o.getInfo(),O=[],a.__waits=O,i=o.isBubble(),k=o.isSink(),r=o.isExcludeSelf(),v=o.getNode(),i||!o.isInDOM()?o.dispatch():o.setTarget(v),!r||i||k||t.util.assert(!1,"CUI.Events.trigger","Unable to trigger event with bubble == false, sink == false and exclude_self == true.",{event:o}),k||!k&&!i&&!r&&o.isInDOM()){for(C=[],b=this.__getActiveListeners(),s=l=0,h=b.length;l<h;s=++l)f=b[s],w=o.getType(),n.call(f.getTypes(),w)<0||null!==f.matchesEvent(o)&&C.push(f);for(C.sort(function(e,i){return t.util.compareIndex(e.getDepthFromLastMatchedEvent(),i.getDepthFromLastMatchedEvent())}),M=[],o.getNode(),u=0,d=C.length;u<d;u++){if(f=C[u],(m=f.getNode())&&M.length>0){for(g=t.dom.parents(m),D=!1,c=0,p=M.length;c<p;c++)for(x=M[c],y=0,_=g.length;y<_;y++)if(g[y]===x){D=!0;break}if(D)continue}if(o.setCurrentTarget(m),f.handleEvent(o,"sink"),o.isImmediatePropagationStopped())break;o.isPropagationStopped()&&m&&M.push(m)}}return t.when(O)},Events.ignore=function(e,i){var n,o,r,s;for(null==i&&(i=document),s=this.__getActiveListeners(i),n=0,o=s.length;n<o;n++)r=s[n],(!e||t.util.isEmptyObject(e)||r.matchesFilter(e))&&r.destroy();return this},Events.dump=function(e){var i,n,o,r;for(null==e&&(e={}),r=this.__getActiveListeners(),i=0,n=r.length;i<n;i++)o=r[i],(t.util.isEmptyObject(e)||o.matchesFilter(e))&&console.debug("Listener",o.getTypes(),o.getNode()?"NODE":"-",o);return this},Events.dumpTopLevel=function(){var e,i,n,o,r,s,a;for(s=this.__listeners,e=0,n=s.length;e<n;e++)r=s[e],console.debug("Listener [document, window]",r.getTypes(),r.getInstance());for(a=t.dom.data(document.documentElement,"listeners"),i=0,o=a.length;i<o;i++)r=a[i],console.debug("Listener [document.documentElement]",r.getTypes(),r.getInstance(),r);return this},Events.hasEventType=function(t){return!!this.__eventRegistry[t]},Events.getEventType=function(e){var i;return i=this.__eventRegistry[e],t.util.assert(i,'Unknown event type "'+e+'". Use CUI.Events.registerEvent to register this type.'),i},Events.getEventTypeAliases=function(t){return this.getEventType(t).alias||[t]},Events.registerEvent=function(e,i){var n,o,r,s,a,l,u,c;if(null==i&&(i=!0),t.util.isArray(e.type)&&i||t.util.assert(t.util.isString(null!=e?e.type:void 0)&&e.type.length>0,"CUI.Events.registerEvent","event.type must be String.",{event:e}),u=function(i){return function(n){var o;return o=t.util.copyObject(e,!0),o.type=n,i.registerEvent(o,!1)}}(this),t.util.isArray(e.type))for(a=e.type,n=0,r=a.length;n<r;n++)c=a[n],u(c);else if(e.hasOwnProperty("DOMEvent")&&(console.error("event.DOMEvent is obsolete"),delete e.DOMEvent),e.hasOwnProperty("CUIEvent")&&(console.error("event.CUIEvent is obsolete"),delete e.CUIEvent),this.__eventRegistry[e.type]=e,e.alias)for(l=e.alias,o=0,s=l.length;o<s;o++)c=l[o],this.__eventRegistry[c]||u(c);return this},Events.__init=function(){var e,i,n,o,r,s,a;i={BrowserEvents:{bubble:!0},DOM:{bubble:!0},CUI:{eventClass:t.CUIEvent,sink:!0},KeyboardEvents:{eventClass:t.KeyboardEvent,bubble:!0},MouseEvents:{eventClass:t.MouseEvent,bubble:!0},TouchEvents:{eventClass:t.TouchEvent,bubble:!0}},r={MouseEvents:{mousemove:{},mouseover:{},mouseout:{},mouseleave:{},mouseenter:{},wheel:{eventClass:t.WheelEvent,bubble:!1},mousedown:{},mouseup:{},click:{},dblclick:{},contextmenu:{}},TouchEvents:{touchstart:{},touchend:{},touchmove:{},touchcancel:{},touchforchange:{},gesturestart:{},gestureend:{},gesturechange:{}},KeyboardEvents:{input:{bubble:!1},keyup:{},keydown:{},keypress:{}},BrowserEvents:{beforeunload:{},unload:{},load:{},error:{},close:{},popstate:{},dragstart:{},dragleave:{},dragenter:{},message:{},fullscreenchange:{alias:"fullscreenchange mozfullscreenchange webkitfullscreenchange MSFullscreenChange".split(" ")},hashchange:{bubble:!1},change:{bubble:!1},focus:{bubble:!1},blur:{bubble:!1},paste:{bubble:!1},dragover:{bubble:!1},drop:{bubble:!1},scroll:{bubble:!1},selectstart:{bubble:!1},animationstart:{alias:"animationstart MSAnimationStart webkitAnimationStart".split(" "),bubble:!1},animationend:{alias:"animationend MSAnimationEnd webkitAnimationEnd".split(" "),bubble:!1},transitionend:{alias:"transitionend webkitTransitionEnd MSTransitionEnd".split(" "),bubble:!1},resize:{bubble:!1}},DOM:{"content-resize":{eventClass:t.CUIEvent}},CUI:{"viewport-resize":{}}},s=[];for(e in r)o=r[e],s.push(function(){var r;r=[];for(a in o)n=o[a],t.util.mergeMap(n,i[e]),n.type=a,r.push(this.registerEvent(n));return r}.call(this));return s},Events}(t.Element),t.Events.__init(),t.defaults.class.Events=t.Events}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty,n=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1};t.KeyboardEvent=function(i){function KeyboardEvent(){return KeyboardEvent.__super__.constructor.apply(this,arguments)}return e(KeyboardEvent,i),KeyboardEvent.prototype.getKeyboard=function(){var e;return e=this.getModifiers(),e.push.apply(e,t.KeyboardEvent.__keys),e.join("+")},KeyboardEvent.prototype.getKeyboardKey=function(){var e,i;if(e=this.keyCode(),!t.util.isUndef(e)){if(n.call([96,97,98,99,100,101,102,103,104,105],e)>=0&&(i="Num"+String.fromCharCode(e-48)),n.call([112,113,114,115,116,117,118,119,120,121,122,123],e)>=0)i="F"+String.fromCharCode(e-111);else switch(e){case 8:i="Backspace";break;case 9:i="Tab";break;case 13:i="Return";break;case 16:i="Shift";break;case 17:i="Ctrl";break;case 18:i="Alt";break;case 20:i="CapsLock";break;case 27:i="Esc";break;case 32:i="Space";break;case 33:i="PageUp";break;case 34:i="PageDown";break;case 37:i="Left";break;case 38:i="Up";break;case 39:i="Right";break;case 40:i="Down";break;case 46:i="Insert";break;case 46:i="Delete";break;case 110:i="Num.";break;case 144:i="Numlock";break;case 111:i="Num/";break;case 106:i="Num*";break;case 107:i="Num+";break;default:i=String.fromCharCode(e)}return i}},KeyboardEvent.prototype.key=function(){return this.getNativeEvent().key},KeyboardEvent.prototype.dump=function(){var t,e;return e=this.__cls+": **"+this.getType()+"**",e+=" Key: **"+this.key()+"** KeyCode: **"+this.keyCode()+"**",t=this.getKeyboard(),t.length>0&&(e=e+" Keyboard: **"+t+"**"),e},KeyboardEvent.__initKeyboardListener=function(){var e;return e=function(t){switch(t){case 16:case 17:case 18:case 91:case 93:return!0;default:return!1}},t.KeyboardEvent.__keys=[],t.Events.listen({type:["keydown"],node:window,capture:!0,call:function(i){e(i.keyCode())||t.util.pushOntoArray(i.getKeyboardKey(),t.KeyboardEvent.__keys)}}),t.Events.listen({type:["keyup"],node:window,capture:!0,call:function(i){e(i.keyCode())||t.util.removeFromArray(i.getKeyboardKey(),t.KeyboardEvent.__keys)}}),t.Events.listen({type:["blur"],node:window,capture:!0,call:function(e){return t.KeyboardEvent.__keys=[]}})},KeyboardEvent}(t.Event),t.ready(function(e){return function(){return t.KeyboardEvent.__initKeyboardListener()}}())}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty,n=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1};t.Listener=function(i){function Listener(){return Listener.__super__.constructor.apply(this,arguments)}return e(Listener,i),Listener.prototype.initOpts=function(){return Listener.__super__.initOpts.call(this),this.addOpts({type:{mandatory:!0,check:function(e){return t.util.isString(e)||t.util.isArray(e)}},node:{default:document.documentElement,mandatory:!0,check:function(e){return t.dom.isNode(e)}},call:{mandatory:!0,check:function(e){return t.util.isFunction(e)}},only_once:{check:Boolean},selector:{check:function(e){return t.util.isString(e)||t.util.isFunction(e)}},instance:{},capture:{default:!1,check:Boolean}})},Listener.prototype.readOpts=function(){var e,i,n,o;for(Listener.__super__.readOpts.call(this),t.util.isString(this._type)?this.__types=this._type.split(/\s+/):this.__types=this._type,this.__node=t.dom.getNode(this._node),n=this.__types,e=0,i=n.length;e<i;e++)o=n[e],t.Events.getEventType(o);return t.util.isString(this._selector)&&t.util.assert(this.__node instanceof HTMLElement||this.__node===document,"new CUI.Listener","opts.selector requires the node to be instance of HTMLElement.",{opts:this.opts}),this.__handleDOMEvent=function(t){return function(e){return t.__handleDOMEventInternal(e)}}(this),this._selector&&(t.util.isString(this._selector)?this.__selector=function(e){return function(i,n){return t.dom.closestUntil(i,e._selector,n)}}(this):this.__selector=this._selector),this.__registerDOMEvent(),this},Listener.prototype.isCapture=function(){return this._capture},Listener.prototype.getNode=function(){return this.__node},Listener.prototype.getTypes=function(){return this.__types},Listener.prototype.__registerDOMEvent=function(){var e,i,n,o,r,s,a,l;for(s=this.getTypes(),i=0,o=s.length;i<o;i++)for(e=s[i],a=t.Events.getEventTypeAliases(e),n=0,r=a.length;n<r;n++)l=a[n],this.__node.addEventListener(l,this.__handleDOMEvent,this.isCapture());return this},Listener.prototype.__handleDOMEventInternal=function(e){var i,n;if(this.__selector){if(!(i=this.__selector(e.target,this.__node)))return!1}else i=this.__node;return e.__cui_event?n=e.__cui_event:(n=t.Event.createFromDOMEvent(e),e.__cui_event=n),n.setCurrentTarget(i),this.isCapture()?this.handleEvent(n,"capture"):this.handleEvent(n,"bubble")},Listener.prototype.isOnlyOnce=function(){return this._only_once},Listener.prototype.destroy=function(){var e,i,n,o,r,s,a,l;if(!this.isDestroyed()){for(t.Events.unregisterListener(this),s=this.getTypes(),i=0,o=s.length;i<o;i++)for(e=s[i],a=t.Events.getEventTypeAliases(e),n=0,r=a.length;n<r;n++)l=a[n],this.__node.removeEventListener(l,this.__handleDOMEvent,this.isCapture());return Listener.__super__.destroy.call(this)}},Listener.prototype.matchesEvent=function(e){var i,o,r,s,a,l;if(t.util.assert(e instanceof t.Event,"CUI.Listener.matchesEvent","event needs to be instance of CUI.Event."),delete this.__depth,a=e.getType(),n.call(this.getTypes(),a)<0)return null;if(i=e.getNode(),this.__depth=0,this.isCapture())return null;if(!e.isExcludeSelf()&&!e.isBubble()&&e.isInDOM()&&this.__node===i)return this.__depth;if(e.isSink())for(l=t.dom.parents(this.__node),o=0,r=l.length;o<r;o++)if(s=l[o],this.__depth++,s===i)return this.__depth;return delete this.__depth,null},Listener.prototype.getDepthFromLastMatchedEvent=function(){return this.__depth},Listener.prototype.handleEvent=function(e,i){var n,o,r;return t.util.assert(e instanceof t.Event,"CUI.Listener.handleEvent","event needs to be instance of CUI.Event",{event:e}),e.__setPhase(i),e.__setListener(this),this.isOnlyOnce()&&this.destroy(),(o=this.getInstance())&&o instanceof t.Element&&o.isDestroyed()?void this.destroy():(r=this._call.call(this,e,e.getInfo()),t.util.isPromise(r)&&(n=e.getInfo(),n.__waits||t.util.assert(!1,"CUI.Listener.handleEvent",'Event "'+e.getType()+'" to handle was not triggered by CUI.Events.trigger, but instead by a regular DOMEvent.\n\nMake sure that, if your handler returns a Promise, the event is triggered by CUI.Events.trigger.',{event:e,listener:this,return:r}),n.__waits.push(r)),r)},Listener.prototype.getInstance=function(){return this._instance},Listener.prototype.matchesFilter=function(e){var i,o,r,s,a,l,u,c;if(e instanceof t.Listener)return e===this;if(t.util.assert(t.util.isPlainObject(e),"CUI.Listener.matchesFilter","filter needs to be PlainObject."),l=!0,r=!1,e.node&&(o=t.dom.getNode(e.node),r=!0,l=!!t.dom.closestUntil(this.__node,o)),l&&e.type)if(r=!0,t.util.isArray(e.type))for(l=!1,u=e.type,s=0,a=u.length;s<a&&(i=u[s],!(l=n.call(this.__types,i)>=0));s++);else c=e.type,l=n.call(this.__types,c)>=0;return l&&e.call&&(r=!0,l=e.call===this._call),l&&e.instance&&(r=!0,l=e.instance===this.getInstance()),t.util.assert(r,"Listener.matchesFilter","Filter did not filter anything, make sure you have 'node', 'type', 'call', or 'instance' set.",{filter:e}),l},Listener.require=function(e,i){var n,o,r,s,a,l,u;if(t.util.isPlainObject(e)){for(a=null,u=e.type instanceof Array?e.type:[e.type],o=0,r=u.length;o<r;o++)l=u[o],n=t.Events.getEventType(l),t.util.assert(n,""+i,"listener.type needs to be registered",{listener:e}),n.listenerClass?(t.util.assert(!a||a===n.listenerClass,""+i,"listenerFunction differs for different listener types.",{listener:e}),a=n.listenerClass):(t.util.assert(!a||a===t.Listener,""+i,"listenerFunction differs for different listener types.",{listener:e}),a=t.Listener);s=new a(e)}else s=e;return t.util.assert(s instanceof t.Listener,""+i,"listener needs to be PlainObject or instance of CUI.Listener."),s},Listener}(t.Element)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.MouseEvent=function(t){function MouseEvent(){return MouseEvent.__super__.constructor.apply(this,arguments)}return e(MouseEvent,t),MouseEvent.prototype.initOpts=function(){return MouseEvent.__super__.initOpts.call(this),this.addOpts({button:{check:function(t){return t>=0}},pageX:{check:function(t){return t>0}},pageY:{check:function(t){return t>0}},clientX:{check:function(t){return t>0}},clientY:{check:function(t){return t>0}}})},MouseEvent.prototype.setNativeEvent=function(t){var e,i,n,o,r;for(r=["button","pageX","pageY","clientX","clientY"],e=0,n=r.length;e<n;e++)i=r[e],o="_"+i,this.hasOwnProperty(o)&&(t[i]=this[o]);return MouseEvent.__super__.setNativeEvent.call(this,t)},MouseEvent}(t.Event)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.TouchEvent=function(t){function TouchEvent(){return TouchEvent.__super__.constructor.apply(this,arguments)}return e(TouchEvent,t),TouchEvent.prototype.initOpts=function(){return TouchEvent.__super__.initOpts.call(this),this.addOpts({button:{check:function(t){return t>=0}},pageX:{check:function(t){return t>0}},pageY:{check:function(t){return t>0}},clientX:{check:function(t){return t>0}},clientY:{check:function(t){return t>0}}})},TouchEvent.prototype.setNativeEvent=function(t){var e,i,n,o,r;for(r=["button","pageX","pageY","clientX","clientY"],e=0,n=r.length;e<n;e++)i=r[e],o="_"+i,this.hasOwnProperty(o)&&(t[i]=this[o]);return TouchEvent.__super__.setNativeEvent.call(this,t)},TouchEvent}(t.MouseEvent)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.WheelEvent=function(t){function WheelEvent(){return WheelEvent.__super__.constructor.apply(this,arguments)}return e(WheelEvent,t),WheelEvent.prototype.dump=function(){return WheelEvent.__super__.dump.call(this)+" wheelY: **"+this.wheelDeltaY()+"**"},WheelEvent.prototype.wheelDeltaY=function(){var t;return t=this.getNativeEvent(),t?t.deltaY||0:0},WheelEvent}(t.MouseEvent)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.FlexHandle=function(i){function FlexHandle(e){var i,n,o,r,s;for(this.opts=null!=e?e:{},FlexHandle.__super__.constructor.call(this,this.opts),this.__pane=null,n=this._element.parentNode.children,r=o=0,s=n.length;o<s;r=++o)i=n[r],t.dom.is(i,this._pane)&&(this.__pane=i,this.__pane_idx=r),t.dom.is(i,this._element)&&(this.__element_idx=r);this.__adjacent_pane=null,this.__element_idx>this.__pane_idx?this.__element_idx<n.length-1&&(this.__adjacent_pane=n[this.__element_idx+1]):this.__element_idx>0&&(this.__adjacent_pane=n[this.__element_idx-1]),this.__closed=this._closed,this.__hidden=this._hidden,this.__stretched=null,this.__size=null,t.util.assert(this.__pane,"new "+this.__cls,'pane "'+this._pane+'" not found in parent element of cui-flex-handle element.',{opts:this.opts,children:n}),t.dom.data(this.__pane,"flexHandle",this),t.dom.setAttribute(this.__pane,"flex-handled-pane",this._name)}return e(FlexHandle,i),FlexHandle.prototype.readOpts=function(){var e,i,n;FlexHandle.__super__.readOpts.call(this),"horizontal"===(e=this._direction)||"row"===e?this.__direction="row":"vertical"!==(i=this._direction)&&"column"!==i||(this.__direction="column"),t.util.assert("row"===(n=this.__direction)||"column"===n,"new "+this.__cls,"opts.direction needs to be set",{opts:this.opts,element:this._element}),this._label&&this.addLabel(this._label)},FlexHandle.prototype.initOpts=function(){return FlexHandle.__super__.initOpts.call(this),this.addOpts({element:{mandatory:!0,check:function(e){return t.util.isElement(e)}},pane:{mandatory:!0,check:String},name:{mandatory:!0,check:String},closed:{check:Boolean},closable:{mandatory:!0,default:!1,check:Boolean},label:{check:function(e){return e instanceof t.Label||t.util.isPlainObject(e)}},hidden:{check:Boolean},direction:{check:["horizontal","vertical","row","column"]},manage_state:{default:!0,check:Boolean},state_name:{check:String},class:{check:String}})},FlexHandle.prototype.init=function(){var e,i,n;if(!this.isDestroyed())return t.dom.addClass(this._element,"cui-flex-handle cui-flex-handle-"+this.__direction+" cui-flex-handle-"+this._name),this.__closed&&this.close(),this.__hidden&&this.hide(),this._class&&t.dom.addClass(this._element,this._class),"row"===this.__direction?(e="x",this.__css_value="Width"):(e="y",this.__css_value="Height"),t.Events.listen({type:"dblclick",node:this._element,call:function(t){return function(e){null===t.__size?t.isClosed()?t.open():t._closable&&t.close():t.resetSize(),t.storeState()}}(this)}),t.Events.listen({type:["click"],node:this._element,call:function(t){return function(e){t.__label&&t.isClosed()&&(t.open(),t.storeState())}}(this)}),i=null,new t.Draggable({element:this._element,axis:e,support_touch:!0,create:function(t){return function(){if(t.isClosed())return!1}}(this),dragstart:function(n){return function(o,r){var s,a,l,u,c;return l=n.__pane_idx<n.__element_idx?1:-1,u=function(e){var i,o;return i=t.dom.getDimensions(e),o=i["min"+n.__css_value],o<10&&(o=10),{min:o,max:i["max"+n.__css_value],value:i["contentBox"+n.__css_value]}},a=u(n.__pane),n.__adjacent_pane&&(s=u(n.__adjacent_pane),c=s.value-s.min,a.max=Math.max(0,a.value+c)),i=n.__pane.style[n.__css_value.toLowerCase()],r.__pane_data={flip:l,axis:e,min:a.min,max:a.max,value:a.value},r.isFlexHandleDrag=!0,r}}(this),get_cursor:function(t){return"x"===t.__pane_data.axis?"ew-resize":"ns-resize"},dragend:function(e){return function(i,o){return n(o),e.__size=t.dom.getDimension(e.__pane,"contentBox"+e.__css_value),e.storeState()}}(this),dragstop:function(t){return function(){return t.__pane.style[t.__css_value.toLowerCase()]=i,i=null,t.__resize()}}(this),dragging:function(e){return function(e,i){if(t.__ng__&&!t.browser.ie)return n(i)}}()}),n=function(t){return function(e){var i;return i=e.__pane_data.value+e.dragDiff[e.__pane_data.axis]*e.__pane_data.flip,e.__pane_data.min&&(i=Math.max(e.__pane_data.min,i)),e.__pane_data.max&&(i=Math.min(e.__pane_data.max,i)),t.__setSize(i)}}(this),this._manage_state&&(this._state_name||console.error("new CUI.FlexHandle()","opts.state_name missing, state will not be stored.",this.opts),this.__state_name=this._state_name,this.__setState()),this},FlexHandle.prototype.__setSize=function(e){return t.util.isNull(e)?(t.dom.setStyleOne(this.__pane,this.__css_value.toLowerCase(),""),this.__isAlive()&&0===t.dom.getDimension(this.__pane,"contentBox"+this.__css_value)&&(console.error("FlexHandle.__setSize: Pane size is 0 if unset, this needs to be fixed in CSS.",this.__pane),t.dom.setDimension(this.__pane,"contentBox"+this.__css_value,100)),this.__pane.classList.remove("cui-is-manually-sized"),this._element.classList.remove("cui-is-manually-sized"),this.__size=null):(this.__pane.classList.add("cui-is-manually-sized"),this._element.classList.add("cui-is-manually-sized"),t.dom.setDimension(this.__pane,"contentBox"+this.__css_value,e),this.__size=e),this.__resize()},FlexHandle.prototype.resetSize=function(){return this.__setSize(null),this},FlexHandle.prototype.__getSize=function(){return this.__size},FlexHandle.prototype.__isAlive=function(){return!(this.isDestroyed()||!t.dom.isInDOM(this._element))},FlexHandle.prototype.__resize=function(){if(this.__isAlive())return t.Events.trigger({type:"viewport-resize",info:{FlexHandle:!0}})},FlexHandle.prototype.__getState=function(){var e;return e=t.getLocalStorage(this.__state_name),t.util.isNull(e)?{}:JSON.parse(e)},FlexHandle.prototype.__setState=function(){var e;if(this.__state_name)return e=this.__getState(),!t.util.isUndef(e.closed)&&this._closable&&(e.closed?this.close():this.open()),t.util.isUndef(e.size)||this.__setSize(e.size),this},FlexHandle.prototype.storeState=function(){var e,i;if(this.__state_name)return e={closed:this.isClosed(),size:this.__getSize()},i=JSON.stringify(e),t.setLocalStorage(this.__state_name,i),console.info("FlexHandle.storeState: ",this.__state_name,i),this},FlexHandle.prototype.isStretched=function(){return this.__stretched},FlexHandle.prototype.stretch=function(e,i){var n,o,r,s,a,l,u,c;if(null==i&&(i=!0),i){if(this.isStretched()===e)return;this.unstretch()}switch(u=this.getPane(),e){case"west":case"north":o=t.dom.findPreviousSiblings(u);break;case"east":case"south":o=t.dom.findNextSiblings(u)}switch(e){case"west":case"east":c="width";break;case"north":case"south":c="height"}if(i){for(r=0,a=o.length;r<a;r++)n=o[r],n.classList.add("cui-flex-handle-hide-for-stretch"),n.classList.add("cui-flex-handle-hide-for-stretch-"+e);t.dom[c](this.__pane,""),u.classList.add("cui-flex-handle-stretched"),u.classList.add("cui-flex-handle-stretched-"+e),t.Events.trigger({node:u,type:"flex-stretch-start"}),this.__stretched=e}else{for(s=0,l=o.length;s<l;s++)n=o[s],n.classList.remove("cui-flex-handle-hide-for-stretch"),n.classList.remove("cui-flex-handle-hide-for-stretch-"+e);this.__stretched=null,this.__size&&this.__pane[c](this.__size),u.classList.remove("cui-flex-handle-stretched"),u.classList.remove("cui-flex-handle-stretched-"+e),t.Events.trigger({node:u,type:"flex-stretch-end"}),this.__resize()}return this},FlexHandle.prototype.unstretch=function(){if(this.isStretched())return this.stretch(this.__stretched,!1)},FlexHandle.prototype.getLabel=function(){return this.__isAlive()?this.__label:null},FlexHandle.prototype.addLabel=function(e){return null==e&&(e={}),e instanceof t.Label?this.__label=e:("row"===this.__direction&&(e.rotate_90=!0),this.__label=new t.defaults.class.Label(e)),t.dom.append(this._element,this.__label.DOM),t.dom.addClass(this._element,"cui-flex-handle-has-label")},FlexHandle.prototype.getName=function(){return this._name},FlexHandle.prototype.getHandle=function(){return this._element},FlexHandle.prototype.getPane=function(){return this.__pane},FlexHandle.prototype.isShown=function(){return!this.isHidden()},FlexHandle.prototype.isHidden=function(){return this._element.classList.contains("cui-flex-handle-hidden")},FlexHandle.prototype.isClosed=function(){return this._element.classList.contains("cui-flex-handle-closed")},FlexHandle.prototype.isOpen=function(){return!this.isClosed()},FlexHandle.prototype.close=function(){return this.isClosed()?this:(t.Events.trigger({node:this.getPane(),type:"flex-close"}),this._element.classList.add("cui-flex-handle-closed"),t.dom.setStyleOne(this.__pane,"display","none"),this.__resize(),this)},FlexHandle.prototype.open=function(){return this.isOpen()?this:(this._element.classList.remove("cui-flex-handle-closed"),t.dom.setStyleOne(this.__pane,"display",""),delete this.__closed,this.__resize(),this)},FlexHandle.prototype.hide=function(){return this.isHidden()?this:(this._element.classList.add("cui-flex-handle-hidden"),this.__resize(),this)},FlexHandle.prototype.show=function(){return this.isShown()?this:(this._element.classList.remove("cui-flex-handle-hidden"),delete this.__hidden,this.__resize(),this)},FlexHandle.prototype.destroy=function(){return t.dom.removeData(this.__pane,"flexHandle"),t.dom.removeAttribute(this.__pane,"flex-handled-pane"),t.dom.remove(this._element),FlexHandle.__super__.destroy.call(this)},FlexHandle.getStretchButton=function(e){var i,n,o,r,s,a;null==e&&(e={}),r=t.Element.readOpts(e,"FlexHandle.getPushButton",{direction:{check:["west","east","north","south"]},text:{check:String},flexHandle:{check:t.FlexHandle},button:{default:{}}}),i={west:"east",east:"west",north:"south",south:"north"},n=r.button,s={icon_active:i[r.direction],icon_inactive:r.direction,class:"cui-pane-stretch-button",text:r.text,switch:!0,onClick:function(e){return function(e,i){var n,o;return r.flexHandle?n=r.flexHandle:(o=t.dom.closest(i.DOM,"[flex-handled-pane]"),t.util.assert(o,"FlexHandle.getStretchButton","FlexHandle not or more than one found, name: "+r.name+".",{opts:r,flexHandles:o}),n=t.dom.data(o,"flexHandle")),n.isStretched()?n.unstretch():n.stretch(r.direction)}}()};for(o in s)a=s[o],n[o]=a;return new t.defaults.class.Button(n)},FlexHandle}(t.Element),t.Events.registerEvent({type:["flex-stretch-start","flex-stretch-end","flex-close"],sink:!0})}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.Icon=function(i){function Icon(e){var i,n;this.opts=null!=e?e:{},Icon.__super__.constructor.call(this,this.opts),n="",i="",this._icon&&(i=t.Icon.icon_map[this._icon],t.util.isEmpty(i)&&(i=this._icon),i.startsWith("svg-")&&(n=i,i="")),t.util.isEmpty(this._class)||(i+=" "+this._class),this.DOM=n?t.dom.htmlToNodes('<svg class="cui-icon-svg '+n+" "+i+'"><use xlink:href="#'+n.split(" ")[0]+'"></svg>')[0]:t.dom.element("I",{class:"fa "+i}),this._tooltip&&(this._tooltip.element=this.DOM,new t.Tooltip(this._tooltip))}return e(Icon,i),Icon.prototype.initOpts=function(){return Icon.__super__.initOpts.call(this),this.addOpts({class:{check:String},icon:{check:String},fixed_width:{check:Boolean},tooltip:{check:"PlainObject"}})},Icon.prototype.copy=function(){var e,i;return e=Icon.__super__.copy.call(this),i=t.dom.getStyle(this),t.dom.setStyle(e,i),e},Icon.prototype.hide=function(){return t.dom.hideElement(this.DOM)},Icon.prototype.show=function(){return t.dom.showElement(this.DOM)},Icon.icon_map={trash:"svg-trash",reset:"svg-reset",spinner:"svg-spinner cui-spin-stepped",remove:"svg-close",close:"svg-close",folder:"svg-folder",folder_shared:"svg-folder-shared",folder_upload:"svg-folder-upload",folder_shared_upload:"svg-folder-shared-upload",info_circle:"svg-info-circle",external_link:"svg-external-link",crop:"fa-crop",fullscreen:"fa-arrows-alt",failed:"fa-warning",no_right:"fa-slack",file:"fa-file",filter:"fa-filter",refresh:"fa-refresh",zip:"fa fa-file-archive-o",rotate_right:"fa-rotate-right",rotate_left:"fa-rotate-left",rotate_vertical:"fa-arrows-v",rotate_horizontal:"fa-arrows-h",calendar:"fa-calendar",show:"fa-question",help:"fa-question",question:"fa-question",settings:"fa-cog",download:"fa-download",export:"fa-download",list:"fa-question",upload:"fa-upload",envelope:"fa-envelope-o",envelope_active:"fa-envelope",save:"fa-floppy-o",heart:"fa-heart",user:"fa-user",clock:"fa-clock-o",plus:"fa-plus",edit:"fa-pencil",copy:"fa-files-o",search:"fa-search",share:"fa-share",play:"fa-play",audio:"fa-music",start:"fa-play",stop:"fa-stop",print:"fa-print",minus:"fa-minus",tree_open:"fa-caret-right",tree_close:"fa-caret-down",ellipsis_h:"fa-ellipsis-h",ellipsis_v:"fa-ellipsis-v",menu:"fa-bars",info:"fa-info-circle",bolt:"fa-bolt",check:"fa-check",warning:"fa-warning",legal:"fa-legal",cloud:"fa-cloud",left:"fa-angle-left",right:"fa-angle-right",dive:"fa-angle-right",zoom_in:"fa-search-plus",zoom_out:"fa-search-minus",resize_small:"fa-compress",resize_full:"fa-expand",email:"fa-envelope-o",file_text_active:"fa-file-text",file_text:"fa-file-text-o",required:"fa-bullhorn",west:"fa-angle-left",east:"fa-angle-right",south:"fa-angle-down",north:"fa-angle-up",up:"fa-caret-up",down:"fa-caret-down",camera:"fa-camera",expert_search:"fa-list-ul",image:"fa-picture-o"},Icon}(t.Element),t.proxyMethods(t.Icon,t.Button,["hide","show","isShown","isHidden"])}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},n={}.hasOwnProperty,o=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1};t.Template.loadTemplateText(i(170)),t.Layer=function(i){function Layer(e){var i,n,o;if(this.opts=null!=e?e:{},Layer.__super__.constructor.call(this,this.opts),this.__layer=this.getTemplate(),this.registerTemplate(this.__layer),this.__layer_root=new t.Template({class:"cui-layer-root-"+(t.util.toDash(this.__cls)+" "+(this._class||"")).trim().split(/\s+/).join(" cui-layer-root-"),name:"layer-root"}),this._backdrop)if(this.__bd_policy=this._backdrop.policy||"click-thru",this.__backdrop=new t.Template({class:"cui-layer-backdrop",name:"layer-backdrop"}),this.__layer_root.addClass("cui-layer-backdrop-policy-"+this.__bd_policy),this._backdrop.content?this.setBackdropContent(this._backdrop.content):this._backdrop.blur&&(n=document.body.firstChild.cloneNode(!0),"click-thru"===this.__bd_policy?(this.__backdrop_crop=this.__backdrop.DOM,this.setBackdropContent(n)):(this.__backdrop_crop=t.dom.div("cui-layer-backdrop-body-clone"),this.__backdrop_crop.appendChild(n),this.setBackdropContent(this.__backdrop_crop)),this.__layer_root.addClass("cui-layer-root-backdrop-blur")),"click-thru"!==this.__bd_policy||this._backdrop.blur||this._backdrop.content)switch(this.__layer_root.DOM.appendChild(this.__backdrop.DOM),this.__bd_policy){case"click-thru":break;case"click":t.Events.listen({type:["click","contextmenu"],node:this.__backdrop,call:function(t){return function(e){if(!e.ctrlKey()||2!==e.getButton())return t.hide(e),e.stopPropagation()}}(this)});break;case"modal":this.__backdrop.addClass("cui-layer-backdrop--visible"),!1!==this._backdrop.add_bounce_class&&(i=t.util.isString(this._backdrop.add_bounce_class)?this._backdrop.add_bounce_class:"cui-layer-bounce",t.Events.listen({type:"click",node:this.__backdrop,call:function(e){return function(n){e.__layer&&(t.Events.wait({type:"transitionend",node:e.__layer}).always(function(){if(!e.isDestroyed())return e.__layer.removeClass(i)}),e.__layer.addClass(i))}}(this)}));break;default:t.util.assert("new "+this.__cls,'Unknown backdrop policy: "'+this.__bd_policy+'".')}else;!1===this._visible&&this.setVisible(this._visible),this.__layer_root.DOM.appendChild(this.__layer.DOM),this._handle_focus&&t.dom.setAttribute(this.__layer.DOM,"tabindex","0"),this._element&&this.__setElement(this._element),this._use_element_width_as_min_width&&t.util.assert(this.__element,"new CUI.Layer","opts.use_element_width_as_min_width requires opts.element to be set.",{opts:this.opts}),this._pointer&&(this._class&&(o="cui-layer-pointer-"+this._class.split(/\s+/).join(" cui-layer-pointer-")),this.__pointer=new t.Template({class:o,name:"layer-pointer"}).DOM,this.__layer_root.DOM.appendChild(this.__pointer)),this.__shown=!1}return e(Layer,i),Layer.prototype.setBackdropContent=function(e){return t.util.assert(this.__backdrop,"CUI.Layer.setBackdropContent","No backdrop found in layer",{layer:this}),t.dom.append(this.__backdrop.DOM,e)},Layer.prototype.getTemplate=function(){return new t.Template({name:"layer"})},Layer.prototype.getLayerRoot=function(){return this.__layer_root},Layer.prototype.getLayer=function(){return this.__layer},Layer.prototype.initOpts=function(){return Layer.__super__.initOpts.call(this),this.addOpts({backdrop:{default:{policy:"click-thru",add_bounce_class:!0,content:null},check:function(e){if(t.util.isPlainObject(e)||!1===e)return!0}},add_bounce_class:{deprecated:"use backdrop.add_bounce_class instead"},onBeforeShow:{check:Function},onShow:{check:Function},onPosition:{check:Function},onHide:{check:Function},handle_focus:{default:!0,check:Boolean},pointer:{check:["arrow"]},placement:{check:String},placements:{check:function(e){var i,n,o;if(!t.util.isArray(e))return!1;for(n=0,o=e.length;n<o;n++)if(i=e[n],-1===this.knownPlacements.indexOf(i))return!1;return!0}},element:{check:function(e){return t.util.isElement(e)||t.util.isElement(null!=e?e.DOM:void 0)}},use_element_width_as_min_width:{default:!1,check:Boolean},show_at_position:{check:function(e){return t.util.isPlainObject(e)&&e.top>=0&&e.left>=0}},fill_space:{default:"auto",mandatory:!0,check:["auto","both","horizontal","vertical"]},check_for_element:{default:!1,check:Boolean},show_ms:{default:700,check:function(t){return function(t){return t>0}}()},visible:{check:Boolean},hide_ms:{default:100,check:function(t){return function(t){return t>0}}()}}),this},Layer.prototype.setVisible=function(e){return null==e&&(e=!0),e?t.dom.setStyleOne(this.__layer_root.DOM,"visibility",""):t.dom.setStyleOne(this.__layer_root.DOM,"visibility","hidden")},Layer.prototype.knownPlacements=["s","e","w","ws","wn","n","se","ne","es","en","nw","sw","c"],Layer.prototype.__setElement=function(e){return e instanceof t.DOMElement?this.__element=e.getElementForLayer():e.DOM?this.__element=e.DOM:this.__element=e,t.util.assert(!t.dom.closest(this.__element,".cui-tmpl"),"Layer.__setElement","element cannot be inside a Template.",{element:e}),t.util.assert(this.__element instanceof HTMLElement,"Layer.__setElement","element needs to be HTMLElement.",{element:e}),this.__element},Layer.prototype.__getOriginalElement=function(){var t;return(null!=(t=this._element)?t.DOM:void 0)||this._element||null},Layer.prototype.autoSize=function(){return this.position()},Layer.prototype.position=function(e){var i,n,r,s,a,l,u,c,h,d,p,_,f,m,g,y,v,b,w,k,D,x,M,C,O,T,L,S,I,P,F,E,B,V,R,z,A,Y,H,N,U,j,W,Z,q,G,K,$,J,X,Q,tt,et,it,nt,ot,rt;if(!this.isShown())return this;if(h={width:document.body.clientWidth,height:window.innerHeight},_=function(t){return{n:"s",s:"n",e:"w",w:"e"}[t]},p=function(e){return function(e){return t.__ng__?"cui-layer-pointer--"+e:"cui-pointer-placement-"+_(e)}}(),this.__pointer)for(t.dom.setStyle(this.__pointer,{top:0,left:0,margin:""}),Z=["w","s","e","n"],f=0,D=Z.length;f<D;f++)d=Z[f],t.dom.removeClass(this.__pointer,p(d));for(c={},q=["n","s","e","w"],g=0,x=q.length;g<x;g++)A=q[g],H=_(A),this.__pointer?(t.dom.addClass(this.__pointer,p(H)),c[A]=t.dom.getDimensions(this.__pointer),t.dom.removeClass(this.__pointer,p(H))):c[A]={borderBoxWidth:0,borderBoxHeight:0,marginLeft:0,marginRight:0,marginTop:0,marginBottom:0},c[A].direction=H;for(t.dom.setStyle(this.__layer.DOM,{position:"",top:"",left:"",width:"",height:"",margin:"",minWidth:"",maxWidth:"",maxHeight:""}),u=t.dom.getDimensions(this.__layer.DOM),i=(this._placements||this.knownPlacements).slice(0),ot=this._placement||i[0],s=document.body.scrollTop+document.documentElement.scrollTop,r=document.body.scrollLeft+document.documentElement.scrollLeft,this.__element?l=t.dom.getDimensions(this.__element):this._show_at_position?(l={viewportTop:this._show_at_position.top,viewportLeft:this._show_at_position.left},l.viewportBottom=l.viewportTop,l.viewportRight=l.viewportLeft):l={viewportTop:0,viewportLeft:0,viewportBottom:h.height,viewportRight:h.width,viewportCenterLeft:h.width/2,viewportCenterTop:h.height/2,borderBoxWidth:h.width,borderBoxHeight:h.height},nt={},G=this.knownPlacements,y=0,M=G.length;y<M;y++)if("n"===(A=G[y])||"s"===A||"e"===A||"w"===A||"c"===A){switch(nt[A]=it={},it.window_top=u.marginTop,it.window_left=u.marginLeft,it.window_right=h.width-u.marginRight,it.window_bottom=h.height-u.marginBottom,it.dim_window=h,it.dim_layer=u,it.dim_element=l,it.dim_pointer=c[A],A){case"c":it.top=it.window_top,it.left=it.window_left,it.right=it.window_right,it.bottom=it.window_bottom,it.align_vertical="center",it.align_horizontal="center";break;case"n":it.top=u.marginTop,it.left=u.marginLeft,it.right=h.width-u.marginRight,it.bottom=l.viewportTop-it.dim_pointer.borderBoxHeight-it.dim_pointer.marginBottom,it.align_vertical="bottom",it.align_horizontal="center";break;case"s":it.top=l.viewportBottom+it.dim_pointer.borderBoxHeight+it.dim_pointer.marginTop,it.left=u.marginLeft,it.right=h.width-u.marginRight,it.bottom=h.height-u.marginBottom,it.align_vertical="top",it.align_horizontal="center";break;case"e":it.top=u.marginTop,it.right=h.width-u.marginRight,it.bottom=h.height-u.marginBottom,it.left=l.viewportRight+it.dim_pointer.borderBoxWidth+it.dim_pointer.marginLeft,it.align_vertical="center",it.align_horizontal="left";break;case"w":it.top=u.marginTop,it.bottom=h.height-u.marginBottom,it.right=l.viewportLeft-it.dim_pointer.borderBoxWidth-it.dim_pointer.marginRight,it.left=u.marginLeft,it.align_vertical="center",it.align_horizontal="right"}it.pointer_align_vertical=it.align_vertical,it.pointer_align_horizontal=it.align_horizontal,it.overlap_align=null}for(K=this.knownPlacements,v=0,C=K.length;v<C;v++)if("n"!==(A=K[v])&&"s"!==A&&"e"!==A&&"w"!==A&&"c"!==A&&(Y=A.split(""),nt[A]=it=t.util.copyObject(nt[Y[0]]),it.dim_pointer=c[Y[0]],it))switch(Y[1]){case"s":it.top=l.viewportTop,it.align_vertical="top",it.pointer_align_vertical="center",it.overlap_align="bottom";break;case"n":it.bottom=l.viewportBottom,it.align_vertical="bottom",it.pointer_align_vertical="center",it.overlap_align="top";break;case"e":it.left=l.viewportLeft,it.align_horizontal="left",it.pointer_align_horizontal="center",it.overlap_align="right";break;case"w":it.right=l.viewportRight,it.align_horizontal="right",it.pointer_align_horizontal="center",it.overlap_align="left"}for($=this.knownPlacements,L=0,O=$.length;L<O;L++)A=$[L],o.call(i,A)<0?delete nt[A]:(it=nt[A],it.width=it.right-it.left,it.height=it.bottom-it.top,(it.width<10||it.height<10)&&delete nt[A]);for(A in nt){switch(it=nt[A],b=it.layer_pos={},N=it.pointer_pos={},it.cuts=0,this._fill_space){case"both":b.width=it.width,b.height=it.height;break;case"vertical":b.height=it.height,b.width=u.borderBoxWidth;break;case"horizontal":b.width=it.width,b.height=u.borderBoxHeight;break;default:b.width=u.borderBoxWidth,b.height=u.borderBoxHeight}switch(b.width>it.width&&(b.width=it.width,it.cuts++),b.height>it.height&&(b.height=it.height,it.cuts++),it.align_horizontal){case"left":b.left=it.left;break;case"right":b.left=it.right-b.width;break;case"center":b.left=l.viewportCenterLeft-b.width/2}switch(it.align_vertical){case"top":b.top=it.top;break;case"bottom":b.top=it.bottom-b.height;break;case"center":b.top=l.viewportCenterTop-b.height/2}if(it.dim_pointer){switch(it.pointer_align_horizontal){case"left":N.left=l.viewportRight+it.dim_pointer.marginLeft;break;case"right":N.left=l.viewportLeft-it.dim_pointer.borderBoxWidth-it.dim_pointer.marginLeft;break;case"center":N.left=l.viewportCenterLeft-it.dim_pointer.borderBoxWidth/2}switch(it.pointer_align_vertical){case"top":N.top=l.viewportBottom+it.dim_pointer.marginTop;break;case"bottom":N.top=l.viewportTop-it.dim_pointer.marginBoxHeight+it.dim_pointer.marginTop;break;case"center":N.top=l.viewportCenterTop-it.dim_pointer.borderBoxHeight/2}N.width=it.dim_pointer.borderBoxWidth,N.height=it.dim_pointer.borderBoxHeight,N.direction=it.dim_pointer.direction}if(b.top<it.top&&(b.top=it.top,it.cuts++),b.left<it.left&&(b.left=it.left,it.cuts++),B=b.top+b.height-it.bottom,B>0&&(b.top=b.top-B),R=b.left+b.width-it.right,R>0&&(b.left=b.left-R),it.overlap_height=0,it.overlap_width=0,this.__pointer||this._show_at_position){if((V=u.borderBoxHeight-b.height)>0)switch(it.overlap_align){case"bottom":it.overlap_height=Math.min(b.top-it.window_top,V),b.top=b.top-it.overlap_height,b.height=b.height+it.overlap_height;break;case"top":it.overlap_height=Math.min(it.window_bottom-b.top-b.height,V),b.height=b.height+it.overlap_height}if((z=u.borderBoxWidth-b.width)>0)switch(it.overlap_align){case"right":it.overlap_width=Math.min(b.left-it.window_left,z),b.left=b.left-it.overlap_width,b.width=b.width+it.overlap_width;break;case"left":it.overlap_height=Math.min(it.window_right-b.right,z),b.width=b.width+it.overlap_width}}if(this.__pointer)switch(k=it.layer_pos.left+it.layer_pos.width,w=it.layer_pos.top+it.layer_pos.height,j=it.pointer_pos.left+it.pointer_pos.width,U=it.pointer_pos.top+it.pointer_pos.height,it.pointer_pos.direction){case"n":case"s":I=it.pointer_pos.left-it.layer_pos.left,W=I-it.dim_pointer.marginLeft,W<0&&(et=it.layer_pos.left-it.window_left,it.push_left=Math.min(et,-W),it.layer_pos.left=it.layer_pos.left-it.push_left),P=k-j,W=P-it.dim_pointer.marginRight,W<0&&(et=it.window_right-k,it.push_right=Math.min(et,-W),it.layer_pos.left=it.layer_pos.left+it.push_right);break;case"e":case"w":F=it.pointer_pos.top-it.layer_pos.top,W=F-it.dim_pointer.marginTop,W<0&&(et=it.layer_pos.top-it.window_top,it.push_top=Math.min(et,-W),it.layer_pos.top=it.layer_pos.top-it.push_top),S=w-U,W=S-it.dim_pointer.marginBottom,W<0&&(et=it.window_bottom-w,it.push_bottom=Math.min(et,-W),it.layer_pos.top=it.layer_pos.top+it.push_bottom)}this._onPosition&&"function"==typeof this._onPosition&&this._onPosition(this,it),it.layer_pos.estate=it.layer_pos.width*it.layer_pos.height,it.layer_pos.aspect_ratio=it.layer_pos.width/it.layer_pos.height,it.dim_layer.aspect_ratio=it.dim_layer.borderBoxWidth/it.dim_layer.borderBoxHeight,rt=i.length-t.util.idxInArray(A,i),ot===A&&(rt=i.length+1),it.ranking=10*rt+1-Math.abs(it.layer_pos.aspect_ratio-it.dim_layer.aspect_ratio)+it.layer_pos.estate}n=[];for(A in nt)it=nt[A],n.push(A);return t.util.assert(n.length>0,"Layer.position","No available placements found.",{vp_pl:nt}),n.sort(function(e,i){var n;return n=function(t){return nt[t].ranking},t.util.compareIndex(n(e),n(i))}),n.reverse(),A=n[0],(null!=e?e.hasModifierKey():void 0)&&(console.debug("layer",u),console.debug("element",l),console.debug("pointer",c),console.debug("window",h),console.debug("placements",A,nt),Q=function(e){return function(i){var n,o,r,s,a;if(e.__removeDebugDivs(),n=nt[i],console.info("Layer: Placement",i,n),e.__dbg_div1=t.dom.element("DIV"),e.__dbg_div2=t.dom.element("DIV"),e.__dbg_div3=t.dom.element("DIV"),r={position:"absolute",zIndex:2,border:"2px solid #ff0032",backgroundColor:"rgba(255, 0, 0, 0.4)",top:n.top,left:n.left,width:n.width,height:n.height},t.dom.setStyle(e.__dbg_div1,r),s={position:"absolute",zIndex:2,border:"2px solid #00ff32",backgroundColor:"rgba(0, 255, 0, 0.4)",top:n.layer_pos.top,left:n.layer_pos.left,width:n.layer_pos.width,height:n.layer_pos.height,alignItems:"center",justifyContent:"center",fontSize:40,color:"rgb(0,255,50)"},o=t.dom.element("SPAN"),o.textContent=i,e.__dbg_div2.appendChild(o),t.dom.setStyle(e.__dbg_div2,s),a={position:"absolute",zIndex:2,border:"2px solid #0032ff",backgroundColor:"rgba(0, 0, 255, 0.4)",top:n.pointer_pos.top,left:n.pointer_pos.left,width:n.pointer_pos.width,height:n.pointer_pos.height},t.dom.setStyle(e.__dbg_div3,a),e.__layer_root.DOM.appendChild(e.__dbg_div1),e.__layer_root.DOM.appendChild(e.__dbg_div2),e.__pointer)return e.__layer_root.DOM.appendChild(e.__dbg_div3)}}(this),a=0,T=t.Events.listen({node:document,type:"keyup",call:function(t){return function(e,i){var n;if(32===e.keyCode())for(;;){if((a+=1)===t.knownPlacements.length)return t.__removeDebugDivs(),void T.destroy();if(n=t.knownPlacements[a],nt[n])return void Q(n);console.warn("Placement",n,"is unavailable.")}}}(this)})),it=nt[A],it.layer_pos.width<10||it.layer_pos.height,E=this._element&&this._use_element_width_as_min_width?l.borderBoxWidth:void 0,t.dom.setAttribute(this.__layer_root.DOM,"cui-placement",A),t.dom.setAttribute(this.__layer_root.DOM,"cui-fill-space",this._fill_space),X={top:it.layer_pos.top+s,left:it.layer_pos.left+r,minWidth:E,margin:0},u.computedStyle.maxWidth&&"none"!==u.computedStyle.maxWidth||(X.maxWidth=it.width+it.overlap_width),u.computedStyle.maxHeight&&"none"!==u.computedStyle.maxHeight||(X.maxHeight=it.height+it.overlap_height),m="c"===A||((null!=(J=this.__layer_root.DOM.previousElementSibling)?J.hasAttribute("cui-layer-fixed"):void 0)||!1),m?(this.__layer_root.DOM.setAttribute("cui-layer-fixed",""),X.top=it.layer_pos.top,X.left=it.layer_pos.left):this.__layer_root.DOM.removeAttribute("cui-layer-fixed"),"c"===A&&t.browser.ie,t.browser.ie&&(X.width=Math.ceil(it.layer_pos.width),X.height=Math.ceil(it.layer_pos.height),tt=this.__layer_root.DOM.previousElementSibling,t.dom.remove(this.__layer_root)),t.dom.setStyle(this.__layer.DOM,X),this.__pointer&&(m?t.dom.setStyle(this.__pointer,{top:it.pointer_pos.top,left:it.pointer_pos.left,margin:0}):t.dom.setStyle(this.__pointer,{top:it.pointer_pos.top+s,left:it.pointer_pos.left+r,margin:0}),t.dom.addClass(this.__pointer,p(it.pointer_pos.direction))),this.__backdrop_crop&&(t.dom.setStyle(this.__backdrop_crop,{top:it.layer_pos.top,left:it.layer_pos.left,width:it.layer_pos.width,height:it.layer_pos.height}),t.dom.setStyle(this.__backdrop_crop.firstChild,{width:h.width,height:h.height,top:-it.layer_pos.top,left:-it.layer_pos.left})),t.browser.ie&&t.dom.insertAfter(tt,this.__layer_root.DOM),this},Layer.prototype.__removeDebugDivs=function(){return t.dom.remove(this.__dbg_div1),t.dom.remove(this.__dbg_div2),t.dom.remove(this.__dbg_div3),this.__dbg_div1=null,this.__dbg_div2=null,this.__dbg_div3=null},Layer.prototype.clearTimeout=function(){return this.__timeout&&t.clearTimeout(this.__timeout),this.__timeout=null,this},Layer.prototype.showTimeout=function(e,i){var n;return null==e&&(e=this._show_ms),this.clearTimeout(),n=new t.Deferred,this.__timeout=t.setTimeout({ms:e,track:!1,onReset:function(t){return function(){return n.reject()}}(),onDone:function(t){return function(){return n.resolve()}}(),call:function(e){return function(){return e.__element&&!t.dom.isInDOM(e.__element)?void e.destroy():e.show(null,i)}}(this)}),n.promise()},Layer.prototype.hideTimeout=function(e,i){var n;return null==e&&(e=this._hide_ms),this.clearTimeout(),n=new t.Deferred,this.__timeout=t.setTimeout({ms:e,track:!1,onReset:function(t){return function(){return n.reject()}}(),onDone:function(t){return function(){return n.resolve()}}(),call:function(t){return function(){return t.hide(i)}}(this)}),n.promise()},Layer.prototype.hide=function(e){if(this.clearTimeout(),!this.isDestroyed())return this.isShown()?(this.__removeDebugDivs(),this.__element&&(this.__check_for_element&&t.clearInterval(this.__check_for_element),t.dom.removeClass(this.__getOriginalElement(),this.getElementOpenClass())),t.dom.remove(this.__layer_root.DOM),t.dom.setAttributeMap(this.__layer_root.DOM,{"cui-layer-stack-number":null,"cui-layer-stack-count":null}),this.__updateLayerStackCounter(),this.__shown=!1,this._handle_focus&&this.focusOnHide(e),t.Events.ignore({instance:this}),"function"==typeof this._onHide&&this._onHide(this,e),this):this},Layer.prototype.__updateLayerStackCounter=function(){var e,i,n,o,r,s;for(o=t.dom.matchSelector(document.documentElement,"body > .cui-layer-root"),s=o.length,n=i=0,r=o.length;i<r;n=++i)e=o[n],t.dom.setAttributeMap(e,{"cui-layer-stack-number":n,"cui-layer-stack-count":s});return this},Layer.prototype.getElementOpenClass=function(){return"cui-layer-open"},Layer.prototype.show=function(e){var i,n,o,r;if(t.util.assert(!this.isDestroyed(),this.__cls+".show","Unable to show, Layer #"+this.getUniqueId()+" is already destroyed",{layer:this}),!t.Tooltip.current||this instanceof t.Tooltip||t.Tooltip.current.hide(),this.clearTimeout(),this.isShown())return this.position(),this;if(document.body.appendChild(this.__layer_root.DOM),this.__element){for(t.dom.addClass(this.__getOriginalElement(),this.getElementOpenClass()),o=t.dom.parentsScrollable(this.__element),i=0,n=o.length;i<n;i++)r=o[i],t.Events.listen({type:"scroll",instance:this,node:r,call:function(t){return function(){return t.position()}}(this)});this._check_for_element&&(this.__check_for_element=t.setInterval(function(e){return function(){if(!t.dom.isInDOM(e.__element))return e.destroy()}}(this),200))}return this.__updateLayerStackCounter(),t.Events.listen({type:"content-resize",instance:this,node:this.__layer,call:function(t){return function(e){return t.position()}}(this)}),t.Events.listen({type:"viewport-resize",instance:this,node:this.__layer,call:function(e){return function(i){e.__element&&!t.dom.isInDOM(e.__element)||e.position()}}(this)}),"function"==typeof this._onBeforeShow&&this._onBeforeShow(this,e),this.__shown=!0,this.position(e),this._handle_focus&&this.focusOnShow(e),"function"==typeof this._onShow&&this._onShow(this,e),this},Layer.prototype.isKeyboardCancellable=function(t){var e;return"click"===(e=this.__bd_policy)||"click-thru"===e},Layer.prototype.doCancel=function(t){return this.hide(t)},Layer.prototype.focusOnShow=function(e){return e===t.KeyboardEvent?this.__focused_on_show=!0:this.__element&&t.dom.matchSelector(document.documentElement,":focus").length>0||(this.__focused_on_show=!1),(this.__focused_on_show||this.forceFocusOnShow())&&this.DOM.focus(),this},Layer.prototype.forceFocusOnShow=function(){return!1},Layer.prototype.focusOnHide=function(e){var i;return this.__element?((e===t.KeyboardEvent||this.__focused_on_show)&&null!=(i=t.dom.findElement(this.__element,"[tabindex]"))&&i.focus(),this):this},Layer.prototype.getElement=function(){return this.__element},Layer.prototype.isShown=function(){return this.__shown},Layer.prototype.destroy=function(){var e,i,n;return this.clearTimeout(),this.__shown&&this.hide(),Layer.__super__.destroy.call(this),null!=(e=this.__layer)&&e.destroy(),null!=(i=this.__layer_root)&&i.destroy(),this.__layer=null,this.__layer_root=null,t.dom.remove(this.__pointer),this.__pointer=null,null!=(n=this.__backdrop)&&n.destroy(),this.__backdrop=null},Layer}(t.DOMElement),t.ready(function(){return t.Events.listen({type:["mousedown","touchend"],capture:!0,node:document.body,call:function(e,i){var n,o,r,s,a,l;for(a=t.dom.find("body > .cui-layer-root, body > .cui-pane-fill-screen-is-on, body > .cui-layer-prevent-click-thru"),l=e.getTarget(),o=a.length-1;o>=0;o+=-1){if(s=a[o],!t.dom.hasClass(s,"cui-layer-backdrop-policy-click-thru"))return;if(t.dom.closest(l,s))return;r=t.dom.data(t.dom.children(s,".cui-layer")[0],"element"),n=r.getElement(),n&&t.dom.closest(e.getTarget(),n)&&t.Events.listen({node:document.documentElement,type:["dblclick","click"],capture:!0,only_once:!0,call:function(t){return function(t){return t.stop()}}()}),e.cui_layer_closed=!0,r.hide(e)}}}),t.Events.listen({type:["keyup"],node:document.body,call:function(e){var i,n,o;if(27===e.keyCode()&&!t.globalDrag&&(o=t.dom.find("body > .cui-layer-root > .cui-layer:not(.cui-tooltip)"),(n=o[o.length-1])&&t.dom.closest(e.getTarget(),"[tabindex],select,input,textarea")!==n))return i=t.dom.data(n,"element"),e.stopImmediatePropagation(),e.preventDefault(),i.isKeyboardCancellable(e)?(i.doCancel(e),!1):void 0}})})}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.Layout=function(i){function Layout(t){this.opts=null!=t?t:{},Layout.__super__.constructor.call(this,this.opts),this.__isInit=!1,this.init()}return e(Layout,i),Layout.prototype.initOpts=function(){var e,i,n,o,r;for(Layout.__super__.initOpts.call(this),this.addOpts({absolute:{check:Boolean},maximize:{check:Boolean},maximize_horizontal:{check:Boolean},maximize_vertical:{check:Boolean},auto_buttonbar:{default:!0,mandatory:!0,check:Boolean},center:{default:{},check:"PlainObject"}}),o=this.getSupportedPanes(),r=[],e=0,i=o.length;e<i;e++)n=o[e],r.push(this.addOpt(n,{check:function(e){return t.util.isPlainObject(e)||!1===e}}));return r},Layout.prototype.readOpts=function(){return this.initDefaultPanes(),Layout.__super__.readOpts.call(this),this.maximizeReadOpts(),this._absolute&&t.util.assert(this.__maximize,"new "+this.__cls,"opts.absolute needs opts.maximize to be set.",{opts:this.opts}),this},Layout.prototype.maximizeAddClasses=function(){return this.__maximize&&this.addClass("cui-maximize"),this.__maximize_horizontal&&this.addClass("cui-maximize-horizontal"),this.__maximize_vertical&&this.addClass("cui-maximize-vertical"),this},Layout.prototype.maximizeReadOpts=function(){return t.util.isNull(this._maximize)&&t.util.isNull(this._maximize_horizontal)&&t.util.isNull(this._maximize_vertical)&&(this._maximize=!0),this._maximize?(t.util.assert(!this._maximize_horizontal&&!this._maximize_vertical,"new "+t.util.getObjectClass(this),"opts.maximize cannot be set together with opts.maximize_horizontal or opts.maximize_vertical",{opts:this.opts}),this.__maximize_horizontal=!0,this.__maximize_vertical=!0):(this._maximize_horizontal&&(this.__maximize_horizontal=!0),this._maximize_vertical&&(this.__maximize_vertical=!0)),this.__maximize_vertical&&this.__maximize_horizontal&&(this.__maximize=!0),this},Layout.prototype.init=function(){return this.__init()},Layout.prototype.getTemplateMap=function(){var t,e,i,n,o;for(i={},o=this.__panes,t=0,e=o.length;t<e;t++)n=o[t],i[n]=!0;return i},Layout.prototype.__init=function(){var e,i,n,o,r,s,a,l,u,c,h,d,p,_,f,m;if(t.util.assert(!(!1===this._maximize&&!0===this._absolute),"Layout.__init","opts.maximize == false and opts.absolute == true is not allowed.",{opts:this.opts}),this.__panes=this.getPanes(),this.__panes.push("center"),this.__name=this.getName(),this.__layout=new t.Template({name:this.__name,map_prefix:this.getMapPrefix(),map:this.getTemplateMap()}),this.registerTemplate(this.__layout),this.__maximize_horizontal&&this.__maximize_vertical&&t.Events.listen({type:"content-resize",instance:this,node:this.DOM,call:function(e){return function(e){if(!t.dom.closest(e.getTarget(),".cui-absolute"))return e.stopPropagation()}}()}),this.maximizeAddClasses(),this.addClass(this.getMapPrefix()),this._absolute)this.addClass("cui-absolute"),t.util.assert("row"===(p=t.dom.getAttribute(this.DOM,"data-cui-absolute-container"))||"column"===p,"new CUI.Layout",'opts.absolute: template must include a cui-absolute-container attribute set to "row" or "column".'),t.dom.waitForDOMInsert({node:this.DOM}).done(function(e){return function(){return t.Layout.all()}}());else for(t.dom.removeAttribute(this.DOM,"data-cui-absolute-container"),_=this.DOM.children,o=0,a=_.length;o<a;o++)e=_[o],t.dom.removeAttribute(e,"data-cui-absolute-set");if(this.__buttonbars={},this.hasFlexHandles()){for(n=!0,h={},f=this.__panes,r=0,l=f.length;r<l;r++)d=f[r],c=this["_"+d],(null!=c?c.flexHandle:void 0)&&(h[d]=c.flexHandle);this.__layout.initFlexHandles(h)}else n=!1;for(m=this.__panes,i=function(e){return function(i){return e[i]=function(){return t.util.assert(e["_"+i],e.__cls+"."+i,'Pane "'+i+'" not initialized.',{opts:e.opts}),t.util.assert(!e.__layout.isDestroyed(),'Layout already destroyed, cannot get pane "'+i+'".'),e.__layout.map[i]}}}(this),s=0,u=m.length;s<u;s++)d=m[s],i(d),c=this["_"+d],c?(this.__initPane(c,d),n&&"center"!==d&&!c.flexHandle&&this.__layout.getFlexHandle(d).destroy()):(t.dom.remove(this.__layout.map[d]),n&&this.__layout.getFlexHandle(d).destroy());return this.__isInit=!0},Layout.prototype.destroy=function(){return t.Events.ignore({instance:this}),Layout.__super__.destroy.call(this)},Layout.prototype.getMapPrefix=function(){},Layout.prototype.__initPane=function(e,i){var n;if(t.util.assert(i,"Layout.initPane","pane_name must be set",{options:e,pane_name:i}),n=t.Element.readOpts(e,"new CUI.Layout.__initPane",{class:{check:String},content:{},flexHandle:{}}),this.append(n.content,i),n.class)return this.__layout.addClass(n.class,i)},Layout.prototype.hasFlexHandles=function(){return!0},Layout.prototype.initDefaultPanes=function(){var t,e,i,n;for(n=this.getPanes(),t=0,e=n.length;t<e;t++)i=n[t],this.opts.hasOwnProperty(i)||(this.opts[i]={});return this},Layout.prototype.getPanes=function(){return t.util.assert(!1,this.__cls+".getPanes","Needs implementation")},Layout.prototype.getSupportedPanes=function(){return t.util.assert(!1,this.__cls+".getSupportedPanes","Needs implementation")},Layout.prototype.getLayout=function(){return this.__layout},Layout.prototype.getButtonbar=function(e){return this.__buttonbars[e]||(this.__buttonbars[e]=new t.Buttonbar,t.DOMElement.prototype.append.call(this,this.__buttonbars[e],e)),this.__buttonbars[e]},Layout.prototype.__callAutoButtonbar=function(e,i){var n,o,r,s,a,l;if(t.util.isFunction(e)&&(e=e(this)),o=function(e){return t.util.isPlainObject(e)?new t.defaults.class.Button(e):e},e=o(e),t.util.isArray(e)){for(a=[],r=0,s=e.length;r<s;r++)n=e[r],l=o(n),l instanceof t.Button?a.push(this.getButtonbar(i).addButton(l)):a.push(t.DOMElement.prototype.append.call(this,n,i));return a}return e instanceof t.Button?this.getButtonbar(i).addButton(e):t.DOMElement.prototype.append.call(this,e,i)},Layout.prototype.append=function(t,e,i){return null==i&&(i=this._auto_buttonbar),i?this.__callAutoButtonbar(t,e):Layout.__super__.append.call(this,t,e)},Layout.prototype.replace=function(t,e,i){return null==i&&(i=this._auto_buttonbar),i?(delete this.__buttonbars[e],this.empty(e),this.__callAutoButtonbar(t,e)):Layout.__super__.replace.call(this,t,e)},Layout.prototype.setAbsolute=function(){return this.addClass("cui-absolute"),t.Layout.__all()},Layout.prototype.unsetAbsolute=function(){var e,i,n,o;for(this.DOM.removeAttribute("data-cui-absolute-check-value"),this.DOM.removeAttribute("data-cui-absolute-values"),o=t.dom.children(this.DOM),i=0,n=o.length;i<n;i++)e=o[i],t.dom.setStyle(e,{top:"",left:"",right:"",bottom:""});return this.removeClass("cui-absolute"),this},Layout.prototype.getName=function(){return t.util.assert(!1,this.__cls+".getName","Needs to be overwritten.")},Layout.setAbsolute=function(e){var i,n,o,r,s,a,l,u,c,h,d,p,_,f,m,g,y,v,b,w;switch(t.util.assert(t.util.isElement(e),"Layout.setAbsolute","layout needs to be HTMLElement",{layout:e}),a=t.dom.getAttribute(e,"data-cui-absolute-container")){case"row":g="marginBoxWidth",m="marginBoxHeight";break;case"column":g="marginBoxHeight",m="marginBoxWidth";break;default:t.util.assert(!1,"Layout.setAbsolute","cui-absolute-container is not set for .cui-absolute container or not set to row or column.",{container:e,direction:a})}for(w=[],r=t.dom.children(e),u=l=0,p=r.length;l<p;u=++l)o=r[u],w[u]=t.dom.getDimensions(o)[g];if(i=w.join(","),n=t.dom.getDimensions(e)[m]+"",t.dom.getAttribute(e,"data-cui-absolute-values")===i&&t.dom.getAttribute(e,"data-cui-absolute-check-value")===n)return!1;if(t.dom.getAttribute(e,"data-cui-absolute-check-value")!==n&&t.dom.setAttribute(e,"data-cui-absolute-check-value",n),t.dom.getAttribute(e,"data-cui-absolute-values")!==i)for(t.dom.setAttribute(e,"data-cui-absolute-values",i),u=c=0,_=r.length;c<_;u=++c)if(o=r[u],v=t.dom.getAttribute(o,"data-cui-absolute-set")){for(s={},y=v.split(","),h=0,f=y.length;h<f;h++){switch(d=y[h]){case"left":case"top":b=u>0?w.slice(0,u).reduce(function(t,e){return t+e}):0;break;case"right":case"bottom":b=u+1<w.length?w.slice(u+1).reduce(function(t,e){return t+e}):0;break;default:t.util.assert(!1,"Layout.setAbsolute: Unknown key "+d+" in data-cui-absolute-set.")}s[d]=b}t.dom.setStyle(o,s)}return!0},Layout.__all=function(){var e,i,n,o,r,s;for([],e=0,s=t.dom.matchSelector(document.documentElement,".cui-absolute"),n=i=0,r=s.length;i<r;n=++i)o=s[n],t.Layout.setAbsolute(o)&&e++;return e>0&&t.Events.trigger({type:"viewport-resize"}),this},Layout.all=function(){return t.scheduleCallback({call:t.Layout.__all})},Layout}(t.DOMElement),t.ready(function(){return t.Events.listen({type:["viewport-resize","content-resize"],call:function(e,i){return i.FlexHandle?t.Layout.__all():t.Layout.all()}})})}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.Template=function(i){function Template(e){var i;this.opts=null!=e?e:{},Template.__super__.constructor.call(this,this.opts),i=t.Template.nodeByName[this._name],t.util.assert(i,"CUI.Template",this._name+" not found. Make sure to call Template.loadFile(...)."),this.DOM=i.cloneNode(!0),this._class&&t.dom.addClass(this.DOM,this._class),this._attr&&t.dom.setAttributeMap(this.DOM,this._attr),this.map=this.getElMap(this._map),!t.util.isEmptyObject(this.map)&&this._set_template_empty&&t.dom.addClass(this.DOM,"cui-template-empty"),this._init_flex_handles&&this.initFlexHandles()}return e(Template,i),Template.prototype.initOpts=function(){return Template.__super__.initOpts.call(this),this.addOpts({name:{mandatory:!0,check:String},map_prefix:{check:String},init_flex_handles:{mandatory:!0,default:!1,check:Boolean},set_template_empty:{mandatory:!0,default:!0,check:Boolean},map:{type:"PlainObject",default:{}},class:{check:String},attr:{check:"PlainObject"}}),this},Template.prototype.initFlexHandles=function(e){var i,n,o,r,s,a,l,u,c,h;for(null==e&&(e={}),this.__flexHandles={},u=t.dom.matchSelector(this.DOM,"[data-cui-flex-handle]"),r=0,a=u.length;r<a;r++){if(n=u[r],l=this.readOptsFromAttr(t.dom.getAttribute(n,"data-cui-flex-handle")),e[l.name]){c=e[l.name];for(s in c)h=c[s],l.hasOwnProperty(s)||(l[s]=h)}else l.manage_state=!1;l.element=n,i=new t.FlexHandle(l),t.util.isEmpty(o=i.getName())||(this.__flexHandles[o]=i,i.init())}return this},Template.prototype.getFlexHandle=function(e){var i;return t.util.assert(this.__flexHandles,"Template.getFlexHandle","flexHandles are not initialized yet, call Template.initFlexHandles(opts) first.",{name:e}),i=this.__flexHandles[e],t.util.assert(i instanceof t.FlexHandle,this.__cls+".getFlexHandle",'FlexHandle "'+e+'" not found, make sure you have specified a name in the cui-flex-handle attribute.',{opts:this.opts,flexHandles:this.__flexHandles}),i},Template.prototype.getFlexHandles=function(){return this.__flexHandles},Template.prototype.getElMap=function(e){var i,n,o,r,s,a,l,u,c;n={},l=[],s=0;for(o in e)c=e[o],t.util.isNull(c)||(!0===c?(i=o.replace(/_/g,"-"),this._map_prefix?u="."+this._map_prefix+"-"+i:(a=t.util.toDash(this._name),u=".ez-"+a+"-"+i+",.cui-"+a+"-"+i),u=u+',[data-slot="'+t.escapeAttribute(o)+'"]'):u=c,r=t.dom.matchSelector(this.DOM,u,!0),0===r.length?(l.push("* "+o+": not found ("+u+")"),s++):r.length>1?(console.debug(o,c,"found more than once",r,this.DOM),l.push("* "+o+": found more than once ("+u+")"),s++):(l.push("+ "+o+": found"),n[o]=r[0],r[0].removeAttribute("data-slot"),function(t){return function(e){return n[e].empty=function(){return t.empty(e),n[e]},n[e].append=function(i){return t.append(i,e),n[e]},n[e].prepend=function(i){return t.prepend(i,e),n[e]}}}(this)(o)));return s&&alert('Not all required elements were found for Template:\n\n"'+this._name+'"\n\n'+l.join("\n")),n},Template.prototype.destroy=function(){return t.dom.remove(this.DOM),delete this.map,Template.__super__.destroy.call(this)},Template.prototype.addClass=function(e,i){return i?(t.util.assert(this.map[i],this.__cls+".addClass",'Key "'+i+'" not found in map. Template: "'+this._name+'".',{map:this.map,DOM:this.DOM}),t.dom.addClass(this.map[i],e)):t.dom.addClass(this.DOM,e)},Template.prototype.removeClass=function(e,i){return i?(t.util.assert(this.map[i],this.__cls+".removeClass",'Key "'+i+'" not found in map. Template: "'+this._name+'".',{map:this.map,DOM:this.DOM}),t.dom.removeClass(this.map[i],e)):t.dom.removeClass(this.DOM,e)},Template.prototype.hasClass=function(e,i){return i?(t.util.assert(this.map[i],this.__cls+".hasClass",'Key "'+i+'" not found in map. Template: "'+this._name+'".',{map:this.map,DOM:this.DOM}),t.dom.hasClass(this.map[i],e)):t.dom.hasClass(this.DOM,e)},Template.prototype.has=function(t){return!!this.map[t]},Template.prototype.hide=function(e){return e?t.dom.hideElement(this.map[e]):t.dom.hideElement(this.DOM)},Template.prototype.show=function(e){return e?t.dom.showElement(this.map[e]):t.dom.showElement(this.DOM)},Template.prototype.empty=function(e){var i;if(t.util.assert(this.map,"Template["+this._name+"].empty ["+this.getUniqueId()+"]","Already destroyed",{template:this,name:this._name}),this.isEmpty(e))return e?this.map[e]:this.DOM;if(e){t.util.assert(this.map[e],this.__cls+".empty",'Key "'+e+'" not found in map. Template: "'+this._name+'".',{map:this.map}),t.dom.empty(this.map[e]),i=!0;for(e in this.map)if(!this.isEmpty(e)){i=!1;break}return i&&this._set_template_empty&&t.dom.addClass(this.DOM,"cui-template-empty"),this.map[e]}if(t.util.isEmptyObject(this.map))t.dom.empty(this.DOM);else{for(e in this.map)t.dom.empty(this.map[e]);this._set_template_empty&&t.dom.addClass(this.DOM,"cui-template-empty")}return this.DOM},Template.prototype.replace=function(e,i,n){return t.util.assert(this.map,"Template["+this._name+"].replace ["+this.getUniqueId()+"]","Already destroyed"),i&&t.util.assert(this.map[i],this.__cls+".replace",'Key "'+i+'" not found in map. Template: "'+this._name+'".',{map:this.map,DOM:this.DOM}),this.empty(i),this.append(e,i,n)},Template.prototype.text=function(e,i,n){return t.util.assert(t.util.isString(e),this.__cls+".text","Value must be String",{value:e,key:i,element:n}),i?this.map[i].textContent=e:this.DOM.textContent=e},Template.prototype.prepend=function(t,e,i){return this.append(t,e,i,!0)},Template.prototype.append=function(e,i,n,o){var r,s,a,l,u,c;for(null==o&&(o=!1),a=o?"prepend":"append",t.util.assert(this.map,"Template["+this._name+"]."+a+" ["+this.getUniqueId()+"]","Already destroyed"),i&&t.util.assert(this.map[i],this.__cls+"."+a,'Key "'+i+'" not found in map. Template: "'+this._name+'".',{map:this.map}),t.util.isFunction(e)&&(e=e(n)),t.util.isArray(e)||(e=[e]),s=[],l=0,u=e.length;l<u;l++)r=e[l],(null!=r?r.DOM:void 0)?s.push(r.DOM):(t.util.assert(!t.util.isPromise(r),"Template.append","value cannot be Promise",{value:e}),r&&s.push(r));return c=i?this.map[i]:this.DOM,s.length>0&&(t.dom[a](c,s),this._set_template_empty&&t.dom.removeClass(this.DOM,"cui-template-empty")),c},Template.prototype.get=function(e){return t.util.assert(this.map[e],this.__cls+".get",'Key "'+e+'" not found in map. Template: "'+this._name+'".',{map:this.map,DOM:this.DOM}),this.map[e]},Template.prototype.isEmpty=function(e){return e?(t.util.assert(this.map[e],this.__cls+".isEmpty",'Key "'+e+'" not found in map. Template: "'+this._name+'".',{map:this.map}),!this.map[e].firstChild):!this.DOM.firstChild},Template.prototype.removeEmptySlots=function(){var e,i,n;n=this.map;for(e in n)i=n[e],i.firstChild||t.dom.remove(i);return this},Template.nodeByName={},Template.loadTemplateFile=function(t){return this.loadFile(t,!0)},Template.loadTemplateText=function(t){return this.__appendContent(t,!0)},Template.loadText=function(t){return this.__appendContent(t,!1)},Template.loadFile=function(e,i){var n;return null==i&&(i=!1),n=e.match("^(https://|http://|/)")?e:t.getPathToScript()+e,new t.XHR({url:n,responseType:"text"}).start().done(function(t){return function(e){t.__appendContent(e,i)}}(this)).fail(function(t){return console.error('Template.loadFile: Unable to load filename: "'+e+'", see Console for more details. You can however, output easydbui.html manually before loading easydbui.js.',t)})},Template.load=function(e){var i,n,o,r,s,a,l,u,c,h;for(null==e&&(e=document.documentElement),n=0,c=t.dom.matchSelector(e,".cui-tmpl,[data-template]"),r=0,a=c.length;r<a;r++){if(o=c[r],u=null,u=o.getAttribute("data-template"),t.util.isEmpty(u))for(h=o.classList,s=0,l=h.length;s<l;s++)if(i=h[s],i.startsWith("cui-tmpl-")){if(u=i.substr(9),t.Template.nodeByName[u]){console.error("Template.load:",u,"already found in DOM tree. Make sure all elements exists only once.",o);continue}break}u&&(t.Template.nodeByName[u]=o,t.dom.remove(o),o.classList.remove("cui-tmpl"),o.removeAttribute("data-template"),n+=1)}return n},Template.__appendContent=function(e,i){var n,o;return o=t.dom.element("DIV",{style:"display:none;"}),o.innerHTML=e,i?(n=t.Template.load(o),o.children.length>0&&(document.body.appendChild(o),console.warn("Template.loadFile:",filename,"contains extra content.",o)),0===n?console.warn("Template.loadFile:",filename,"contains no Templates."):void 0):document.body.appendChild(o)},Template}(t.Element)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.XHR=function(i){function XHR(){return XHR.__super__.constructor.apply(this,arguments)}return e(XHR,i),XHR.prototype.getGroup=function(){return"Core"},XHR.prototype.initOpts=function(){return XHR.__super__.initOpts.call(this),this.addOpts({method:{mandatory:!0,default:"GET",check:["GET","POST","PUT","DELETE","OPTIONS"]},url:{mandatory:!0,check:String,check:function(t){return t.trim().length>0}},user:{check:String},password:{check:String},responseType:{mandatory:!0,default:"json",check:["","text","json","blob","arraybuffer"]},timeout:{check:function(t){return t>=0}},form:{check:"PlainObject"},url_data:{check:"PlainObject"},body:{},json_data:{},json_pretty:{default:!1,check:function(e){return!1===e||!0===e||t.util.isString(e)}},headers:{mandatory:!0,default:{},check:"PlainObject"},withCredentials:{mandatory:!0,default:!1,check:Boolean}}),this},XHR.readyStates={0:"UNSENT",1:"OPENED",2:"HEADERS_RECEIVED",3:"LOADING",4:"DONE"},XHR.statusText={"-1":"abort","-2":"timeout","-3":"network_failure"},XHR.prototype.readOpts=function(){var e,i,n,o;XHR.__super__.readOpts.call(this),this.__xhr=new XMLHttpRequest,this.__xhr.withCredentials=this._withCredentials,this.__readyStatesSeen=[this.readyState()],this.__registerEvents("download"),this.__registerEvents("upload"),this.__headers={},i=this._headers;for(e in i)o=i[e],this.__headers[e.toLowerCase()]=o;return this._form&&(this.opts.method||(this._method="POST")),this._url_data?this.__url=t.appendToUrl(this._url,this._url_data):this.__url=this._url,n=0,this._form&&(n+=1),this._json_data&&(n+=1,void 0===this.__headers["content-type"]&&(this.__headers["content-type"]="application/json; charset=utf-8")),this._body&&(n+=1),t.util.assert(n<=1,"new CUI.XHR","opts.form, opts.json_data, opts.body are mutually exclusive."),this},XHR.prototype.__registerEvents=function(t){var e,i,n,o,r,s,a;for(r=["loadStart","progress","abort","error","load","loadend","timeout"],"upload"===t?a=this.__xhr.upload:(r.push("readyStateChange"),a=this.__xhr),i=function(t){return function(e,i){return a.addEventListener(i.toLowerCase(),function(i){return t[e](i)})}}(this),n=0,s=r.length;n<s;n++)o=r[n],e="__"+t+"_"+o,this[e]&&i(e,o);return this},XHR.prototype.__setStatus=function(t){return this.__status=t,this.__xhr.CUI_status=this.__status,this.__xhr.CUI_statusText=this.statusText()},XHR.prototype.__download_abort=function(){return this.__setStatus(-1)},XHR.prototype.__download_timeout=function(){return this.__setStatus(-2)},XHR.prototype.__download_loadend=function(){return this.isSuccess()?this.__dfr.resolve(this.response(),this.status(),this.statusText()):(this.status()||this.__status||(this.__setStatus(-3),console.debug("XHR.__download_loadend",this.getXHR())),this.__dfr.reject(this.response(),this.status(),this.statusText())),this},XHR.prototype.__download_readyStateChange=function(){return t.util.pushOntoArray(this.readyState(),this.__readyStatesSeen)},XHR.prototype.__progress=function(t,e){var i,n,o;if("DONE"!==this.readyState())return i=t.loaded,o=t.total,n=t.lengthComputable?Math.floor(i/o*100):-1,this.__dfr.notify(e,i,o,n),this},XHR.prototype.__upload_progress=function(t){return this.__progress(t,"upload")},XHR.prototype.__download_progress=function(t){return this.__progress(t,"download")},XHR.prototype.abort=function(){return this.__xhr.abort()},XHR.prototype.isSuccess=function(){return!(!this.__url.startsWith("file:///")||"UNSENT,OPENED,HEADERS_RECEIVED,LOADING,DONE"!==this.__readyStatesSeen.join(","))||(this.__xhr.status>=200&&this.__xhr.status<300||304===this.__xhr.status)},XHR.prototype.status=function(){return this.__status<0?this.__status:this.__xhr.status},XHR.prototype.statusText=function(){return this.__status<0?t.XHR.statusText[this.__status+""]:this.__xhr.statusText},XHR.prototype.response=function(){var t;if("json"===this._responseType&&""===this.__xhr.responseType)try{t=JSON.parse(this.__xhr.response)}catch(e){e,t=this.__xhr.response}else t=this.__xhr.response;return"json"===this._responseType&&(this.__xhr.responseJSON=t),t},XHR.prototype.start=function(){var e,i,n,o,r,s;this.__xhr.open(this._method,this.__url,!0,this._user,this._password),n=this.__headers;for(i in n)s=n[i],this.__xhr.setRequestHeader(i,s);if(this.__xhr.responseType=this._responseType,this.__xhr.timeout=this._timeout,this._form){e=new FormData,o=this._form;for(i in o)s=o[i],e.append(i,s);r=e}else r=this._json_data?this._json_pretty?!0===this._json_pretty?JSON.stringify(this._json_data,null,"\t"):JSON.stringify(this._json_data,null,this._json_pretty):JSON.stringify(this._json_data):this._body?this._body:void 0;return this.__dfr=new t.Deferred,this.__xhr.send(r),this.__dfr.promise()},XHR.prototype.getXHR=function(){return this.__xhr},XHR.prototype.getAllResponseHeaders=function(){var t,e,i,n,o;for(e=[],o=this.__xhr.getAllResponseHeaders().split("\r\n"),i=0,n=o.length;i<n;i++)t=o[i],0!==t.trim().length&&e.push(t);return e},XHR.prototype.getResponseHeaders=function(){var t,e,i,n,o,r,s;for(o={},s=this.getAllResponseHeaders(),e=0,n=s.length;e<n;e++)t=s[e],r=t.match(/^(.*?): (.*)$/),i=r[1].toLowerCase(),o[i]||(o[i]=[]),o[i].push(r[2]);return o},XHR.prototype.getResponseHeader=function(t){var e;return null!=(e=this.getResponseHeaders()[t.toLowerCase()])?e[0]:void 0},XHR.prototype.readyState=function(){return t.XHR.readyStates[this.__xhr.readyState]},XHR}(t.Element)}).call(e,i(0))},function(t,e,i){(function(t){t.dom=function(){function dom(){}return dom.data=function(e,i,n){var o,r,s;if(e){if(t.util.assert(e instanceof HTMLElement,"dom.data","node needs to be instance of HTMLElement",{node:e}),void 0===i)return e.__dom_data||{};if(t.util.isPlainObject(i)){for(o in i)s=i[o],t.dom.data(e,o,s);return e}return void 0===n?null!=(r=e.__dom_data)?r[i]:void 0:(e.__dom_data||(e.__dom_data={}),e.__dom_data[i]=n,e)}},dom.removeData=function(e,i){if(e)return e.__dom_data&&(delete e.__dom_data[i],t.util.isEmptyObject(e.__dom_data)&&delete e.__dom_data),e},dom.findElement=function(t,e,i,n,o){var r;return null==n&&(n=!0),null==o&&(o=!1),r=this.findElements(t,e,i,1,n,o),0===r.length?null:r[0]},dom.findNextElement=function(t,e,i,n,o){var r,s;if(null==i&&(i=!1),null==n&&(n=!0),null==o&&(o=!0),r=this.findElement(t,e,i,n,o))return r;for(;;){if(!(t=t.parentNode))return null;if(s=n?t.nextElementSibling:t.previousElementSibling)break}return this.findNextElement(s,e,i,n,!1)},dom.findPreviousElement=function(t,e,i){return null==i&&(i=!1),this.findNextElement(t,e,i,!1)},dom.findNextVisibleElement=function(e,i,n){return null==n&&(n=!0),this.findNextElement(e,i,function(e){return function(e){return t.dom.isVisible(e)}}(),n)},dom.findPreviousVisibleElement=function(t,e){return this.findNextVisibleElement(t,e,!1)},dom.findNextSiblings=function(t,e,i){return null==i&&(i=!1),this.findElements(t,e,i,null,!0,!0)},dom.findPreviousSiblings=function(t,e,i){return null==i&&(i=!1),this.findElements(t,e,i,null,!1,!0)},dom.findElements=function(e,i,n,o,r,s,a){var l,u,c,h;return null==e&&(e=document.documentElement),null==i&&(i=null),null==n&&(n=!1),null==o&&(o=null),null==r&&(r=!0),null==s&&(s=!1),a?u=!0:(t.util.assert(e instanceof HTMLElement,"DOM.findElement","node needs to be instanceof HTMLElement.",{node:e,selector:i}),a=[],u=!s),l=!n||n(e),u&&l&&(null===i||t.dom.matches(e,i))&&(a.push(e),a.length===o)?a:(r?(c=e.firstElementChild,h=e.nextElementSibling):(c=e.lastElementChild,h=e.previousElementSibling),c&&!s&&l&&(this.findElements(c,i,n,o,r,s,a),a.length===o)?a:(h&&(this.findElements(h,i,n,o,r,s,a),a.length),a))},dom.children=function(t,e){var i,n,o,r,s,a;for(n=[],a=t.children,r=o=0,s=a.length;o<s;r=++o)i=a[r],e&&!this.is(i,e)||n.push(i);return n},dom.firstElementChild=function(t,e){var i;for(i=t.firstElementChild;;){if(!i)return null;if(!e||this.is(i,e))return i;i=i.nextElementSibling}},dom.lastElementChild=function(t,e){var i;for(i=t.lastElementChild;;){if(!i)return null;if(!e||this.is(i,e))return i;i=i.previousElementSibling}},dom.nextElementSibling=function(t,e){var i;for(i=t;;){if(!(i=i.nextElementSibling))return null;if(!e||this.is(i,e))return i}},dom.previousElementSibling=function(t,e){var i;for(i=t;;){if(!(i=i.previousElementSibling))return null;if(!e||this.is(i,e))return i}},dom.removeAttribute=function(t,e){return t?(t.removeAttribute(e),t):null},dom.setAttribute=function(e,i,n){var o;return e?(o=e.DOM||e,t.util.isNull(n)||!1===n?this.removeAttribute(o,i):(!0===n?o.setAttribute(i,i):o.setAttribute(i,n),o)):null},dom.hasAttribute=function(t,e){return!!t&&t.hasAttribute(e)},dom.setAttributeMap=function(e,i){var n,o,r;if(!e)return null;if(o=e.DOM||e,!i)return o;for(n in i)r=i[n],t.dom.setAttribute(o,n,r);return o},dom.width=function(e,i){return e===document||e===window?(void 0!==i&&t.util.assert(!1,"CUI.dom.width","Unable to set width on a non HTMLElement",{docElem:e}),window.innerWidth):void 0===i?this.getDimension(e,"contentBoxWidth"):this.setDimension(e,"contentBoxWidth",i)},dom.height=function(e,i){return e===document||e===window?(void 0!==i&&t.util.assert(!1,"CUI.dom.height","Unable to set width on a non HTMLElement",{docElem:e}),window.innerHeight):void 0===i?this.getDimension(e,"contentBoxHeight"):this.setDimension(e,"contentBoxHeight",i)},dom.__append=function(e,i,n){var o,r,s;if(null==n&&(n=!0),t.util.isNull(i))return e;if(t.util.isArray(i)||i instanceof HTMLCollection||i instanceof NodeList){for(r=0,s=i.length;r<s;)this.__append(e,i[r],n),s>i.length||r++,s=i.length;return e}switch(typeof i){case"number":case"boolean":o=document.createTextNode(i+"");break;case"string":o=document.createTextNode(i);break;default:if(i.hasOwnProperty("DOM")){if(o=i.DOM,t.util.isNull(o))return}else o=i}return n?(t.util.assert(o instanceof Node,"CUI.dom.append","Content needs to be instanceof Node, string, boolean, or number.",{node:o}),e.appendChild(o)):(t.util.assert(o instanceof Node,"CUI.dom.prepend","Content needs to be instanceof Node, string, boolean, or number.",{node:o}),e.insertBefore(o,e.firstChild)),e},dom.replace=function(t,e){return t.hasOwnProperty("DOM")&&(t=t.DOM),this.empty(t),this.append(t,e)},dom.prepend=function(t,e){return this.__append(t,e,!1)},dom.append=function(t,e){return this.__append(t,e)},dom.getAttribute=function(t,e){return t.hasOwnProperty("DOM")&&(t=t.DOM),t.getAttribute(e)},dom.remove=function(t){var e,i;return(e=(null!=t?t.DOM:void 0)||t)?(null!=(i=e.parentNode)&&i.removeChild(e),e):null},dom.empty=function(e){var i;if(!e)return null;for(e.hasOwnProperty("DOM")&&(e=e.DOM),t.util.assert(t.util.isElement(e),"CUI.dom.empty","top needs to be Element",{node:e});i=e.lastChild;)e.removeChild(i);return e},dom.hasClass=function(t,e){var i,n,o,r;if(!t||!e)return null;for(r=e.trim().split(/\s+/),n=0,o=r.length;n<o;n++)if(""!==(i=r[n])&&t.classList.contains(i))return!0;return!1},dom.toggleClass=function(t,e){return this.setClass(t,e,!this.hasClass(t,e))},dom.setClass=function(t,e,i){return i?this.addClass(t,e):this.removeClass(t,e),i},dom.setAria=function(t,e,i){return!0===i?this.setAttribute(t,"aria-"+e,"true"):!1===i?this.setAttribute(t,"aria-"+e,"false"):this.setAttribute(t,"aria-"+e,i)},dom.addClass=function(t,e){var i,n,o,r;if(!e||!t)return t;for(r=e.trim().split(/\s+/),n=0,o=r.length;n<o;n++)""!==(i=r[n])&&(t.DOM||t).classList.add(i);return t},dom.removeClass=function(t,e){var i,n,o,r;if(!e||!t)return t;for(r=e.trim().split(/\s+/),n=0,o=r.length;n<o;n++)""!==(i=r[n])&&(t.DOM||t).classList.remove(i);return t},dom.getRelativeOffset=function(e,i,n){var o,r,s,a,l,u;for(null==i&&(i=null),null==n&&(n=!1),t.util.assert(t.util.isElement(e),"CUI.dom.getRelativePosition","Node needs to HTMLElement.",{node:e}),r=t.dom.getDimensions(e),u=e.parentNode,n?(a="viewportTop",s="viewportLeft"):(a="viewportTopMargin",s="viewportLeftMargin");;){if(o=t.dom.getDimensions(u),u===document.body||u===document.documentElement||u===document){l={parent:u,top:r[a]+document.body.scrollTop,left:r[s]+document.body.scrollLeft};break}if(o.canHaveScrollbar||u===e.offsetParent||u===i){l={parent:u,top:r[a]-(o.viewportTop+o.borderTop)+o.scrollTop,left:r[s]-(o.viewportLeft+o.borderTop)+o.scrollLeft};break}if(!(u=u.parentNode))break}return l},dom.hasAnimatedClone=function(t){return!!t.__clone},dom.initAnimatedClone=function(e,i){var n,o,r,s,a,l,u,c,h,d;for(this.removeAnimatedClone(e),n=e.cloneNode(!0),e.__clone=n,i?(d=t.dom.matchSelector(e,i),n.__watched_nodes=t.dom.matchSelector(n,i)):(d=t.dom.children(e),n.__watched_nodes=t.dom.children(n)),c=t.dom.getRelativeOffset(e),t.dom.isPositioned(c.parent)||(e.__parent_saved_position=c.parent.style.position,c.parent.style.position="relative"),t.dom.setStyle(n,{position:"absolute","pointer-events":"none",top:c.top,left:c.left}),e.style.opacity="0",r=t.dom.getDimensions(e),t.dom.addClass(n,"cui-dom-animated-clone"),s=t.dom.element("div",{style:"position: absolute; opacity: 0; width: 1px; height: 1px;"}),n.appendChild(s),t.dom.insertAfter(e,n),t.dom.setDimension(n,"marginBoxWidth",r.marginBoxWidth),t.dom.setDimension(n,"marginBoxHeight",r.marginBoxHeight),h=n.__watched_nodes,l=a=0,u=h.length;a<u;l=++a)o=h[l],o.__watched_node=d[l],t.dom.setStyle(o,{position:"absolute",margin:0});return this.syncAnimatedClone(e),e.__clone.__syncScroll=function(t){return function(){return s.style.top=e.scrollHeight-1+"px",s.style.left=e.scrollWidth-1+"px",n.scrollTop=e.scrollTop,n.scrollLeft=e.scrollLeft}}(),t.Events.listen({type:"scroll",instance:n,node:e,call:function(t){return function(){return e.__clone.__syncScroll()}}()}),e.__clone.__syncScroll(),e},dom.syncAnimatedClone=function(e){var i,n,o,r,s,a,l,u;if(n=e.__clone){for(u=n.__watched_nodes,s=r=0,a=u.length;r<a;s=++r)o=u[s],i=o.__watched_node,l=this.getRelativeOffset(i,e,!0),t.dom.setStyle(o,{top:l.top,left:l.left});return e}},dom.removeAnimatedClone=function(e){if(e.hasOwnProperty("__parent_saved_position")&&(e.style.position=e.__parent_saved_position||"",delete e.__parent_saved_position),e.__clone)return t.Events.ignore({instance:e.__clone}),e.style.opacity="",t.dom.remove(e.__clone),delete e.__clone,e},dom.setAbsolutePosition=function(e,i){var n,o,r,s;return t.util.assert(t.util.isElement(e),"CUI.dom.setAbsolutePosition","element needs to be an instance of HTMLElement",{element:e,offset:i}),t.util.assert(t.util.isNumber(null!=i?i.left:void 0)&&t.util.isNumber(null!=i?i.top:void 0),"CUI.dom.setAbsolutePosition","offset.left and offset.top must be >= 0",{element:e,offset:i}),s=e.offsetParent,s===document.documentElement?(r={top:0,left:0},n={top:document.body.scrollTop,left:document.body.scrollLeft}):(o=t.dom.getDimensions(s),r={top:o.top,left:o.left},r.top+=o.borderTopWidth,r.left+=o.borderLeftWidth,n={top:o.scrollTop,left:o.scrollLeft}),t.dom.setStyle(e,{top:i.top-r.top+n.top,left:i.left-r.left+n.left})},dom.__failedDOMInserts=0,dom.waitForDOMRemove=function(e){var i,n,o,r;return r=t.Element.readOpts(e,"CUI.dom.waitForDOMRemove",{node:{mandatory:!0,check:function(e){return t.dom.isNode(e)}},ms:{default:200,check:function(t){return t>0}}}),o=t.dom.getNode(r.node),n=new t.Deferred,i=function(e){return function(){return t.dom.isInDOM(o)?t.setTimeout({call:i,ms:r.ms,track:!1}):void n.resolve()}}(),i(),n.promise()},dom.waitForDOMInsert=function(e){var i,n,o,r,s,a,l;if(s=t.Element.readOpts(e,"CUI.dom.waitForDOMInsert",{node:{mandatory:!0,check:function(e){return t.dom.isNode(e)}}}),r=t.dom.getNode(s.node),t.dom.isInDOM(r))return t.resolvedPromise(!0);for(i=new t.Deferred,l=["-webkit-","-moz-","-ms-","-o-",""],n=0,o=l.length;n<o;n++)a=l[n],t.dom.setStyleOne(r,a+"animation-duration","0.001s"),t.dom.setStyleOne(r,a+"animation-name","nodeInserted");return null,t.Events.wait({node:r,type:"animationstart",maxWait:-1}).done(function(e){return function(){var n,o,s;return t.dom.isInDOM(r)?void i.resolve():(n=e.__failedDOMInserts++,console.warn("[#"+n+"] Element received animationstart event but is not in DOM yet. We poll with timeout 0."),s=0,o=function(){return t.dom.isInDOM(r)?(console.warn("[#"+n+"] Poll done, element is in DOM now."),i.resolve()):s<10?(console.warn("[#"+n+"] Checking for node failed, try: ",s),s+=1,t.setTimeout(o,0)):console.error("[#"+n+"] Checking for node failed. Giving up.",r)},t.setTimeout(o,0))}}(this)).fail(i.reject),i.promise()},dom.getNode=function(t){return t.DOM&&t!==window?t.DOM:t},dom.printElement=function(e){var i,n,o,r,s,a,l,u,c,h,d,p,_;for(c=t.Element.readOpts(e,"CUI.dom.printElement",{docElem:{check:function(t){return t instanceof HTMLElement}},title:{default:"CUI-Print-Window",check:String},windowName:{default:"_blank",check:String},windowFeatures:{default:"width=400,height=800",check:String},bodyClasses:{default:[],check:Array}}),n=c.docElem===document.documentElement?document.body:c.docElem,_=window.open("",c.windowName,c.windowFeatures),t.util.isEmpty(c.title)||(_.document.title=c.title),h=t.dom.matchSelector(document.head,"link[rel='stylesheet']"),r=0,a=h.length;r<a;r++)p=h[r],u=p.cloneNode(!0),o=ez5.getAbsoluteURL(u.getAttribute("href")),u.setAttribute("href",o),console.debug("cloning css node for href",o),_.document.head.appendChild(u);for(_.document.body.innerHTML=n.outerHTML,_.document.body.classList.add("cui-dom-print-element"),d=c.bodyClasses,s=0,l=d.length;s<l;s++)i=d[s],_.document.body.classList.add(i);return _.print()},dom.isNode=function(t,e){return null==e&&(e=0),!!t&&!!(t===document.documentElement||t===window||t===document||t.nodeType||this.isNode(t.DOM,e+1)&&0===e)},dom.insertChildAtPosition=function(e,i,n){return t.util.assert(t.util.isInteger(n)&&n>=0&&n<=e.children.length,"CUI.dom.insertAtPosition","Unable to insert node at position #"+n+".",{node:e,node_insert:i,pos:n}),n===e.children.length?e.appendChild(i):e.children[n]!==i?this.insertBefore(e.children[n],i):void 0},dom.insertBefore=function(t,e){var i;return(i=(null!=t?t.DOM:void 0)||t)?(e&&i.parentNode.insertBefore(e,i),i):null},dom.insertAfter=function(t,e){var i;return(i=(null!=t?t.DOM:void 0)||t)?(e&&i.parentNode.insertBefore(e,i.nextSibling),i):null},dom.is=function(e,i){return e?i instanceof HTMLElement?e===i:t.util.isFunction(i)?!!i(e):e instanceof HTMLElement?this.matches(e,i):null:null},dom.matches=function(e,i){return e?e[t.dom.matchFunc](i):null},dom.matchFunc=function(){var e,i,n,o,r;for(e=document.createElement("div"),r=["matches","webkitMatchesSelector","mozMatchesSelector","oMatchesSelector","msMatchesSelector"],i=0,o=r.length;i<o;i++)if(n=r[i],e[n])return n;return t.util.assert(!1,"Could not determine match function on docElem")}(),dom.find=function(t){return this.matchSelector(document.documentElement,t)},dom.matchSelector=function(e,i,n){var o;return null==n&&(n=!1),e.hasOwnProperty("DOM")&&(e=e.DOM),t.util.assert(e instanceof HTMLElement||e===document,"CUI.dom.matchSelector","docElem needs to be instanceof HTMLElement or document.",{docElem:e}),o=e.querySelectorAll(i),n&&0===o.length&&(o=e[t.dom.matchFunc](i)?[e]:[]),o},dom.elementsUntil=function(e,i,n){var o,r;for(t.util.assert(e instanceof Node||e===window,"CUI.dom.elementsUntil","docElem needs to be instanceof Node or window.",{docElem:e,selector:i,untilDocElem:n}),r=e,o=[r];;){if(i&&this.is(r,i))return o;if(r===n)return i?[]:o;if(null===(r=t.dom.parent(r)))return i?[]:o;o.push(r)}return[]},dom.parent=function(t){return t===window?null:t===document?window:(t.hasOwnProperty("DOM")&&(t=t.DOM),t.parentNode)},dom.closest=function(t,e){return this.closestUntil(t,e)},dom.closestUntil=function(t,e,i){var n;return e?(n=this.elementsUntil(t,e,i),0===n.length?null:n[n.length-1]):null},dom.parentsUntil=function(e,i,n){var o;return null==n&&(n=document.documentElement),o=t.dom.parent(e),o?this.elementsUntil(o,i,n):[]},dom.parents=function(e,i,n){var o,r,s,a,l;if(null==n&&(n=document.documentElement),t.util.assert(e instanceof HTMLElement||e===document||e===window,"CUI.dom.parents","element needs to be instanceof HTMLElement, document, or window.",{element:e}),l=this.parentsUntil(e,null,n),!i)return l;for(a=[],o=0,r=l.length;o<r;o++)s=l[o],this.is(s,i)&&a.push(s);return a},dom.isInDOM=function(e){return e?(e.hasOwnProperty("DOM")&&(e=e.DOM),t.util.assert(e instanceof Node,"CUI.dom.isInDOM","docElem needs to be instanceof Node.",{docElem:e}),document.documentElement.contains(e)):null},dom.replaceWith=function(e,i){var n;if(t.util.assert(e instanceof Node&&(i instanceof Node||i instanceof NodeList),"CUI.dom.replaceWidth","nodes need to be instanceof Node.",{node:e,newNode:i}),i instanceof NodeList){for(n=i[0],e.parentNode.replaceChild(n,e);i.length>0;)this.insertAfter(n,i[i.length-1]);return n}return e.parentNode.replaceChild(i,e)},dom.getRect=function(t){return t.getBoundingClientRect()},dom.getComputedStyle=function(t){return window.getComputedStyle(t)},dom.setStyle=function(e,i,n){var o,r;null==n&&(n="px"),e.hasOwnProperty("DOM")&&(e=e.DOM),t.util.assert(e instanceof HTMLElement,"CUI.dom.setStyle","docElem needs to be instanceof HTMLElement.",{docElem:e});for(o in i)if(void 0!==(r=i[o]))switch(r){case"":case null:e.style[o]="";break;default:isNaN(Number(r))?e.style[o]=r:e.style[o]=0===r||"0"===r?0:r+n}return e},dom.getStyle=function(e){var i,n,o,r;e.hasOwnProperty("DOM")&&(e=e.DOM),r={},i=e.style;for(n in i)o=i[n],t.util.isNull(o)||(r[n]=o);return r},dom.setStyleOne=function(t,e,i){var n;return n={},n[e]=i,this.setStyle(t,n)},dom.setStylePx=function(t,e){return console.error("CUI.dom.setStylePx is deprectaed, use CUI.dom.setStyle."),this.setStyle(t,e)},dom.getRelativePosition=function(e){var i;return t.util.assert(e instanceof HTMLElement,"CUI.dom.getRelativePosition","docElem needs to be instanceof HTMLElement.",{docElem:e}),i=t.dom.getDimensions(e),{top:i.offsetTopScrolled,left:i.offsetLeftScrolled}},dom.getDimensions=function(e){var i,n,o,r,s,a,l,u,c,h,d,p,_,f,m,g,y,v,b,w,k,D,x,M,C,O,T;if(t.util.isNull(e))return null;if(e===window||e===document)return{width:window.innerWidth,height:window.innerHeight};for(i=this.getComputedStyle(e),b=this.getRect(e),n={computedStyle:i,clientBoundingRect:b},w=["margin","padding","border"],r=0,h=w.length;r<h;r++){for(l=w[r],k=["Top","Right","Bottom","Left"],s=0,d=k.length;s<d;s++)switch(u=k[s],o=l+u,l){case"border":n[o]=this.getCSSFloatValue(i["border"+u+"Width"]);break;default:n[o]=this.getCSSFloatValue(i[o])}n[l+"Vertical"]=n[l+"Top"]+n[l+"Bottom"],n[l+"Horizontal"]=n[l+"Left"]+n[l+"Right"]}for(n.contentBoxWidth=Math.max(0,b.width-n.borderHorizontal-n.paddingHorizontal),n.contentBoxHeight=Math.max(0,b.height-n.borderVertical-n.paddingVertical),n.innerBoxWidth=Math.max(0,b.width-n.borderHorizontal),n.innerBoxHeight=Math.max(0,b.height-n.borderVertical),n.borderBoxWidth=b.width,n.borderBoxHeight=b.height,"content-box"===i.boxSizing?(n.contentWidthAdjust=n.borderBoxWidth-n.contentBoxWidth,n.contentHeightAdjust=n.borderBoxHeight-n.contentBoxHeight):(n.contentWidthAdjust=0,n.contentHeightAdjust=0),n.marginBoxWidth=Math.max(0,b.width+n.marginHorizontal),n.marginBoxHeight=Math.max(0,b.height+n.marginVertical),n.viewportTop=b.top,n.viewportTopMargin=b.top-n.marginTop,n.viewportLeft=b.left,n.viewportLeftMargin=b.left-n.marginLeft,n.viewportBottom=b.bottom,n.viewportBottomMargin=b.bottom+n.marginBottom,n.viewportRight=b.right,n.viewportRightMargin=b.right+n.marginRight,n.viewportCenterTop=b.top+(b.bottom-b.top)/2,n.viewportCenterLeft=b.left+(b.right-b.left)/2,D=["left","top","minWidth","minHeight","maxWidth","maxHeight","marginRight","marginLeft","marginTop","marginBottom","borderTopWidth","borderLeftWidth","borderBottomWidth","borderRightWidth"],c=0,p=D.length;c<p;c++)a=D[c],n[a]=this.getCSSFloatValue(i[a]);for(x=["offsetWidth","offsetHeight","offsetTop","offsetLeft","clientWidth","clientHeight","scrollWidth","scrollHeight","scrollLeft","scrollTop"],g=0,_=x.length;g<_;g++)a=x[g],n[a]=e[a];for(n.scaleX=n.borderBoxWidth/n.offsetWidth||1,n.scaleY=n.borderBoxHeight/n.offsetHeight||1,e.offsetParent?(n.offsetTopScrolled=n.offsetTop+e.offsetParent.scrollTop,n.offsetLeftScrolled=n.offsetLeft+e.offsetParent.scrollLeft):(n.offsetTopScrolled=n.offsetTop+document.body.scrollTop,n.offsetLeftScrolled=n.offsetLeft+document.body.scrollLeft),M=["offsetWidth","offsetLeft","clientWidth","scrollWidth","scrollLeft"],y=0,f=M.length;y<f;y++)a=M[y],n[a+"Scaled"]=n[a]*n.scaleX;for(C=["offsetHeight","offsetTop","clientHeight","scrollHeight","scrollTop"],v=0,m=C.length;v<m;v++)a=C[v],n[a+"Scaled"]=n[a]*n.scaleY;return n.verticalScrollbarWidth=n.offsetWidth-n.borderHorizontal-n.clientWidth,n.horizontalScrollbarHeight=n.offsetHeight-n.borderVertical-n.clientHeight,n.canHaveScrollbar="auto"===(O=i.overflowX)||"scroll"===O||"auto"===(T=i.overflowY)||"scroll"===T,n.horizontalScrollbarAtStart=0===n.scrollLeft,n.horizontalScrollbarAtEnd=n.scrollWidth-n.scrollLeft-n.clientWidth-n.verticalScrollbarWidth<1,n.verticalScrollbarAtStart=0===n.scrollTop,n.verticalScrollbarAtEnd=n.scrollHeight-n.scrollTop-n.clientHeight-n.horizontalScrollbarHeight<1,n.viewportTopContent=b.top+n.borderTop+n.paddingTop,n.viewportLeftContent=b.left+n.borderLeft+n.paddingLeft,n.viewportBottomContent=b.bottom-n.borderBottom-Math.max(n.paddingBottom,n.horizontalScrollbarHeight),n.viewportRightContent=b.right-n.borderRight-Math.max(n.paddingRight,n.verticalScrollbarWidth),n.viewportTopInner=b.top+n.borderTop,n.viewportLeftInner=b.left+n.borderLeft,n.viewportBottomInner=b.bottom-n.borderBottom-n.horizontalScrollbarHeight,n.viewportRightInner=b.right-n.borderRight-n.verticalScrollbarWidth,n},dom.parentsScrollable=function(e){var i,n,o,r,s,a,l;for(a=[],l=t.dom.parents(e),o=n=0,r=l.length;n<r;o=++n)s=l[o],i=t.dom.getDimensions(s),i.canHaveScrollbar&&a.push(s);return a},dom.setDimension=function(t,e,i){var n;return n={},n[e]=i,this.setDimensions(t,n)},dom.getDimension=function(t,e){return this.getDimensions(t)[e]},dom.prepareSetDimensions=function(t){if(!t.__prep_dim)return t.__prep_dim={borderBox:this.isBorderBox(t),dim:this.getDimensions(t)},this},dom.setDimensions=function(e,i){var n,o,r,s,a,l,u,c,h,d;for(this.prepareSetDimensions(e),{},n=e.__prep_dim.borderBox,r=e.__prep_dim.dim,delete e.__prep_dim,d=t.util.copyObject(i),o={},h=function(i){return function(i,n){if(!t.util.isNull(n)&&!isNaN(n))return o.hasOwnProperty(i)?void t.util.assert(o[i]===n,"CUI.dom.setDimensions","Unable to set contradicting values for "+i+".",{docElem:e,dim:d}):(("width"===i||"height"===i)&&n<0&&(n=0),void(o[i]=n))}}(),c=["width","height","left","top"],s=0,u=c.length;s<u;s++)a=c[s],d.hasOwnProperty(a)&&(h(a,d[a]),delete d[a]);return d.hasOwnProperty("contentBoxWidth")&&(n?h("width",d.contentBoxWidth+r.paddingHorizontal+r.borderHorizontal):h("width",d.contentBoxWidth),delete d.contentBoxWidth),d.hasOwnProperty("contentBoxHeight")&&(n?h("height",d.contentBoxHeight+r.paddingVertical+r.borderVertical):h("height",d.contentBoxHeight),delete d.contentBoxHeight),d.hasOwnProperty("borderBoxWidth")&&(n?h("width",d.borderBoxWidth):h("width",d.borderBoxWidth-r.paddingHorizontal-r.borderHorizontal),delete d.borderBoxWidth),d.hasOwnProperty("borderBoxHeight")&&(n?h("height",d.borderBoxHeight):h("height",d.borderBoxHeight-r.paddingVertical-r.borderVertical),delete d.borderBoxHeight),d.hasOwnProperty("marginBoxWidth")&&(n?h("width",d.marginBoxWidth-r.marginHorizontal):h("width",d.marginBoxWidth-r.marginHorizontal-r.paddingHorizontal-r.borderHorizontal),delete d.marginBoxWidth),d.hasOwnProperty("marginBoxHeight")&&(n?h("height",d.marginBoxHeight-r.marginVertical):h("height",d.marginBoxHeight-r.marginVertical-r.paddingVertical-r.borderHorizontal),delete d.marginBoxHeight),l=Object.keys(d),t.util.assert(0===l.length,"CUI.dom.setDimensions",'Unknown keys in dimension: "'+l.join('", "')+'".',{docElem:e,dim:i}),this.setStyle(e,o),o},dom.htmlToNodes=function(e){var i;if(!t.util.isNull(e))return i=this.element("DIV"),i.innerHTML=e,i.childNodes},dom.findTextInNodes=function(t,e,i){var n,o,r,s,a,l,u,c,h;for(null==i&&(i=[]),r=0,a=t.length;r<a;r++){for(u=t[r],o=[],c=u.childNodes,s=0,l=c.length;s<l;s++)switch(n=c[s],n.nodeType){case 3:h=n.textContent.trim(),h.length>0&&("function"==typeof e&&e(n,h),i.push(h));break;case 1:o.push(n)}this.findTextInNodes(o,e,i)}return i},dom.getCSSFloatValue=function(t){return-1===t.indexOf("px")?0:parseFloat(t.substr(0,t.length-2))},dom.isPositioned=function(e){var i;return t.util.assert(e instanceof HTMLElement,"CUI.dom.isPositioned","docElem needs to be instance of HTMLElement.",{docElem:e}),e===document.body||e===document.documentElement||("relative"===(i=this.getComputedStyle(e).position)||"absolute"===i||"fixed"===i)},dom.isVisible=function(t){var e;return e=this.getComputedStyle(t),"hidden"!==e.visibility&&"none"!==e.display},dom.getBoxSizing=function(t){return this.getComputedStyle(t).boxSizing},dom.isBorderBox=function(t){return"border-box"===this.getBoxSizing(t)},dom.isContentBox=function(t){return"content-box"===this.getBoxSizing(t)},dom.hideElement=function(t){if(t)return"none"!==t.style.display&&(t.__saved_display=t.style.display),t.style.display="none",t},dom.removeChildren=function(e,i){var n,o,r,s;for(t.util.assert(e instanceof HTMLElement,"CUI.dom.removeChildren","element needs to be instance of HTMLElement",{element:e}),s=this.children(e,i),o=0,r=s.length;o<r;o++)n=s[o],e.removeChild(n);return e},dom.showElement=function(t){if(t)return t.style.display=t.__saved_display||"",delete t.__saved_display,t},dom.space=function(e){switch(null==e&&(e=null),e){case"small":return this.element("DIV",{class:"cui-small-space"});case"large":return this.element("DIV",{class:"cui-large-space"});case"flexible":return this.element("DIV",{class:"cui-flexible-space"});case null:return this.element("DIV",{class:"cui-space"});default:return t.util.assert(!1,"CUI.dom.space","Unknown style: "+e)}},dom.element=function(e,i){return t.dom.setAttributeMap(document.createElement(e),i)},dom.debugRect=function(){var e,i,n,o,r,s,a,l,u,c,h,d,p,_,f;if(this.remove(this.find("#cui-debug-rect")[0]),0!==arguments.length){if(2!==arguments.length&&t.util.isArray(arguments[0])){if(!t.util.isArray(arguments[0]))return void console.error("CUI.dom.debugRect: Argument Error.");e=arguments[0]}else for(o=arguments[0],c=arguments[1],e=[],h=["Top","Left","Bottom","Right"],s=0,u=h.length;s<u;s++)a=h[s],t.util.isEmpty(c)||"*"===c?(a=a.toLowerCase(),_=o[a]):_=o[c.replace("*",a)],e.push(_);return p=e[0],l=e[1],i=e[2],d=e[3],f=d-l,r=i-p,n=this.element("DIV",{id:"cui-debug-rect"}),this.setStyle(n,{position:"absolute",border:"2px solid red",boxSizing:"border-box",top:p,left:l,width:f,height:r}),document.body.appendChild(n),console.debug("CUI.dom.debugRect:",[p,l,i,d]),n}},dom.scrollIntoView=function(e){var i,n,o,r,s,a,l,u,c,h,d,p;if(!e)return null;for(3===e.nodeType&&(e=e.parentNode),e.hasOwnProperty("DOM")&&(e=e.DOM),p=t.dom.parentsUntil(e),i=null,a=function(t){return function(){return i=t.getDimensions(e)}}(this),a(),r=o=0,s=p.length;o<s;r=++o)d=p[r],n=this.getDimensions(d),"visible"!==n.computedStyle.overflowY&&(l=i.viewportBottomMargin-n.viewportBottomContent,l>0&&(d.scrollTop=d.scrollTop+l,a()),(h=i.viewportTopMargin-n.viewportTopContent)<0&&(d.scrollTop=d.scrollTop+h,a())),"visible"!==n.computedStyle.overflowX&&(c=i.viewportRightMargin-n.viewportRightContent,c>0&&(d.scrollLeft=d.scrollLeft+c,a()),(u=i.viewportLeftMargin-n.viewportLeftContent)<0&&(d.scrollLeft=d.scrollLeft+u,a()));return e},dom.setClassOnMousemove=function(e){var i,n,o;return null==e&&(e={}),i=t.Element.readOpts(e,"CUI.dom.setClassOnMousemove",{delayRemove:{check:Function},class:{mandatory:!0,check:String},ms:{default:3e3,mandatory:!0,check:function(t){return t>0}},element:{mandatory:!0,check:function(t){return t instanceof HTMLElement}},instance:{}}),n=function(e){return function(){return("function"==typeof i.delayRemove?i.delayRemove():void 0)||t.globalDrag?void o():i.element.classList.remove(i.class)}}(),o=function(e){return function(){return t.scheduleCallback({ms:i.ms,call:n})}}(),t.Events.listen({node:i.element,type:"mousemove",instance:i.instance,call:function(t){return function(t){i.element.classList.contains(i.class)||i.element.classList.add(i.class),o()}}()}),t.Events.listen({node:i.element,type:"mouseleave",instance:i.instance,call:function(t){return function(t){return n()}}()})},dom.requestFullscreen=function(e){var i,n;return e.hasOwnProperty("DOM")&&(e=e.DOM),t.util.assert(e instanceof HTMLElement,"startFullscreen","element needs to be instance of HTMLElement",{element:e}),e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen(),i=new t.Deferred,n=t.Events.listen({type:"fullscreenchange",node:window,call:function(e){return function(e){t.dom.isFullscreen()?i.notify():(t.Events.ignore(n),i.resolve())}}()}),i.promise()},dom.exitFullscreen=function(){var e;return e=new t.Deferred,document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen(),t.Events.listen({type:"fullscreenchange",node:window,only_once:!0,call:function(t){return function(){e.resolve()}}()}),e.promise()},dom.fullscreenElement=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||void 0},dom.fullscreenEnabled=function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||!1},dom.isFullscreen=function(){return document.fullscreen||document.webkitIsFullScreen||document.mozFullScreen||!!document.msFullscreenElement||!1},dom.$element=function(e,i,n,o){return null==n&&(n={}),null==o&&(o=!1),t.util.isEmpty(i)||(n.class=i),o&&(t.util.isEmpty(i)?n.class="cui-"+e:n.class="cui-"+e+" "+i,e="div"),t.dom.element(e,n)},dom.div=function(e,i){return t.dom.$element("div",e,i)},dom.video=function(e,i){return t.dom.$element("video",e,i)},dom.audio=function(e,i){return t.dom.$element("audio",e,i)},dom.source=function(e,i){return t.dom.$element("source",e,i)},dom.span=function(e,i){return t.dom.$element("span",e,i)},dom.table=function(e,i){return t.dom.$element("table",e,i,!0)},dom.img=function(e,i){return t.dom.$element("img",e,i)},dom.tr=function(e,i){return t.dom.$element("tr",e,i,!0)},dom.th=function(e,i){return t.dom.$element("th",e,i,!0)},dom.td=function(e,i){return t.dom.$element("td",e,i,!0)},dom.i=function(e,i){return t.dom.$element("i",e,i)},dom.p=function(e,i){return t.dom.$element("p",e,i)},dom.pre=function(e,i){return t.dom.$element("pre",e,i)},dom.ul=function(e,i){return t.dom.$element("ul",e,i)},dom.a=function(e,i){return t.dom.$element("a",e,i)},dom.b=function(e,i){return t.dom.$element("b",e,i)},dom.li=function(e,i){return t.dom.$element("li",e,i)},dom.label=function(e,i){return t.dom.$element("label",e,i)},dom.h1=function(e,i){return t.dom.$element("h1",e,i)},dom.h2=function(e,i){return t.dom.$element("h2",e,i)},dom.h3=function(e,i){return t.dom.$element("h3",e,i)},dom.h4=function(e,i){return t.dom.$element("h4",e,i)},dom.h5=function(e,i){return t.dom.$element("h5",e,i)},dom.h6=function(e,i){return t.dom.$element("h6",e,i)},dom.text=function(e,i,n){var o;return o=t.dom.span(i,n),o.textContent=e,o},dom.textEmpty=function(e){var i;return i=t.dom.span("italic"),i.textContent=e,i},dom.table_one_row=function(){return t.dom.append(t.dom.table(),t.dom.tr_one_row.apply(this,arguments))},dom.tr_one_row=function(){var e,i,n,o,r,s,a,l;for(l=t.dom.tr(),n=function(e){var i,n;n=t.dom.td(),t.dom.append(l,n),(i=function(e){return function(e){var o,r,s;if(t.util.isArray(e))for(r=0,s=e.length;r<s;r++)o=e[r],i(o);else(null!=e?e.DOM:void 0)?t.dom.append(n,e.DOM):t.util.isNull(e)||t.dom.append(n,e)}}())(e)},o=0,s=arguments.length;o<s;o++)if(i=arguments[o],t.util.isArray(i))for(r=0,a=i.length;r<a;r++)e=i[r],n(e);else n(i);return l},dom}()}).call(e,i(0))},function(t,e,i){(function(t){var e,n,o,r;n=i(161),e=i(167),o=i(2),r=i(1),t.util=function(){function util(){}return util.assert=function(e,i,n,o){var r,s,a,l,u,c;if(t.defaults.asserts&&!e){try{s=new Error("dummy"),s.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@").replace().split("\n")}catch(t){s=t,"Can't get callstack in this browser. Try using Stacktrace.js"}if(u=[],o){r=[i+":"];for(a in o)c=o[a],r.push(a+":"),u.push(a),r.push(c);console.debug.apply(console,r)}switch(l=u.length?i+"("+u.join(",")+")":i,n&&(l+=": "+n),t.defaults.asserts_alert){case"debugger":break;case"js":alert(l);break;case"cui":t.problem({text:l})}if(t.__in_error)return void console.error("Another assert occurred, cannot throw Error to avoid loop: ",l);throw t.__in_error=!0,t.setTimeout(function(e){return function(){return t.__in_error=!1}}()),new Error(l)}},util.assertImplements=function(e,i){var n,o,r,s;if(t.defaults.asserts){for(s=[],n=0,o=i.length;n<o;n++)r=i[n],t.util.isFunction(e[r])||s.push(r);t.util.assert(0===s.length,""+t.util.getObjectClass(e),"Needs implementations for "+s.join(", ")+".",{instance:e})}},util.assertInstanceOf=function(e,i,n,o){var r,s,a;if(null==o&&(o=void 0),t.defaults.asserts){if(!t.util.isFunction(i)&&"PlainObject"===!i)throw"assertInstanceOf: class is not a Function";void 0===o&&(o=n[e],t.util.assert(t.util.isPlainObject(n),"new "+arguments.callee.caller.name,"opts needs to be PlainObject but it is "+t.util.getObjectClass(n)+".",{opts:n})),"Array"===i?(r="Array",s=o instanceof Array):"Integer"===i?(r="Integer",s=t.util.isInteger(o)):"PlainObject"===i?(r="PlainObject",s=t.util.isPlainObject(o)):new String instanceof i?(r="String",s=t.util.isString(o)):new Boolean instanceof i?(r="Boolean",s=!0===o||!1===o):(s=o instanceof i,r=i.name),s||(a=arguments.callee.caller.name,a||(a=t.util.getObjectClass(this)),t.util.assert(!1,"new "+a,"opts."+e+" needs to be instance of "+r+" but it is "+t.util.getObjectClass(o)+".",{opts:n,value:o,classClass:i}))}},util.$elementIsInDOM=function(e){var i,n;return n=t.dom.parents(e),i=n[n.length-1],t.dom.is(i,"html")},util.getCoordinatesFromEvent=function(t){var e;return e={pageX:t.pageX(),pageY:t.pageY()},t.scrollPageY&&(e.pageY+=t.scrollPageY),t.scrollPageX&&(e.pageX+=t.scrollPageX),e},util.elementGetPosition=function(e,i){var n,o;return o=t.dom.getRect(i),n={left:e.pageX-o.left,top:e.pageY-o.top},i!==document.body&&(n.left+=i.scrollLeft,n.top+=i.scrollTop),n},util.getObjectClassRegexp=/^function\s*(\w+)/,util.getObjectClass=function(e){var i,n;if(e&&e.constructor)return t.browser.ie?(n=e.constructor.toString().trim(),"function"===n.substr(0,8)?(i=n.match(t.util.getObjectClassRegexp),i&&2===i.length?i[1]:void 0):void 0):e.constructor.name},util.isUndef=function(t){return void 0===t},util.isNull=function(e){return t.util.isUndef(e)||null===e},util.isString=function(t){return"string"==typeof t},util.isEmpty=function(e){return t.util.isArray(e)?0===e.length:t.util.isPlainObject(e)?t.util.isEmptyObject(e):t.util.isNull(e)||""===e||!1===e},util.isTrue=function(e){return!t.util.isNull(e)&&(1===e||!0===e||"1"===e||"true"===e)},util.isFalse=function(e){return t.util.isNull(e)||0===e||!1===e||"0"===e||"false"===e},util.isBoolean=function(t){return!0===t||!1===t},util.isElement=function(t){return t instanceof HTMLElement},util.isPosInt=function(e){return t.util.isInteger(e)&&e>=0},util.isContent=function(e){return t.util.isElement(e)||e instanceof HTMLCollection||e instanceof NodeList||t.util.isArray(e)||t.util.isFunction(e)||t.util.isElement(null!=e?e.DOM:void 0)},util.isNumber=function(e){return t.util.isInteger(e)||t.util.isFloat(e)},util.isFloat=function(t){return t===+t&&t!==(0|t)},util.isInteger=function(t){return t===+t&&t===(0|t)},util.isPromise=function(e){return e instanceof t.Promise||e instanceof t.Deferred},util.isDeferred=function(e){return e instanceof t.Deferred},util.escapeRegExp=function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},util.getIntOrString=function(e){return t.util.getInt(e,!0)},util.getInt=function(e,i){var n;return null==i&&(i=!1),t.util.isNull(e)?null:(n=parseInt(e),isNaN(n)||(n+"").length!==(e+"").trim().length?i?e:null:n)},util.getFloat=function(e){var i;return t.util.isNull(e)?null:(i=parseFloat(e),isNaN(i)?null:i)},util.xor=function(t,e){return!!(t&&!e||!t&&e)},util.toHtml=function(e,i){return t.util.isNull(e)||!t.util.isString(e)?"":(e=e.replace(/&/g,"&amp;").replace(/\'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;"),i?e.replace(/\s/g,"&nbsp;"):e)},util.copyObject=function(e,i,n){var o,r,s,a,l,u,c,h,d;if(null==i&&(i=!1),null==n&&(n=0),"string"==(h=typeof e)||"number"===h||"boolean"===h||"function"===h)return e;if(t.util.isNull(e))return e;if(e instanceof t.Element)return 0===n||i?e.copy():e;if(e instanceof HTMLElement)return e;if(e instanceof t.Dummy)return e;if(t.util.isPlainObject(e)){u={};for(s in e)if(d=e[s],i)try{u[s]=t.util.copyObject(d,!0,n+1)}catch(t){throw o=t,console.error("Error during Object copy:",o.toString(),"Key:",s,"Object:",e),o}else u[s]=d;return u}if(t.util.isArray(e)){if(!i)return e.slice(0);for(l=[],r=0,a=e.length;r<a;r++)c=e[r],l.push(t.util.copyObject(c,!0,n+1));return l}return t.util.assert(!1,"copyObject","Only {},[],string, boolean, and number can be copied. Object is: "+t.util.getObjectClass(e),{obj:e,deep:i})},util.dump=function(e,i){var n,o;null==i&&(i="\t"),n=function(e){var i,o,r,s,a,l,u;if(t.util.isArray(e)){for(l=[],o=0,s=e.length;o<s;o++)i=e[o],l.push(n(i));return l}if(t.util.isPlainObject(e)){l={};for(r in e)u=e[r],l[r]=n(u);return l}return"string"==(a=typeof e)||"number"===a||"boolean"===a?e:t.util.isUndef(e)?"<undefined>":t.util.isNull(e)?"<null>":t.util.getObjectClass(e)};try{return JSON.stringify(n(e),null,i)}catch(t){return o=t,console.error(o),"Unable to dump object"}},util.alert_dump=function(e){return alert(t.util.dump(e,"    "))},util.toDash=function(t){var e;return t+="U",e=t.substring(0,1)+t.substring(1).replace(/([A-Z](?![A-Z0-9]))/g,function(t){return"-"+t.toLowerCase()}),e=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),e=e.substring(0,e.length-2),e.replace(/\./g,"-")},util.toClass=function(e){return t.util.toDash(e).replace(/_/g,"-").replace(/\s+/g,"-")},util.toDot=function(e){return t.util.toDash(e).replace(/-/g,".")},util.toCamel=function(t,e){return null==e&&(e=!1),e?t.replace(/((\-|^)[a-z])/g,function(t){return t.toUpperCase().replace("-","")}):t.replace(/(\-[a-z])/g,function(t){return t.toUpperCase().replace("-","")})},util.removeFromArray=function(e,i,n){var o,r;for(t.util.assert(t.util.isArray(i),"removeFromArray","Second parameter needs to be an Array",{value:e,array:i,compFunc:n}),r=0;;){if(!((o=t.util.idxInArray(e,i,n))>-1))break;i.splice(o,1),r++}return r},util.moveInArray=function(t,e,i,n){var o;return null==n&&(n=!1),t===e?e:(t>e?n&&e++:n||e--,o=i.splice(t,1)[0],i.splice(e,0,o),e)},util.compareIndex=function(t,e){return t<e?-1:t>e?1:0},util.pushOntoArray=function(e,i,n){var o;return o=t.util.idxInArray(e,i,n),-1===o?(i.push(e),i.length-1):o},util.idxInArray=function(e,i,n){var o,r,s,a,l;if(!n)return i.indexOf(e);for(s=-1,r=a=0,l=i.length;a<l;r=++a)if(o=i[r],t.util.isFunction(n)){if(n(o,e)){s=r;break}}else if(o[n](e)){s=r;break}return s},util.findInArray=function(e,i,n){var o;return o=t.util.idxInArray(e,i,n),-1===o?void 0:i[o]},util.utoa=function(t){return window.btoa(unescape(encodeURIComponent(t)))},util.atou=function(t){return decodeURIComponent(escape(window.atob(t)))},util.parseCoordinates=function(e){var i;if(t.util.isNull(e))return!1;t.util.assert(t.util.isString(e),"parseCoordinates","Parameter coordinates is String and mandatory.",{value:e});try{return e=new n(e),i={lat:e.getLatitude(),lng:e.getLongitude()},!!t.Map.isValidPosition(i)&&i}catch(t){return!1}},util.formatCoordinates=function(i,n){return t.util.assert(t.Map.isValidPosition(i),"formatCoordinates","Coordinates must be a valid position object, with latitude and longitude attributes.",{value:i}),t.util.isFunction(n)?n(i):(t.util.assert(t.util.isString(n)&&!t.util.isEmpty(n),"formatCoordinates","Parameter format is String, mandatory and not empty.",{value:i}),i=e(i.lat,i.lng),i.format(n))},util.isArray=function(t){return Array.isArray(t)},util.inArray=function(t,e){return e.indexOf(t)},util.isEqual=function(t,e){var i;return t instanceof Function?e instanceof Function&&t.toString()===e.toString():null===t||void 0===t||null===e||void 0===e?t===e:t===e||t.valueOf()===e.valueOf()||!(t instanceof Date)&&(!(e instanceof Date)&&(t instanceof Object&&(e instanceof Object&&(i=Object.keys(t),!!Object.keys(e).every(function(t){return-1!==i.indexOf(t)})&&i.every(function(i){return function(n){return i.isEqual(t[n],e[n])}}(this))))))},util.isMap=function(t){return this.isPlainObject(t)},util.isFunction=function(t){return t&&"function"==typeof t},util.isPlainObject=function(t){var e;return t&&"object"==typeof t&&(null!=(e=t.constructor)?e.prototype.hasOwnProperty("isPrototypeOf"):void 0)},util.isEmptyObject=function(t){var e;for(e in t)return!1;return!0},util.revertMap=function(t){var e,i,n;i={};for(e in t)n=t[e],i[n]=e;return i},util.stringMapReplace=function(e,i){var n,o;o=[];for(n in i)t.util.isEmpty(n)||o.push(n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"));return o.length>0?e.replace(new RegExp(o.join("|"),"g"),function(t){return i[t]}):e},util.mergeMap=function(e,i){var n,o;for(n in i)o=i[n],e.hasOwnProperty(n)?t.util.isPlainObject(e[n])&&t.util.isPlainObject(o)&&t.util.mergeMap(e[n],o):e[n]=o;return e},util}(),t.util.moment=r,t.util.marked=o,String.prototype.startsWith=function(t){return this.substr(0,t.length)===t},String.prototype.startsWithIgnoreCase=function(t){return this.toUpperCase().startsWith(t.toUpperCase())},String.prototype.endsWith=function(t){return this.substr(this.length-t.length)===t},RegExp.escape=function(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},n={}.hasOwnProperty;t.Template.loadTemplateText(i(171)),t.Block=function(i){function Block(e){this.opts=null!=e?e:{},Block.__super__.constructor.call(this,this.opts),this.__block=new t.Template({name:this.getTemplateName(),map:{header:!0,content:!0}}),this.registerTemplate(this.__block),this._header?this.setHeader(this._header):(this._text||this._icon)&&(this.__label=new t.Label({text:this._text,icon:this._icon,multiline:!0}),this.setHeader(this.__label)),this._content&&this.setContent(this._content),this.addClass("appearance-"+this._appearance),this.addClass("cui-block-level-"+this._level),this._padded&&this.addClass("cui-block--padded")}return e(Block,i),Block.prototype.initOpts=function(){return Block.__super__.initOpts.call(this),this.addOpts({text:{check:String},header:{check:function(e){return!!(t.util.isContent(e)||t.util.isString(e)||(null!=e?e.DOM:void 0))}},icon:{check:t.Icon},content:{check:function(e){return!!(t.util.isContent(e)||t.util.isString(e)||(null!=e?e.DOM:void 0))}},level:{mandatory:!0,default:1,check:[1,2,3]},appearance:{deprectated:!0,default:"normal",mandatory:!0,check:["title","subtitle","normal"]},padded:{check:Boolean,default:!0}})},Block.prototype.readOpts=function(){return Block.__super__.readOpts.call(this),t.util.assert(!((this._text||this._icon)&&this._header),"new CUI.Block","opts.text and opts.header are mutually exclusive.",{opts:this.opts}),this},Block.prototype.getTemplateName=function(){return"block"},Block.prototype.setText=function(e){return t.util.assert(this.__label,"Block.setText","Block must not be called with opts.header and with opts.text or opts.icon.",{opts:this.opts}),this.__label.setText(e)},Block.prototype.setIcon=function(e){return t.util.assert(this.__label,"Block.setText","Block must not be called with opts.header and with opts.text or opts.icon.",{opts:this.opts}),this.__label.setIcon(e)},Block.prototype.setHeader=function(t){return this.__block.replace(t,"header")},Block.prototype.setContent=function(t){return this.__block.replace(t,"content")},Block.prototype.getContent=function(){return this.__block.map.content},Block.prototype.getHeader=function(){return this.__block.map.header},Block.prototype.appendContent=function(t){return this.__block.append(t,"content")},Block}(t.DOMElement)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},n={}.hasOwnProperty;t.Template.loadTemplateText(i(172)),t.BorderLayout=function(i){function BorderLayout(){return BorderLayout.__super__.constructor.apply(this,arguments)}return e(BorderLayout,i),BorderLayout.prototype.getName=function(){return"border-layout"},BorderLayout.prototype.getPanes=function(){return["north","west","east","south"]},BorderLayout.prototype.getSupportedPanes=function(){return this.getPanes()},BorderLayout.prototype.getTemplateMap=function(){var t;return t=BorderLayout.__super__.getTemplateMap.call(this),t.row=!0,t},BorderLayout.prototype.__init=function(){return BorderLayout.__super__.__init.call(this),this._absolute&&(t.dom.addClass(this.getLayout().map.row,"cui-absolute"),t.Events.listen({type:"viewport-resize",node:this.getLayout().map.row,call:function(e){return function(i){return i.stopPropagation(),t.Layout.setAbsolute(e.getLayout().map.row)}}(this)})),this},BorderLayout}(t.Layout)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},n={}.hasOwnProperty;t.Template.loadTemplateText(i(173)),t.Template.loadTemplateText(i(176)),t.Button=function(i){function Button(e){var i,n,o,r,s,a,l,u,c,h,d,p,_,f;if(this.opts=null!=e?e:{},Button.__super__.constructor.call(this,this.opts),this._tooltip&&(this._tooltip.text||this._tooltip.content)&&(this.__tooltipOpts=this._tooltip),this.__has_left=!0,this.__has_right=!0,this.__has_center=!0,_=this.getTemplateName(),this.__box=new t.Template({name:_,map:{left:this.__has_left?".cui-button-left":void 0,center:this.__has_center?".cui-button-center":void 0,visual:t.__ng__?".cui-button-visual":void 0,right:this.__has_right?".cui-button-right":void 0}}),this.registerTemplate(this.__box),this.__active=null,this.__disabled=!1,this.__hidden=!1,this.__txt=null,t.__ng__&&this.addClass("cui-button-button"),t.util.isString(null!=(a=this.__tooltipOpts)?a.text:void 0)?(this.setAria("label",null!=(l=this.__tooltipOpts)?l.text:void 0),this.__hasAriaLabel=!0):this.__hasAriaLabel=!1,t.dom.setAttribute(this.DOM,"tabindex",this._tabindex),(null!=(u=this._attr)?u.role:void 0)||t.dom.setAttribute(this.DOM,"role",this._role),this._left&&!0!==this._left?this.append(this._left,"left"):(this._icon?(t.util.assert(t.util.isUndef(this._icon_left),"new "+this.__cls,"opts.icon conflicts with opts.icon_left",{opts:this.opts}),i=this._icon):i=this._icon_left,i&&(t.util.assert(!this._icon_active&&!this._icon_inactive,"new CUI.Button","opts.icon_active or opts.icon_inactive cannot be set together with opts.icon or opts.icon_left",{opts:this.opts}),this.setIcon(i))),this._right?!0!==this._right&&this.append(this._right,"right"):this._icon_right?this.setIconRight(this._icon_right):this._menu&&!1!==this._icon_right&&(this.addClass("cui-button--has-caret"),this._menu_parent?this.setIconRight("fa-angle-right"):this.setIconRight("fa-angle-down")),this.setSize(this._size),this._appearance&&this.addClass("cui-button-appearance-"+this._appearance),this._primary&&this.addClass("cui-button--primary"),this._center?this.append(this._center,"center"):this._text&&this.setText(this._text),this._disabled&&(!0===this._disabled||this._disabled.call(this,this))&&this.disable(),this._hidden&&(!0===this._hidden||this._hidden.call(this,this))&&this.hide(),!0===this._active?this.activate({initial_activate:!0}):!1===this._active||this._switch?this.deactivate({initial_activate:!0}):this.__setState(),this.__radio_allow_null=this._radio_allow_null,this._radio?(t.util.assert(t.util.isUndef(this._switch),"new CUI.Button","opts.switch conflicts with opts.radio.",{opts:this.opts}),!0===this._radio?this.__radio="radio--"+this.getUniqueId():this.__radio=this._radio):t.util.isNull(this._switch)||(this.__radio="switch--"+this.getUniqueId(),this.__radio_allow_null=!0),this.__radio&&(t.util.assert(!(null!=(c=this._attr)?c.radio:void 0),"new CUI.Button","opts.radio conflicts with opts.attr.radio",{opts:this.opts}),t.dom.setAttribute(this.DOM,"radio",this.__radio)),this.setGroup(this._group),this._menu){this.__menu_opts={},n={},h=this._menu;for(o in h)switch(f=h[o],o){case"onShow":case"onHide":continue;case"class":case"backdrop":case"onPosition":case"placement":case"placements":case"pointer":this.__menu_opts[o]=f;break;default:n[o]=f}t.util.isEmpty(this._class)||(this.__menu_opts.class?this.__menu_opts.class+=" "+this._class:this.__menu_opts.class=this._class),this._menu.itemList?this.__menu_opts.itemList=this._menu.itemList:this.__menu_opts.itemList=n,this.__menu_opts.element=this,this.__menu_opts.hasOwnProperty("use_element_width_as_min_width")||this._menu_parent||(this.__menu_opts.use_element_width_as_min_width=!0),this.__menu_opts.onHide=function(t){return function(){var e;return"function"==typeof(e=t._menu).onHide?e.onHide():void 0}}(this),this.__menu_opts.onShow=function(t){return function(){var e;return"function"==typeof(e=t._menu).onShow?e.onShow():void 0}}(this),this.__menu_opts.hasOwnProperty("backdrop")||(this.__menu_opts.backdrop={policy:"click-thru"}),!this.__menu_opts.backdrop.hasOwnProperty("blur")&&(null!=(d=this._menu_parent)&&null!=(p=d.getOpt("backdrop"))?p.blur:void 0)&&(this._menu_on_hover?this.__menu_opts.backdrop={policy:"click-thru",blur:!0}:this.__menu_opts.backdrop.blur=!0),this._menu_parent&&(this.__menu_opts.parent_menu=this._menu_parent)}t.Events.listen({type:"keydown",node:this.DOM,capture:!0,call:function(e){return function(i){var n,o,r,s;if(!i.hasModifierKey()){if(13===(r=i.keyCode())||32===r)return e.onClickAction(i),void i.stop();if(27===i.keyCode())return e.DOM.blur(),void i.stop();switch(n=null,s=function(){return n=t.dom.findNextVisibleElement(e.DOM,"[tabindex]")},o=function(){return n=t.dom.findPreviousVisibleElement(e.DOM,"[tabindex]")},i.keyCode()){case 39:case 40:s();break;case 37:o();break;case 38:o()}n&&(n.focus(),i.stop())}}}(this)}),t.Events.listen({type:t.Button.clickTypesPrevent[this._click_type],node:this.DOM,call:function(t){return function(t){t.preventDefault()}}()}),t.Events.listen({type:t.Button.clickTypes[this._click_type],node:this.DOM,call:function(e){return function(i){t.globalDrag||(0===i.getButton()||i.getType().startsWith("touch"))&&(i.stopPropagation(),e.onClickAction(i))}}(this)}),this._menu_on_hover&&(t.Button.menu_timeout=null,s=function(e){return function(){if(t.Button.menu_timeout)return t.clearTimeout(t.Button.menu_timeout),t.Button.menu_timeout=null}}(),r=function(e){return function(i,n){return null==n&&(n=700),s(),t.Button.menu_timeout=t.setTimeout({ms:n,call:function(){return e.getMenu().hide(i)}})}}(this)),(this._menu_on_hover||this.__tooltipOpts||this._onMouseenter)&&t.Events.listen({type:"mouseenter",node:this.DOM,call:function(e){return function(i){var n,o;t.globalDrag||("function"==typeof e._onMouseenter&&e._onMouseenter(i),i.isImmediatePropagationStopped()||(e.__tooltipOpts&&(e.__initTooltip(),e.getTooltip().showTimeout(null,i)),e._menu_on_hover&&(n=e.getMenu(),s(),!e.__disabled&&n.hasItems(i)&&(o=t.dom.data(t.dom.find(".cui-button--hover-menu")[0],"element"),o&&o!==n&&o.hide(i),t.dom.addClass(n.DOM,"cui-button--hover-menu"),t.Events.ignore({instance:e,node:n}),t.Events.listen({type:"mouseenter",node:n,instance:e,only_once:!0,call:function(){return s()}}),t.Events.listen({type:"mouseleave",node:n,instance:e,only_once:!0,call:function(){return r(i)}}),n.show(i)))))}}(this)}),t.Events.listen({type:"mouseleave",node:this.DOM,call:function(e){return function(i){var n;t.globalDrag||("function"==typeof e._onMouseleave&&e._onMouseleave(i),null!=(n=e.getTooltip())&&n.hideTimeout(i),e._menu_on_hover&&r(i,100))}}(this)})}return e(Button,i),Button.defaults={confirm_ok:"Ok",confirm_icon:"question",confirm_cancel:"Cancel",confirm_title:"Confirmation",disabled_css_class:"cui-disabled",active_css_class:"cui-active"},Button.prototype.setSize=function(t){var e,i,n,o,r,s,a;for(a=[],s=this.DOM.classList,i=0,o=s.length;i<o;i++)e=s[i],e.startsWith("cui-button-size")&&a.push(e);for(n=0,r=a.length;n<r;n++)e=a[n],this.DOM.classList.remove(e);return t&&this.DOM.classList.add("cui-button-size-"+t),this},Button.prototype.onClickAction=function(e){var i;return this.__disabled?void e.preventDefault():(null!=(i=this.getTooltip())&&i.hide(e),this.__radio&&(this.__radio_allow_null?this.toggle({},e):this.activate({},e)),this.hasMenu()&&!this._menu_on_hover&&this.getMenu().hasItems(e)?(this.getMenu().show(e),void e.preventDefault()):e.isImmediatePropagationStopped()||(t.Events.trigger({type:"cui-button-click",node:this,info:{event:e}}),e.isImmediatePropagationStopped()||!this._onClick)?void 0:this._onClick.call(this,e,this))},Button.prototype.initOpts=function(){return Button.__super__.initOpts.call(this),this.addOpts({tabindex:{default:0,check:function(e){return t.util.isInteger(e)||!1===e}},size:{check:["mini","normal","big","bigger"]},appearance:{check:["link","flat","normal","important","transparent-border"]},primary:{mandatory:!0,default:!1,check:Boolean},onClick:{check:Function},click_type:{default:"click",mandatory:!0,check:function(e){return!!t.Button.clickTypes[e]}},text:{check:String},tooltip:{check:"PlainObject"},disabled:{default:!1,check:function(e){return t.util.isBoolean(e)||t.util.isFunction(e)}},active_css_class:{default:t.defaults.class.Button.defaults.active_css_class,check:String},left:{check:function(e){return!0===e||(t.util.isElement(e)||e instanceof t.Element||t.util.isString(e))&&!this._icon&&!this._icon_left&&!this._icon_active&&!this._icon_inactive}},right:{check:function(e){return(!0===e||t.util.isContent(e))&&!this._icon_right}},center:{check:function(e){return t.util.isContent(e)||t.util.isString(e)}},icon:{check:function(e){return e instanceof t.Icon||t.util.isString(e)}},icon_left:{check:function(e){return e instanceof t.Icon||t.util.isString(e)}},icon_right:{check:function(e){return e instanceof t.Icon||t.util.isString(e)||!1===e}},icon_active:{check:function(e){return e instanceof t.Icon||t.util.isString(e)}},icon_inactive:{check:function(e){return e instanceof t.Icon||t.util.isString(e)}},text_active:{check:String},text_inactive:{check:String},value:{},name:{check:String},hidden:{check:function(e){return t.util.isBoolean(e)||t.util.isFunction(e)}},menu:{check:"PlainObject"},menu_on_hover:{check:Boolean},menu_parent:{check:t.Menu},onActivate:{check:Function},onDeactivate:{check:Function},onMouseenter:{check:Function},onMouseleave:{check:Function},radio:{check:function(e){return t.util.isString(e)||!0===e}},radio_allow_null:{check:Boolean},switch:{check:Boolean},active:{check:Boolean},activate_initial:{default:!0,check:Boolean},group:{check:String},role:{default:"button",mandatory:!0,check:String}})},Button.prototype.__getIcon=function(e){return e?e instanceof t.Icon?e:new t.Icon({icon:e}):null},Button.prototype.readOpts=function(){if(this.opts.switch&&t.util.assert(t.util.isUndef(this.opts.radio_allow_null),"new CUI.Button","opts.switch cannot be used together with opts.radio_allow_null",{opts:this.opts}),Button.__super__.readOpts.call(this),this._left)return t.util.assert(!0===this._left||!(this._icon_active||this._icon_inactive||this._icon),"new CUI.Button","opts.left != true cannot be used togeter with opts.icon*",{opts:this.opts})},Button.prototype.getCenter=function(){return this.__box.map.center},Button.prototype.__getTemplateName=function(){return this._icon||this._icon_left||this._icon_active||this._icon_inactive||this._left?this.__has_left=!0:this.__has_left=!1,this._icon_right||this._menu&&!1!==this._icon_right||this._right?this.__has_right=!0:this.__has_right=!1,this.__has_left&&t.util.isUndef(this._text)&&t.util.isUndef(this._center)&&t.util.isUndef(this._text_active)&&t.util.isUndef(this._text_inactive)&&t.__ng__&&(this.__has_center=!1),this.__has_left&&this.__has_right?"button":this.__has_left?this.__has_center?"button-left-center":"button-left":this.__has_right?"button-center-right":"button-center"},Button.prototype.getTemplateName=function(){return t.__ng__?this.__getTemplateName()+"-ng":this.__getTemplateName()},Button.prototype.getValue=function(){return this._value},Button.prototype.getElementForLayer=function(){return this.__box.map.visual},Button.prototype.getRadioButtons=function(){return this.__radio?this.__getButtons("radio",this.__radio):[]},Button.prototype.getGroupButtons=function(){return this.getGroup()?this.__getButtons("button-group",this.getGroup()):[]},Button.prototype.__getButtons=function(e,i){var n,o,r,s,a,l,u;if(a=t.dom.parents(this.DOM,".cui-buttonbar,.cui-form-table,.cui-item-list-body,.cui-layer"),0===a.length&&(a=t.dom.parents(this.DOM)),!(a.length>0))return[];for(o=a[a.length-1],l=t.dom.matchSelector(o,".cui-button["+e+'="'+i+'"]'),u=[],r=0,s=l.length;r<s;r++)n=l[r],u.push(t.dom.data(n,"element"));return u},Button.prototype.hasMenu=function(){return!!this.__menu_opts},Button.prototype.hasLeft=function(){return this.__has_left},Button.prototype.getMenu=function(){if(this.hasMenu())return this.__menu?this.__menu:this.__menu=new t.Menu(this.__menu_opts)},Button.prototype.menuSetActiveIdx=function(t){return this.__menu?this.__menu.setActiveIdx(t):this.__menu_opts.itemList.active_item_idx=t,this},Button.prototype.getMenuRootButton=function(){var t;return this._menu_parent?null!=(t=this._menu_parent.getButton())?t.getMenuRootButton():void 0:this.hasMenu()?this:null},Button.prototype.toggle=function(t,e){return null==t&&(t={}),this.setActive(!this.__active,t,e)},Button.prototype.setActive=function(t,e,i){return null==e&&(e={}),t?this.activate(e,i):this.deactivate(e,i)},Button.prototype.__callOnGroup=function(t,e,i){var n,o,r,s,a;if(this.getGroup()&&(null!=i?i.ctrlKey():void 0)&&!e.ignore_ctrl)for(e.ignore_ctrl=!0,a=!i.altKey(),s=this.getGroupButtons(),o=0,r=s.length;o<r;o++)n=s[o],n!==this?a&&n[t](e,i):a=!0},Button.prototype.activate=function(e,i){var n,o,r,s,a,l,u;if(null==e&&(e={}),n=function(t){return function(){t.addClass(t._active_css_class),t.setAria("pressed",!0),t.__setState(),t.__callOnGroup("activate",e,i)}}(this),!1===this._activate_initial&&e.initial_activate)return this.__active=!0,n(),this;if(!0===this.__active&&t.util.isEmptyObject(e))return this;if(this.__radio)for(l=this.getRadioButtons(),s=r=0,a=l.length;r<a;s=++r)(o=l[s])!==this&&o.isActive()&&o.deactivate({prior_activate:!0,initial_activate:e.initial_activate});return this.__active=!0,u="function"==typeof this._onActivate?this._onActivate(this,e,i):void 0,t.util.isPromise(u)?(u.done(n).fail(function(t){return function(){return t.__active=!1}}(this)),u):(n(),this)},Button.prototype.deactivate=function(e,i){var n,o;return null==e&&(e={}),n=function(t){return function(){t.removeClass(t._active_css_class),t.setAria("pressed",!1),t.__setState(),t.__callOnGroup("deactivate",e,i)}}(this),!1===this._activate_initial&&e.initial_activate?(this.__active=!1,n(),this):!1===this.__active&&t.util.isEmptyObject(e)?this:(this.__active=!1,o="function"==typeof this._onDeactivate?this._onDeactivate(this,e,i):void 0,t.util.isPromise(o)?(o.done(n).fail(function(t){return function(){return t.__active=!0}}(this)),o):(n(),this))},Button.prototype.setIconRight=function(t){return null==t&&(t=null),this.setIcon(t,"right")},Button.prototype.setIcon=function(e,i){var n;return null==e&&(e=null),null==i&&(i="left"),n="__icon_"+i,this[n]=""===e?"":this.__getIcon(e),t.util.assert(null===this[n]||""===this[n]||this[n]instanceof t.Icon,"CUI.Button.setIcon","icon needs to be instance of Icon",{icon:e}),null===this[n]?this.empty(i):""===this[n]?this.replace(t.dom.element("SPAN"),i):this.replace(this[n],i),this},Button.prototype.startSpinner=function(){if(t.util.assert(this.__has_left,"CUI.Button.startSpinner","No space for Icon found, make sure the Button was created with opts.left set.",{opts:this.opts}),!this.__hasSpinner)return this.__iconBeforeSpinner=this.getIcon(),this.__hasSpinner=!0,this.setIcon("spinner"),this},Button.prototype.stopSpinner=function(){return this.setIcon(this.__iconBeforeSpinner),this.__hasSpinner=!1,this.__iconBeforeSpinner=null,this},Button.prototype.getIcon=function(){return this.__icon_left},Button.prototype.getIconRight=function(){return this.__icon_right},Button.prototype.__setState=function(){return this.__setIconState(),this.__setTextState()},Button.prototype.__setIconState=function(){return this._icon_active||this._icon_inactive?(this.isActive()?this._icon_active?this.setIcon(this._icon_active):this.setIcon(""):this._icon_inactive?this.setIcon(this._icon_inactive):this.setIcon(""),this):this},Button.prototype.__setTextState=function(){return this._text_active||this._text_inactive?(this.isActive()?t.util.isNull(this._text_active)||this.setText(this._text_active):t.util.isNull(this._text_inactive)||this.setText(this._text_inactive),this):this},Button.prototype.isActive=function(){return!!this.__active},Button.prototype.isDisabled=function(){return this.__disabled},Button.prototype.isEnabled=function(){return!this.__disabled},Button.prototype.setEnabled=function(t){return t?this.enable():this.disable()},Button.prototype.disable=function(){return t.dom.addClass(this.DOM,t.defaults.class.Button.defaults.disabled_css_class),t.dom.removeAttribute(this.DOM,"tabindex"),this.__disabled=!0,this},Button.prototype.enable=function(){return t.dom.removeClass(this.DOM,t.defaults.class.Button.defaults.disabled_css_class),t.dom.setAttribute(this.DOM,"tabindex",this._tabindex),this.__disabled=!1,this},Button.prototype.setText=function(e){var i;return this.__txt=e,t.util.isEmpty(this.__txt)&&(this.__txt=""),i=t.dom.text(this.__txt),this.__hasAriaLabel||(i.id="button-text-"+this.getUniqueId(),this.setAria("labelledby",i.id)),this.replace(i,"center")},Button.prototype.setTextMaxChars=function(e){return t.dom.setAttribute(this.getCenter().firstChild,"data-max-chars",e)},Button.prototype.getText=function(){return this.__txt},Button.prototype.getGroup=function(){return this.__group},Button.prototype.setGroup=function(e){return this.__group=e,this.__group?t.dom.setAttribute(this.DOM,"button-group",this.__group):t.dom.removeAttribute(this.DOM,"button-group")},Button.prototype.__initTooltip=function(){var e,i,n,o,r;if(this.__tooltip)return this;for(r=t.util.copyObject(this.__tooltipOpts),null==r.element&&(r.element=this.DOM),o=["on_hover","on_click"],e=0,n=o.length;e<n;e++)i=o[e],t.util.assert(!r.hasOwnProperty(i),"CUI.Button.__initTooltip","opts.tooltip cannot contain "+i+".",{opts:this.opts}),r[i]=!1;return this.__tooltip=new t.Tooltip(r),this},Button.prototype.getTooltip=function(){return this.__tooltip},Button.prototype.isShown=function(){return!this.isHidden()},Button.prototype.isHidden=function(){return this.__hidden},Button.prototype.destroy=function(){var t,e;return null!=(t=this.__menu)&&t.destroy(),this.__menu=null,null!=(e=this.__tooltip)&&e.destroy(),this.__tooltip=null,Button.__super__.destroy.call(this)},Button.prototype.show=function(){return this.__hidden=!1,t.dom.removeClass(this.DOM,"cui-button-hidden"),t.dom.showElement(this.DOM),t.Events.trigger({type:"show",node:this.DOM})},Button.prototype.hide=function(){return this.__hidden=!0,t.dom.addClass(this.DOM,"cui-button-hidden"),t.dom.hideElement(this.DOM),t.Events.trigger({type:"hide",node:this.DOM})},Button.clickTypes={click:["click"],mouseup:["mouseup"],dblclick:["dblclick"]},Button.clickTypesPrevent={click:["dblclick","mousedown"],mouseup:["mouseup","mousedown"],dblclick:["click","mousedown"]},Button}(t.DOMElement),t.defaults.class.Button=t.Button,t.Events.registerEvent({type:["show","hide","cui-button-click"],bubble:!0})}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},n={}.hasOwnProperty;t.Template.loadTemplateText(i(174)),t.Template.loadTemplateText(i(175)),t.ButtonHref=function(i){function ButtonHref(e){var i;this.opts=null!=e?e:{},ButtonHref.__super__.constructor.call(this,this.opts),i={href:this._href,tabindex:"0",target:this._target},this._download&&(i.download="download"),t.dom.setAttributeMap(this.DOM,i)}return e(ButtonHref,i),ButtonHref.prototype.initOpts=function(){return ButtonHref.__super__.initOpts.call(this),this.addOpts({href:{check:String},download:{check:Boolean},target:{check:String}})},ButtonHref.prototype.readOpts=function(){return ButtonHref.__super__.readOpts.call(this),void 0===this._icon_right&&"link"===this._appearance&&(this._icon_right="external_link"),this},ButtonHref.prototype.setHref=function(e){return t.dom.setAttribute(this.DOM,"href",e)},ButtonHref.prototype.getTemplateName=function(){return ButtonHref.__super__.getTemplateName.call(this),t.__ng__?"buttonHref-ng":"buttonHref"},ButtonHref}(t.Button)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function ctor(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},o={}.hasOwnProperty,r=[].slice;t.Template.loadTemplateText(i(177)),t.Buttonbar=function(i){function Buttonbar(i){var n,o,r,s,a,l;for(this.opts=null!=i?i:{},this.__setVisibilityClasses=e(this.__setVisibilityClasses,this),Buttonbar.__super__.constructor.call(this,this.opts),this.__box=new t.Template({name:"buttonbar"}),this.registerTemplate(this.__box),this.__buttons=this.__box.DOM,this.__groupDivs={},this._tooltip&&(l=t.util.copyObject(this._tooltip),l.element=this.__buttons,this.__tooltip=new t.Tooltip(l)),a=this._buttons,r=o=0,s=a.length;o<s;r=++o)n=a[r],this.addButton(n,!1);this._size&&this.addClass("cui-buttonbar--size-"+this._size),this.__checkVisibility()}return n(Buttonbar,i),Buttonbar.prototype.initOpts=function(){return Buttonbar.__super__.initOpts.call(this),this.addOpts({size:{check:["big"]},buttons:{mandatory:!0,default:[],check:Array},tooltip:{check:"PlainObject"}})},Buttonbar.prototype.__proxy=function(){var e,i,n,o,s,a,l;for(o=arguments[0],e=2<=arguments.length?r.call(arguments,1):[],l=t.dom.matchSelector(this.__buttons,".cui-button,.cui-select"),s=0,a=l.length;s<a;s++)i=l[s],n=t.dom.data(i,"element"),n[o].apply(n,e);return this},Buttonbar.prototype.disable=function(){return this.__proxy("disable")},Buttonbar.prototype.enable=function(){return this.__proxy("enable")},Buttonbar.prototype.__setVisibilityClasses=function(e){var i,n,o,r,s,a,l,u;for(n=0,s=null,l=e.children,r=o=0,a=l.length;o<a;r=++o)i=l[r],i.classList.remove("cui-first-visible-child"),i.classList.remove("cui-last-visible-child"),null!=(u=t.dom.data(i,"element"))&&"function"==typeof u.isHidden&&u.isHidden()||!t.dom.isVisible(i)||(n++,s=i,1===n&&i.classList.add("cui-first-visible-child"));return s&&s.classList.add("cui-last-visible-child"),n},Buttonbar.prototype.__checkVisibility=function(){var e,i,n;t.dom.showElement(this.__buttons);for(i in this.__groupDivs)e=this.__groupDivs[i],this.__setVisibilityClasses(e)>0?t.dom.showElement(e):t.dom.hideElement(e);return this.__setVisibilityClasses(this.__buttons)>0?(null!=(n=this.__tooltip)?n.isShown():void 0)&&this.__tooltip.position():t.dom.showElement(this.__buttons),this},Buttonbar.prototype.removeButtons=function(){return t.dom.empty(this.__buttons)},Buttonbar.prototype.prependButton=function(t,e){return null==e&&(e=!0),this.addButton(t,e,!0)},Buttonbar.prototype.addButton=function(e,i,n){var o,r,s,a,l;if(null==i&&(i=!0),null==n&&(n=!1),!t.util.isNull(e))return t.util.isPlainObject(e)&&(e=new t.defaults.class.Button(e)),e instanceof t.Button||e instanceof t.DataFieldInput?(o=e.DOM,a=e.getGroup()):e instanceof t.Label?(o=e.DOM,a=e.getGroup()):(null!=e&&null!=(l=e.classList)?l.contains("cui-button"):void 0)?(o=e,a=e.group||null):t.util.assert(!1,"new "+this.__cls,'button must be instance of Button or have class ".cui-button" but is '+t.util.getObjectClass(e)+".",{button:e,opts:this.opts}),t.Events.listen({type:["show","hide"],node:e,call:function(t){return function(e){return t.__checkVisibility()}}(this)}),s=n?"prepend":"append",a?(this.__groupDivs[a]||(r=t.dom.div("cui-buttonbar-group cui-buttonbar-group-"+a),t.dom.append(this.__buttons,r),this.__groupDivs[a]=r),t.dom[s](this.__groupDivs[a],o)):t.dom[s](this.__buttons,o),i&&this.__checkVisibility(),e},Buttonbar}(t.DOMElement)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.Checkbox=function(i){function Checkbox(t){this.opts=null!=t?t:{},Checkbox.__super__.constructor.call(this,this.opts),this._multiline&&this.addClass("cui-checkbox--multiline")}return e(Checkbox,i),Checkbox.prototype.initOpts=function(){return Checkbox.__super__.initOpts.call(this),this.addOpts({onClick:{check:Function},value:{default:!0},value_unchecked:{default:!1},text:{check:String},multiline:{default:!1,check:Boolean},content:{check:function(e){return t.util.isContent(e)||t.util.isString(e)}},active:{default:!1,check:Boolean},onActivate:{check:Function},onDeactivate:{check:Function},radio:{check:String},group:{check:String},radio_allow_null:{check:Boolean},tooltip:{check:"PlainObject"},icon_active:{default:"check",mandatory:!0,check:function(e){return e instanceof t.Icon||t.util.isString(e)}},icon_inactive:{check:function(e){return e instanceof t.Icon||t.util.isString(e)}}})},Checkbox.prototype.enable=function(){var t;return Checkbox.__super__.enable.call(this),null!=(t=this.__checkbox)?t.enable():void 0},Checkbox.prototype.disable=function(){var t;return Checkbox.__super__.disable.call(this),null!=(t=this.__checkbox)?t.disable():void 0},Checkbox.prototype.registerLabel=function(e){return e.setAttribute("data-label-clickable","1"),t.Events.listen({type:"click",node:e,call:function(t){return function(e){return t.getButton().onClickAction(e)}}(this)}),this},Checkbox.prototype.getButton=function(){return this.__checkbox},Checkbox.prototype.getOptValue=function(){return this._value},Checkbox.prototype.getOptValueUnchecked=function(){return this._value_unchecked},Checkbox.prototype.getCheckboxClass=function(){return"cui-button-checkbox"},Checkbox.prototype.destroy=function(){var t;return null!=(t=this.__checkbox)&&t.destroy(),Checkbox.__super__.destroy.call(this)},Checkbox.prototype.render=function(){var e,i,n,o,r;for(Checkbox.__super__.render.call(this),e=this.getButtonOpts(),e.onActivate=function(e){return function(i,n,o){var r;if(!n.initial_activate)return e.storeValue(e._value,n),r="function"==typeof e._onActivate?e._onActivate(e,n,o):void 0,t.util.isPromise(r)&&r.fail(function(){return e.storeValue(e._value_unchecked,n)}),r}}(this),e.onDeactivate=function(e){return function(i,n,o){var r;if(!n.initial_activate)return e.storeValue(e._value_unchecked,n),r="function"==typeof e._onDeactivate?e._onDeactivate(e,n,o):void 0,t.util.isPromise(r)&&r.fail(function(){return e.storeValue(e._value,n)}),r}}(this),this._onClick&&(e.onClick=function(t){return function(e){t._onClick(e,t)}}(this)),r=["text","radio_allow_null","active"],i=0,o=r.length;i<o;i++)n=r[i],t.util.isUndef(e[n])&&(e[n]=this["_"+n]);return t.util.isEmpty(e.text)&&(e.text=""),e.disabled=this.isDisabled(),e.center=this._content,this.__checkbox=new t.defaults.class.Button(e),this.__checkbox.addClass(this.getCheckboxClass()),("check"!==this._icon_active||this._icon_inactive)&&this.addClass("cui-checkbox--icon"),t.__ng__&&this.__checkbox.removeClass("cui-button-button"),this.proxy(this.__checkbox,["activate","deactivate","isActive","getGroup","setGroup","setTextMaxChars","setText","getText","getElementForLayer"]),this.replace(this.__checkbox)},Checkbox.prototype.checkValue=function(e,i){if(!t.util.isBoolean(e))throw new Error(this.__cls+".setValue(value): Value needs to be Boolean.")},Checkbox.prototype.displayValue=function(){if(Checkbox.__super__.displayValue.call(this),this.hasData())return this.getOptValue()===this.getValue()?this.__checkbox.activate({initial_activate:!0}):this.__checkbox.deactivate({initial_activate:!0}),this},Checkbox.prototype.getButtonOpts=function(){return this._radio?{role:"radio",radio:this._radio,group:this._group,icon_active:this._icon_active,icon_inactive:this._icon_inactive}:{role:"checkbox",switch:!0,group:this._group,icon_active:this._icon_active,icon_inactive:this._icon_inactive}},Checkbox.prototype.getDefaultValue=function(){return this._active?this._value:this._value_unchecked},Checkbox.prototype.isChanged=function(){if(this.hasData())return this._radio?this.getValue()===this.getOptValue()?Checkbox.__super__.isChanged.call(this):this.__checkChangedValue===JSON.stringify(this.getOptValue()):Checkbox.__super__.isChanged.call(this)},Checkbox}(t.DataFieldInput)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.Alert=function(i){function Alert(){return Alert.__super__.constructor.apply(this,arguments)}return e(Alert,i),Alert.prototype.initOpts=function(){return Alert.__super__.initOpts.call(this),this.mergeOpt("choices",{mandatory:!1,default:void 0}),this.addOpts({button_text_ok:{mandatory:!0,default:t.defaults.class.ConfirmationChoice.defaults.ok,check:String}})},Alert.prototype.isKeyboardCancellable=function(t){return!0},Alert.prototype.readOpts=function(){if(Alert.__super__.readOpts.call(this),!this._choices)return this._choices=[{text:this._button_text_ok}]},Alert}(t.ConfirmationChoice),t.alert=function(e){return null==e&&(e={text:"CUI.alert"}),new t.Alert(e).open()},t.AlertProblem=function(t){function AlertProblem(){return AlertProblem.__super__.constructor.apply(this,arguments)}return e(AlertProblem,t),AlertProblem}(t.Alert),t.problem=function(e){return null==e&&(e={text:"CUI.problem"}),new t.AlertProblem(e).open()}}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.Confirm=function(i){function Confirm(){return Confirm.__super__.constructor.apply(this,arguments)}return e(Confirm,i),Confirm.prototype.initOpts=function(){return Confirm.__super__.initOpts.call(this),this.removeOpt("choices"),this.mergeOpt("text",{mandatory:!0}),this.addOpts({button_text_ok:{mandatory:!0,default:t.defaults.class.ConfirmationChoice.defaults.ok,check:String},button_text_cancel:{mandatory:!0,default:t.defaults.class.ConfirmationChoice.defaults.cancel,check:String},button_primary:{mandatory:!0,default:"ok",check:["ok","cancel"]}})},Confirm.prototype.readOpts=function(){return Confirm.__super__.readOpts.call(this),this._choices=[{text:this._button_text_cancel,cancel:!0,choice:"cancel",primary:"cancel"===this._button_primary},{text:this._button_text_ok,choice:"ok",primary:"ok"===this._button_primary}]},Confirm}(t.ConfirmationChoice),t.confirm=function(e){return new t.Confirm(e).open()}}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function ctor(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},n={}.hasOwnProperty;t.ConfirmationChoice=function(n){function ConfirmationChoice(t){this.opts=t,this.__getResolveValue=e(this.__getResolveValue,this),ConfirmationChoice.__super__.constructor.call(this,this.opts),this.__layer_root.addClass("cui-confirmation-choice")}return i(ConfirmationChoice,n),ConfirmationChoice.defaults={ok:"Ok",cancel:"Cancel"},ConfirmationChoice.prototype.initOpts=function(){return ConfirmationChoice.__super__.initOpts.call(this),this.removeOpt("buttons"),this.removeOpt("header_right"),this.removeOpt("cancel_action"),this.addOpts({onChoice:{check:Function},choices:{mandatory:!0,default:[],check:function(e){var i,n,o,r;if(!t.util.isArray(e))return!1;for(o=n=0,r=e.length;n<r;o=++n)(i=e[o])&&t.Element.readOpts(i,"new CUI.ConfirmationChoice[choice#"+o+"]",t.ConfirmationChoice.choiceOpts);return!0}}})},ConfirmationChoice.choiceOpts={text:{mandatory:!0,check:String},onClick:{check:Function},icon:{check:t.Icon},choice:{check:String},tooltip:{check:"PlainObject"},cancel:{default:!1,check:Boolean},primary:{mandatory:!0,default:!1,check:Boolean},disabled:{mandatory:!0,default:!1,check:Boolean}},ConfirmationChoice.prototype.readOpts=function(){return ConfirmationChoice.__super__.readOpts.call(this),this._cancel_action="cancel"},ConfirmationChoice.prototype.init=function(){var e,i,n,o,r,s;for(this._buttons=[],s=this._choices,n=0,r=s.length;n<r;n++)if(i=s[n]){e={left:!0,value:i,disabled:i.disabled,tooltip:i.tooltip,onClick:function(e){return function(i,n){e.__choice=n.getValue(),t.chainedCall(function(){var t;return null!=(t=e.__choice.onClick)?t.call(e,i,n):void 0},function(){var t;return e.__choice.cancel?(e.doCancel(i,!0),!1):null!=(t=e._onChoice)?t.call(e,i,e.__choice,e,n):void 0}).done(function(t,o){var r;if(!i.isImmediatePropagationStopped()&&!1!==t&&!1!==o)return null!=(r=e.__deferred)&&r.resolve(e.__getResolveValue(),n,i),e.destroy()})}}(this)};for(o in t.ConfirmationChoice.choiceOpts)"onClick"!==o&&"cancel"!==o&&"choice"!==o&&(e[o]=i[o]);this._buttons.push(e)}ConfirmationChoice.__super__.init.call(this)},ConfirmationChoice.prototype.__getResolveValue=function(){return this.__choice},ConfirmationChoice.prototype.show=function(){return t.util.assert(!1,"ConfirmationChoice.show","Use .open to open the ConfirmationChoice")},ConfirmationChoice.prototype.cancel=function(t,e){return this.hide(t),this.__deferred.reject(this.__choice,e)},ConfirmationChoice.prototype.destroy=function(){return this.__deferred=null,ConfirmationChoice.__super__.destroy.call(this)},ConfirmationChoice.prototype.open=function(){return this.__deferred?this.__deferred.promise():(this.__deferred=new t.Deferred,t.ConfirmationDialog.prototype.show.call(this),this.__deferred.always(function(t){return function(){return t.__deferred=null}}(this)),this.__deferred.promise())},ConfirmationChoice}(t.ConfirmationDialog),t.choice=function(e){return null==e&&(e={text:"CUI.ConfirmationChoice"}),new t.ConfirmationChoice(e).open()},t.defaults.class.ConfirmationChoice=t.ConfirmationChoice}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function ctor(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},n={}.hasOwnProperty;t.Prompt=function(n){function Prompt(){return this.__checkOkBtn=e(this.__checkOkBtn,this),Prompt.__super__.constructor.apply(this,arguments)}return i(Prompt,n),Prompt.prototype.initOpts=function(){return Prompt.__super__.initOpts.call(this),this.removeOpt("choices"),this.addOpts({default:{default:"",check:String},placeholder:{check:String},min_length:{mandatory:!0,default:1,check:function(t){return function(t){return t>=0}}()}})},Prompt.prototype.readOpts=function(){var e;return Prompt.__super__.readOpts.call(this),e=this._text,delete this._text,this.__input=null,this.__data={input:this._default+""},this._content=new t.Form({fields:[{type:t.Output,multiline:!0,markdown:this._markdown,text:e},{type:t.Input,name:"input",placeholder:this._placeholder,data:this.__data,onConstruct:function(t){return function(e){t.__input=e}}(this),onKeyup:function(t){return function(e,i){if(13===i.keyCode())return t.getButtons()[1].onClickAction(i)}}(this),onDataChanged:function(t){return function(){return t.__checkOkBtn()}}(this)}]}).start()},Prompt.prototype.getValue=function(){return this.__input.getValue()},Prompt.prototype.open=function(){var e;return this.__checkOkBtn(),e=new t.Deferred,Prompt.__super__.open.call(this).done(function(t){return function(i){return e.resolve(t.__data.input)}}(this)).fail(e.reject),t.setTimeout({call:function(t){return function(){return t.__input.focus().selectAll()}}(this)}),e.promise()},Prompt.prototype.__checkOkBtn=function(){var t;return t=this.getButtons(),this.__data.input.trim().length>=this._min_length?t[1].enable():t[1].disable()},Prompt}(t.Confirm),t.prompt=function(e){return new t.Prompt(e).open()}}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.Spinner=function(i){function Spinner(){return Spinner.__super__.constructor.apply(this,arguments)}return e(Spinner,i),Spinner.prototype.initOpts=function(){return Spinner.__super__.initOpts.call(this),this.mergeOpt("text_icon",{default:"spinner"}),this.mergeOpt("show_ms",{default:0}),this.mergeOpt("backdrop",{default:{policy:"modal"}})},Spinner.prototype.open=function(){return Spinner.__super__.open.call(this),this._show_ms>0&&t.setTimeout({ms:this._show_ms,call:function(t){return function(){return t.hide(),t.__deferred.resolve()}}(this)}),this.__deferred.promise()},Spinner}(t.Toaster),t.spinner=function(e){var i;return null==e&&(e={text:"CUI.spinner"}),i=new t.Spinner(e),i.open(),i}}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.Toaster=function(i){function Toaster(){return Toaster.__super__.constructor.apply(this,arguments)}return e(Toaster,i),Toaster.prototype.initOpts=function(){return Toaster.__super__.initOpts.call(this),this.removeOpt("choices"),this.mergeOpt("backdrop",{default:!1}),this.mergeOpt("show_ms",{check:function(t){return t>=0}})},Toaster.prototype.readOpts=function(){return 0===this.opts.show_ms&&void 0===this.opts.backdrop&&(this.opts.backdrop={policy:"modal"}),Toaster.__super__.readOpts.call(this),this._choices=[]},Toaster.prototype.open=function(){return this.__deferred?this.__deferred.promise():(Toaster.__super__.open.call(this),this._show_ms>0&&t.setTimeout({ms:this._show_ms,call:function(t){return function(){return t.hide(),t.__deferred.resolve()}}(this)}),this.__deferred.promise())},Toaster}(t.ConfirmationChoice),t.toaster=function(e){var i;return null==e&&(e={text:"CUI.toaster"}),i=new t.Toaster(e),i.open(),i}}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.ConfirmationDialog=function(i){function ConfirmationDialog(t){this.opts=t,ConfirmationDialog.__super__.constructor.call(this,this.opts),this.__layer_root.addClass("cui-confirmation-dialog"),this.init()}return e(ConfirmationDialog,i),ConfirmationDialog.prototype.initOpts=function(){return ConfirmationDialog.__super__.initOpts.call(this),this.addOpts({title:{check:String},text:{check:String},text_icon:{check:function(e){return e instanceof t.Icon||t.util.isString(e)}},markdown:{mandatory:!0,default:!1,check:Boolean},padded:{check:Boolean,default:!0},markdown_opts:{check:"PlainObject"},html:{check:String},content:{check:function(e){return t.util.isContent(e)||(null!=e?e.DOM:void 0)}},icon:{check:function(e){return e instanceof t.Icon||t.util.isString(e)}},buttons:{check:function(e){return t.util.isArray(e)&&e.length>0||t.util.isFunction(e)}},footer_left:{},header_right:{}}),this.removeOpt("pane")},ConfirmationDialog.prototype.setPane=function(){return ConfirmationDialog.__super__.setPane.call(this,{padded:this._padded,force_header:!0,force_footer:!0})},ConfirmationDialog.prototype.readOpts=function(){return ConfirmationDialog.__super__.readOpts.call(this),this._pane={}},ConfirmationDialog.prototype.init=function(){var e,i,n,o,r,s;t.util.xor(this._html,t.util.xor(this._content,this._text))||(console.warn(this.__cls+".readOpts","Exactly on opts.content, opts.text, or opts.html needs to be set",{opts:this.opts}),this._text=""),this._title||this.addClass("cui-confirmation-dialog--no-title"),t.util.isEmpty(this._text)?t.util.isEmpty(this._html)?e=this._content:this.__label=e=new t.MultilineLabel({content:this._html}):this.__label=e=new t.MultilineLabel({markdown:this._markdown,markdown_opts:this._markdown_opts,text:this._text,icon:this._text_icon}),t.util.isEmpty(this._title)&&t.util.isNull(this._icon)||(o=new t.Label({text:this._title,icon:this._icon})),r=this.getPane(),s={header_left:o,header_right:this._header_right,content:e,footer_right:this._buttons,footer_left:this._footer_left};for(n in s)(i=s[n])&&r.append(i,n)},ConfirmationDialog.prototype.updateText=function(t){var e;return null!=(e=this.__label)&&e.setText(t),this},ConfirmationDialog.prototype.setText=function(e,i,n){return null==i&&(i=this._markdown),null==n&&(n=this._markdown_opts),this.__label=new t.MultilineLabel({markdown:i,markdown_opts:n,text:e,icon:this._text_icon}),this.setContent(this.__label)},ConfirmationDialog.prototype.getButtons=function(){var e,i,n,o,r,s,a,l;for(l=this.getPane().getPaneAndKey("footer_right"),a=l[0],r=l[1],n=t.dom.findElements(a[r](),".cui-button"),e=[],o=0,s=n.length;o<s;o++)i=n[o],e.push(t.dom.data(i,"element"));return e},ConfirmationDialog}(t.Modal)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.Console=function(i){function Console(e){this.opts=null!=e?e:{},Console.__super__.constructor.call(this,this.opts),this.__console=t.dom.element("DIV",{class:"cui-console"}),this.registerDOMElement(this.__console)}return e(Console,i),Console.prototype.initOpts=function(){return Console.__super__.initOpts.call(this),this.addOpts({markdown:{mandatory:!0,default:!0,check:Boolean}})},Console.prototype.clear=function(){return this.__console.innerHTML=""},Console.prototype.log=function(e,i){var n;return null==i&&(i=this._markdown),n=new t.defaults.class.Label({text:e,multiline:!0,markdown:i}),this.__console.appendChild(n.DOM),this.__console.scrollTop=this.__console.scrollHeight},Console}(t.DOMElement)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.DataForm=function(i){function DataForm(){return DataForm.__super__.constructor.apply(this,arguments)}return e(DataForm,i),DataForm.prototype.render=function(){return t.DataFieldInput.prototype.render.call(this),t.Events.listen({type:"data-changed",node:this.DOM,call:function(t){return function(){return t.__updateView()}}(this)}),this._rowMove&&new t.Sortable({element:this.DOM,selector:".cui-drag-handle-row",create:function(e,i){var n;return!!(n=t.dom.data(i,"data"))&&(!n._new||(e.stopPropagation(),!1))},allowSort:function(t){return function(e,i,n){return!!t.rows[n]}}(this),sorted:function(e){return function(i,n,o){return console.debug(n,">",o),t.util.moveInArray(n,o,e.rows,n<o),e.__storeValue(),e.__updateView()}}(this)}),this},DataForm.prototype.initOpts=function(){return DataForm.__super__.initOpts.call(this),this.addOpts({level:{default:0,mandatory:!0,check:function(e){return t.util.isPosInt(e)}}}),this.removeOpt("onNodeAdd"),this.removeOpt("footer_right"),this.removeOpt("buttons"),this.removeOpt("chunk_size")},DataForm.prototype.init=function(){if(DataForm.__super__.init.call(this),this.getFieldList().length>1?this.addClass("cui-data-form--multiple-fields"):this.removeClass("cui-data-form--multiple-fields"),this._rowMove)return this.addClass("cui-data-form--movable-rows")},DataForm.prototype.readOpts=function(){return DataForm.__super__.readOpts.call(this),this.__rowRegistry=[]},DataForm.prototype.getFieldOpts=function(){var e,i,n,o;for(e=DataForm.__super__.getFieldOpts.call(this),n=0,o=e.length;n<o;n++)i=e[n],i.type===t.DataForm&&(i.level=this._level+1),1===e.length&&delete i.form.label;return e},DataForm.prototype.getForm=function(e){var i,n,o,r,s,a;for(i=[],a=this.getFieldOpts(),o=0,r=a.length;o<r;o++)n=a[o],n.type===t.DataForm&&(n.level=this._level+1),i.push(n);return s=new t.SimpleForm({fields:i,data:e,onDataChanged:function(t){return function(e,i,n){return e._new&&(delete e._new,t.rows.push(e),t.__appendNewRow()),n.stopPropagation(),t.__removeEmptyRows(),t.__storeValue()}}(this)}),t.dom.setAttribute(s.DOM,"cui-form-depth",this.getFormDepth()+1),s},DataForm.prototype.__updateView=function(){return this.__updateButtons()},DataForm.prototype.__removeEmptyRows=function(){var t;for(this.__updateEmptyInRows();this.rows.length>0&&(t=this.rows[this.rows.length-1],t._empty);)this.__removeRow(t);return this},DataForm.prototype.__storeValue=function(){return this.storeValue(t.util.copyObject(this.rows,!0))},DataForm.prototype.__updateEmptyInRows=function(){var t,e,i,n;for(i=this.rows,t=0,e=i.length;t<e;t++)n=i[t],this.rowHasUserData(n)?delete n._empty:n._empty=!0},DataForm.prototype.hasUserData=function(t){var e,i,n,o;if(!DataForm.__super__.hasUserData.call(this,t))return!1;if(o=t[this.getName()],0===o.length)return!1;for(e=0,i=o.length;e<i;e++)if(n=o[e],this.rowHasUserData(n))return!0;return!1},DataForm.prototype.rowHasUserData=function(t){var e,i,n,o;for(o=this.getFieldList(),i=0,n=o.length;i<n;i++)if(e=o[i],e.hasUserData(t))return!0;return!1},DataForm.prototype.renderAsBlock=function(){return this.getFieldList().length>1},DataForm.prototype.displayValue=function(){var t,e,i,n;for(this.rows=this.getValue(),this.empty(),i=this.rows,t=0,e=i.length;t<e;t++)n=i[t],this.__appendRow(n);this.__appendNewRow(),this.__updateButtons()},DataForm.prototype.__appendNewRow=function(){var t;if("edit"===(t=this._new_rows)||"append"===t)return this.__appendRow({_new:!0})},DataForm.prototype.__updateButtons=function(){var e,i,n,o,r,s;for(o=this.rows,e=0,n=o.length;e<n;e++)s=o[e],i=this.__findRowInfo(s),null!=(r=i.trash)&&r.show(),this.rows.length>=2?t.dom.removeClass(i.move,"is-hidden"):t.dom.addClass(i.move,"is-hidden")},DataForm.prototype.__findRowInfo=function(e){var i,n;return i=t.util.idxInArray(null,this.__rowRegistry,function(t){return t.data===e}),t.util.assert(i>-1,"DataForm.__removeRow","row not found",{row:e,registry:this.__rowRegistry}),n=this.__rowRegistry[i],n.idx=i,n},DataForm.prototype.__removeRow=function(e){var i;return i=this.__findRowInfo(e),t.dom.remove(i.dom),this.__rowRegistry.splice(i.idx,1),t.util.removeFromArray(e,this.rows),this.__storeValue(),this},DataForm.prototype.__appendRow=function(e){var i,n,o;return this._rowMove&&(n=t.dom.element("DIV",{class:"cui-drag-handle-row"})),"none"!==this._new_rows&&(o=new t.defaults.class.Button({icon:"fa-trash-o",appearance:"flat",onMouseenter:function(e){return function(){return t.dom.addClass(i,"cui-data-form-row--trash")}}(),onMouseleave:function(e){return function(){return t.dom.removeClass(i,"cui-data-form-row--trash")}}(),onClick:function(t){return function(){var i;return null!=(i=t._onRowRemove)&&i.call(t,e),t.__removeRow(e),t.__updateView()}}(this)})),i=new t.HorizontalLayout({maximize_vertical:!1,class:"cui-data-form-row",maximize_horizontal:this.__maximize_horizontal,left:{content:n},right:{content:o},center:{content:this.getForm(e).start()}}),t.dom.data(i.DOM,"data",e),e._new&&(t.dom.addClass(n,"is-hidden"),o.hide()),this.__rowRegistry.push({data:e,dom:i.DOM,trash:o,move:n}),this.append(i)},DataForm}(t.DataTable)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.DataTable=function(i){function DataTable(){return DataTable.__super__.constructor.apply(this,arguments)}return e(DataTable,i),DataTable.defaults={plus_button_tooltip:null,minus_button_tooltip:null},DataTable.prototype.initOpts=function(){return DataTable.__super__.initOpts.call(this),this.addOpts({fields:{mandatory:!0,check:function(e){return t.util.isArray(e)||t.util.isFunction(e)}},new_rows:{default:"edit",check:["edit","append","remove_only","none"]},no_header:{check:Boolean},rowMove:{default:!1,check:Boolean},onRowRemove:{check:Function},onNodeAdd:{check:Function},footer_right:{check:function(e){return t.util.isContent(e)}},buttons:{mandatory:!0,default:[],check:function(e){return t.util.isArray(e)}},chunk_size:{default:0,mandatory:!0,check:function(t){return t>=0}},padded:{check:Boolean,default:!1}})},DataTable.prototype.readOpts=function(){return DataTable.__super__.readOpts.call(this),this.__navi_prev=null,this.__navi_next=null,this.__offset=0,t.util.assert(!(this._chunk_size&&this._rowMove),"new CUI.DataTable","opts.chunk_size and opts.rowMove are mutually exclusive.",{opts:this.opts}),this},DataTable.prototype.getFieldList=function(){return this.__fieldList},DataTable.prototype.getFieldsByName=function(t,e){var i,n,o,r;for(null==e&&(e=[]),r=this.getFieldList(),n=0,o=r.length;n<o;n++)i=r[n],i.getName()===t&&e.push(i),"function"==typeof i.getFieldsByName&&i.getFieldsByName(t,e);return e},DataTable.prototype.debug=function(){var t;return DataTable.__super__.debug.call(this),null!=(t=this.listView)?t.debug():void 0},DataTable.prototype.getFieldOpts=function(){var e,i,n,o,r,s;for(n=[],s=this.getArrayFromOpt("fields"),o=0,r=s.length;o<r;o++)e=s[o],i=t.util.copyObject(e,!0),i.form||(i.form={}),t.util.isString(i.form.label)||(i.form.label=i.name),n.push(i);return n},DataTable.prototype.init=function(){var e,i,n,o;for(this.__fieldList=[],o=this.getFieldOpts(),i=0,n=o.length;i<n;i++)e=o[i],this.__fieldList.push(t.DataField.new(e));return this},DataTable.prototype.disable=function(){var t;return DataTable.__super__.disable.call(this),null!=(t=this.listView)&&t.setInactive(!0,null),this},DataTable.prototype.enable=function(){var t;return DataTable.__super__.enable.call(this),null!=(t=this.listView)&&t.setInactive(!1,null),this},DataTable.prototype.getDefaultValue=function(){return[]},DataTable.prototype.addRow=function(e){var i;return null==e&&(e={}),this.rows.push(e),i=new t.DataTableNode({dataTable:this,data:e,dataRowIdx:this.rows.length-1,rows:this.rows}),"function"==typeof this._onNodeAdd&&this._onNodeAdd(node),this.storeValue(t.util.copyObject(this.rows,!0)),this._chunk_size>0?(this.__offset=Math.floor((this.rows.length-1)/this._chunk_size)*this._chunk_size,this.displayValue()):this.listView.appendRow(i),i},DataTable.prototype.updateButtons=function(){return 0===this.listView.getSelectedRows().length?this.minusButton.disable():this.minusButton.enable()},DataTable.prototype.getFooter=function(){var e,i,n;return e=this._buttons.slice(0),"none"!==this._new_rows&&("remove_only"!==this._new_rows&&e.push({icon:"plus",tooltip:{text:t.DataTable.defaults.plus_button_tooltip},group:"plus-minus",onClick:function(t){return function(){return t.addRow()}}(this)}),this.minusButton=new t.defaults.class.Button({icon:"minus",group:"plus-minus",tooltip:{text:t.DataTable.defaults.minus_button_tooltip},disabled:!0,onClick:function(e){return function(){var i,n,o,r;for(o=e.listView.getSelectedRows(),i=0,n=o.length;i<n;i++)r=o[i],r.remove();e.storeValue(t.util.copyObject(e.rows,!0)),e.updateButtons(),e._chunk_size>0&&e.displayValue()}}(this)}),e.push(this.minusButton)),this._chunk_size>0&&(e.push({onConstruct:function(t){return function(e){return t.__navi_prev=e}}(this),icon:"left",disabled:!0,group:"navi",onClick:function(t){return function(){return t.__offset=t.__offset-t._chunk_size,t.displayValue()}}(this)}),n={},i=function(t){return function(){return t.__offset=(n.page-1)*t._chunk_size,t.displayValue()}}(this),this.__navi_input=new t.NumberInput({group:"navi",placeholder:"henk",data:n,name:"page",onBlur:function(t){return function(t){return t.setValue(null)}}(),onDataChanged:function(e){return function(){t.scheduleCallback({ms:1e3,call:i})}}()}).start(),e.push(this.__navi_input),e.push({onConstruct:function(t){return function(e){return t.__navi_next=e}}(this),icon:"right",disabled:!0,group:"navi",onClick:function(t){return function(){return t.__offset=t.__offset+t._chunk_size,t.displayValue()}}(this)})),e.length?new t.Buttonbar({buttons:e}):null},DataTable.prototype.render=function(){var e,i,n,o,r,s,a,l,u,c,h,d,p,_,f,m,g,y;for(DataTable.__super__.render.call(this),n=[],i=[],h=[],this.headerRow=new t.ListViewHeaderRow,p=this.__fieldList,s=r=0,u=p.length;r<u;s=++r)o=p[s],("maximize"===(null!=(_=o.getOpt("form"))?_.column:void 0)||o instanceof t.DataTable)&&h.push(s);for(0===h.length&&h.push(0),f=this.__fieldList,s=a=0,c=f.length;a<c;s=++a)o=f[s],t.util.idxInArray(s,h)>-1?n.push("maximize"):(null!=(m=o.getOpt("form"))?m.column:void 0)?n.push(o._form.column):o.isResizable()?n.push("auto"):n.push("fixed"),d=o.getName(),l=o._form.label,e=[],d&&e.push("cui-data-table-column-field-name-"+d),e.push("cui-data-table-column-field-type-"+t.util.toDash(o.getElementClass())),(null!=(g=o._form)?g.rotate_90:void 0)&&e.push("cui-lv-td-rotate-90"),i.push(e),this.headerRow.addColumn(new t.ListViewHeaderColumn({rotate_90:null!=(y=o._form)?y.rotate_90:void 0,label:{text:l,multiline:!0}}));return this.listView=new t.ListView({class:"cui-lv--has-datafields",selectableRows:"none"!==this._new_rows,padded:this._padded,onSelect:function(t){return function(){return t.updateButtons()}}(this),onDeselect:function(t){return function(){return t.updateButtons()}}(this),onRowMove:function(e){return function(i,n,o){var r;return r=e.listView.fixedRowsCount,i=e.__offset+i,n=e.__offset+n,t.util.moveInArray(i-r,n-r,e.rows,o),t.Events.trigger({type:"data-changed",node:e.listView})}}(this),cols:n,fixedRows:this._no_header?0:1,footer_left:this.getFooter(),footer_right:this._footer_right,fixedCols:this._rowMove?1:0,colResize:!this._no_header,colClasses:i,rowMove:this._rowMove,maximize:this._maximize,maximize_horizontal:this._maximize_horizontal,maximize_vertical:this._maximize_vertical}),this.isDisabled()&&this.listView.setInactive(!0,null),this.replace(this.listView.render()),t.Events.listen({type:"data-changed",node:this.listView,call:function(e){return function(i,n){i.stopPropagation(),e.storeValue(t.util.copyObject(e.rows,!0))}}(this)}),this},DataTable.prototype.displayValue=function(){var e,i,n,o,r,s,a,l,u,c,h,d;if(this.listView.removeAllRows(),this._no_header||this.listView.appendRow(this.headerRow),this.rows=t.util.copyObject(this.getValue(),!0),this._chunk_size>0&&(o=this.rows.length,this.__offset>=o&&(this.__offset=Math.max(this.__offset-this._chunk_size)),a=Math.floor(this.__offset/this._chunk_size),n=Math.ceil(o/this._chunk_size)-1,d=" / ",l=a+1+d+(n+1),this.__navi_input.setMin(1),this.__navi_input.setMax(n+1),this.__navi_input.setValue(null),this.__navi_input.setPlaceholder(l),t.dom.setAttribute(this.__navi_input.getElement(),"data-max-chars",2*(""+(n+1)).length+d.length),a>0?this.__navi_prev.enable():this.__navi_prev.disable(),a<n?this.__navi_next.enable():this.__navi_next.disable()),t.util.assert(t.util.isArray(this.rows),"DataTable.displayValue",'"value" needs to be Array.',{data:this.getData(),value:this.getValue()}),this.rows){for(h=this._chunk_size>0?this.rows.slice(this.__offset,this.__offset+this._chunk_size):this.rows,i=e=0,r=h.length;e<r;i=++e)c=h[i],s=new t.DataTableNode({dataTable:this,data:c,dataRowIdx:i,rows:this.rows,check_changed_data:null!=(u=this.getInitValue())?u[i]:void 0}),"function"==typeof this._onNodeAdd&&this._onNodeAdd(s),this.listView.appendRow(s,!0);this.listView.appendDeferredRows()}return this},DataTable}(t.DataFieldInput)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.DataTableNode=function(i){function DataTableNode(){return DataTableNode.__super__.constructor.apply(this,arguments)}return e(DataTableNode,i),DataTableNode.prototype.initOpts=function(){return DataTableNode.__super__.initOpts.call(this),this.addOpts({dataTable:{mandatory:!0,check:t.DataTable},data:{mandatory:!0,check:"PlainObject"},check_changed_data:{check:"PlainObject"},rows:{mandatory:!0,check:"Array"},dataRowIdx:{mandatory:!0,check:function(t){return t>=0}}})},DataTableNode.prototype.readOpts=function(){var e,i,n,o,r,s;for(DataTableNode.__super__.readOpts.call(this),this.__dataTable=this._dataTable,this.__data=this._data,this.__check_changed_data=this._check_changed_data,this.__rows=this._rows,t.util.assert(this.__rows.indexOf(this.__data)>-1,"new "+t.util.getObjectClass(this),"opts.data needs to be item in opts.rows Array",{opts:this.opts}),this.__fields=[],s=this.__dataTable.getFieldList(),o=0,r=s.length;o<r;o++)i=s[o],n=i.getOpts(),n.undo_support=!1,e=new(t[i.getElementClass()])(n),e.setForm(this),e.setData(this.__data),i.hasData()&&(this.__check_changed_data?e.setCheckChangedValue(this.__check_changed_data[i.getName()]):e.setCheckChangedValue(i.getDefaultValue())),this.__fields.push(e),this.addColumn(new t.ListViewColumn({element:e.DOM}));return this},DataTableNode.prototype.remove=function(){var e;return DataTableNode.__super__.remove.call(this),null!=(e=this._dataTable._onRowRemove)&&e.call(this,this.__data),t.util.removeFromArray(this.__data,this.__rows)},DataTableNode.prototype.getDataTable=function(){return this._dataTable},DataTableNode.prototype.getFieldByIdx=function(t){return this.__fields[t]},DataTableNode.prototype.getDataRowIdx=function(){return this._dataRowIdx},DataTableNode.prototype.getFieldsByName=function(t){var e,i,n,o,r;for(i=[],r=this.__fields,n=0,o=r.length;n<o;n++)e=r[n],e.getName()===t&&i.push(e);return i},DataTableNode.prototype.getFields=function(){return this.__fields},DataTableNode.prototype.getData=function(){return this.__data},DataTableNode.prototype.reload=function(){var t,e,i,n,o;for(n=this.__fields,o=[],e=0,i=n.length;e<i;e++)t=n[e],o.push(t.reload());return o},DataTableNode.prototype.addedToListView=function(){var t,e,i,n;for(n=this.__fields,e=0,i=n.length;e<i;e++)t=n[e],t.start();return this},DataTableNode}(t.ListViewRow)}).call(e,i(0))},function(t,e,i){(function(t){var e,n=function(t,e){function ctor(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},o={}.hasOwnProperty,r=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1};t.Template.loadTemplateText(i(178)),e=i(1),t.DateTime=function(i){function DateTime(t){this.opts=null!=t?t:{},DateTime.__super__.constructor.call(this,this.opts),this.init()}return n(DateTime,i),DateTime.defaults={button_tooltip:"Open calendar",bc_appendix:["B.C.","BC"]},DateTime.prototype.initOpts=function(){var e;if(DateTime.__super__.initOpts.call(this),t.DateTime.__locale)e=t.DateTime.__locale;else for(e in t.DateTimeFormats)break;return this.addOpts({locale:{mandatory:!0,default:e,check:function(e){var i;return t.util.isArray(null!=(i=t.DateTimeFormats[e])?i.formats:void 0)}},input_types:{check:Array},display_type:{default:"long",check:["long","short"]},min_year:{mandatory:!0,default:0,check:"Integer"},max_year:{mandatory:!0,default:9999,check:"Integer"},store_invalid:{mandatory:!0,default:!1,check:Boolean}}),this.removeOpt("getValueForDisplay"),this.removeOpt("getValueForInput"),this.removeOpt("checkInput"),this.removeOpt("getInputBlocks")},DateTime.prototype.init=function(){var e,i,n,o,r,s,a,l,u,c,h,d,p,_;if(this.__regexpMatcher=this.regexpMatcher(),this.__input_formats_known=t.DateTimeFormats[this._locale].formats,this.__locale_format=t.DateTimeFormats[this._locale],this.__input_formats=[],null!=(c=this._input_types)?c.length:void 0)for(h=this._input_types,o=0,a=h.length;o<a;o++){for(_=h[o],n=!1,d=this.__input_formats_known,r=0,l=d.length;r<l;r++)e=d[r],e.type===_&&(this.__input_formats.push(e),n=!0);t.util.assert(n,"new CUI.DateTime","opts.input_types contains unknown type: "+_,{formats:this.__input_formats_known,input_type:this._input_types})}else this.__input_formats=this.__input_formats_known.slice(0);for(this.__default_format=this.__input_formats[0],p=this.__input_formats,s=0,u=p.length;s<u;s++)if(i=p[s],!1===i.clock){this.__input_format_no_time=i,this.__default_format=i;break}this.__input_format=this.initFormat(this.__default_format)},DateTime.prototype.setInputFormat=function(t){return null==t&&(t=this.__input_formats[0].clock),this.__input_format=!0===t?this.initFormat(this.__input_formats[0]):this.initFormat(this.__input_format_no_time),this},DateTime.prototype.initDateTimePicker=function(){var e,i,n,o;if(this.__dateTimeTmpl)return this.__dateTimeTmpl;for(this.__dateTimeTmpl=new t.Template({name:"date-time",map:{calendar:!0,analog_clock:!0,hour_minute:!0,digi_clock:!0,header_left:!0,header_center:!0,header_right:!0,hour:!0,minute:!0,second:!0}}),o=["calendar","hour_minute","hour","minute","second"],e=0,n=o.length;e<n;e++)i=o[e],this["__"+i]=this.__dateTimeTmpl.map[i];return this.__dateTimeTmpl.append(new t.defaults.class.Button({class:"cui-date-time-browser-date",icon_left:"left",text:this.__locale_format.tab_date,onClick:function(t){return function(){return t.setCursor("day")}}(this)}),"header_left"),this.__dateTimeTmpl.append(new t.defaults.class.Button({class:"cui-date-time-browser-time",icon_right:"right",text:this.__locale_format.tab_time,onClick:function(t){return function(){return t.setCursor("hour")}}(this)}),"header_right"),this.setCursor("day"),this.__dateTimeTmpl},DateTime.prototype.getTemplate=function(){return new t.Template({name:"date-time-input",map:{center:!0,right:!0}})},DateTime.prototype.readOpts=function(){return DateTime.__super__.readOpts.call(this),this._checkInput=this.__checkInput,this._getInputBlocks=this.__getInputBlocks},DateTime.prototype.getCurrentFormat=function(){return this.__input_format},DateTime.prototype.getCurrentFormatDisplay=function(){var t;return null!=(t=this.__input_format)?t.__display:void 0},DateTime.prototype.setCursor=function(e){var i;switch(e){case"hour":case"minute":case"second":case"am_pm":i=this.__locale_format.tab_time,t.dom.setAttribute(this.__dateTimeTmpl.DOM,"browser","time"),this.setDigiClock();break;default:i=this.__locale_format.tab_date,t.dom.setAttribute(this.__dateTimeTmpl.DOM,"browser","date")}return this.__dateTimeTmpl.replace(new t.Label({text:i}),"header_center"),this},DateTime.prototype.initFormat=function(i){var n,o,r,s,a,l,u,c,h,d,p,_,f;switch(e.locale(this.__locale_format.moment_locale||this._locale),this._display_type){case"short":i.__display=i.display_short;break;default:i.__display=i.display}this._invalidHint={text:i.invalid},h=this.__regexpMatcher;for(o in h)f=h[o],f.match_str=o;for(n=i.input,p="("+Object.keys(this.__regexpMatcher).join("|")+")",c=new RegExp(p,"g"),_=n.split(""),d=[],u=[],r=0;null!==(s=c.exec(n));)l=s[0],a=s.index,d.push("("+t.util.escapeRegExp(_.slice(r,a).join(""))+")"),d.push("("+this.__regexpMatcher[l].regexp+")"),u.push(this.__regexpMatcher[l]),r=a+l.length;return d.push("("+t.util.escapeRegExp(_.slice(r).join(""))+")"),i.regexp=new RegExp("^"+d.join("")+"$"),i.matcher=u,i},DateTime.prototype.getTemplateKeyForRender=function(){return"center"},DateTime.prototype.render=function(){var e,i;switch(DateTime.__super__.render.call(this),t.util.isEmpty(this._placeholder)&&this.__input.setAttribute("placeholder",this.__input_formats[0].text),this._display_type){case"short":i="display_short";break;default:i="display"}return e=this.__input_formats[0][i+"_attribute"],e||(e=this.__input_formats[0][i].replace(/[:, \.]/g,"-").replace(/-+/g,"-")),this.DOM.setAttribute("data-cui-date-time-format",e),this.addClass("cui-data-field--with-button"),this.__calendarButton=new t.defaults.class.Button({icon:"calendar",tooltip:{text:t.DateTime.defaults.button_tooltip},onClick:function(t){return function(){return t.openPopover(t.__calendarButton)}}(this)}),this.replace(this.__calendarButton,"right")},DateTime.prototype.format=function(i,n,o){var s,a,l,u,c,h,d,p,_,f,m,g,y,v,b,w;if(null==n&&(n="display"),null==o&&(o=null),t.util.assert(r.call(t.DateTime.formatTypes,n)>=0,"CUI.DateTime.format",'output_format must be on of "'+t.DateTime.formatTypes.join(",")+'".',{parm1:i,output_format:g}),e.isMoment(i))m=i;else{if(w=null!=i?i.trim():void 0,t.util.isEmpty(w))return null;m=this.parse(w,this.__input_formats_known)}if(m.isValid()&&t.util.isNull(o)&&(o=this.getCurrentFormat().type),!m.isValid()){for(l=[],y=this.__input_formats_known,u=0,p=y.length;u<p;u++)for(a=y[u],v=t.DateTime.formatTypes,c=0,_=v.length;c<_;c++)h=v[c],l.push(a[h]);return console.warn("CUI.DateTime.format: Moment '"+w+"' is invalid. Tried formats:",l),null}for(g=null,b=this.__input_formats_known,d=0,f=b.length;d<f;d++)if(s=b[d],s.type===o){g=s;break}switch(t.util.assert(g,"CUI.DateTime.format","output_type must be in known formats",{formats:this.__input_formats_known,output_type:o}),n){case"store":return t.DateTime.formatMoment(m,g[n]);default:return t.DateTime.formatMomentWithBc(m,g[n])}},DateTime.prototype.regexpMatcher=function(){return{YYYY:{regexp:"(?:-|)[0-9]{1,}",inc_func:"year",cursor:"year"},MM:{regexp:"(?:0[1-9]|1[0-2])",inc_func:"month",cursor:"month"},DD:{regexp:"[0-3][0-9]",inc_func:"day",cursor:"day"},HH:{regexp:"[0-2][0-9]",inc_func:"hour",cursor:"hour"},hh:{regexp:"[0-1][0-9]",inc_func:"hour",cursor:"hour"},mm:{regexp:"[0-5][0-9]",inc_func:"minute",cursor:"minute"},ss:{regexp:"[0-5][0-9]",inc_func:"second",cursor:"second"},A:{regexp:"(?:AM|PM)",inc_func:this.incAMPM,cursor:"am_pm"},a:{regexp:"(?:am|pm)",inc_func:this.incAMPM,cursor:"am_pm"},Y:{regexp:"(?:-|)[0-9]{1,}",inc_func:"year",cursor:"year"}}},DateTime.prototype.incAMPM=function(t){var e;return e=t.hour(),e<12?t.add(12,"hour"):t.subtract(12,"hour")},DateTime.prototype.initValue=function(){var t,e;return DateTime.__super__.initValue.call(this),e=this.getValue(),t=this.parseValue(e,"store"),t&&t!==e&&(console.warn("CUI.DateTime.initValue: Corrected value in data:",t,"Original value:",e),this.__data[this._name]=t),this},DateTime.prototype.getValueForDisplay=function(){var e,i,n;return n=null!=(i=this.getValue())&&"function"==typeof i.trim?i.trim():void 0,t.util.isEmpty(n)?"":(e=this.parse(n),e.isValid()?t.DateTime.formatMomentWithBc(e,this.getCurrentFormatDisplay()):n)},DateTime.prototype.getValueForInput=function(e){var i;return null==e&&(e=this.getValue()),t.util.isEmpty(null!=e?e.trim():void 0)?"":(i=this.parse(e),i.isValid()?t.DateTime.formatMomentWithBc(i,this.__input_format.input):e)},DateTime.prototype.__checkInput=function(e){var i;if(this.__calendarButton.enable(),t.util.isEmpty(null!=e?e.trim():void 0))this.__input_format=this.initFormat(this.__default_format);else{if(i=this.parse(e),!i.isValid())return!1;(i.bc||e.startsWith("-"))&&this.__calendarButton.disable()}return!0},DateTime.prototype.__getInputBlocks=function(e){var i,n,o,r,s,a,l;if(!(a=e.match(this.__input_format.regexp)))return!1;for(i=[],l=0,o=n=0,r=a.length;n<r;o=++n)s=a[o],0!==o&&(o%2==0&&i.push(new t.DateTimeInputBlock({start:l,string:s,datetime:e,input_format:this.__input_format,matcher:this.__input_format.matcher[o/2-1]})),l+=s.length);return i},DateTime.prototype.start_day=1,DateTime.prototype.storeValue=function(t,e){var i;return null==e&&(e={}),i=this.parse(t),t=i.isValid()?i.bc?"-"+i.bc:i.format(this.__input_format.store):this._store_invalid&&t.trim().length>0?"invalid":null,DateTime.__super__.storeValue.call(this,t,e),this},DateTime.prototype.getDigiDisplay=function(e){var i,n,o,r,s,a,l;for(o=[],l=e.split(""),r=0,a=l.length;r<a;r++)n=l[r],(s=["H","h","m","s","A","a"].indexOf(n))>-1?(i=["hour","hour","minute","second","am_pm","am_pm"][s],"A"===n||"a"===n?(o.push({mask:"[aApP]",attr:{cursor:i,title:i}}),o.push({mask:"[mM]",attr:{cursor:i,title:i}})):o.push({mask:"[0-9]",attr:{cursor:i}})):"*"===n?o.push({mask:"[0-9A-Z+-:. ]"}):o.push({static:":"});return this.__digiDisplay=new t.DigiDisplay({digits:o})},DateTime.prototype.openPopover=function(e){return this.initDateTimePicker(),this.__popover=new t.Popover({element:e,handle_focus:!1,onHide:function(t){return function(){return t.displayValue(),t.closePopover()}}(this),placement:"se",class:"cui-date-time-popover",pane:{content:this.__dateTimeTmpl}}),this.updateDateTimePicker(),this.setCursor("day"),this.__popover.show(),this},DateTime.prototype.closePopover=function(){return this.__popover&&(this.__popover.destroy(),delete this.__popover),this},DateTime.prototype.updateDateTimePicker=function(){return this.setMomentFromInput(),console.debug("updating popover...",this.__input_format),this.drawDate(),this.setClock(),this.setDigiClock(),this.setPrintClock(),this},DateTime.prototype.destroy=function(){return this.closePopover(),DateTime.__super__.destroy.call(this)},DateTime.prototype.setClock=function(e){var i,n,o,r,s,a,l;return null==e&&(e=this.__current_moment),i=e.hour(),r=e.minute(),a=e.second(),o=0,l=a+o/1e3,s=r+l/60,n=i%12+s/60,t.dom.setStyleOne(this.__hour,"transform","rotate("+30*n+"deg)"),t.dom.setStyleOne(this.__minute,"transform","rotate("+6*s+"deg)"),t.dom.setStyleOne(this.__second,"transform","rotate("+6*l+"deg)")},DateTime.prototype.setDigiClock=function(t){var e;return null==t&&(t=this.__current_moment),e=this.__input_format.digi_clock,console.debug("setDigiClock",e,t,t.format(e)),e&&this.__digiDisplay.display(t.format(e)),this},DateTime.prototype.setPrintClock=function(e){var i;return null==e&&(e=this.__current_moment),this.__input_format.timezone_display?(i=e.clone(),i.tz(t.tz_data.tz),t.dom.empty(this.__timezone_display),t.dom.append(this.__timezone_display,i.format(this.__input_format.timezone_display))):this},DateTime.prototype.setTimezone=function(){},DateTime.prototype.UNUSEDgetTimezoneData=function(){return this.__tz_data?t.resolvedPromise():$.get(t.getPathToScript()+"/moment-timezone-meta.json").done(function(t){return function(e){var i,n,o,r,s,a,l,u,c;for(l=[],i={},n=0,r=e.length;n<r;n++)c=e[n],c.geo=c.lat+"/"+c.long,c.print_name=c.name,l.push(c.print_name),i[c.print_name]=c;for(l.sort(),t.__tz_data=[],u=[],o=0,s=l.length;o<s;o++)a=l[o],u.push(t.__tz_data.push(i[a]));return u}}(this))},DateTime.prototype.getTimezoneOpts=function(){var e,i,n,o,r,s,a,l;for(this.__current_moment&&(o=this.__current_moment.clone()),r=[],s=this.__tz_data,i=e=0,n=s.length;e<n;i=++e)l=s[i],(o||l.name===t.DateTimeFormats["de-DE"].timezone)&&r.push({text:l.print_name,right:o?(a=t.dom.span("cui-timezone-offset").setAttribute("title",l.geo),a.textContent=o.tz(l.name).format("zZ"),a):null,value:l.name});return r},DateTime.prototype.parse=function(i,n,o){var s,a,l,u,c,h,d,p,_,f,m,g;if(null==n&&(n=this.__input_formats),null==o&&(o=n),!((null!=i&&"function"==typeof i.trim?i.trim().length:void 0)>0))return e.invalid();for(c=0,d=n.length;c<d;c++)if(l=n[c],_=this.__parseFormat(l,i))return r.call(o,l)>=0?this.__input_format=this.initFormat(l):this.__input_format=this.initFormat(this.__default_format),_.locale(e.locale()),_.year()>this._max_year?e.invalid():_;if(!n.some(function(t){return t.support_bc}))return e.invalid();if(a=!1,u=!1,i.startsWith("-"))a=!0,i=i.substring(1);else for(g=i.toLocaleUpperCase(),f=t.DateTime.defaults.bc_appendix,h=0,p=f.length;h<p;h++)if(s=f[h],m=s.toLocaleUpperCase(),g.endsWith(" "+m)){i=i.substring(0,i.length-m.length).trim(),u=a=!0;break}return a&&i.match(/^[0-9]+$/)?(_=e(),_.bc=parseInt(i),u&&_.bc--,_.bc<10?_.bc="000"+_.bc:_.bc<100?_.bc="00"+_.bc:_.bc<1e3?_.bc="0"+_.bc:_.bc=""+_.bc,_):e.invalid()},DateTime.prototype.parseValue=function(e,i){var n,o,r,s,a,l;for(null==i&&(i=null),r=this.__input_formats.slice(0),l=this.__input_formats_known,o=0,s=l.length;o<s;o++)n=l[o],t.util.pushOntoArray(n,r);return a=this.parse(e,r,this.__input_formats),i?a.isValid()?a.bc?"-"+a.bc:a.format(this.__input_format[i]):null:a},DateTime.prototype.__parseFormat=function(i,n){var o,r,s,a,l,u,c,h,d;for(h=t.DateTime.formatTypes,o=0,a=h.length;o<a;o++)if(s=h[o],t.util.assert(i[s],"CUI.DateTime.__parseFormat","."+s+" must be set",{format:i}),u=e(n,i[s],!0),u.isValid())return u;for(d=i.parse,r=0,l=d.length;r<l;r++)if(c=d[r],u=e(n,c,!0),u.isValid())return u},DateTime.prototype.setMomentFromInput=function(){var t;t=this.__input.value.trim(),t.length>0&&(this.__current_moment=this.parse(t)),""!==t&&this.__current_moment.isValid()||(this.__current_moment=e(),this.__current_moment.__now=!0,this.__input_format=this.initFormat(this.__default_format))},DateTime.prototype.setInputFromMoment=function(){return this.__clearOverwriteMonthAndYear(),this.setValue(this.__current_moment.format(this.__input_format.input),{no_trigger:!1}),this},DateTime.prototype.__clearOverwriteMonthAndYear=function(){return this.__overwrite_month=null,this.__overwrite_year=null},DateTime.prototype.drawDate=function(t){var e;return t?e=t:(e=this.__current_moment.clone(),e.bc=this.__current_moment.bc),this.updateCalendar(e,!1)},DateTime.prototype.updateCalendar=function(e,i){return null==i&&(i=!0),t.dom.empty(this.__calendar),t.dom.append(this.__calendar,this.getDateTimeDrawer(e)),t.dom.append(this.__calendar,this.drawMonthTable(e)),t.dom.append(this.__calendar,this.drawYearMonthsSelect(e)),i&&(this.__current_moment=e.clone(),this.__current_moment.bc=e.bc,this.setInputFromMoment()),console.info("CUI.DateTime.updateCalendar:",this.__current_moment.format(this.__input_format.input)),this.markDay(),this},DateTime.prototype.getDateTimeDrawer=function(e){var i,n,o,r,s,a,l,u,c,h;return i=this.__input_formats[0].clock_am_pm,o={month:e.month(),year:e.year(),date:e.date(),hour:null,minute:null,second:null,am_pm:null},this.__input_format.clock&&(o.hour=e.hour(),o.minute=e.minute(),o.second=e.second(),i&&(o.am_pm=12*Math.floor(o.hour/12),o.hour=o.hour%12)),c=function(t){return t<10?"0"+t:""+t},r=new t.Select({name:"date",data:o,group:"date",onDataChanged:function(t){return function(){return t.updateCalendar(e.date(o.date))}}(this),options:function(t){return function(){var t,i,n,o;for(n=[],t=i=1,o=e.daysInMonth();1<=o?i<=o:i>=o;t=1<=o?++i:--i)n.push({text:c(t),value:t});return n}}()}).start(),u=new t.Select({name:"month",data:o,group:"date",onDataChanged:function(t){return function(){return t.updateCalendar(e.month(o.month))}}(this),options:function(t){return function(){var t,e,i;for(i=[],e=t=0;t<=11;e=++t)i.push({text:c(e+1),value:e});return i}}()}).start(),h=new t.Select({name:"year",data:o,group:"date",onDataChanged:function(t){return function(){return t.updateCalendar(e.year(o.year))}}(this),options:function(t){return function(){var e,i,n,r,s,a;for(n=[],i=o.year-20,i<t._min_year&&(i=t._min_year),a=e=r=i,s=o.year+20;r<=s?e<=s:e>=s;a=r<=s?++e:--e)n.push({text:""+a,value:a});return n}}(this)}).start(),this.__input_formats[0].clock&&(s=this.__input_format_no_time?[{text:"",value:null}]:[],a=new t.Select({name:"hour",data:o,group:"time",onDataChanged:function(t){return function(n){return null===n.hour?(t.setInputFormat(!1),t.updateCalendar(e)):(t.setInputFormat(!0),i?t.updateCalendar(e.hour(o.hour+o.am_pm)):t.updateCalendar(e.hour(o.hour))),t.__popover.position()}}(this),options:function(t){return function(){var t,e,n,o;if(o=s.slice(0),i)for(t=e=1;e<=12;t=++e)o.push({text:c(t),value:t%12});else for(t=n=0;n<=23;t=++n)o.push({text:c(t),value:t});return o}}()}).start(),l=new t.Select({class:"cui-date-time-60-select",name:"minute",group:"time",data:o,onDataChanged:function(t){return function(i){return null===i.minute?(t.setInputFormat(!1),t.updateCalendar(e)):(t.setInputFormat(!0),t.updateCalendar(e.minute(o.minute))),t.__popover.position()}}(this),options:function(t){return function(){var t,e,i;for(i=s.slice(0),e=t=0;t<=59;e=++t)i.push({text:c(e),value:e});return i}}()}).start(),i&&(n=new t.Select({class:"cui-date-time-am-pm-select",name:"am_pm",group:"time",data:o,onDataChanged:function(t){return function(i){return null===i.am_pm?(t.setInputFormat(!1),t.updateCalendar(e)):(t.setInputFormat(!0),t.updateCalendar(e.hour(o.hour+o.am_pm))),t.__popover.position()}}(this),options:function(t){return function(){var t,e,n,o;for(n=s.slice(0),o=["AM","PM"],t=0,e=o.length;t<e;t++)i=o[t],n.push({text:i,value:"AM"===i?0:12});return n}}()}).start())),new t.Buttonbar({buttons:[r,u,h,a,l,n]}).DOM},DateTime.prototype.drawYearMonthsSelect=function(i){var n,o,r,s,a,l,u,c,h,d,p;for(p=null,d=function(t){return function(){return t.updateCalendar(i.year(p))}}(this),n={month:i.month(),year:i.year()},u=[],h=e.months(),s=r=0,a=h.length;r<a;s=++r)l=h[s],u.push({text:l,value:s});return c=e().year(),o=new t.HorizontalLayout({maximize_vertical:!1,maximize_horizontal:!0,class:"cui-date-time-footer",left:{content:new t.Buttonbar({class:"cui-date-time-header-month",buttons:[{icon:"left",onClick:function(t){return function(e){if(!(i.clone().subtract(1,"months").year()<t._min_year))return i.subtract(1,"months"),t.drawDate(i)}}(this)},new t.Label({text:u[n.month].text}),{icon:"right",onClick:function(t){return function(e){if(!(i.clone().add(1,"months").year()>t._max_year))return i.add(1,"months"),t.drawDate(i)}}(this)}]})},right:{content:new t.Buttonbar({class:"cui-date-time-header-year",buttons:[{icon:"left",group:"year",onClick:function(t){return function(){if(!(n.year-1<t._min_year))return i.subtract(1,"years"),t.drawDate(i)}}(this)},new t.NumberInput({attr:{cursor:"year"},max:this._max_year,min:this._min_year,placeholder:""+c,data:n,name:"year",group:"year",onDataChanged:function(e){return function(e){return p=t.util.isEmpty(e.year)?c:e.year,t.scheduleCallback({ms:500,call:d})}}()}).start(),{icon:"right",group:"year",onClick:function(t){return function(){if(!(n.year+1>t._max_year))return i.add(1,"years"),t.drawDate(i)}}(this)}]})}}),o.DOM},DateTime.prototype.drawMonthTable=function(i){var n,o,r,s,a,l,u,c,h,d,p,_,f,m,g,y,v,b,w,k;for(h=i.month(),k=i.year(),c=e([k,h,1,i.hour(),i.minute(),i.second(),0]),d=t.dom.table("cui-date-time-date"),t.Events.listen({node:d,type:"click",call:function(e){return function(i){var n,o;i.stopPropagation(),o=i.getTarget(),t.dom.closest(o,".cui-date-time-day")&&(n=t.dom.data(t.dom.closest(o,"td,.cui-td")),e.__input_format=e.initFormat(e.__default_format),e.__current_moment.year(n.year),e.__current_moment.month(n.month),e.__current_moment.date(n.date),e.updateCalendar(e.__current_moment),e.__input_formats[0].clock?e.__popover.position():e.closePopover())}}(this)}),y=t.dom.tr("cui-date-time-month-header"),t.dom.append(d,y),g=t.dom.th,t.dom.div("cui-date-time-dow").textContent=this.__locale_format.tab_week,t.dom.append(y,t.dom.append(g("cui-date-time-week-title"),t.dom.div("cui-date-time-dow"))),l=u=_=this.start_day,f=this.start_day+6;_<=f?u<=f:u>=f;l=_<=f?++u:--u)b=e.weekdaysMin(l%7),t.dom.div("cui-date-time-dow").textContent=b,r=t.dom.div("cui-date-time-dow"),t.dom.addClass(r,"cui-date-time-day-"+b.toLowerCase()),t.dom.append(y,t.dom.append(g(),r));for(c.subtract((c.day()-this.start_day+7)%7,"days"),l=this.start_day,w=0,p=e();;){if(o=c.year(),n=c.month(),s=c.date(),(l-this.start_day)%7==0){if(6===w)break;y=t.dom.tr(),t.dom.append(d,y),v=c.week(),t.dom.append(y,t.dom.append(t.dom.td("cui-date-time-week"),t.dom.text(v))),w++}a=t.dom.td,r=a("cui-date-time-day",{cursor:"day",datestr:[o,n,s].join("-")}),r.textContent=s,n<h?t.dom.addClass(r,"cui-date-time-previous-month"):n>h?t.dom.addClass(r,"cui-date-time-next-month"):(t.dom.addClass(r,"cui-date-time-same-month"),k===p.year()&&h===p.month()&&s===p.date()&&t.dom.addClass(r,"cui-date-time-now")),t.dom.addClass(r,"cui-date-time-day-"+c.format("dd").toLowerCase()),m=r,t.dom.append(y,m),t.dom.data(m,{date:s,month:n,year:o}),c.add(1,"days"),l++}return d},DateTime.prototype.markDay=function(){var e,i,n,o,r,s,a,l;for(a=t.dom.matchSelector(this.__dateTimeTmpl.DOM,".cui-date-time-calendar .cui-date-time-selected"),n=0,r=a.length;n<r;n++)i=a[n],t.dom.removeClass(i,"cui-date-time-selected");if(!this.__current_moment.__now)for(e=[this.__current_moment.year(),this.__current_moment.month(),this.__current_moment.date()].join("-"),l=t.dom.matchSelector(this.__calendar,'[datestr="'+e+'"]'),o=0,s=l.length;o<s;o++)i=l[o],t.dom.addClass(i,"cui-date-time-selected")},DateTime.formatTypes=["store","input","display","display_short"],DateTime.setLocale=function(e){return t.util.assert(t.DateTimeFormats[e],"CUI.DateTime.setLocale","Locale "+e+" unknown",{DateTimeFormats:t.DateTimeFormats}),t.DateTime.__locale=e},DateTime.format=function(e,i,n){var o;return o=new t.DateTime,o.format(e,i,n)},DateTime.formatWithInputTypes=function(e,i,n){var o,r;return e?(o=new t.DateTime({input_types:i}),r=o.parseValue(e),r.isValid()?o.format(r,n):null):null},DateTime.display=function(e,i){var n,o;return null==i&&(i={}),i.hasOwnProperty("input_types")||(i.input_types=null),n=new t.DateTime(i),o=n.parseValue(e),o.isValid()?this.formatMomentWithBc(o,n.getCurrentFormatDisplay()):null},DateTime.formatMoment=function(t,e){return t.bc?"-"+t.bc:t.format(e)},DateTime.formatMomentWithBc=function(e,i){var n;return 0===e.year()?"1 "+t.DateTime.defaults.bc_appendix[0]:e.bc?parseInt(e.bc)+1+" "+t.DateTime.defaults.bc_appendix[0]:e.year()>0?(n=e.format(i),n.replace("+"+e.year(),""+e.year())):(e.subtract(1,"year"),n=e.format(i)+" "+t.DateTime.defaults.bc_appendix[0],n.replace(e.year(),""+-1*e.year()))},DateTime.toMoment=function(e){var i;return t.util.isEmpty(e)?null:(i=new t.DateTime({input_types:null}),i.parse(e))},DateTime}(t.Input)}).call(e,i(0))},function(t,e,i){(function(t){t.DateTimeFormats={},t.DateTimeFormats["de-DE"]={timezone:"Europe/Berlin",moment_locale:"de-DE",tab_date:"Datum",tab_time:"Zeit",tab_week:"Wo",formats:[{text:"Datum+Zeit",support_bc:!1,invalid:"Datum ungültig",type:"date_time",clock:!0,store:"YYYY-MM-DDTHH:mm:00Z",clock_seconds:!1,input:"DD.MM.YYYY HH:mm",display:"dd, DD.MM.YYYY HH:mm",display_short:"DD.MM.YYYY HH:mm",display_attribute:"date-time",display_short_attribute:"date-time-short",parse:["YYYY-MM-DDTHH:mm:ss.SSSZ","YYYY-MM-DDTHH:mm:ssZ","D.M.YYYY HH:mm:ss","DD.M.YYYY HH:mm:ss","D.MM.YYYY HH:mm:ss","D.MM.YY HH:mm:ss","DD.M.YY HH:mm:ss","D.M.YYYY HH:mm","DD.M.YYYY HH:mm","D.MM.YYYY HH:mm","D.MM.YY HH:mm","DD.M.YY HH:mm"]},{text:"Datum+Zeit+Sekunden",support_bc:!1,invalid:"Datum ungültig",type:"date_time_seconds",input:"DD.MM.YYYY HH:mm:ss",store:"YYYY-MM-DDTHH:mm:ssZ",display:"dd, DD.MM.YYYY HH:mm:ss",display_short:"DD.MM.YYYY HH:mm:ss",display_attribute:"date-time-seconds",display_short_attribute:"date-time-seconds-short",clock:!0,clock_seconds:!0,parse:["YYYY-MM-DDTHH:mm:ssZ","YYYY-MM-DD HH:mm:ss","D.M.YYYY HH:mm:ss","DD.M.YYYY HH:mm:ss","D.MM.YYYY HH:mm:ss","D.MM.YY HH:mm:ss","DD.M.YY HH:mm:ss"]},{text:"Datum",support_bc:!1,input:"DD.MM.YYYY",invalid:"Datum ungültig",display:"dd, DD.MM.YYYY",display_short:"DD.MM.YYYY",display_attribute:"date",display_short_attribute:"date-short",store:"YYYY-MM-DD",type:"date",clock:!1,parse:["D.M.YYYY","D.MM.YYYY","DD.M.YYYY","YYYYMMDD"]},{text:"Jahr-Monat",support_bc:!1,input:"MM.YYYY",invalid:"Datum ungültig",store:"YYYY-MM",display:"MMMM YYYY",display_short:"MM.YYYY",display_attribute:"year-month",display_short_attribute:"year-month-short",type:"year_month",clock:!1,parse:["MM YYYY","MM/YYYY"]},{text:"Jahr",support_bc:!0,input:"Y",invalid:"Datum ungültig",display:"Y",display_short:"Y",display_attribute:"year",display_short_attribute:"year",store:"YYYY",type:"year",clock:!1,parse:["Y"]}]},t.DateTimeFormats["it-IT"]={timezone:"Europe/Berlin",moment_locale:"de-DE",tab_date:"Datum",tab_time:"Zeit",tab_week:"Wk",formats:[{text:"Datum+Zeit",support_bc:!1,invalid:"Datum ungültig",type:"date_time",clock:!0,store:"YYYY-MM-DDTHH:mm:00Z",clock_seconds:!1,input:"DD.MM.YYYY HH:mm",display:"dd, DD.MM.YYYY HH:mm",display_short:"DD.MM.YYYY HH:mm",display_attribute:"date-time",display_short_attribute:"date-time-short",parse:["YYYY-MM-DDTHH:mm:ss.SSSZ","YYYY-MM-DDTHH:mm:ssZ","D.M.YYYY HH:mm:ss","DD.M.YYYY HH:mm:ss","D.MM.YYYY HH:mm:ss","D.MM.YY HH:mm:ss","DD.M.YY HH:mm:ss","D.M.YYYY HH:mm","DD.M.YYYY HH:mm","D.MM.YYYY HH:mm","D.MM.YY HH:mm","DD.M.YY HH:mm"]},{text:"Datum+Zeit+Sekunden",support_bc:!1,invalid:"Datum ungültig",type:"date_time_seconds",input:"DD.MM.YYYY HH:mm:ss",store:"YYYY-MM-DDTHH:mm:ssZ",display:"dd, DD.MM.YYYY HH:mm:ss",display_short:"DD.MM.YYYY HH:mm:ss",display_attribute:"date-time-seconds",display_short_attribute:"date-time-seconds-short",clock:!0,clock_seconds:!0,parse:["D.M.YYYY HH:mm:ss","DD.M.YYYY HH:mm:ss","D.MM.YYYY HH:mm:ss","D.MM.YY HH:mm:ss","DD.M.YY HH:mm:ss"]},{text:"Datum",support_bc:!1,input:"DD.MM.YYYY",invalid:"Datum ungültig",display:"dd, DD.MM.YYYY",display_short:"DD.MM.YYYY",display_attribute:"date",display_short_attribute:"date-short",store:"YYYY-MM-DD",type:"date",clock:!1,parse:["D.M.YYYY","D.MM.YYYY","DD.M.YYYY","YYYYMMDD"]},{text:"Jahr-Monat",support_bc:!1,input:"MM.YYYY",invalid:"Datum ungültig",store:"YYYY-MM",display:"MMMM YYYY",display_short:"MM.YYYY",display_attribute:"year-month",display_short_attribute:"year-month-short",type:"year_month",clock:!1,parse:["MM YYYY","MM/YYYY"]},{text:"Jahr",support_bc:!0,input:"Y",invalid:"Datum ungültig",display:"Y",display_short:"Y",display_attribute:"year",display_short_attribute:"year",store:"YYYY",type:"year",clock:!1,parse:["Y"]}]},t.DateTimeFormats["es-ES"]={timezone:"Europe/Berlin",moment_locale:"de-DE",tab_date:"Datum",tab_time:"Zeit",tab_week:"Wk",formats:[{text:"Datum+Zeit",support_bc:!1,invalid:"Datum ungültig",type:"date_time",clock:!0,store:"YYYY-MM-DDTHH:mm:00Z",clock_seconds:!1,input:"DD/MM/YYYY HH:mm",display:"dd, DD/MM/YYYY HH:mm",display_short:"DD/MM/YYYY HH:mm",display_attribute:"date-time",display_short_attribute:"date-time-short",parse:["YYYY-MM-DDTHH:mm:ss.SSSZ","YYYY-MM-DDTHH:mm:ssZ","D.M.YYYY HH:mm:ss","DD.M.YYYY HH:mm:ss","D.MM.YYYY HH:mm:ss","D.MM.YY HH:mm:ss","DD.M.YY HH:mm:ss","D.M.YYYY HH:mm","DD.M.YYYY HH:mm","D.MM.YYYY HH:mm","D.MM.YY HH:mm","DD.M.YY HH:mm"]},{text:"Datum+Zeit+Sekunden",support_bc:!1,invalid:"Datum ungültig",type:"date_time_seconds",input:"DD.MM.YYYY HH:mm:ss",store:"YYYY-MM-DDTHH:mm:ssZ",display:"dd, DD.MM.YYYY HH:mm:ss",display_short:"DD.MM.YYYY HH:mm:ss",display_attribute:"date-time-seconds",display_short_attribute:"date-time-seconds-short",clock:!0,clock_seconds:!0,parse:["D.M.YYYY HH:mm:ss","DD.M.YYYY HH:mm:ss","D.MM.YYYY HH:mm:ss","D.MM.YY HH:mm:ss","DD.M.YY HH:mm:ss"]},{text:"Datum",support_bc:!1,input:"DD.MM.YYYY",invalid:"Datum ungültig",display:"dd, DD.MM.YYYY",display_short:"DD.MM.YYYY",display_attribute:"date",display_short_attribute:"date-short",store:"YYYY-MM-DD",type:"date",clock:!1,parse:["D.M.YYYY","D.MM.YYYY","DD.M.YYYY","YYYYMMDD"]},{text:"Jahr-Monat",support_bc:!1,input:"MM.YYYY",invalid:"Datum ungültig",store:"YYYY-MM",display:"MMMM YYYY",display_short:"MM.YYYY",display_attribute:"year-month",display_short_attribute:"year-month-short",type:"year_month",clock:!1,parse:["MM YYYY","MM/YYYY"]},{text:"Jahr",support_bc:!0,input:"Y",invalid:"Datum ungültig",display:"Y",display_short:"Y",display_attribute:"year",display_short_attribute:"year",store:"YYYY",type:"year",clock:!1,parse:["Y"]}]},t.DateTimeFormats["en-US"]={timezone:"Europe/Berlin",moment_locale:"en-US",tab_date:"Date",tab_time:"Time",tab_week:"Wk",formats:[{text:"Date+Time",support_bc:!1,invalid:"Invalid Date",type:"date_time",clock:!0,store:"YYYY-MM-DDTHH:mm:00Z",clock_am_pm:!0,clock_seconds:!1,input:"MM/DD/YYYY hh:mm A",display:"dd, MM/DD/YYYY hh:mm A",display_short:"MM/DD/YYYY hh:mm A",display_attribute:"date-time",display_short_attribute:"date-time-short",parse:["YYYY-MM-DDTHH:mm:ss.SSSZ","YYYY-MM-DDTHH:mm:ssZ","D.M.YYYY HH:mm:ss","DD.M.YYYY HH:mm:ss","D.MM.YYYY HH:mm:ss","D.MM.YY HH:mm:ss","DD.M.YY HH:mm:ss","D.M.YYYY HH:mm","DD.M.YYYY HH:mm","D.MM.YYYY HH:mm","D.MM.YY HH:mm","DD.M.YY HH:mm"]},{text:"Date+Time+Seconds",support_bc:!1,invalid:"Invalid Date",type:"date_time_seconds",store:"YYYY-MM-DDTHH:mm:ssZ",input:"MM/DD/YYYY HH:mm:ss",display:"dd, MM/DD/YYYY HH:mm:ss",display_short:"MM/DD/YYYY HH:mm:ss",display_attribute:"date-time-seconds",display_short_attribute:"date-time-seconds-short",clock:!0,clock_am_pm:!0,clock_seconds:!0,parse:["D.M.YYYY HH:mm:ss","DD.M.YYYY HH:mm:ss","D.MM.YYYY HH:mm:ss","D.MM.YY HH:mm:ss","DD.M.YY HH:mm:ss"]},{text:"Date",support_bc:!1,input:"MM/DD/YYYY",invalid:"Invalid date",display:"dd, MM/DD/YYYY",display_short:"MM/DD/YYYY",display_attribute:"date",display_short_attribute:"date-short",store:"YYYY-MM-DD",type:"date",clock:!1,parse:["D.M.YYYY","D.MM.YYYY","DD.M.YYYY","YYYYMMDD"]},{text:"Jahr-Monat",support_bc:!1,input:"MM/YYYY",invalid:"Invalid date",store:"YYYY-MM",display:"MMMM YYYY",display_short:"MM/YYYY",display_attribute:"year-month",display_short_attribute:"year-month-short",type:"year_month",clock:!1,parse:["MM YYYY","MM/YYYY"]},{text:"Jahr",support_bc:!0,input:"Y",invalid:"Invalid date",display:"Y",display_short:"Y",display_attribute:"year",display_short_attribute:"year",store:"YYYY",type:"year",clock:!1,parse:["Y"]}]}}).call(e,i(0))},function(t,e,i){(function(t){var e,n=function(t,e){function ctor(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},o={}.hasOwnProperty;e=i(1),t.DateTimeInputBlock=function(i){function DateTimeInputBlock(){return DateTimeInputBlock.__super__.constructor.apply(this,arguments)}return n(DateTimeInputBlock,i),DateTimeInputBlock.prototype.initOpts=function(){return DateTimeInputBlock.__super__.initOpts.call(this),this.addOpts({matcher:{mandatory:!0,check:"PlainObject"},datetime:{mandatory:!0,check:String},input_format:{mandatory:!0,check:function(t){return!!t.input}}})},DateTimeInputBlock.prototype.incrementBlock=function(t,e){return this.__changeBlock(t,e,1)},DateTimeInputBlock.prototype.decrementBlock=function(t,e){return this.__changeBlock(t,e,-1)},DateTimeInputBlock.prototype.__changeBlock=function(i,n,o){var r,s,a,l;for(console.debug("change block",i,n,o,this._datetime,this._input_format.format),l=e(this._datetime,this._input_format.input),t.util.isFunction(this._matcher.inc_func)?this._matcher.inc_func(l,o):o<0?l.subtract(this._matcher.inc_func_amount||1,this._matcher.inc_func):l.add(this._matcher.inc_func_amount||1,this._matcher.inc_func),s=0,a=n.length;s<a;s++)r=n[s],r.setString(l.format(r._matcher.match_str));return i},DateTimeInputBlock}(t.InputBlock)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.DigiDisplay=function(i){function DigiDisplay(t){this.opts=null!=t?t:{},DigiDisplay.__super__.constructor.call(this,this.opts),this.__digitsMap=[],this.createMarkup(),this.registerDOMElement(this.__displayDiv)}return e(DigiDisplay,i),DigiDisplay.prototype.initOpts=function(){return DigiDisplay.__super__.initOpts.call(this),this.addOpts({digits:{mandatory:!0,check:Array}})},DigiDisplay.prototype.display=function(e){var i,n,o,r,s,a,l,u;for(u=e.split(""),r=a=0,l=u.length;a<l&&(n=u[r],r!==this._digits.length);r=++a)(s=this.__digitsMap[r])&&(i=s.map.hasOwnProperty(n)?s.map[n]:0,o=s.first_div,s.height||(s.height=t.dom.getDimensions(o).borderBoxHeight),t.dom.setStyleOne(o,"marginTop","-"+i*s.height+"px"),o.setAttribute("c",n),o.setAttribute("idx",i));return this},DigiDisplay.prototype.createMarkup=function(){var e,i,n,o,r,s,a,l,u,c,h,d,p,_;for(this.__displayDiv=t.dom.div("cui-digi-display"),_=this._digits,o=u=0,h=_.length;u<h;o=++u)if(n=_[o],n.static)t.dom.append(this.__displayDiv,i=t.dom.div("cui-digi-display-static cui-digi-display-"+o)),t.dom.addClass(t.dom.append(i,t.dom.text(n.static)),n.class),n.attr&&i.getAttribute(n.attr);else{for(n.__regexp=new RegExp(n.mask),t.dom.append(this.__displayDiv,i=t.dom.div("cui-digi-display-container cui-digi-display-"+o)),t.dom.addClass(i,n.class),n.attr&&i.getAttribute(n.attr),this.__digitsMap[o]={map:d={}},s=t.dom.div("cui-digi-display-digit"),s.innerHTML="&nbsp;",t.dom.append(i,s),this.__digitsMap[o].first_div=s,l=1,p=!1,a=c=32;c<=128;a=++c)n.__regexp.exec(e=String.fromCharCode(a))&&(32===a?(r=t.dom.div("cui-digi-display-digit"),r.innerHTML="&nbsp;",t.dom.append(i,r)):(r=t.dom.div("cui-digi-display-digit"),r.textContent=e,t.dom.append(i,r)),d[e]=l,l++,p=!0);t.util.assert(p,"DigiDisplay.createMarkup","Digit "+o+" not matched against the regexp. ASCII range 32-128 is allowed.",{digit:n})}return this.__displayDiv},DigiDisplay}(t.DOMElement)}).call(e,i(0))},function(t,e,i){(function(t){var e,n=function(t,e){function ctor(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},o={}.hasOwnProperty;e=i(2),t.DocumentBrowser=function(i){function DocumentBrowser(){return DocumentBrowser.__super__.constructor.apply(this,arguments)}return n(DocumentBrowser,i),DocumentBrowser.prototype.initOpts=function(){return DocumentBrowser.__super__.initOpts.call(this),this.addOpts({gotoLocation:{check:Function,default:function(t){return function(e,i,n){return t.loadLocation(e,i,n)}}(this)},marked_opts:{default:{},mandatory:!0,check:function(e){var i;if(!t.util.isPlainObject(e))return!1;for(i in e)if(e[i],"image"===i||"link"===i)return!1;return!0}},getMarkdown:{default:function(t){return t},check:Function},renderHref:{check:Function,default:function(t){return function(t,e){return t}}()},url:{check:function(e){return!!t.parseLocation(e)}}})},DocumentBrowser.prototype.readOpts=function(){var i,n,o,r;DocumentBrowser.__super__.readOpts.call(this,this.opts),this.__marked_opts=t.util.copyObject(this._marked_opts),this.__marked_opts.renderer||(this.__marked_opts.renderer=new e.Renderer),o=this.__marked_opts.renderer,n={sanitize:!1};for(i in n)r=n[i],this.__marked_opts.hasOwnProperty(i)||(this.__marked_opts[i]=r);return o.image=function(t){return function(e,i,n){return t.__node.rendererImage(e,i,n)}}(this),o.link=function(t){return function(e,i,n){return t.__node.rendererLink(e,i,n)}}(this),this.__words={}},DocumentBrowser.prototype.renderHref=function(t,e){return this._renderHref(t,e)},DocumentBrowser.prototype.marked=function(i,n){var o,r,s;return this.__node=i,o=new t.Deferred,r=function(t){return function(i){return o.resolve(e(i,t.__marked_opts))}}(this),s=this._getMarkdown(n),t.util.isPromise(s)?s.done(function(t){return function(t){return r(t)}}()).fail(o.reject):r(s),o.promise()},DocumentBrowser.prototype.loadLocation=function(t,e,i){if(!t){if(!this.__tree.root.children.length)return;return this.loadLocation(this.__tree.root.children[0].getNodePath())}return this.__tree.root.selectLocation(t).done(function(t){return function(n){var o;return o=parseInt(i),n.isSelected()||n.select({search:e,nodeIdx:o}),t.loadContent(n,e,o)}}(this)).fail(function(t){return function(){return t.loadEmpty()}}(this))},DocumentBrowser.prototype.loadEmpty=function(){return this.__layout.replace(new t.EmptyLabel({text:"No article available."}),"center")},DocumentBrowser.prototype.loadContent=function(e,i,n){return e.loadContent().done(function(o){return function(r,s,a){var l,u,c,h,d,p,_,f,m,g;if(!i)return void o.__layout.replace(s,"center");for(p=null,_=new t.DocumentBrowser.SearchQuery({search:i}),d=t.dom.htmlToNodes(o.marked(e,r)),f=[],m=0,t.dom.findTextInNodes(d,function(t,e){var i;if(m+=1,i=_.match(e))return console.debug("matches",_,e),i.__mark_all=n===m-1,i.__node=t,f.push(i)}),console.debug("text matches",f),c=0,h=f.length;c<h;c++)g=f[c],u=g.getHighlighted(),g.__mark_all&&(u="<span class='cui-document-browser-marked-node'>"+u+"</span>"),l=t.dom.replaceWith(g.__node,t.dom.htmlToNodes(u)),g.__mark_all&&(p=l);return o.__layout.replace(d,"center"),o.__layout.prepend(e.getMainArticleUrl(),"center"),p?t.dom.scrollIntoView(p):o.__layout.center().scrollTop=0}}(this)).fail(function(t){return function(){return t.loadEmpty()}}(this))},DocumentBrowser.prototype.getRootNode=function(){return this.__tree.root},DocumentBrowser.prototype.__doSearch=function(e){var i,n,o,r;if(this.__searchResult.empty("center"),e.trim().length>2){for(r=this.__tree.root.findContent(new t.DocumentBrowser.SearchQuery({search:e})),i=0,n=r.length;i<n;i++)o=r[i],this.__searchResult.append(o.render(),"center");return 0===r.length&&this.__searchResult.append(new t.Label({markdown:!0,text:"Nothing found for **"+e+"**.",multiline:!0}),"center"),this.showSearch(!0)}return r=[],this.showSearch(!1)},DocumentBrowser.prototype.addWords=function(t){},DocumentBrowser.prototype.showSearch=function(e){return e?(this.__resetBtn.show(),this.__searchBtn.hide(),t.dom.remove(this.__tree.DOM),this.__leftLayout.replace(this.__searchResult,"content")):(this.__resetBtn.hide(),this.__searchBtn.show(),t.dom.remove(this.__searchResult.DOM),this.__leftLayout.replace(this.__tree.DOM,"content"))},DocumentBrowser.prototype.render=function(){var e,i,n;return e={search:""},i=function(t){return function(){return t.__doSearch(e.search)}}(this),n=new t.Input({data:e,name:"search",onDataChanged:function(e){return function(){return t.scheduleCallback({ms:200,call:i})}}()}),this.__searchResult=new t.VerticalList,this.__tree=new t.ListViewTree({cols:["maximize"],selectable:!0,onSelect:function(t){return function(e,i){return(null!=e?e.search:void 0)?t._gotoLocation(i.node.getNodePath(),e.search,e.nodeIdx):t._gotoLocation(i.node.getNodePath())}}(this),onDeselect:function(t){return function(t,e){}}(),root:new t.DocumentBrowser.RootNode({browser:this,url:this._url})}),this.__leftLayout=new t.SimplePane({header_center:n.start(),header_right:[this.__searchBtn=new t.Button({icon:"search",onClick:function(t){return function(){return t.showSearch(!0)}}(this)}),this.__resetBtn=new t.Button({icon:"remove",hidden:!0,onClick:function(t){return function(){return t.showSearch(!1)}}(this)})],content:this.__tree.render()}),this.__layout=new t.HorizontalLayout({class:"cui-document-browser",maximize:!0,left:{class:"cui-document-browser-list",content:this.__leftLayout,flexHandle:{hidden:!1}},center:{class:"cui-document-browser-center",content:t.dom.text(this._url)}}),this.__layout},DocumentBrowser.prototype.load=function(){return this.__tree.root.open().done(function(e){return function(){var i,n,o;e.__all_words=[],n=e.__words;for(o in n)i=n[o],e.__all_words.push({word:o,count:i,sorted:o.toLocaleLowerCase().split("").sort(function(e,i){return t.util.compareIndex(e,i)}).join("")});return e.__all_words.sort(function(t,e){return e.count-t.count}),console.debug("words",e.__words,e.__all_words)}}(this))},DocumentBrowser}(t.Element)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty,n=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1};t.DocumentBrowser.Node=function(i){function Node(){return Node.__super__.constructor.apply(this,arguments)}return e(Node,i),Node.prototype.readOpts=function(){if(Node.__super__.readOpts.call(this),this.__url=this._url,this.__url.endsWith("/"))return this.__url=this.__url.substr(0,this.__url.length-1)},Node.prototype.initOpts=function(){return Node.__super__.initOpts.call(this),this.addOpts({browser:{mandatory:!0,check:t.DocumentBrowser},url:{check:function(e){return!!t.parseLocation(e)}},path:{default:[],check:Array},title:{check:String}})},Node.prototype.getChildren=function(){return this.opts.leaf?[]:this.children?new t.resolvedPromise(this.children):this.__loadChildren()},Node.prototype.__loadChildren=function(e){var i,n;return null==e&&(e=!0),this.loadContent(),e=!0,i=new t.Deferred,n=new t.XHR({url:this.__url+this.getNodePath("menu.cms"),responseType:"text"}),n.start().done(function(n){return function(o){var r,s,a,l,u,c,h,d,p,_,f,m,g,y,v,b;if(o.startsWith("<"))return n.opts.leaf=!0,void i.resolve([]);for(s=[],d=[],y=o.split("\n"),l=0,_=y.length;l<_;l++)v=y[l],(m=v.match(/^\s*(\S+?)(|=(\S+))\s*$/))&&(c=m[1].split(":"),b=m[3]?m[3]:c[0],g=n._path.slice(0),g.push(c[0]),d.push({title:b,path:g}));if(0===d.length)return n.opts.leaf=!0,void i.resolve([]);for(a=0,u=p=0,f=d.length;p<f;u=++p)h=d[u],r=new t.DocumentBrowser.Node({browser:n._browser,url:n.__url,title:h.title,path:h.path}),s.push(r),e&&r.__loadChildren(!1).always(function(){if((a+=1)===d.length)return n.children=s,i.resolve(s)});e||i.resolve(s)}}(this)).fail(function(t){return function(){return t.opts.leaf=!0,i.resolve([])}}(this)),i.promise()},Node.prototype.getMainArticleUrl=function(){return this.__url+this.getNodePath(this.getLastPathElement()+".md")},Node.prototype.loadIncludes=function(e,i,o){var r,s,a;return null==o&&(o=[]),r=new t.Deferred,a=o.slice(0),s=function(l){return function(){var u,c,h;if(!(u=e.match(/@@include\(\s*(.*?)\s*\)/)))return void r.resolve(e);h=l.absoluteUrl(i,u[1]),c=function(t){var i;return i=[e.substr(0,u.index),e.substr(u.index+u[0].length)],i.splice(1,0,t),e=i.join(""),s()},n.call(o,h)>=0?c("**(Recursion: "+u[1]+")**"):(a.push(h),new t.XHR({url:l.__url+h,responseType:"text"}).start().done(function(t){var e;return e=h.split("/"),e.pop(),l.loadIncludes(t,e.join("/"),a).done(function(t){return c(t)})}).fail(function(){return c("**(Error: "+u[1]+")**")}))}}(this),s(),r.promise()},Node.prototype.loadContent=function(){var e;return this.__content&&new t.resolvedPromise(this.__content,this.__htmlNodes,this.__texts),e=new t.Deferred,new t.XHR({url:this.getMainArticleUrl(),responseType:"text"}).start().done(function(i){return function(n){return i.__content=n,i.__content.startsWith("<")?void e.reject():i.loadIncludes(i.__content,i.getNodePath()).fail(e.reject).done(function(n){return i._browser.marked(i,n).done(function(n){return i.__htmlNodes=t.dom.htmlToNodes(n),i.__texts=t.dom.findTextInNodes(i.__htmlNodes),i._browser.addWords(i.__texts),e.resolve(i.__content,i.__htmlNodes,i.__texts)})}).fail(e.reject)}}(this)).fail(e.reject),e.promise()},Node.prototype.findContent=function(e,i){var n,o,r,s,a,l,u,c,h,d,p,_,f,m,g,y;if(null==i&&(i=[]),t.util.assert(e instanceof t.DocumentBrowser.SearchQuery,"DocumentBrowserNode.findContent","searchQuery needs to be instance of CUI.DocumentBrowser.SearchQuery.",{searchQuery:e}),d=e.getRegExps(),r=function(){_=[];for(var t=0,e=d.length-1;0<=e?t<=e:t>=e;0<=e?t++:t--)_.push(t);return _}.apply(this),p=function(e){return function(e){var i,n,o,s;if(0!==r.length)for(s=e.getMatches(),n=0,o=s.length;n<o;n++)if(i=s[n],t.util.removeFromArray(i.regExp_idx,r),0===r.length)return}}(),y=e.match(this._title),y&&p(y),g=[],this.__texts)for(c=this.__texts,o=s=0,l=c.length;s<l;o=++s)f=c[o],(m=e.match(f))&&(m.nodeIdx=o,g.push(m),p(m));if(0===r.length&&i.push(new t.DocumentBrowser.NodeMatch({node:this,searchQuery:e,title_match:y,text_matches:g})),this.children)for(h=this.children,a=0,u=h.length;a<u;a++)n=h[a],n.findContent(e,i);return i},Node.prototype.getBrowser=function(){return this._browser},Node.prototype.selectLocation=function(e,i){var n;return null==i&&(i=new t.Deferred),e===this.getNodePath()?void i.resolve(this):(n=function(t){return function(){var n,o,r,s;for(t.opts.leaf&&i.fail(t),s=t.children,o=0,r=s.length;o<r;o++)if(n=s[o],e.startsWith(n.getNodePath()+"/")||e===n.getNodePath())return void n.selectLocation(e,i);return console.error("Unable to find:",e,"in",t.getNodePath()),i.fail()}}(this),this.children?n():this.open().always(function(t){return function(){return n()}}()),i)},Node.prototype.getLastPathElement=function(){return this._path[this._path.length-1]},Node.prototype.getNodePath=function(t){var e;return e="/"+this._path.join("/"),t?"/"===e?e+t:e+"/"+t:e},Node.prototype.getTitlePath=function(){var t,e,i,n,o;for(o=[],n=this.getPath(!0),t=0,e=n.length;t<e;t++)i=n[t],i.isRoot()||o.push(i.getTitle());return o},Node.prototype.getTitle=function(){return this._title},Node.prototype.absoluteUrl=function(t,e){var i,n,o,r,s;for(s=t.split("/"),r=e.split("/"),i=0,n=r.length;i<n;i++)"."!==(o=r[i])&&(".."===o?s.pop():s.push(o));return s.join("/")},Node.prototype.rendererLink=function(e,i,n){return i=e,"<a href='"+(e=this._browser.renderHref(e,this.getNodePath()))+"' title='"+t.escapeAttribute(i)+"'>"+n+"</a>"},Node.prototype.rendererImage=function(e,i,n){var o;return o=e.startsWith("http:")||e.startsWith("//")?null:e.startsWith("/")?this.__url:this.__url+this.getNodePath(),"<img src='"+(null!==o?this.absoluteUrl(o,e):e)+"' alt='"+t.escapeAttribute(n)+"' title='"+t.escapeAttribute(i)+"'></img>"},Node.prototype.renderContent=function(){return new t.Label({text:this._title,multiline:!0})},Node}(t.ListViewTreeNode),t.DocumentBrowser.RootNode=function(t){function RootNode(){return RootNode.__super__.constructor.apply(this,arguments)}return e(RootNode,t),RootNode}(t.DocumentBrowser.Node)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.DocumentBrowser.NodeMatch=function(i){function NodeMatch(){return NodeMatch.__super__.constructor.apply(this,arguments)}return e(NodeMatch,i),NodeMatch.prototype.initOpts=function(){return NodeMatch.__super__.initOpts.call(this),this.addOpts({title_match:{check:t.DocumentBrowser.SearchMatch},text_matches:{check:function(e){var i,n;for(i=0,n=e.length;i<n;i++)if(!(e[i]instanceof t.DocumentBrowser.SearchMatch))return!1;return!0}},searchQuery:{check:t.DocumentBrowser.SearchQuery},node:{check:t.DocumentBrowser.Node}})},NodeMatch.prototype.marked=function(t){return this._node.getBrowser().marked(this._node,t)},NodeMatch.prototype.render=function(){var e,i,n,o,r,s,a,l,u,c,h,d,p,_,f;for(_=[],h=this._node.getTitlePath(),o=0,a=h.length;o<a;o++)c=h[o],_.push(t.util.toHtml(c));if(this._title_match&&(_[_.length-1]=this._title_match.getHighlighted()),s=new t.Label({class:"cui-document-browser-search-match--title",multiline:!0,content:t.dom.htmlToNodes(_.join("<span class='cui-document-browser-node-match-hierarchy'>"+new t.Icon({icon:"right"}).DOM.outerHTML+"</span>"))}),t.dom.setAttribute(s.DOM,"tabindex",0),t.Events.listen({type:"focus",node:s,call:function(t){return function(e){t._node.select({search:t._searchQuery.getSearch()})}}(this)}),e=[s],this._text_matches)for(f=t.dom.element("UL"),e.push(f),d=this._text_matches,i=function(e){return function(i){return t.Events.listen({type:"focus",node:u,call:function(t){e._node.select({search:e._searchQuery.getSearch(),nodeIdx:i.nodeIdx})}})}}(this),r=0,l=d.length;r<l;r++)p=d[r],n=p.getHighlighted(!0),u=t.dom.element("LI",{title:p.getString(),tabindex:0}),i(p),t.dom.append(u,t.dom.htmlToNodes(n)),f.appendChild(u);return e},NodeMatch}(t.Element)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.DocumentBrowser.SearchMatch=function(i){function SearchMatch(){return SearchMatch.__super__.constructor.apply(this,arguments)}return e(SearchMatch,i),SearchMatch.prototype.initOpts=function(){return SearchMatch.__super__.initOpts.call(this),this.addOpts({searchQuery:{mandatory:!0,check:t.DocumentBrowser.SearchQuery},string:{mandator:!0,check:String}})},SearchMatch.prototype.readOpts=function(){return SearchMatch.__super__.readOpts.call(this),this.__matches=[]},SearchMatch.prototype.addMatch=function(t){return this.__matches.push(t)},SearchMatch.prototype.getMatches=function(){return this.__matches},SearchMatch.prototype.getString=function(){return this._string},SearchMatch.prototype.getHighlighted=function(e){var i,n,o,r,s,a,l,u,c,h,d,p,_,f,m,g,y;for(null==e&&(e=!1),g=this._string,i=function(t){return function(t){return void 0===t?null:t.join(".")}}(),f=function(t){return function(t){var e;return e=t.split(/\s+/),e.length>6&&e.splice(3,e.length-6,"..."),e.join(" ")}}(),r=[],r.length=g.length,d=this.__matches,h=s=0,u=d.length;s<u;h=++s)for(c=d[h],a=l=p=c.index,_=c.index+c[0].length;p<=_?l<_:l>_;a=p<=_?++l:--l)r[a]||(r[a]=[]),r[a].push(c.regExp_idx);for(m=[],a=0;a<r.length;){for(o=i(r[a-1]),n=i(r[a]),o&&n!==o&&m.push("</span>"),n&&n!==o&&m.push('<span class="cui-document-browser-search-match-mark cui-search-match--'+r[a].join(" cui-search-match--")+'">'),y=[];;)if(y.push(g[a]),(a+=1)===r.length||r[a]||n)break;m.push(t.util.toHtml(f(y.join(""))))}return n&&m.push("</span>"),m.join("")},SearchMatch}(t.Element)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.DocumentBrowser.SearchQuery=function(i){function SearchQuery(){return SearchQuery.__super__.constructor.apply(this,arguments)}return e(SearchQuery,i),SearchQuery.prototype.initOpts=function(){return SearchQuery.__super__.initOpts.call(this),this.addOpts({search:{mandatory:!0,check:String}})},SearchQuery.prototype.readOpts=function(){var t,e,i,n;for(SearchQuery.__super__.readOpts.call(this),this.__regExpe=[],i=this._search.trim().split(/\s+/),t=0,e=i.length;t<e;t++)n=i[t],""!==n.trim()&&this.__regExpe.push(new RegExp(RegExp.escape(n),"ig"))},SearchQuery.prototype.getRegExps=function(){return this.__regExpe},SearchQuery.prototype.getSearch=function(){return this._search},SearchQuery.prototype.match=function(e,i){var n,o,r,s,a,l,u,c,h,d;if(d=null,t.util.isEmpty(e))return d;for(c=this.__regExpe,o=n=0,s=c.length;n<s;o=++n){for(h=c[o],u=[];null!==(l=h.exec(e));)u.push(l);if(u.length>0)for(d||(d=new t.DocumentBrowser.SearchMatch({searchQuery:this,string:e})),r=0,a=u.length;r<a;r++)l=u[r],l.regExp_idx=o,d.addMatch(l)}return d},SearchQuery}(t.Element)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.FileReader=function(i){function FileReader(){return FileReader.__super__.constructor.apply(this,arguments)}return e(FileReader,i),FileReader.prototype.initOpts=function(){return FileReader.__super__.initOpts.call(this),this.removeOpt("url")},FileReader.prototype.readOpts=function(){return t.Element.prototype.readOpts.call(this)},FileReader.prototype.getUploadFileClass=function(){return t.FileReaderFile},FileReader.prototype.uploadFile=function(t){return t.upload(t)},FileReader.save=function(t,e,i){var n,o;return null==i&&(i="text/csv"),n=new Blob([e],{type:i}),window.navigator.msSaveOrOpenBlob?window.navigator.msSaveBlob(n,t):(o=window.document.createElement("a"),o.href=window.URL.createObjectURL(n),o.download=t,document.body.appendChild(o),o.click(),document.body.removeChild(o)),window.URL.revokeObjectURL(n)},FileReader}(t.FileUpload)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.FileReaderFile=function(t){function FileReaderFile(){return FileReaderFile.__super__.constructor.apply(this,arguments)}return e(FileReaderFile,t),FileReaderFile.prototype.initOpts=function(){return FileReaderFile.__super__.initOpts.call(this),this.addOpts({format:{mandatory:!0,default:"Text",check:["ArrayBuffer","Text"]}})},FileReaderFile.prototype.upload=function(t){var e,i,n,o,r;for(this.__reader=new FileReader,r=["loadStart","progress","abort","error","load","loadend"],e=function(t){return function(e){return t.__reader.addEventListener(e.toLowerCase(),function(i){return t["__event_"+e](i)})}}(this),i=0,o=r.length;i<o;i++)n=r[i],e(n);switch(this._format){case"Text":this.__reader.readAsText(this._file);break;case"ArrayBuffer":this.__reader.readAsArrayBuffer(this._file)}},FileReaderFile.prototype.getResult=function(){return this.__reader.result},FileReaderFile.prototype.__event_loadStart=function(){this.__progress.status="STARTED",this.__progress.percent=0,this.__dfr.notify(this)},FileReaderFile.prototype.__event_progress=function(t){var e,i,n;n=t.total,e=t.loaded,i=t.lengthComputable?Math.floor(t.loaded/t.total*100):-1,this.__progress.status=e===n?"COMPLETED":"PROGRESS",this.__progress.loaded=e,this.__progress.total=n,this.__progress.percent=i,this.__dfr.notify(this)},FileReaderFile.prototype.__event_abort=function(){},FileReaderFile.prototype.__event_error=function(){},FileReaderFile.prototype.__event_load=function(){},FileReaderFile.prototype.__event_loadend=function(){return this.__progress.data=this.__reader.result,this.__progress.status="DONE",this.__upload=null,this.__dfr.resolve(this)},FileReaderFile.prototype.abort=function(){return this.__reader.abort()},FileReaderFile}(t.FileUploadFile)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty,n=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1};t.FileUpload=function(i){function FileUpload(t){this.opts=null!=t?t:{},FileUpload.__super__.constructor.call(this,this.opts),this.__files=[],this.__dropZones=[],this.__batch_id=0,this.__batches_done=0}return e(FileUpload,i),FileUpload.prototype.initOpts=function(){return FileUpload.__super__.initOpts.call(this),this.addOpts({url:{mandatory:!0,check:String},name:{default:t.defaults.FileUpload.name,check:String},add_filename_to_url:{default:!1,mandatory:!0,check:Boolean},parallel:{default:2,check:function(t){return t>=1}},onAdd:{check:Function},onBatchStart:{check:Function},onBatchQueued:{check:Function},onBatchDone:{check:Function},onProgress:{check:Function},onDone:{check:Function},onUpdate:{check:Function},onDequeue:{check:Function},onRemove:{check:Function},onFail:{check:Function},onAlways:{check:Function},onBeforeDone:{check:Function}})},FileUpload.prototype.readOpts=function(){return FileUpload.__super__.readOpts.call(this),this.setUrl(this._url)},FileUpload.prototype.setUrl=function(t){return this.__url=t,this.__url},FileUpload.prototype.getUrl=function(){return this.__url},FileUpload.prototype.getFiles=function(e){var i,o,r,s,a,l;for(t.util.isString(e)&&(e=[e]),o=[],a=this.__files,r=0,s=a.length;r<s;r++)i=a[r],(!e||(l=i.getStatus(),n.call(e,l)>=0))&&o.push(i);return o},FileUpload.prototype.getInfo=function(){var t,e,i,n,o,r,s,a,l,u,c,h;for(c={},h=0,a=0,n=0,o=0,i=!0,l=this.getFiles(),r=0,s=l.length;r<s;r++)t=l[r],e=t.getProgress(),u=e.status,c[u]?c[u]++:c[u]=1,t.isDone()?o+=1:i=!1,h+=e.total,a+=e.loaded,n+=1;return{status:c,total:h,count:n,done:o,loaded:a,percent:Math.floor(a/h*100),all_done:i}},FileUpload.prototype.getUploadFileClass=function(){return t.FileUploadFile},FileUpload.prototype.queueFiles=function(e){var i,n,o,r,s,a;return i=++this.__batch_id,s=!1,n=function(t){return function(){return"function"==typeof t._onBatchQueued&&t._onBatchQueued(),t.uploadNextFiles(),s=!1}}(this),o=-1,a=function(r){return function(){var a,l,u,c,h;return s=!0,++o===e.length?void n():(c=e[o],a=r.getUploadFileClass(),u=new a({file:c,fileUpload:r,batch:i,onBeforeDone:r._onBeforeDone,onDequeue:function(t){return"function"==typeof r._onDequeue&&r._onDequeue(t),"function"==typeof r._onUpdate?r._onUpdate(t):void 0},onRemove:function(t){return"function"==typeof r._onRemove?r._onRemove(t):void 0}}),u.getPromise().progress(function(){return"function"==typeof r._onProgress&&r._onProgress(u),"function"==typeof r._onUpdate?r._onUpdate(u):void 0}).done(function(){return"function"==typeof r._onDone&&r._onDone(u),"function"==typeof r._onUpdate&&r._onUpdate(u),r.uploadNextFiles()}).fail(function(){return"function"==typeof r._onFail&&r._onFail(u),"function"==typeof r._onUpdate&&r._onUpdate(u),r.uploadNextFiles()}).always(function(){return"function"==typeof r._onAlways&&r._onAlways(u),r.checkBatchDone(u)}),l=function(){console.debug("FileUpload.onAdd: Skipping file, function returned 'false'."),s=!1},h=function(){r.__files.push(u),"function"==typeof r._onUpdate&&r._onUpdate(u),u.queue(),s=!1},r.__isQueueing=!0,t.decide("function"==typeof r._onAdd?r._onAdd(u,o,e.length):void 0).done(function(){return h()}).fail(function(){return l()}).always(function(){return r.__isQueueing=!1}))}}(this),"function"==typeof this._onBatchStart&&this._onBatchStart(),this.__queuing=new t.Deferred,r=window.setInterval(function(t){return function(){var i;if(!s)return t.__stop||t.__abort?(window.clearInterval(r),i=t.__queuing,delete t.__queuing,void(t.__stop?(delete t.__stop,n(),i.resolve()):(delete t.__abort,i.reject()))):o<e.length?a():(window.clearInterval(r),t.__queuing.resolve(),delete t.__queuing)}}(this),1),this},FileUpload.prototype.isQueuing=function(){return!!this.__queuing},FileUpload.prototype.stopQueuing=function(e){var i;return null==e&&(e=!1),i=new t.Deferred,this.__queuing?(e?this.__abort=!0:this.__stop=!0,this.__queuing.always(i.resolve)):i.resolve(),i.promise()},FileUpload.prototype.clear=function(){return this.stopQueuing(!0).done(function(t){return function(){var e,i;for(i=[];e=t.__files[0];)i.push(e.remove());return i}}(this))},FileUpload.prototype.removeFile=function(e){return t.util.removeFromArray(e,this.__files)},FileUpload.prototype.isDone=function(){var t,e,i,n;if(this.__isQueueing)return!1;for(n=this.__files,e=0,i=n.length;e<i;e++)if(t=n[e],!t.isDone())return!1;return!0},FileUpload.prototype.isUploading=function(){var t,e,i,n;for(n=this.__files,e=0,i=n.length;e<i;e++)if(t=n[e],t.isUploading())return!0;return!1},FileUpload.prototype.uploadNextFiles=function(){var t,e,i,n,o,r,s,a,l;for(i=[],l=this._parallel,a=this.__files,n=0,r=a.length;n<r&&(t=a[n],"QUEUED"===t.getStatus()&&(i.push(t),l--),t.isUploading()&&l--,0!==l);n++);for(o=0,s=i.length;o<s;o++)e=i[o],this.uploadFile(e);return this},FileUpload.prototype.uploadFile=function(t){return this._add_filename_to_url?t.upload(this.getUrl()+t.getName(),this._name):t.upload(this.getUrl(),this._name)},FileUpload.prototype.checkBatchDone=function(t){var e,i,n,o,r;for(e=!1,r=this.__files,n=0,o=r.length;n<o;n++)if(i=r[n],i.getBatch()===t.getBatch()){if(!i.isDone())return;e=!0}e&&"function"==typeof this._onBatchDone&&this._onBatchDone()},FileUpload.prototype.initDropZone=function(e){var i,n,o,r,s,a,l;for(null==e&&(e={}),s=t.Element.readOpts(e,"FileUpload.initDropZone",{dropZone:{mandatory:!0,check:function(e){return t.util.isElement(e)||t.util.isElement(e.DOM)}},multiple:{mandatory:!0,default:!0,check:Boolean},selector:{check:String},allow_drop:function(t){return function(t){return{check:Function}}}()}),i=s.dropZone.DOM||s.dropZone,l=s.selector,r=s.multiple,t.Events.ignore({node:i,instance:this}),i.classList.add("cui-file-upload-drop-zone"),t.Events.listen({node:i,type:["dragover"],instance:this,selector:l,call:function(e){return function(e){return s.allow_drop&&!s.allow_drop(e)?e.stop():(t.FileUpload.setDropClassByEvent(e),e.stopPropagation(),e.preventDefault(),!1)}}()}),t.Events.listen({node:i,type:"drop",instance:this,selector:l,call:function(e){return function(i){var n,o,a,l,u,c,h,d;if(s.allow_drop&&!s.allow_drop(i))return i.stop();if(t.FileUpload.setDropClassByEvent(i),n=i.getNativeEvent().dataTransfer,(null!=(c=n.files)?c.length:void 0)>0){for(d=[],a=[],h=n.files,l=0,u=h.length;l<u&&(o=h[l],a.push(o),!1!==r);l++);d.length>0&&console.warn("Files empty or directories, not uploaded...",d),a.length>0&&e.queueFiles(a)}return i.stopPropagation(),i.preventDefault(),!1}}(this)}),a=this.__dropZones,n=0,o=a.length;n<o;n++)if(a[n]===i)return this;return this.__dropZones.push(i),this},FileUpload.setDropClassByEvent=function(e){var i,n;switch(i=e.getCurrentTarget(),e.getType()){case"dragover":t.clearTimeout(this.__dropElementTimeout),null!=(n=this.__dropElement)&&n.classList.remove("cui-file-upload-drag-over"),i.classList.add("cui-file-upload-drag-over"),this.__dropElement=i,this.__dropElementTimeout=t.setTimeout({ms:500,call:function(t){return function(){return i.classList.remove("cui-file-upload-drag-over"),delete t.__dropElement}}(this)}),e.getNativeEvent().dataTransfer.dropEffect="copy";break;case"drop":i.classList.remove("cui-file-upload-drag-over")}return this},FileUpload.prototype.initFilePicker=function(e){var i,n,o,r,s,a;for(o=e.fileUpload,a=["webkitdirectory","mozdirectory","directory"],n=0,s=a.length;n<s;n++)r=a[n],e.directory?t.dom.setAttribute(o,r,!0):t.dom.removeAttribute(o,r);return e.multiple?t.dom.setAttribute(o,"multiple",!0):t.dom.removeAttribute(o,"multiple"),i=new t.Deferred,t.Events.ignore({node:o}),t.Events.listen({type:"change",node:o,call:function(t){return function(){var e,n;n=function(){var t,i,n,r;for(n=o.files,r=[],t=0,i=n.length;t<i;t++)e=n[t],r.push(e);return r}(),t.queueFiles(n),o.form.reset(),i.resolve()}}(this)}),i.promise()},FileUpload.prototype.resetDropZones=function(){var e,i,n,o;for(t.Events.ignore({instance:this}),o=this.__dropZones,i=0,n=o.length;i<n;i++)e=o[i],t.dom.removeClass(e,"cui-file-upload-drop-zone");return this.__dropZones=[],this},FileUpload.prototype.destroy=function(){return this.resetDropZones(),FileUpload.__super__.destroy.call(this),this},FileUpload}(t.Element)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function ctor(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},o={}.hasOwnProperty;t.Template.loadTemplateText(i(179)),t.FileUploadButton=function(i){function FileUploadButton(t){this.opts=null!=t?t:{},this.__onClick=e(this.__onClick,this),FileUploadButton.__super__.constructor.call(this,this.opts),this.addClass("cui-button"),this._drop&&this._fileUpload.initDropZone({dropZone:this.DOM})}return n(FileUploadButton,i),FileUploadButton.prototype.initOpts=function(){return FileUploadButton.__super__.initOpts.call(this),this.addOpts({fileUpload:{mandatory:!0,check:t.FileUpload},multiple:{default:!0,check:Boolean},directory:{check:Boolean},drop:{check:Boolean}})},FileUploadButton.prototype.getTemplateName=function(){return this.__has_left=!0,this.__has_right=!0,t.__ng__?"file-upload-button-ng":"file-upload-button"},FileUploadButton.prototype.readOpts=function(){return this.__ownClick=this.opts.onClick,this.opts.onClick=this.__onClick,FileUploadButton.__super__.readOpts.call(this)},FileUploadButton.prototype.__onClick=function(t,e){var i,n;null!=(i=this.__ownClick)&&i.call(this,t,e),t.isDefaultPrevented()||t.isImmediatePropagationStopped()||(n=document.getElementById("cui-file-upload-button"),n.form.reset(),this._fileUpload.initFilePicker({directory:t.altKey()||t.shiftKey()&&this._multiple||this._directory,multiple:this._multiple,fileUpload:n}))},FileUploadButton}(t.Button),t.ready(function(e){return function(){return t.dom.append(document.body,t.dom.htmlToNodes('\x3c!-- CUI.FileUploadButton --\x3e<form style="display:none;"><input type="file" id="cui-file-upload-button"></input></form>\x3c!-- /CUI.FileUploadButton --\x3e'))}}())}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.FileUploadFile=function(i){function FileUploadFile(e){this.opts=null!=e?e:{},FileUploadFile.__super__.constructor.call(this,this.opts),this.__progress={status:"CREATED",total:this._file.size,loaded:0,percent:null},this.__dfr=new t.Deferred,this.__promise=this.__dfr.promise()}return e(FileUploadFile,i),FileUploadFile.prototype.initOpts=function(){return FileUploadFile.__super__.initOpts.call(this),this.addOpts({file:{mandatory:!0,check:function(t){return"object"==typeof t}},fileUpload:{mandatory:!0,check:t.FileUpload},batch:{check:function(t){return t>=0}},onRemove:{check:Function},onDequeue:{check:Function},onBeforeDone:{check:Function}})},FileUploadFile.prototype.queue=function(){return this.__progress.status="QUEUED",this.__dfr.notify(this),this},FileUploadFile.prototype.getImage=function(){var e,i;return this.__imgDiv?this.__imgDiv:(i=t.dom.img()[0],i.src=window.URL.createObjectURL(this._file),i.onload=function(t){return function(e){return i.width<i.height&&(t.__imgDiv.removeClass("landscape"),t.__imgDiv.addClass("portrait")),window.URL.revokeObjectURL(i.src)}}(this),e=t.dom.div("cui-file-upload-file-img"),t.dom.addClass(e,"landscape"),this.__imgDiv=t.dom.append(e,t.dom.append(t.dom.div(),i)))},FileUploadFile.prototype.getFile=function(){return this._file},FileUploadFile.prototype.getFileUpload=function(){return this._fileUpload},FileUploadFile.prototype.getPromise=function(){return this.__promise},FileUploadFile.prototype.getBatch=function(){return this._batch},FileUploadFile.prototype.getName=function(){return this._file.webkitRelativePath||this._file.name},FileUploadFile.prototype.getStatus=function(){return this.__progress.status},FileUploadFile.prototype.getError=function(){return this.__progress.fail},FileUploadFile.prototype.getErrorXHR=function(){return this.__progress.fail_xhr},FileUploadFile.prototype.getData=function(){return this.__progress.data},FileUploadFile.prototype.getProgress=function(){return this.__progress},FileUploadFile.prototype.getPercent=function(){return this.__progress.percent},FileUploadFile.prototype.getInfo=function(){var t;return t=this.getStatus(),"PROGRESS"===t||"COMPLETED"===t?(this.getPercent()||0)+"%":t},FileUploadFile.prototype.abort=function(){var t;switch(this.getStatus()){case"CREATED":case"QUEUED":this.__progress.status="ABORT",this.__dfr.reject(this);break;case"STARTED":case"PROGRESS":case"COMPLETED":null!=(t=this.__upload)&&t.abort()}return this},FileUploadFile.prototype.dequeue=function(){return this.__progress.status="DEQUEUED","function"==typeof this._onDequeue&&this._onDequeue(this),this},FileUploadFile.prototype.remove=function(){return this.isDone()?this.dequeue():this.abort(),this._fileUpload.removeFile(this),"function"==typeof this._onRemove&&this._onRemove(this),this},FileUploadFile.prototype.isDone=function(){var t;return"CREATED"!==(t=this.__progress.status)&&"QUEUED"!==t&&"STARTED"!==t&&"PROGRESS"!==t&&"COMPLETED"!==t},FileUploadFile.prototype.isUploading=function(){return!!this.__upload},FileUploadFile.prototype.upload=function(e,i){var n,o;return t.util.assert(!this.__upload,"CUI.FileUploadFile.upload","A file can only be uploaded once.",{file:this}),n={},n[i]=this._file,o=function(t){return function(){}}(),this._file.size>0?(this.__upload=new t.XHR({url:e,form:n}),this.__upload.start().progress(function(t){return function(e,i,n,o){if("download"!==e&&"ABORT"!==t.__progress.status)return t.__progress.status=i===n?"COMPLETED":"PROGRESS",t.__progress.loaded=i,t.__progress.total=n,t.__progress.percent=o,t.__dfr.notify(t)}}(this)).done(function(e){return function(i){return e.__progress.data=i,o=function(){return e.__progress.status="DONE",e.__upload=null,e.__dfr.resolve(e)},e._onBeforeDone?t.decide(e._onBeforeDone(e)).done(o).fail(function(){return e.__progress.status="ABORT",e.__upload=null,e.__dfr.reject(e)}):o()}}(this)).fail(function(t){return function(e,i,n){return"abort"===n&&(t.__progress.status="ABORT"),"ABORT"!==t.__progress.status&&(t.__progress.status="FAILED"),t.__progress.fail=t.__upload.response(),t.__progress.fail_xhr=t.__upload.getXHR(),t.__upload=null,t.__dfr.reject(t)}}(this))):t.setTimeout({call:function(t){return function(){return t.__progress.status="FAILED",t.__upload=null,t.__dfr.reject(t)}}(this)}),this.__progress.status="STARTED",this.__progress.percent=0,this.__dfr.notify(this),this.__promise},FileUploadFile}(t.Element)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.Form=function(i){function Form(){return Form.__super__.constructor.apply(this,arguments)}return e(Form,i),Form.prototype.initTemplate=function(){return this.registerTemplate(this.__verticalLayout.getLayout())},Form.prototype.initLayout=function(){var e,i,n,o,r;for(r={class:"cui-form cui-form-appearance-"+this._appearance},o=["maximize","maximize_horizontal","maximize_vertical"],e=0,n=o.length;e<n;e++)i=o[e],this.hasSetOpt(i)&&(r[i]=this.getSetOpt(i));return this.hasSetOpt("top")&&(r.top={content:this._top}),this.hasSetOpt("bottom")&&(r.bottom={content:this._bottom}),this.__verticalLayout=new t.VerticalLayout(r),this._render_as_grid&&this.__verticalLayout.addClass("cui-form--grid"),this.__verticalLayout},Form.prototype.getLayout=function(){return this.__verticalLayout},Form.prototype.getTableContainer=function(){var e,i;return i=this.getLayout(),e=parseInt(t.dom.getAttribute(this.DOM,"cui-form-depth")),t.dom.setAttribute(i.center(),"cui-form-depth",e),i.empty("center"),i.center()},Form}(t.SimpleForm)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.SimpleForm=function(i){function SimpleForm(){return SimpleForm.__super__.constructor.apply(this,arguments)}return e(SimpleForm,i),SimpleForm.prototype.initOpts=function(){return SimpleForm.__super__.initOpts.call(this),this.addOpts({fields:{mandatory:!0,check:function(e){return t.util.isFunction(e)||t.util.isArray(e)}},class_table:{check:String},header:{check:Array},horizontal:{default:!1,check:function(e){return t.util.isBoolean(e)||t.util.isInteger(e)&&e>0}},appearance:{default:"normal",mandatory:!0,check:["normal","separators"]},render_as_grid:{default:!1,mandatory:!0,check:Boolean},top:{},bottom:{}})},SimpleForm.prototype.readOpts=function(){var e,i,n;return SimpleForm.__super__.readOpts.call(this),1===this._horizontal?this.__horizontal=null:this.__horizontal=this._horizontal,(null!=(n=this._form)?n.checkbox:void 0)?(t.util.assert(t.util.isPlainObject(this._form.checkbox,"new CUI.Form","opts.form.checkbox needs to be PlainObject.",{opts:this.opts})),t.util.assert(this._name,"new CUI.Form","opts.form.checkbox requires opts.name to be set.",{opts:this.opts}),t.util.assert(!this._form.checkbox.data,"new CUI.Form","opts.form.checkbox cannot have 'data' set.",{opts:this.opts}),t.util.assert(!this._form.checkbox.name,"new CUI.Form","opts.form.checkbox cannot have 'name' set.",{opts:this.opts}),e=t.util.copyObject(this._form.checkbox,!0),e.data=this.__checkbox_data={checkbox:!1},e.name="checkbox",i=e.onActivate,e.onActivate=function(e){return function(n,o,r){var s,a,l,u;if("function"==typeof i&&i(n,o,r),r.ctrlKey())for(u=t.dom.matchSelector(e.DOM,".cui-checkbox"),a=0,l=u.length;a<l;a++)s=u[a],t.dom.data(s).element.activate()}}(this),this.__checkbox=new t.Checkbox(e).start(),t.Events.listen({type:"data-changed",node:this.__checkbox,call:function(t){return function(){return t.__checkbox_data.checkbox?t.__checkbox_set_data[t._name]=t.__checkbox_form_data:delete t.__checkbox_set_data[t._name]}}(this)})):this.checkbox=null,this.initLayout()},SimpleForm.prototype.getTableContainer=function(){return this.DOM},SimpleForm.prototype.initLayout=function(){},SimpleForm.prototype.getCheckbox=function(){return this.__checkbox},SimpleForm.prototype.__createFields=function(){var e,i,n,o,r,s,a;for(o=[],n=this.getArrayFromOpt("fields"),s=r=0,a=n.length;r<a;s=++r)(i=n[s])&&(e=t.util.isFunction(i)?t.DataField.new(i(this)):t.DataField.new(i),e.setForm(this),o.push(e));return o},SimpleForm.prototype.getNameOpt=function(){return{name:{check:String}}},SimpleForm.prototype.init=function(){return this.__initUndo(),this.initFields(),this.setFormDepth()},SimpleForm.prototype.initFields=function(){return this.__fields=this.__createFields(),this.__fields},SimpleForm.prototype.reload=function(){return this.initFields(),this.callOnOthers("setData",this.__data),SimpleForm.__super__.reload.call(this)},SimpleForm.prototype.displayValue=function(){return this.__checkbox&&this.__checkbox.displayValue(),SimpleForm.__super__.displayValue.call(this)},SimpleForm.prototype.getParentData=function(){return this.__parent_data||this.__data},SimpleForm.prototype.setData=function(e){return this._name&&this.__checkbox&&t.util.assert(!t.util.isFunction(e),"Form.setData","opts.data cannot be set by Function when data is managed by opts.form.checkbox.",{opts:this.opts}),this._name&&!t.util.isFunction(e)?this.__checkbox?(this.__checkbox_set_data=e,e[this._name]?(this.__checkbox_form_data=e[this._name],this.__checkbox_data.checkbox=!0):(this.__checkbox_form_data={},this.__checkbox_data.checkbox=!1),SimpleForm.__super__.setData.call(this,this.__checkbox_form_data)):(t.util.isUndef(e[this._name])&&(e[this._name]={}),this.__parent_data=e,SimpleForm.__super__.setData.call(this,e[this._name])):SimpleForm.__super__.setData.call(this,e),t.util.isFunction(this._fields)&&this.__fields&&0===this.__fields.length&&(this.initFields(),this.callOnOthers("setData",this.__data)),this},SimpleForm.prototype.__setRowVisibility=function(e){var i,n,o,r,s;if(!(n=t.dom.data(e,"data-field")))return void console.warn("Form.__setRowVisibility","data-field not found",n,this);for(s=n.getAllDataFields(),o=0,r=s.length;o<r;o++)if(i=s[o],!i.isHidden())return void t.dom.showElement(e);t.dom.hideElement(e)},SimpleForm.prototype.render=function(){var e;return SimpleForm.__super__.render.call(this),this.renderTable(),this.hasContentForAppend()&&!1!==(null!=(e=this.__checkbox)?e.getValue():void 0)?t.dom.showElement(this.DOM):t.dom.hideElement(this.DOM),this},SimpleForm.prototype.getTable=function(){return t.util.assert(!t.__ng__,'Form.getTable is obsolete in "ng" design.',{form:this}),this.table},SimpleForm.prototype.renderAsBlock=function(){var e,i,n,o,r;if(this.getCheckbox())return!0;if(!1===this._render_as_block)return!1;if(!0===this._render_as_block)return!0;for(i=this.getFields(),n=0,o=i.length;n<o;n++){if(e=i[n],null!=(r=e._form)?r.label:void 0)return!0;if(e instanceof t.Form&&e.renderAsBlock())return!0}return!1},SimpleForm.prototype.hasContentForAppend=function(){var t;return(null!=(t=this.__fields)?t.length:void 0)>0},SimpleForm.prototype.renderTable=function(){var e,i,n,o,r,s,a,l,u,c,h,d;return s=this.getFormDepth(),i=this.getTableContainer(),t.Events.listen({node:i,type:"form-check-row-visibility",instance:this,call:function(e){return function(i){var n;n=t.dom.closest(i.getNode(),".cui-form-tr,.cui-form-block,.cui-form-row"),i.stopPropagation(),n&&e.__setRowVisibility(n)}}(this)}),h=null,d=null,e=function(e){return function(e,n){n?e&&n.appendChild(e):t.dom.append(i,e)}}(),this._class_table&&t.dom.addClass(i,this._class_table),a=function(e){return function(i,n){return null==n&&(n=e),i instanceof t.Form?i.DOM:t.util.isPlainObject(i)?new t.MultilineLabel(i).DOM:t.util.isString(i)?new t.MultilineLabel({text:i}).DOM:(null!=i?i.DOM:void 0)?i.DOM:t.util.isFunction(i)?a(i(n)):t.util.isEmpty(i)?null:i}}(this),l=function(e){return function(e,i){var n,o,r;if(null==i&&(i=!1),o=null!=(r=e._form)?r.label:void 0)return t.util.isString(o)?(n=t.dom.element("label"),n.textContent=o,e.registerLabel(n),n):a(o)}}(),r=this.getFields(),u=r.length,o=-1,n=function(t){return function(e){var i;return i=(null!=e?e._form:void 0)||{},!!i.label||!!i.use_field_as_label&&(console.error('Form: use_field_as_label is obsolete in "ng" design',t),!0)}}(this),c=function(i){return function(){var p,_,f,m,g,y,v,b,w,k,D,x,M,C,O,T,L,S,I;if((o+=1)!==u){if(y=r[o],w=null,v=null!=(O=y._form)?O.grid:void 0,!y._form||t.util.isNull(y._form.hint)&&!y._form.right||(p=function(){if(!w)return w=t.dom.element("DIV",{class:"cui-form-hint","data-for-field":y.getUniqueId()})},t.util.isNull(y._form.hint)||(p(),t.util.isString(y._form.hint)?w.appendChild(new t.Label({class:"cui-form-hint-label",icon:y._form.hint_icon,text:y._form.hint,multiline:!0,markdown:!0}).DOM):t.dom.append(w,y._form.hint)),y._form.right&&(p(),console.error("Form.renderTable: form.right is deprecated. Use 'hint' instead. Form:",i,"Field:",y,"Field#",o),e(a(y._form.right),w))),y.renderAsBlock())return M=y.getFormDepth()+1,M||(M=1),M>3&&(M=3),f=y instanceof t.Form?y.getCheckbox():null,f?(!function(e,i){t.Events.listen({type:"data-changed",node:e,call:function(){return e.getValue()?(t.dom.addClass(_.DOM,"cui-form-block--checkbox-checked"),t.dom.showElement(i.DOM)):(t.dom.removeClass(_.DOM,"cui-form-block--checkbox-checked"),t.dom.hideElement(i.DOM))}})}(f,y),x=f):x=l(y),_=new t.Block({attr:{"cui-form-depth":s},class:"cui-form-block",level:M,header:x,content:[a(y),w]}),f&&(t.dom.addClass(_.DOM,"cui-form-block--has-checkbox"),f.getValue()?t.dom.addClass(_.DOM,"cui-form-block--checkbox-checked"):t.dom.removeClass(_.DOM,"cui-form-block--checkbox-checked")),e(_),t.dom.data(_.DOM,"data-field",y),i.__setRowVisibility(_.DOM),h=null,d=null,void c();if(!h){for(b=!1,D=k=o,T=u;k<T;D=k+=1)if(n(r[D])){b=!0;break}b?(h=t.dom.element("DIV",{class:"cui-form-table"}),d=!0):(h=t.dom.element("DIV",{class:"cui-form-container"}),d=!1),i.__horizontal&&t.dom.addClass(h,"cui-form--horizontal"),t.dom.setAttribute(h,"cui-form-depth",s),e(h)}return C=y.getName(),m=[],C&&m.push("cui-form-field-name--"+C),y instanceof t.Select?m.push("cui-form-field-type--select"):y instanceof t.Checkbox?m.push("cui-form-field-type--checkbox"):y instanceof t.Input&&m.push("cui-form-field-type--input"),d?(I=t.dom.element("DIV",{class:"cui-form-tr "+m.join(" "),"data-for-field":y.getUniqueId()}),S=t.dom.element("DIV",{class:"cui-form-td cui-form-key"}),e(l(y,!0),S),I.appendChild(S),S=t.dom.element("DIV",{class:"cui-form-td cui-form-value"}),e(a(y),S),e(w,S),I.appendChild(S),t.dom.data(I,"data-field",y),i.__setRowVisibility(I),v&&I.setAttribute("data-cui-grid",v),h.appendChild(I)):(g=y._form,g&&(g.maximize&&m.push("cui-maximize"),(g.maximize&&!1!==g.maximize_horizontal||!0===g.maximize_horizontal)&&m.push("cui-maximize-horizontal"),(g.maximize&&!1!==g.maximize_vertical||!0===g.maximize_vertical)&&m.push("cui-maximize-vertical")),L=t.dom.element("DIV",{class:"cui-form-row "+m.join(" "),"data-for-field":y.getUniqueId()}),L.appendChild(a(y)),e(a(y),L),e(w,L),t.dom.data(L,"data-field",y),v&&L.setAttribute("data-cui-grid",v),h.appendChild(L)),c()}}}(this),c(),t.Events.listen({type:"data-changed",node:i,instance:this,call:function(t){return function(e,i){var n;i.element&&"goto"!==(n=i.action)&&"reset"!==n&&(t.__undo.log[++t.__undo.idx]={name:i.element.getName(),undo_idx:i.undo_idx,action:i.action},t.__undo.log.splice(t.__undo.idx+1))}}(this)}),i},SimpleForm.prototype.unregisterTableListeners=function(){if(!this.getLayout().isDestroyed())return t.Events.ignore({node:this.getLayout().center(),instance:this})},SimpleForm.prototype.hasUserData=function(t){var e,i,n,o;for(o=this.getFields("hasUserData"),i=0,n=o.length;i<n;i++)if(e=o[i],e.hasUserData(t))return!0;return!1},SimpleForm.prototype.remove=function(){return this.unregisterTableListeners(),SimpleForm.__super__.remove.call(this)},SimpleForm.prototype.__initUndo=function(){if(!this.__undo)return this.__undo={log:[],idx:-1}},SimpleForm.prototype.getLog=function(){var t,e,i,n,o;for(n=[],o=this.__undo.log,t=0,i=o.length;t<i;t++)e=o[t],n.push(e.name+" "+e.action+" "+e.undo_idx);return n.join("\n")},SimpleForm.prototype.undo=function(){var t,e,i,n,o,r,s,a,l;if(-1===this.__undo.idx)return!1;if(0===this.__undo.idx){for(a=this.getFields(),i=0,r=a.length;i<r;i++)t=a[i],t.goto(this.__undo.idx--);return!0}for(o=this.__undo.log[--this.__undo.idx],l=this.getRootForm().getFieldsByName(o.name),n=0,s=l.length;n<s;n++)e=l[n],e.goto(o.undo_idx);return!0},SimpleForm.prototype.redo=function(){var t,e,i,n,o;if(this.__undo.idx===this.__undo.log.length-1)return!1;for(i=this.__undo.log[++this.__undo.idx],o=this.getRootForm().getFieldsByName(i.name),e=0,n=o.length;e<n;e++)t=o[e],t.goto(i.undo_idx);return!0},SimpleForm.prototype.getFieldByIdx=function(e){return t.util.assert(t.util.isInteger(e)&&e>=0,this.__cls+".getFieldByIdx","idx must be Integer.",{idx:e}),this.getFields("getFieldByIdx")[e]},SimpleForm.prototype.updateHint=function(e,i,n){var o,r;return null==n&&(n=!0),(r=this.getFieldsByName(e)[0])?(o=t.dom.matchSelector(this.getLayout().DOM,".cui-form-hint[data-for-field='"+r.getUniqueId()+"'] > .cui-form-hint-label"),1!==o.length?void console.error("Form.updateHint:",e,"not found in DOM."):(t.dom.data(o[0]).element.setText(i),n&&t.Events.trigger({type:"content-resize",node:o[0]}),this)):void console.error("Form.updateHint:",e,"not found.")},SimpleForm.prototype.__setClassOnField=function(e,i,n){var o,r,s,a,l;for(a=this.getFieldsByName(e),r=0,s=a.length;r<s;r++)o=a[r],(l=t.dom.closest(o.DOM,"[data-for-field]"))&&(n?t.dom.addClass(l,i):t.dom.removeClass(l,i));return this},SimpleForm.prototype.addClassToField=function(t,e){return this.__setClassOnField(t,e,!0)},SimpleForm.prototype.removeClassFromField=function(t,e){return this.__setClassOnField(t,e,!1)},SimpleForm.prototype.getFieldsByName=function(e,i){var n,o,r,s;for(null==i&&(i=[]),t.util.assert(t.util.isString(e),this.__cls+".getFieldsByName","name must be String.",{name:e}),s=this.getFields("getFieldsByName"),o=0,r=s.length;o<r;o++)n=s[o],n.getName()===e&&i.push(n),n instanceof t.Form&&n.getFieldsByName(e,i);return i},SimpleForm.prototype.getFields=function(t){return this.__fields},SimpleForm.prototype.isDataField=function(){return!!this._name},SimpleForm.prototype.hasData=function(){return!1},SimpleForm.prototype.getValue=function(){var e,i,n,o,r,s;if(this._name)return e=t.util.copyObject(this.__data,!0),delete e._undo,e;for(e={},s=this.getDataFields(),n=0,r=s.length;n<r;n++)i=s[n],(o=i.getName())&&(e[o]=i.getValue());return e},SimpleForm.prototype.isChanged=function(){var t,e,i,n;for(n=this.getFields(),e=0,i=n.length;e<i;e++)if(t=n[e],t.isChanged())return!0;return!1},SimpleForm.prototype.destroy=function(){return this.table&&(this.unregisterTableListeners(),t.dom.remove(this.table),this.table=null),SimpleForm.__super__.destroy.call(this)},SimpleForm}(t.DataField),t.Events.registerEvent({type:"form-check-row-visibility",bubble:!0})}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.FormButton=function(i){function FormButton(t){this.opts=null!=t?t:{},FormButton.__super__.constructor.call(this,this.opts)}return e(FormButton,i),FormButton.prototype.getButtonOpts=function(){var t,e,i,n,o;for(n={icon:this._icon},o=["appearance"],t=0,i=o.length;t<i;t++)e=o[t],n[e]=this["_"+e];return n},FormButton.prototype.render=function(){FormButton.__super__.render.call(this),this.__checkbox.addClass("cui-button-button")},FormButton.prototype.getCheckboxClass=function(){return"cui-button-form-button"},FormButton.prototype.initOpts=function(){return FormButton.__super__.initOpts.call(this),this.addOpts({icon:{check:function(e){return e instanceof t.Icon||t.util.isString(e)}},appearance:{check:["link","flat","normal","important"]}})},FormButton}(t.Checkbox)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.FormModal=function(i){function FormModal(t){this.opts=null!=t?t:{},FormModal.__super__.constructor.call(this,this.opts),this.__old_text=null,this.__old_display=null}return e(FormModal,i),FormModal.prototype.initOpts=function(){return FormModal.__super__.initOpts.call(this),this.removeOpt("popover"),this.addOpts({modal:{default:{},check:"PlainObject",apply_button:{mandatory:!0,default:{text:"Ok"},check:function(e){return function(e){return t.util.isPlainObject(e)}}()}}})},FormModal.prototype.initPopover=function(e){var i,n,o,r;return n=t.util.copyObject(this._modal.apply_button,!0),r=n.onClick,n.onClick=function(e){return function(i,n){return t.decide("function"==typeof r?r(i,n,e):void 0).done(function(){return e.__popover.hide()})}}(this),i=new t.defaults.class.Button(n),this.hasChanges()?i.enable():i.disable(),e.pane.footer_right=i,o=new t.Modal(e),this.__orig_set_data&&t.Events.listen({type:"data-changed",node:o,call:function(t){return function(){return t.hasChanges()?i.enable():i.disable()}}(this)}),o},FormModal.prototype.revertData=function(){return t.util.assert(this.__orig_set_data,"Form.revertData","Only supported with opts.name set and opts.data PlainObject.",{opts:this.opts}),delete this.__data,this.__orig_data?this.__orig_set_data[this._name]=this.__orig_data:delete this.__orig_set_data[this._name],this.setData(this.__orig_set_data),this.resetTableAndFields(),t.Events.trigger({type:"data-changed",node:this.getPopover()}),this},FormModal.prototype.setData=function(e){return this._name&&!t.util.isFunction(e)&&(e[this._name]?this.__orig_data=t.util.copyObject(e[this._name],!0):this.__orig_data=void 0,this.__orig_set_data=e),FormModal.__super__.setData.call(this,e)},FormModal.prototype.__closePopover=function(){return this.__orig_set_data&&(this.__orig_data=t.util.copyObject(this.__orig_set_data[this._name],!0)),FormModal.__super__.__closePopover.call(this)},FormModal.prototype.hasChanges=function(){return this.__orig_set_data?JSON.stringify(this.__orig_data)!==JSON.stringify(this.__orig_set_data[this._name]):null},FormModal.prototype.getPopoverOpts=function(){var e,i;return i=t.util.copyObject(this._modal,!0),i.cancel&&this.__orig_set_data&&(e=i.onCancel,i.onCancel=function(i){return function(n,o){var r;return r=new t.Deferred,t.decide("function"==typeof e?e(n,o,i.hasChanges()):void 0).done(r.resolve).fail(r.reject),r.done(function(){return i.revertData()}),r.promise()}}(this)),delete i.apply_button,t.util.isEmpty(i.class)&&(i.class=""),i.element=null,i.pane||(i.pane={}),t.util.assert(t.util.isPlainObject(i.pane),"new CUI.FormModal","opts.pane must be PlainObject",{opts:i}),i.class+=" cui-form-modal-modal",i},FormModal.prototype.disable=function(){var t;return FormModal.__super__.disable.call(this),null!=(t=this.__button)?t.disable():void 0},FormModal.prototype.enable=function(){var t;return FormModal.__super__.enable.call(this),null!=(t=this.__button)?t.enable():void 0},FormModal.prototype.destroy=function(){var t;return FormModal.__super__.destroy.call(this),null!=(t=this.__popover)?t.destroy():void 0},FormModal}(t.FormPopover)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty,n=[].slice;t.FormPopover=function(i){function FormPopover(t){this.opts=null!=t?t:{},FormPopover.__super__.constructor.call(this,this.opts),this.__old_display=null,this.__old_render=null}return e(FormPopover,i),FormPopover.prototype.initOpts=function(){return FormPopover.__super__.initOpts.call(this),this.addOpts({popover:{default:{},check:"PlainObject"},button:{default:{},check:function(e){return t.util.isPlainObject(e)&&!e.onClick}},trigger_data_changed_while_open:{default:!1,check:Boolean},renderDisplayButton:{check:Function},renderDisplayContent:{check:Function}})},FormPopover.prototype.readOpts=function(){if(FormPopover.__super__.readOpts.call(this),this._class&&(this.__class=this._class,delete this._class),this.__fields_is_func=t.util.isFunction(this._fields),this.__fields_is_func)return t.util.assert(!0!==this._data_not_for_others,"new CUI.FormPopover","opts.data_not_for_others cannot be set to true if fields are created on open by a Function.",{opts:this.opts})},FormPopover.prototype.init=function(){return this.__fields_is_func?(this.__initUndo(),this.setFormDepth()):FormPopover.__super__.init.call(this)},FormPopover.prototype.setDataOnOthers=function(){return!this.__fields_is_func&&FormPopover.__super__.setDataOnOthers.call(this)},FormPopover.prototype.isChanged=function(){return!!this.__fields&&FormPopover.__super__.isChanged.call(this)},FormPopover.prototype.getFields=function(e){return null==e&&(e=""),"render"===e||"displayValue"===e?[]:"show"===e||"hide"===e||"remove"===e||"enable"===e||"disable"===e||"getFieldsByName"===e||"hasUserData"===e||"getFieldByIdx"===e||"setFormDepth"===e||"getDataFields"===e?this.__fields||[]:(t.util.assert(this.__fields,"FormPopover.getFields("+e+")","Fields not rendered yet. This is a programming error in CUI."),FormPopover.__super__.getFields.call(this))},FormPopover.prototype.initTemplate=function(){var e;return e=new t.VerticalLayout({maximize:!1,bottom:{}}),this.registerTemplate(e.getLayout())},FormPopover.prototype.hasContentForAppend=function(){return!0},FormPopover.prototype.render=function(){var e;return e=t.util.copyObject(this._button,!0),e.onClick=function(t){return function(){return t.__openPopover()}}(this),t.mergeMap(e,{left:!0,text:""}),this.__button=new t.defaults.class.Button(e),this.addClass("cui-data-field-input"),this._renderDisplayButton&&this.addClass("cui-form-popover-has-button-text"),this.append(this.__button,"center"),t.DataField.prototype.render.call(this),this},FormPopover.prototype.getButton=function(){return this.__button},FormPopover.prototype.displayValue=function(){return t.DataField.prototype.displayValue.call(this),this.__renderDisplay()},FormPopover.prototype.callOnFields=function(){var t,e,i,o,r,s;for(i=arguments[0],t=2<=arguments.length?n.call(arguments,1):[],s=this.getFields(),o=0,r=s.length;o<r;o++)e=s[o],e[i].apply(e,t);return this},FormPopover.prototype.__renderDisplay=function(){var e,i,n;return this._renderDisplayContent?e=this._renderDisplayContent(this,this.__data):this._renderDisplayButton?i=this._renderDisplayButton(this,this.__data):this.__data?e=n="":(n="Data not set.",e=t.dom.textEmpty(n)),this._renderDisplayButton?(!1===i?this.__button.deactivate():!0===i?this.__button.activate():i instanceof t.Icon?(this.__button.setIcon(i),this.__button.setText()):(this.__button.setIcon(),this.__button.setText(i)),null!==this.__old_render&&t.Events.trigger({type:"content-resize",node:this.DOM}),this.__old_render=i):null!==this.__old_display&&this.__old_display===e||(this.replace(e,"bottom"),null!==this.__old_display&&t.Events.trigger({type:"content-resize",node:this.DOM,bubble:!1}),this.__old_display=e),this.checkChanged(),this},FormPopover.prototype.renderTable=function(){return this.table=FormPopover.__super__.renderTable.call(this),t.dom.addClass(this.getLayout().DOM,this.__class),this.table},FormPopover.prototype.initPopover=function(e){return new t.Popover(e)},FormPopover.prototype.getPopoverOpts=function(){var e;return e=t.util.copyObject(this._popover,!0),e.backdrop||(e.backdrop={}),e.backdrop.policy||(e.backdrop.policy="click"),e.pane||(e.pane={}),t.util.assert(t.util.isPlainObject(e.pane),"new CUI.FormPopover","opts.pane must be PlainObject",{opts:e}),t.util.isEmpty(e.class)&&(e.class=""),e.class+=" cui-form-popover-popover",e},FormPopover.prototype.getPopover=function(){return this.__popover},FormPopover.prototype.renderAsBlock=function(){return!1},FormPopover.prototype.resetTableAndFields=function(){return this.callOnFields("remove"),this.unregisterTableListeners(),t.__ng__?t.dom.empty(this.table):t.dom.remove(this.table),this.table=null,this.__fields=null,this},FormPopover.prototype.__openPopover=function(){var e,i,n;return n=this.getPopoverOpts(),this.__fields_is_func&&(this.table&&this.resetTableAndFields(),this.initFields(),this.callOnFields("setData",this.__data)),this.table||(this.renderTable(),this.callOnFields("start")),n.hasOwnProperty("element")||(n.element=this.__button),e=n.onHide,n.onHide=function(t){return function(i,n){return t.__closePopover(),"function"==typeof e?e(i,n):void 0}}(this),i=n.onShow,i&&(n.onShow=function(t){return function(e){return"function"==typeof i?i(e,t):void 0}}(this)),n.pane.content=this.getLayout(),this.__popover=this.initPopover(n),t.Events.listen({type:"data-changed",node:this.__popover,call:function(t){return function(e,i){null==i&&(i={}),t.__renderDisplay(),t.__dataChanged=i,t._trigger_data_changed_while_open&&t.__triggerDataChanged()}}(this)}),this.__popover.show(),this.addClass("focus")},FormPopover.prototype.__closePopover=function(){return this.removeClass("focus"),t.dom.remove(this.getLayout().DOM),this.__popover.destroy(),this.__popover=null,this.__triggerDataChanged(),this},FormPopover.prototype.closePopover=function(){var t;return null!=(t=this.__popover)?t.hide():void 0},FormPopover.prototype.hide=function(t){return null==t&&(t=!1),this.closePopover(),FormPopover.__super__.hide.call(this,t)},FormPopover.prototype.__triggerDataChanged=function(){return this.__dataChanged&&this.triggerDataChanged(),this.__dataChanged=null},FormPopover.prototype.triggerDataChanged=function(){return t.Events.trigger({type:"data-changed",node:this.__button,info:this.__dataChanged})},FormPopover.prototype.disable=function(){var t;return FormPopover.__super__.disable.call(this),null!=(t=this.__button)?t.disable():void 0},FormPopover.prototype.enable=function(){var t;return FormPopover.__super__.enable.call(this),null!=(t=this.__button)?t.enable():void 0},FormPopover.prototype.destroy=function(){var t;return FormPopover.__super__.destroy.call(this),null!=(t=this.__popover)&&t.destroy(),this.__dataChanged=null},FormPopover}(t.Form)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},n={}.hasOwnProperty,o=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1};t.Template.loadTemplateText(i(180)),t.HorizontalLayout=function(t){function HorizontalLayout(){return HorizontalLayout.__super__.constructor.apply(this,arguments)}return e(HorizontalLayout,t),HorizontalLayout.prototype.getName=function(){var t;return this.hasFlexHandles()?"horizontal-layout":(t=this.getPanes(),2===t.length?"horizontal-layout-left-center-right":o.call(t,"left")>=0?"horizontal-layout-left-center":o.call(t,"right")>=0?"horizontal-layout-center-right":"horizontal-layout-center")},HorizontalLayout.prototype.getMapPrefix=function(){return"cui-horizontal-layout"},HorizontalLayout.prototype.hasFlexHandles=function(){var t,e;return!!((null!=(t=this._left)?t.flexHandle:void 0)||(null!=(e=this._right)?e.flexHandle:void 0))},HorizontalLayout.prototype.getPanes=function(){var t;return this.hasFlexHandles()?["left","right"]:(t=[],this._left&&t.push("left"),this._right&&t.push("right"),t)},HorizontalLayout.prototype.getSupportedPanes=function(){return["left","right"]},HorizontalLayout}(t.Layout)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.HorizontalList=function(t){function HorizontalList(){return HorizontalList.__super__.constructor.apply(this,arguments)}return e(HorizontalList,t),HorizontalList.prototype.initOpts=function(){return HorizontalList.__super__.initOpts.call(this),this.mergeOpt("maximize",{default:!1}),this.removeOpt("center"),this.addOpts({content:{}})},HorizontalList.prototype.readOpts=function(){return HorizontalList.__super__.readOpts.call(this),this._center={content:this._content}},HorizontalList.prototype.getSupportedPanes=function(){return[]},HorizontalList}(t.HorizontalLayout)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.EmailInput=function(i){function EmailInput(){return EmailInput.__super__.constructor.apply(this,arguments)}return e(EmailInput,i),EmailInput.prototype.initOpts=function(){return EmailInput.__super__.initOpts.call(this),this.removeOpt("checkInput")},EmailInput.prototype.readOpts=function(){return EmailInput.__super__.readOpts.call(this),this._checkInput=this.__checkInput},EmailInput.prototype.__checkInput=function(e){return!(!t.util.isEmpty(e)&&!t.EmailInput.regexp.exec(e))},EmailInput.regexp=/^[\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376-\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0523\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0621-\u064A\u066E-\u066F\u0671-\u06D3\u06D5\u06E5-\u06E6\u06EE-\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4-\u07F5\u07FA\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0972\u097B-\u097F\u0985-\u098C\u098F-\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC-\u09DD\u09DF-\u09E1\u09F0-\u09F1\u0A05-\u0A0A\u0A0F-\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32-\u0A33\u0A35-\u0A36\u0A38-\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2-\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0-\u0AE1\u0B05-\u0B0C\u0B0F-\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32-\u0B33\u0B35-\u0B39\u0B3D\u0B5C-\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99-\u0B9A\u0B9C\u0B9E-\u0B9F\u0BA3-\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58-\u0C59\u0C60-\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0-\u0CE1\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D28\u0D2A-\u0D39\u0D3D\u0D60-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32-\u0E33\u0E40-\u0E46\u0E81-\u0E82\u0E84\u0E87-\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA-\u0EAB\u0EAD-\u0EB0\u0EB2-\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDD\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8B\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065-\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10D0-\u10FA\u10FC\u1100-\u1159\u115F-\u11A2\u11A8-\u11F9\u1200-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u1676\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F0\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19A9\u19C1-\u19C7\u1A00-\u1A16\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE-\u1BAF\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u2094\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2C6F\u2C71-\u2C7D\u2C80-\u2CE4\u2D00-\u2D25\u2D30-\u2D65\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31B7\u31F0-\u31FF\u3400\u4DB5\u4E00\u9FC3\uA000-\uA48C\uA500-\uA60C\uA610-\uA61F\uA62A-\uA62B\uA640-\uA65F\uA662-\uA66E\uA67F-\uA697\uA717-\uA71F\uA722-\uA788\uA78B-\uA78C\uA7FB-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA90A-\uA925\uA930-\uA946\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAC00\uD7A3\uF900-\uFA2D\uFA30-\uFA6A\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40-\uFB41\uFB43-\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC0-9A-Z_\.-]+@(?:[\S]+\.[A-Z]{2,}|localhost)$/i,EmailInput}(t.Input)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.Input=function(i){function Input(e){var i,n,o,r,s;for(this.opts=null!=e?e:{},Input.__super__.constructor.call(this,this.opts),this.addClass("cui-input"),this._textarea&&this.addClass("cui-data-field--textarea"),this._overwrite?this.__getCursorBlocks=this.__overwriteBlocks:this.__getCursorBlocks=this._getCursorBlocks,this._content_size&&this.addClass("cui-input-content-size"),this.isRequired()&&this.addClass("cui-input-required"),this._checkInput&&(this.__checkInput=this._checkInput),this._prevent_invalid_input&&this.addClass("cui-input-has-prevent-invalid-input"),this.__checkInput&&this.addClass("cui-input-has-check-input"),this._appearance&&this.addClass("cui-input-appearance-"+this._appearance),this.__inputHints={},this.__inputHintTexts={},s=["empty","invalid","valid"],n=0,r=s.length;n<r;n++)o=s[n],(i=this["_"+o+"Hint"])&&(this.__inputHints[o],i instanceof t.Label?this.__inputHints[o]=i:this.__inputHints[o]=new t.defaults.class.Label(i),this.__inputHints[o].addClass("cui-input-"+o+"-hint"),this.__inputHintTexts[o]=this.__inputHints[o].getText(),this.addClass("cui-input-has-"+o+"-hint"));this.__doSetContentSize=function(t){return function(){return t.__setContentSize()}}(this)}return e(Input,i),Input.prototype.initOpts=function(){return Input.__super__.initOpts.call(this),this.addOpts({spellcheck:{default:!1,check:Boolean},autocomplete:{default:!1,check:Boolean},overwrite:{check:Boolean},checkInput:{check:Function},getValueForDisplay:{check:Function},getValueForInput:{check:Function},correctValueForInput:{check:Function},emptyHint:{check:function(e){return t.util.isString(e)||e instanceof t.Label||t.util.isPlainObject(e)}},invalidHint:{check:function(e){return t.util.isString(e)||e instanceof t.Label||t.util.isPlainObject(e)}},validHint:{check:function(e){return t.util.isString(e)||e instanceof t.Label||t.util.isPlainObject(e)}},maxLength:{check:function(t){return t>=0}},onFocus:{check:Function},onClick:{check:Function},onKeyup:{check:Function},onSelectionchange:{check:Function},incNumbers:{default:!0,check:Boolean},onBlur:{check:Function},regexp:{check:String},regexp_flags:{default:"",check:String},getInputBlocks:{check:Function},getCursorBlocks:{check:function(e){return t.util.isFunction(e)&&!this._overwrite}},placeholder:{check:function(e){return t.util.isFunction(e)||t.util.isString(e)}},readonly:{check:Boolean},readonly_select_all:{default:!0,check:Boolean},textarea:{check:Boolean},rows:{check:function(t){return t>=1}},content_size:{default:!1,check:Boolean},prevent_invalid_input:{default:!1,check:Boolean},required:{default:!1,check:Boolean},appearance:{check:["code"]}})},Input.prototype.readOpts=function(){return this.opts.readonly&&t.util.assert(!(this.opts.getCursorBlocks||this.opts.getInputBlocks||this.opts.checkInput),"new CUI.Input","opts.readonly conflicts with opts.getCursorBlocks, opts.getInputBlocks, opts.checkInput."),this.opts.textarea&&(t.util.assert(!this.opts.autocomplete,"new CUI.Input","opts.textarea does not work with opts.autocomplete",{opts:this.opts}),t.util.assert(!this.opts.incNumbers,"new CUI.Input","opts.textarea does not work with opts.incNumbers",{opts:this.opts})),Input.__super__.readOpts.call(this),this._readonly&&this._readonly_select_all&&(this._getCursorBlocks=function(e){return function(e){return[new t.InputBlock({start:0,string:e})]}}()),this._regexp&&(this.__regexp=new RegExp(this._regexp,this._regexp_flags),this.__checkInput=function(t){return function(e){return!!t.__checkInputRegexp(e)&&(!t._checkInput||t._checkInput(e))}}(this)),this._required&&(this.__checkInput=function(t){return function(e){return 0!==e.trim().length&&(!t._checkInput||t._checkInput(e))}}(this)),!1===this._spellcheck?this.__spellcheck="false":this.__spellcheck="default",!0===this._autocomplete?this.__autocomplete="on":!1===this._autocomplete&&(this.__autocomplete="off"),this},Input.prototype.__checkInputRegexp=function(t){return!!this.__regexp.exec(t)},Input.prototype.setSpellcheck=function(e){return e?t.dom.setAttribute(this.__input,"spellcheck","default"):t.dom.setAttribute(this.__input,"spellcheck","false")},Input.prototype.setPlaceholder=function(e){return t.dom.setAttribute(this.__input,"placeholder",e)},Input.prototype.getPlaceholder=function(){if(this._placeholder)return t.util.isFunction(this._placeholder)?this._placeholder(this,this.getData()):this._placeholder},Input.prototype.__createElement=function(e){var i;return null==e&&(e="text"),!0===this._textarea?this.__input=t.dom.$element("textarea","cui-textarea",{placeholder:this.getPlaceholder(),tabindex:"0",maxLength:this._maxLength,id:"cui-input-"+this.getUniqueId(),spellcheck:this.__spellcheck}):this.__input=t.dom.$element("input","cui-input",{type:e,size:1,placeholder:this.getPlaceholder(),tabindex:"0",maxLength:this._maxLength,id:"cui-input-"+this.getUniqueId(),spellcheck:this.__spellcheck,autocomplete:this.__autocomplete}),t.Events.listen({node:this.__input,type:"dragstart",call:function(t){return t.preventDefault()}}),t.Events.listen({node:this.__input,type:"keydown",call:function(t){return function(e){var i,n,o;if(!(e.ctrlKey()&&90===!e.keyCode()||e.metaKey())){if(t.lastKeyDownEvent=e,!t._incNumbers||t._textarea||t._readonly||t.incNumberBounds(e),37===(i=e.keyCode())||39===i||36===i||35===i)return t.moveCursor(e),void t.showCursor(e);9!==(n=e.keyCode())&&16!==n&&17!==n&&18!==n&&27!==n&&33!==n&&34!==n&&35!==n&&36!==n&&38!==n&&40!==n&&(t._textarea||13!==e.keyCode())&&(8===e.keyCode()&&0===(o=t.__input.selectionStart)&&o===t.__input.selectionEnd||t.__focusShadowInput())}}}(this)}),t.Events.listen({type:"keyup",node:this.__input,call:function(t){return function(e){var i;if(37===(i=e.keyCode())||39===i||36===i||35===i)return e.preventDefault(),void(t.cursor||t.showCursor(e));t.initCursor(e),t.showCursor(e),t._onKeyup&&t._onKeyup(t,e)}}(this)}),t.Events.listen({type:"focus",node:this.__input,call:function(t){return function(e){var i;t.hasShadowFocus()||(t.enterInput(),t.addClass("cui-has-focus"),t.__initShadowInput(),"function"==typeof t._onFocus&&t._onFocus(t,e),null!=(i=t.__invalidTooltip)&&i.show(),t.__setCursor(e))}}(this)}),i=null,t.Events.listen({type:"mousedown",node:this.__input,call:function(e){return function(n){var o,r;return i=[e.__input.offsetWidth,e.__input.offsetHeight],r=function(){if(i[0]!==e.__input.offsetWidth||i[1]!==e.__input.offsetHeight)return t.Events.trigger({type:"content-resize",node:e.__input})},o=t.Events.listen({type:"mousemove",call:function(){r()}}),t.Events.listen({type:"mouseup",only_once:!0,capture:!0,call:function(e){t.Events.ignore(o)}})}}(this)}),t.Events.listen({type:"mouseup",node:this.__input,call:function(t){return function(e){t.__setCursor(e)}}(this)}),t.Events.listen({type:"blur",node:this.__input,call:function(t){return function(e){t.hasShadowFocus()||(t.removeClass("cui-has-focus"),t.leaveInput(),t.__removeShadowInput(),"function"==typeof t._onBlur&&t._onBlur(t,e))}}(this)}),t.Events.listen({type:"input",node:this.__input,call:function(t){return function(e,i){e.isDefaultPrevented()||(t.checkInput(),t.moveCursor(e),t.showCursor(e),t.getValueForStore(t.__input.value)!==t.getValue()&&t.storeValue(t.__input.value))}}(this)}),t.Events.listen({type:"paste",node:this.__input,call:function(t){return function(e){return t.__focusShadowInput()}}(this)}),t.Events.listen({type:"click",node:this.__input,call:function(t){return function(e){e.stopPropagation(),"function"==typeof t._onClick&&t._onClick(t,e)}}(this)}),this._content_size&&t.dom.waitForDOMInsert({node:this.__input}).done(function(t){return function(){if(!t.isDestroyed())return t.setContentSize()}}(this)),this.__input},Input.prototype.__setCursor=function(e){return t.setTimeout(function(t){return function(){var i,n,o,r,s;if(t.initCursor(e),null===t.cursor&&(s=t.__input.selectionStart)===t.__input.selectionEnd&&t.__input.selectionEnd!==t.__input.value.length&&(n=t.getInputBlocks(),n.length>0))for(o=0,r=n.length;o<r;o++)if(i=n[o],i.start<=s&&s<=i.end){t.markBlock(e,i);break}return t.showCursor(e)}}(this),0)},Input.prototype.getValueForStore=function(t){return t},Input.prototype.storeValue=function(t,e){return null==e&&(e={}),Input.__super__.storeValue.call(this,this.getValueForStore(t),e)},Input.prototype.handleSelectionChange=function(){var t;return null!=(t=this._onSelectionchange)?t.apply(this,arguments):void 0},Input.prototype.getElement=function(){return this.__input},Input.prototype.getUniqueIdForLabel=function(){return"cui-input-"+this.getUniqueId()},Input.prototype.markBlock=function(t,e){return this.__input.setSelectionRange(e.start,e.end),this.initCursor(t)},Input.prototype.remove=function(){return this.__removeShadowInput(),Input.__super__.remove.call(this)},Input.prototype.__focusShadowInput=function(){if(this.__shadow)return this.__shadow_focused=!0,this.__shadow.value=this.__input.value,this.__shadow.focus(),this.__shadow.setSelectionRange(this.__input.selectionStart,this.__input.selectionEnd)},Input.prototype.__unfocusShadowInput=function(){if(this.hasShadowFocus())return this.setContentSize(),this.__input.focus(),this.showCursor(),this.__shadow_focused=!1},Input.prototype.hasShadowFocus=function(){return this.__shadow_focused},Input.prototype.setContentSize=function(){return this._content_size?(this.__contentSize?t.scheduleCallback({call:this.__doSetContentSize,ms:100}):(this.__initContentSize(),this.__setContentSize(),this.__removeContentSize()),this):this},Input.prototype.__initContentSize=function(){var e,i,n,o,r,s,a;if(!this.__contentSize){for(this.__contentSize=t.dom.$element("textarea","cui-input-shadow",{tabindex:"-1",autocomplete:"off"}),t.dom.append(document.body,this.__contentSize),a=window.getComputedStyle(this.__input),i={},s=["fontFamily","fontKerning","fontSize","wordBreak","wordSpacing","wordWrap","fontStretch","lineHeight","fontStyle","fontVariant","fontVariantLigatures","fontWeight"],n=0,r=s.length;n<r;n++)o=s[n],i[o]=a[o];return this._textarea||(i.whiteSpace="nowrap"),t.dom.setStyle(this.__contentSize,i),t.dom.height(this.__contentSize,1),this._textarea?(t.dom.width(this.__contentSize,t.dom.width(this.__contentSize)),this.__max_height=parseFloat(t.dom.getComputedStyle(this.__input)["max-height"]),this.__input.style.overflow="hidden",isNaN(this.__max_height)?this.__max_height=null:(e=parseFloat(t.dom.getComputedStyle(this.__input).height)-t.dom.height(this.__input),this.__max_height-=e)):t.dom.width(this.__contentSize,1),this}},Input.prototype.__setContentSize=function(){var e,i,n,o;if(this.__contentSize)return this.__contentSize.value=this.__input.value,this.hasShadowFocus()&&this.__contentSize.focus(),e=!1,this._textarea?(0===this.__input.value.length&&(this.__contentSize.value="A"),t.dom.width(this.__input)!==t.dom.width(this.__contentSize)&&t.dom.width(this.__contentSize,t.dom.width(this.__input)),i=this.__contentSize.scrollHeight,null===this.__max_height||i<=this.__max_height?this.__input.style.overflow="hidden":this.__input.style.overflow="",n=t.dom.height(this.__input),t.dom.height(this.__input,i),t.dom.height(this.__input)!==n&&(e=!0)):(o=this.__contentSize.scrollWidth,0===this.__contentSize.value.length?o=1:o+=1,t.dom.width(this.__input)!==o&&(e=!0),t.dom.width(this.__input,o)),e&&t.Events.trigger({type:"content-resize",node:this.__input}),this},Input.prototype.checkBlocks=function(e){var i,n,o,r;if(!t.util.isArray(e))return!1;for(n=o=0,r=e.length;o<r;n=++o)i=e[n],t.util.assert(i instanceof t.InputBlock,"Input.getInputBlocks","Block["+n+"] needs to be instance of CUI.InputBlock.",{blocks:e,block:i}),i.idx=n;return e},Input.prototype.getInputBlocks=function(){var t;return t=this._getInputBlocks?this._getInputBlocks(this.__input.value):this._getCursorBlocks?this._getCursorBlocks(this.__input.value):this.__getInputBlocks(this.__input.value),this.checkBlocks(t)},Input.prototype.__getInputBlocks=function(e){var i,n,o,r,s,a,l;for(i=[],e=this.__input.value,l=/[0-9]+/g,i=[];null!==(r=l.exec(e));)a=r[0],s=r.index,n=s>0?e.substr(s-1,1):null,o=s>1?e.substr(s-2,1):null,"-"!==n||(null!=o?o.match(/[0-9]/):void 0)||(a="-"+a,s-=1),i.push(new t.NumberInputBlock({start:s,string:a}));return i},Input.prototype.__overwriteBlocks=function(e){var i,n,o,r;for(i=[],n=o=0,r=e.length;0<=r?o<r:o>r;n=0<=r?++o:--o)i.push(new t.InputBlock({start:n,string:e.substr(n,1)}));return i.push(new t.InputBlock({start:e.length,string:""})),i},Input.prototype.getMarkedBlock=function(){var t,e,i,n,o,r,s;if(!1===(e=this.getInputBlocks())||0===e.length)return null;for(s=this.__input.selectionStart,i=this.__input.selectionEnd,n=o=0,r=e.length;o<r;n=++o)if(t=e[n],t.start===s&&t.end===i)return t;return null},Input.prototype.getSelection=function(){var t,e;return e=this.__input.selectionStart,t=this.__input.selectionEnd,{start:e,end:t,value:this.__input.value,before:this.__input.value.substring(0,e),selected:this.__input.value.substring(e,t),after:this.__input.value.substring(t)}},Input.prototype.setSelection=function(t){return this.__input.selectionStart=t.start,this.__input.selectionEnd=t.end},Input.prototype.selectAll=function(){return this.__input.selectionStart=0,this.__input.selectionEnd=this.__input.value.length,this},Input.prototype.updateSelection=function(t){var e,i,n;return null==t&&(t=""),i=this.getSelection(),this.setValue(i.before+t+i.after),n=i.before.length,e=n+t.length,i.start===i.end&&(n=e),this.setSelection({start:n,end:e})},Input.prototype.setValue=function(t,e){var i;return null==e&&(e={}),this.hasData()||(null!=(i=this.__input)&&(i.value=t),this.setContentSize()),Input.__super__.setValue.call(this,t,e)},Input.prototype.incNumberBounds=function(t){var e,i,n,o,r,s,a,l,u,c,h,d,p,_,f,m,g,y,v,b,w;if((38===(y=t.keyCode())||40===y||33===y||34===y)&&(b=this.__input.selectionStart,s=this.__input.selectionEnd,w=this.__input.value,!1!==(r=this.getInputBlocks())&&0!==r.length)){for(g=[w.substring(0,r[0].start)],a=l=0,h=r.length;l<h&&(i=r[a],a!==r.length-1);a=++l)g.push(w.substring(i.end,r[a+1].start));for(c=r[r.length-1],g.push(w.substring(c.end)),o=0,9!==(v=t.keyCode())&&33!==v&&34!==v||(o=t.shiftKey()||33===t.keyCode()?-1:1),a=u=0,d=r.length;u<d;a=++u){if(i=r[a],i.start===b&&i.end===s){if(o){n=a+o;break}38===t.keyCode()?i.incrementBlock(i,r):i.decrementBlock(i,r),n=a;break}(b===s||this.cursor&&this.cursor.start===this.cursor.end)&&i.start<=b&&b<=i.end&&(n=a)}if(o&&0===b&&s===w.length&&r.length>1&&(n=-1===o?r.length-1:0),e=r[n]){for(f=[g[0]],a=_=0,p=r.length;_<p;a=++_)i=r[a],f.push(i.string),f.push(g[a+1]);if(m=f.join(""),!this.checkInput(m))return void t.preventDefault();this.__input.value=m,this.markBlock(t,e),this.storeValue(this.__input.value),t.preventDefault()}}},Input.prototype.__removeContentSize=function(){return t.dom.remove(this.__contentSize),this.__contentSize=null,this},Input.prototype.__removeShadowInput=function(){return this.__removeContentSize(),t.dom.remove(this.__shadow),this.__shadow=null,this.__shadow_focused=!1,this},Input.prototype.preventInvalidInput=function(){return!(!this.__checkInput||!this._prevent_invalid_input)},Input.prototype.__initShadowInput=function(){if((this.preventInvalidInput()||this._content_size||this._correctValueForInput||this._readonly||this._rows)&&!this.__shadow)return this._textarea?this.__shadow=t.dom.$element("textarea","cui-input-shadow"):this.__shadow=t.dom.$element("input","cui-input-shadow",{type:"text"}),this.__shadow.setAttribute("tabindex","-1"),this.__shadow.setAttribute("autocomplete","off"),t.dom.append(document.body,this.__shadow),this._content_size&&this.__initContentSize(),t.Events.listen({type:"input",node:this.__shadow,call:function(e){return function(i){e.__shadowInput(i),e.__unfocusShadowInput(),new t.Event({type:"input",node:e.__input}).dispatch()}}(this)}),t.Events.listen({type:"keyup",node:this.__shadow,call:function(t){return function(e){t.__unfocusShadowInput()}}(this)}),this},Input.prototype.__shadowInput=function(t){var e;e=this.__shadow.value,this._rows&&e.split("\n").length>this._rows||this.preventInvalidInput()&&e.length>0&&!1===this.checkInput(this.correctValueForInput(e))||(this._readonly||(this.__input.value=this.correctValueForInput(e),this.__input.setSelectionRange(this.__shadow.selectionStart,this.__shadow.selectionEnd)),this.initCursor(t))},Input.prototype.checkValue=function(e){if(!t.util.isString(e))throw new Error(this.__cls+".checkValue(value): Value needs to be String or null.");return this},Input.prototype.render=function(){var t,e,i,n;for(Input.__super__.render.call(this),this.replace(this.__createElement(),this.getTemplateKeyForRender()),n=["empty","invalid","valid"],t=0,i=n.length;t<i;t++)e=n[t],this.append(this.__inputHints[e],this.getTemplateKeyForRender());return this},Input.prototype.getTemplateKeyForRender=function(){return null},Input.prototype.isRequired=function(){return this._required},Input.prototype.updateInputState=function(e){var i,n,o,r,s,a,l,u;switch(this.__inputState=null!=e?e:this.__inputState,this.hasUserInput()?(this.addClass("cui-input-has-user-input"),this.removeClass("cui-input-has-no-user-input")):(this.removeClass("cui-input-has-user-input"),this.addClass("cui-input-has-no-user-input")),u=this.getInputState()){case"empty":case"valid":this.removeClass("cui-input-invalid");break;case"invalid":this.addClass("cui-input-invalid")}for(r=["empty","invalid","valid"],i=0,o=r.length;i<o;i++)n=r[i],t.dom.hideElement(null!=(s=this.__inputHints[n])?s.DOM:void 0);return this.hasUserInput()||"invalid"!==u?t.dom.showElement(null!=(l=this.__inputHints[u])?l.DOM:void 0):t.dom.showElement(null!=(a=this.__inputHints.empty)?a.DOM:void 0),this},Input.prototype.getInputState=function(){return!1!==this.__inputState?"valid":this.hasUserInput()||this.isRequired()?"invalid":"empty"},Input.prototype.leaveInput=function(){return"invalid"!==this.getInputState()&&(this.__input.value=this.getValueForDisplay(),this.checkInput()),this},Input.prototype.enterInput=function(){return"invalid"!==this.getInputState()&&(this.__input.value=this.getValueForInput(),this.checkInput()),this},Input.prototype.hasUserInput=function(){return this.__input.value.length>0},Input.prototype.checkInput=function(t){var e;return e=this.__checkInputInternal(t),this.hasShadowFocus()||this.updateInputState(e),e},Input.prototype.__checkInputInternal=function(t){return null==t&&(t=this.__input.value),!this.__checkInput||this.__checkInput(t)},Input.prototype.setInputHint=function(t){var e;return null!=(e=this.__inputHints.input)?e.setText(t):void 0},Input.prototype.setInvalidHint=function(t){var e;return null!=(e=this.__inputHints.invalid)?e.setText(t):void 0},Input.prototype.setValidHint=function(t){var e;return null!=(e=this.__inputHints.valid)?e.setText(t):void 0},Input.prototype.displayValue=function(){var t;return Input.__super__.displayValue.call(this),t=this.getValueForDisplay(),t!==this.__input.value&&(this.__input.value=t),this.checkInput(),this},Input.prototype.getValueForDisplay=function(){return this._getValueForDisplay?this._getValueForDisplay(this,this.getValue()):this.getValue()},Input.prototype.getValueForInput=function(){return this._getValueForInput?this._getValueForInput(this,this.getValue()):this.getValue()},Input.prototype.correctValueForInput=function(t){return this._correctValueForInput?this._correctValueForInput(this,t):t},Input.prototype.getDefaultValue=function(){return""},Input.prototype.getValue=function(){var t;return this.hasData()?Input.__super__.getValue.call(this):null!=(t=this.__input)?t.value:void 0},Input.prototype.enable=function(){var t;return Input.__super__.enable.call(this),null!=(t=this.__input)?t.removeAttribute("disabled"):void 0},Input.prototype.disable=function(){var t;return Input.__super__.disable.call(this),null!=(t=this.__input)?t.setAttribute("disabled",!0):void 0},Input.prototype.focus=function(){var t;return null!=(t=this.__input)&&t.focus(),this},Input.prototype.getCursorBlocks=function(){var t;return t="function"==typeof this.__getCursorBlocks?this.__getCursorBlocks(this.__input.value):void 0,this.checkBlocks(t)},Input.prototype.findBlock=function(t,e,i){var n,o,r,s;for(o=0,r=t.length;o<r;o++){if(n=t[o],e===(s=n.start)&&s===n.end)return n;if("full"===i&&e>=n.start&&e<=n.end)return n;if("left"===i&&e>=n.start&&e<n.end)return n;if("right"===i&&e>n.start&&e<=n.end)return n;if("touch"===i&&e>=n.start&&e<=n.end)return n}return null},Input.prototype.initCursor=function(e){var i,n,o,r,s,a,l,u,c,h,d,p,_,f,m,g,y;if(!1===(o=this.getCursorBlocks()))return void(this.cursor=null);if(0===o.length)return console.warn("initCursor: 0 cursor blocks"),void(this.cursor=null);if(y=this.__input.selectionStart,a=this.__input.selectionEnd,h=this.__input.value.length,this.cursor={shift:null!=(p=this.cursor)?p.shift:void 0,start:null,end:null},"keyup"===e.getType()&&16===e.keyCode()&&(this.cursor.shift=null),"keydown"!==e.getType()||46!==(_=e.keyCode())&&8!==_||(this.cursor.shift=null),t.util.isUndef(this.cursor.shift)&&(this.cursor.shift=null),this.cursor.start=this.findBlock(o,y,"left"),this.cursor.end=this.findBlock(o,a,"right"),(null!=(f=this.cursor.end)?f.idx:void 0)<(null!=(m=this.cursor.start)?m.idx:void 0)&&(this.cursor.end=this.cursor.start),y===a&&!this.cursor.start&&!this.cursor.end){for(r=null,s=null,l=u=y;u>=0;l=u+=-1)if(i=this.findBlock(o,l,"left")){r=y-l;break}for(l=c=y,g=h;c<g;l=c+=1)if(n=this.findBlock(o,l,"left")){s=l-y;break}n&&!i?this.cursor.start=n:i&&!n?this.cursor.start=i:i&&n&&(this.cursor.start=r>s?n:i)}d=this.getRangeFromCursor(),this.cursor.start||this.cursor.end?this.cursor.start?this.cursor.end||(this.cursor.end=this.cursor.start):this.cursor.start=this.cursor.end:this.cursor.start=this.cursor.end=o[o.length-1],d[0]===y&&d[1]},Input.prototype.showCursor=function(t){var e;return this.cursor&&(e=this.getRangeFromCursor(),this.__input.setSelectionRange(e[0],e[1])),this},Input.prototype.checkSelectionChange=function(){var t;return t=this.getSelection(),!this.__currentSelection||this.__currentSelection.start===t.start&&this.__currentSelection.end===t.end||this.handleSelectionChange(),this.__currentSelection=t,this},Input.prototype.getRangeFromCursor=function(){var t,e;return[null!=(t=this.cursor.start)?t.start:void 0,null!=(e=this.cursor.end)?e.end:void 0]},Input.prototype.moveCursor=function(t){var e,i,n,o,r,s,a,l;if(this.cursor){if(t.preventDefault(),!1===(e=this.getCursorBlocks())||0===e.length)return void(this.cursor=null);if(36===t.keyCode())return this.cursor.start=e[0],void(this.cursor.end=e[0]);if(35===t.keyCode())return this.cursor.start=e[e.length-1],void(this.cursor.end=e[e.length-1]);if(46===(null!=(r=this.lastKeyDownEvent)?r.keyCode():void 0))return void this.initCursor(this.lastKeyDownEvent);if(8===(null!=(s=this.lastKeyDownEvent)?s.keyCode():void 0))return void this.initCursor(this.lastKeyDownEvent);if(o=37===t.keyCode(),a=39===t.keyCode()||"input"===t.getType(),l=this.cursor.start.idx,n=this.cursor.end.idx,!e[l]||!e[n])return console.warn("repositioning cursor, not executing cursor move"),void this.initCursor(t);if(46!==t.keyCode())return t.shiftKey()&&null===this.cursor.shift&&(this.cursor.shift=this.cursor.end.idx),null===this.cursor.shift?l===n?(o?l>0&&(this.cursor.start=e[l-1]):a&&l<e.length-1&&(this.cursor.start=e[l+1]),this.cursor.end=this.cursor.start):o?this.cursor.end=this.cursor.start:a&&(this.cursor.start=this.cursor.end):(i=this.cursor.shift,o?i>=n?l>0&&(this.cursor.start=e[l-1]):this.cursor.end=e[n-1]:a&&(i>l?this.cursor.start=e[l+1]:n<e.length-1&&(this.cursor.end=e[n+1]))),this}},Input.prototype.destroy=function(){return this.__removeShadowInput(),Input.__super__.destroy.call(this)},Input.uniqueId=0,Input}(t.DataFieldInput)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.InputBlock=function(i){function InputBlock(t){this.opts=null!=t?t:{},InputBlock.__super__.constructor.call(this,this.opts),this.__start=this._start,this.setString(this._string)}return e(InputBlock,i),InputBlock.prototype.initOpts=function(){return InputBlock.__super__.initOpts.call(this),this.addOpts({start:{mandatory:!0,check:function(e){return t.util.isInteger(e)&&e>=0}},string:{mandatory:!0,check:function(e){return t.util.isString(e)}}})},InputBlock.prototype.setString=function(e){return t.util.assert(t.util.isString(e),t.util.getObjectClass(this)+".setString","Parameter needs to be String with a minimum length of 1.",{string:e}),this.__string=e,this.calcSizes(),this},InputBlock.prototype.getString=function(){return this._string},InputBlock.prototype.calcSizes=function(){var t,e,i,n;for(this.__len=this.__string.length,this.__end=this.__start+this.__len,n=["len","end","start","string"],t=0,i=n.length;t<i;t++)e=n[t],this[e]=this["__"+e];return this},InputBlock.prototype.incrementBlock=function(t,e){return t},InputBlock.prototype.decrementBlock=function(t,e){return t},InputBlock.prototype.toString=function(){return t.util.dump({start:this.__start,end:this.__end,len:this.__len,string:this.__string})},InputBlock}(t.Element)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.NumberInput=function(i){function NumberInput(){return NumberInput.__super__.constructor.apply(this,arguments)}return e(NumberInput,i),NumberInput.prototype.initOpts=function(){return NumberInput.__super__.initOpts.call(this),this.addOpts({decimals:{default:0,check:"Integer"},symbol:{check:function(e){return t.util.isString(e)&&e.length>0}},symbol_before:{default:!1,check:Boolean},store_as_integer:{default:!1,check:Boolean},decimalpoint:{mandatory:!0,default:".",check:[",","."]},separator:{check:function(e){return t.util.isString(e)&&e.length>0}},min:{default:null,check:function(e){return t.util.isNumber(e)}},max:{default:null,check:function(e){return t.util.isNumber(e)}}}),this.removeOpt("checkInput"),this.removeOpt("getValueForDisplay"),this.removeOpt("getValueForInput"),this.removeOpt("correctValueForInput"),this.removeOpt("prevent_invalid_input")},NumberInput.prototype.readOpts=function(){return NumberInput.__super__.readOpts.call(this),this._checkInput=this.__checkInput,this._prevent_invalid_input=!0,this.setMin(this._min),this.setMax(this._max)},NumberInput.prototype.setMin=function(t){this.__min=t},NumberInput.prototype.setMax=function(t){this.__max=t},NumberInput.prototype.formatValueForDisplay=function(e,i){var n,o,r,s,a;if(null==e&&(e=this.getValue()),null==i&&(i=!1),t.util.assert("number"==typeof e||null===e,"NumberInput.formatValueForDisplay","value needs to be Number or null",{value:e,type:typeof e}),t.util.isEmpty(e))return"";if(r=this._store_as_integer?(e/Math.pow(10,this._decimals)).toFixed(this._decimals):e+"",s=r.split("."),s.length>1?(o=s[0],n=s[1]):(o=s[0],n=""),this._decimals>0)for(;n.length<this._decimals;)n+="0";return i?this._decimals>0?o+this._decimalpoint+n:o:(a=this._decimals>0?this.__addSeparator(o)+this._decimalpoint+n:this.__addSeparator(o),this.__addSymbol(a))},NumberInput.prototype.getValue=function(){var t;return t=NumberInput.__super__.getValue.call(this),this.hasData()?t:this.getValueForStore(t)},NumberInput.prototype.getValueForDisplay=function(){return this.formatValueForDisplay(this.getValue())},NumberInput.prototype.getValueForStore=function(e){var i;return t.util.isString(e)||(e+=""),i=parseFloat(e.replace(/,/,".")),isNaN(i)?null:this._store_as_integer?parseInt((i*Math.pow(10,this._decimals)).toFixed(0)):i},NumberInput.prototype.getDefaultValue=function(){return null},NumberInput.prototype.setValue=function(t,e){return null==e&&(e={}),this.checkValue(t),NumberInput.__super__.setValue.call(this,t,e)},NumberInput.prototype.checkValue=function(e){if(null===e)return!0;if(this._decimals>0&&t.util.isFloat(e))return!0;if(t.util.isInteger(e))return!0;throw new Error(this.__cls+".setValue(value): Value needs to be Number or null.")},NumberInput.prototype.__addSymbol=function(e){return t.util.isEmpty(this._symbol)?e:this._symbol_before?this._symbol+" "+e:e+" "+this._symbol},NumberInput.prototype.__addSeparator=function(e){var i,n,o,r,s,a;if(t.util.isEmpty(this._separator))return e;for(s=[],a=e.split("").reverse(),n=i=0,o=a.length;i<o;n=++i)r=a[n],n%3==0&&n>0&&s.push(this._separator),s.push(r);return s.reverse(),s.join("")},NumberInput.prototype.correctValueForInput=function(t){return t.replace(/[,\.]/,this._decimalpoint)},NumberInput.prototype.getValueForInput=function(){return this.formatValueForDisplay(null,!0)},NumberInput.prototype.checkInput=function(t){return null===t||NumberInput.__super__.checkInput.call(this,t)},NumberInput.prototype.__checkInput=function(e){var i,n,o,r,s;if(s=this.hasShadowFocus()?e:e.replace(this._symbol,""),""===(s=s.trim()))return!0;if(this._separator&&(r=new RegExp(RegExp.escape(this._separator),"g"),s=s.replace(r,"")),-1===(n=s.lastIndexOf(this._decimalpoint)))i=s,o="";else{if(0===this._decimals)return!1;i=s.substring(0,n),o=s.substring(n+1)}if(o.length>this._decimals)return!1;if(i.length>0&&!i.match(/^((0|[1-9]+[0-9]*)|(-|-[1-9]|-[1-9][0-9]*))$/))return!1;if(!t.util.isNull(this.__min)){if(this.__min>=0&&"-"===i)return!1;if(i<this.__min)return!1}return!(!t.util.isNull(this.__max)&&i>this.__max)&&(!!o.match(/^([0-9]*)$/)&&!(o.length>this._decimals))},NumberInput.format=function(e,i){var n,o;return null==i&&(i={}),t.util.isEmpty(e)&&(e=null),t.util.isFloat(e)&&!i.hasOwnProperty("decimals")&&(n=e+"",i.decimals=n.length-n.indexOf(".")-1),o=new t.NumberInput(i),o.start(),o.checkInput(e+"")?o.formatValueForDisplay(e):null},NumberInput}(t.Input)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.NumberInputBlock=function(t){function NumberInputBlock(){return NumberInputBlock.__super__.constructor.apply(this,arguments)}return e(NumberInputBlock,t),NumberInputBlock.prototype.incrementBlock=function(t,e){return this.__changeBlock(t,e,1)},NumberInputBlock.prototype.decrementBlock=function(t,e){return this.__changeBlock(t,e,-1)},NumberInputBlock.prototype.__changeBlock=function(t,e,i){var n,o;return o=parseInt(this.__string),n=(""+(o+i)).split(""),t.setString(n.join(""))},NumberInputBlock}(t.InputBlock)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},n={}.hasOwnProperty;t.Template.loadTemplateText(i(181)),t.ItemList=function(i){function ItemList(){return ItemList.__super__.constructor.apply(this,arguments)}return e(ItemList,i),ItemList.prototype.init=function(){return ItemList.__super__.init.call(this),this.addClass("cui-item-list"),this.__body=new t.Template({name:"item-list-body"}),this.append(this.__body,"center")},ItemList.prototype.initOpts=function(){return ItemList.__super__.initOpts.call(this),this.addOpts({items:{mandatory:!0,check:function(e){return t.util.isFunction(e)||t.util.isArray(e)}},active_item_idx:{check:"Integer"},has_items:{default:!1,check:Boolean},allow_null:{check:Boolean},onClick:{check:Function},onActivate:{check:Function},onDeactivate:{check:Function},orientation:{default:"vertical",check:["horizontal","vertical"]}}),this},ItemList.prototype.readOpts=function(){return ItemList.__super__.readOpts.call(this),"horizontal"===this._orientation&&console.error("new CUI.ItemList, orientation == horizontal needs implementation!"),this},ItemList.prototype.setActiveIdx=function(t){this.__active_idx=t},ItemList.prototype.getActiveIdx=function(){return this.__active_idx},ItemList.prototype.getBody=function(){return this.__body},ItemList.prototype.getItemByValue=function(e){var i,n,o,r,s;for(s=this.__body.DOM.children,o=0,r=s.length;o<r;o++)if(n=s[o],(i=t.dom.data(n,"element"))instanceof t.Button&&i.getValue()===e)return i;return null},ItemList.prototype.hasItems=function(e){var i;return!!this._has_items||(i=this.__getItems(e),t.util.isPromise(i)?(console.warn("ItemList.hasItems: opts.items Function returned a Promise. Set opts.has_items to true, in order to avoid the call of that Function."),!0):i.length>0)},ItemList.prototype.__getItems=function(e){return t.util.isFunction(this._items)?this._items(e,this)||[]:this._items},ItemList.prototype.getItems=function(e){var i;return i=this.__getItems(e),t.util.isPromise(i)?i:(new t.Deferred).resolve(i)},ItemList.prototype.__initActiveIdx=function(){var e,i,n,o,r,s;if(void 0===(e=this._active_item_idx))if(r=this.__getItems(),t.util.isPromise(r))e=-1;else{for(n=i=0,s=r.length;i<s;n=++i)if((o=r[n])&&!t.util.isUndef(o.active)&&o.active){e=n;break}void 0===e&&(e=-1)}return null!==e&&(this.__active_idx=-1===e?null:e,this.__radio="item-list--"+this.getUniqueId()),this.__isInitActiveIdx=!0},ItemList.prototype.render=function(e,i){var n;return this.__isInitActiveIdx||this.__initActiveIdx(),this.__preActiveIndex=this.__active_idx,this.__body.empty(),n=this.getItems(i),n.done(function(n){return function(o){var r,s,a,l,u,c,h,d;for(d=t.defaults.class.Button.getOptKeys(),h=!1,s=function(i,o){var r,s,a,l,u,c,p,_;if(i&&!0!==i.hidden&&("function"!=typeof i.hidden||!i.hidden())){if(i.divider)return s=t.dom.div("cui-menu-divider cui-item-list-divider",{role:"menu-item"}),void n.__body.append(s);if(i.label)return u=i.label instanceof t.Label?i.label:t.util.isPlainObject(i.label)?new t.defaults.class.Label(i.label):new t.defaults.class.Label({text:i.label}),u.addClass("cui-menu-item"),void t.dom.append(n.__body.DOM,u.DOM);if(i.content)return void t.dom.append(n.__body.DOM,i.content.DOM||i.content);if(p=function(r){t.Events.listen({type:"cui-button-click",node:r,call:function(s,a){var l,u,c;if("function"==typeof n._onClick&&n._onClick(a.event,r,i,o),(null!=e?e.isAutoCloseAfterClick():void 0)&&!r.hasMenu())return c=function(){return e.hideAll(a.event)},u=e.getElement(),u&&(l=t.dom.getDimensions(e.getElement()),0===l.clientWidth&&0===l.clientHeight)?void c():t.setTimeout({call:c})}})},i instanceof t.Button&&(p(i),i.hasLeft()&&(h=!0)),i instanceof t.Button||i instanceof t.DataField||i instanceof t.Label)return void t.dom.append(n.__body.DOM,i.DOM);for(_={role:"menu-item",radio:n.__radio,radio_allow_null:n._allow_null,onActivate:function(t,e){return n.__radio&&(n.__active_idx=o),"function"==typeof n._onActivate&&n._onActivate(t,i,o,e),n.__deselectPreActivated()},onDeactivate:function(t,e){return n.__radio&&(n.__active_idx=null),"function"==typeof n._onDeactivate&&n._onDeactivate(t,i,o,e),n.__deselectPreActivated()}},a=0,c=d.length;a<c;a++)l=d[a],i.hasOwnProperty(l)&&!_.hasOwnProperty(l)&&(_[l]=i[l]);n.__radio&&n.__active_idx===o&&(_.active=!0),e&&(_.menu_parent=e),r=new t.defaults.class.Button(_),p(r),r.hasLeft()&&(h=!0),t.dom.append(n.__body.DOM,r.DOM)}},l=a=0,c=o.length;a<c;l=++a)r=o[l],u=t.util.isFunction(r)?r(n,e,i):r,s(u,l),h?n.__body.addClass("cui-item-list--has-button-left"):n.__body.removeClass("cui-item-list--has-button-left")}}(this)),n},ItemList.prototype.destroy=function(){var t;return ItemList.__super__.destroy.call(this),null!=(t=this.__body)?t.destroy():void 0},ItemList.prototype.preSelectByKeyword=function(e){var i,n,o,r,s,a,l,u,c,h;if(n=function(i){return function(i){var n;return(i instanceof t.Button||i instanceof t.Label)&&(null!=(n=i.getText())?n.startsWithIgnoreCase(e):void 0)}}(),u=this.__preActiveIndex+1,l=this.__getItemByIndex(u),n(l))return void this.__preActivateItemByIndex(u);for(h=null!=(c=this.__body)?c.DOM.children:void 0,r=o=0,a=h.length;o<a;r=++o)if(s=h[r],i=t.dom.data(s,"element"),n(i)){this.__preActivateItemByIndex(r);break}},ItemList.prototype.activatePreSelectedItem=function(){return this.__activateItemByIndex(this.__preActiveIndex)},ItemList.prototype.preActivateNextItem=function(){return this.__preActivateItemByIndex(this.__preActiveIndex+1)},ItemList.prototype.preActivatePreviousItem=function(){return this.__preActivateItemByIndex(this.__preActiveIndex-1)},ItemList.prototype.__preActivateItemByIndex=function(e){var i;if((i=this.__getItemByIndex(e))instanceof t.Button)return this.__deselectPreActivated(),this.__preActiveIndex=e,t.dom.addClass(i,t.defaults.class.Button.defaults.active_css_class),t.dom.scrollIntoView(i)},ItemList.prototype.__deselectPreActivated=function(){var e;if((e=this.__getItemByIndex(this.__preActiveIndex))instanceof t.Button)return t.dom.removeClass(e,t.defaults.class.Button.defaults.active_css_class)},ItemList.prototype.__activateItemByIndex=function(e){var i;if((i=this.__getItemByIndex(e))instanceof t.Button)return i.activate(),this.setActiveIdx(e)},ItemList.prototype.__getItemByIndex=function(e){var i,n;return i=null!=(n=this.__body)?n.DOM.children[e]:void 0,t.dom.data(i,"element")},ItemList}(t.VerticalLayout)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.EmptyLabel=function(t){function EmptyLabel(t){this.opts=null!=t?t:{},EmptyLabel.__super__.constructor.call(this,this.opts),this.addClass("cui-empty-label")}return e(EmptyLabel,t),EmptyLabel.prototype.readOpts=function(){return EmptyLabel.__super__.readOpts.call(this)},EmptyLabel}(t.MultilineLabel)}).call(e,i(0))},function(t,e,i){(function(t){var e,n=function(t,e){function ctor(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},o={}.hasOwnProperty;e=i(2),t.Template.loadTemplateText(i(182)),t.Label=function(i){function Label(e){var i,n,o,r,s,a;if(this.opts=null!=e?e:{},Label.__super__.constructor.call(this,this.opts),r=this._rotate_90?"label-rotate-90":this._icon||!t.__ng__?"label":"label-no-icon",this.__label=new t.Template({name:r,map_prefix:"cui-label",map:{icon:"label-no-icon"!==r||void 0,content:!0}}),this.registerTemplate(this.__label),this._icon&&!0!==this._icon&&this.setIcon(this._icon),t.util.isEmpty(this._text)?this.setContent(this._content):this.setText(this._text),this._tooltip&&(s=t.util.copyObject(this._tooltip),null==s.element&&(s.element=this.DOM),this.__tooltip=new t.Tooltip(s)),this._multiline&&this.addClass("cui-label-multiline"),this._centered&&this.addClass("cui-label-centered"),this._markdown&&this.addClass("cui-label-markdown"),this._manage_overflow&&this.addClass("cui-label-manage-overflow"),this._padded&&this.addClass("cui-label--padded"),this._size?this.addClass("cui-label-size-"+this._size):t.__ng__||this.addClass("cui-label-size-normal"),this._appearance&&this.addClass("cui-label-appearance-"+this._appearance),this._manage_overflow){i=!0===this._manage_overflow?t.util.copyObject(t.defaults.class.Label.defaults.manage_overflow,!0):this._manage_overflow,o={class:"cui-label-manage-overflow-button",appearance:"flat",switch:!0,hidden:!0,onActivate:function(t){return function(){return t.__label.addClass("cui-label--show-overflow")}}(this),onDeactivate:function(t){return function(){return t.__label.removeClass("cui-label--show-overflow")}}(this)};for(n in o)a=o[n],i.hasOwnProperty(n)&&"class"===n?i[n]+=" "+a:i[n]=a;this.__overflow_button=new t.defaults.class.Button(i),this.append(this.__overflow_button),t.Events.listen({node:this.DOM,type:"viewport-resize",call:function(t){return function(){return t.checkOverflowSize()}}(this)})}}return n(Label,i),Label.defaults={manage_overflow:{icon_inactive:"down",icon_active:"up",active_css_class:""}},Label.prototype.initOpts=function(){return Label.__super__.initOpts.call(this),this.addOpts({text:{check:function(e){return t.util.isString(e)||t.util.isNumber(e)}},content:{check:function(e){return t.util.isContent(e)||t.util.isString(e)}},icon:{check:function(e){return e instanceof t.Icon||t.util.isString(e)||!0===e}},size:{check:["mini","normal","big","bigger"]},appearance:{check:["title","secondary","muted"]},markdown:{mandatory:!0,default:!1,check:Boolean},markdown_opts:{check:"PlainObject"},tooltip:{check:"PlainObject"},group:{check:String},rotate_90:{default:!1,check:Boolean},centered:{default:!1,check:Boolean},multiline:{default:!1,check:Boolean},padded:{default:!1,check:Boolean},manage_overflow:{check:function(e){return t.util.isPlainObject(e)||!0===e||!1===e}}})},Label.prototype.readOpts=function(){var i,n,o;if(Label.__super__.readOpts.call(this),t.util.isNull(this._text)&&t.util.isNull(this._content)&&(this._text=""),this._markdown&&(t.util.assert(!this._content,"new "+this.__cls,"opts.markdown cannot be combined with opts.content, use opts.text instead.",{opts:this.opts}),e?this.__markdown=!0:(console.error("new CUI.Label: Could not find markdown renderer 'marked'. Disabling markedown option.",{opts:this.opts}),this.__markdown=!1)),this.__currentText=null,t.util.assert(t.util.xor(t.util.isNull(this._text),t.util.isNull(this._content)),"new CUI.Label","opts.text and opts.content cannot both be set.",{opts:this.opts}),this._markdown_opts){this.__markdown_opts=t.util.copyObject(t.defaults.marked_opts,!1),n=this._markdown_opts;for(i in n)o=n[i],this.__markdown_opts[i]=o}else this.__markdown_opts=t.defaults.marked_opts;return this._manage_overflow&&t.util.assert(this._multiline,"new CUI.Label","opts.multiline needs to be set for opts.manage_overflow",{opts:this.opts}),this},Label.prototype.setText=function(i,n){return this.__currentText=i,null==n&&(n=this.__markdown),t.util.isEmpty(this.__currentText)?this.empty("content"):n?(this.setContent(t.dom.htmlToNodes(e(this.__currentText,this.__markdown_opts))),this.addClass("cui-label-markdown")):(this.setContent(t.dom.text(this.__currentText)),this.removeClass("cui-label-markdown")),this},Label.prototype.setTextMaxChars=function(e){return t.dom.setAttribute(this.__label.map.content,"data-max-chars",e)},Label.prototype.getText=function(){return this.__currentText},Label.prototype.setContent=function(e){t.util.isString(e)?this.replace(t.dom.htmlToNodes(e),"content"):this.replace(e,"content"),this._manage_overflow&&(this.append(this.__overflow_button),t.dom.waitForDOMInsert({node:this.DOM}).done(function(t){return function(){return t.checkOverflowSize()}}(this)))},Label.prototype.checkOverflowSize=function(){var e,i;if(this.__overflow_button)return this.__label.removeClass("cui-label--show-overflow"),this.__label.addClass("cui-label--measure-overflow"),this.__overflow_button.hide(),e=t.dom.getDimensions(this.__label.map.content),i=t.dom.getCSSFloatValue(e.computedStyle.maxHeight),i>0||(i=e.clientHeight),e.scrollHeight>i?(this.__overflow_button.show(),this.__overflow_button.isActive()&&this.__label.addClass("cui-label--show-overflow")):this.__label.addClass("cui-label--show-overflow"),this.__label.removeClass("cui-label--measure-overflow"),this},Label.prototype.getGroup=function(){return this._group},Label.prototype.setIcon=function(e){var i;return i=e instanceof t.Icon?e:t.util.isEmpty(e)?null:new t.Icon({icon:e}),this.replace(i,"icon"),this},Label.prototype.destroy=function(){var t;return null!=(t=this.__tooltip)&&t.destroy(),Label.__super__.destroy.call(this)},Label}(t.DOMElement),t.defaults.class.Label=t.Label}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.MultilineLabel=function(t){function MultilineLabel(t){this.opts=null!=t?t:{},MultilineLabel.__super__.constructor.call(this,this.opts),this.addClass("cui-label")}return e(MultilineLabel,t),MultilineLabel.prototype.initOpts=function(){return MultilineLabel.__super__.initOpts.call(this),this.mergeOpt("multiline",{default:!0})},MultilineLabel}(t.Label)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty,n=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1};t.ListView=function(i){function ListView(t){this.opts=null!=t?t:{},ListView.__super__.constructor.call(this,this.opts),this.initListView()}return e(ListView,i),ListView.defaults={row_move_handle_tooltip:"Drag to move row"},ListView.prototype.initListView=function(){var e,i,n,o,r,s,a,l;for(this.fixedColsCount=this._fixedCols,this.fixedRowsCount=this._fixedRows,this.__cols=this._cols.slice(0),this._colClasses&&(this.__colClasses=this._colClasses.slice(0)),this._rowMove&&t.util.assert(!this._rowMovePlaceholder,"new CUI.ListView","opts.rowMove cannot be used with opts.rowMovePlaceholder",{opts:this.opts}),(this._rowMove||this._rowMovePlaceholder)&&(this.__cols.splice(0,0,"fixed"),this.__colClasses||(this.__colClasses=[]),this.__colClasses.splice(0,0,"cui-lv-row-move-handle-column")),t.util.assert(this.fixedColsCount<this.__cols.length,"new CUI.ListView","opts.fixedCols must be less than column count.",{opts:this.opts}),this._colResize?this.__colResize=!0:this.fixedRowsCount>0&&void 0===this._colResize&&(this.__colResize=!0),this.__colResize&&t.util.assert(this.fixedRowsCount>0,"new CUI.ListView","Cannot enable col resize with no fixed rows.",{opts:this.opts}),this.__maxCols=[],a=this.__cols,i=n=0,s=a.length;n<s;i=++n)e=a[i],t.util.assert("auto"===e||"maximize"===e||"fixed"===e||"manual"===e,"new "+this.__cls,'Unknown type of col: "'+e+'". opts.cols can only contain "auto" and "maximize" elements.'),"maximize"===e&&(t.util.assert(i>=this.fixedColsCount,"new CUI.ListView","maximized columns can only be in the non-fixed side of the ListView.",{opts:this.opts}),this.__maxCols.push(i));for(this.__maximize_horizontal&&0===this.__maxCols.length&&(r=this.__cols.length-1)>=this.fixedColsCount&&(this.__maxCols.push(r),this.__cols[r]="maximize"),this.rowsCount=0,this.colsCount=this.__cols.length,this.listViewCounter=t.ListView.counter++,this.__manualColWidths=[],this.__colspanRows={},this.colsOrder=[],i=o=0,l=this.colsCount;0<=l?o<l:o>l;i=0<=l?++o:--o)this.colsOrder.push(i);return this.rowsOrder=[],this.__maxRowIdx=-1,this.__resetCellDims(),this.__cells=[],this.__rows=[],this.__lvClass="cui-lv-"+this.listViewCounter,this.__deferredRows=[],this.__isInDOM=!1,this.__doLayoutBound=function(t){return function(){return t.__doLayout()}}(this),this.addClass("cui-list-view")},ListView.prototype.initOpts=function(){return ListView.__super__.initOpts.call(this),this.addOpts({colClasses:{check:"Array"},cols:{mandatory:!0,check:"Array"},fixedCols:{default:0,check:"Integer"},fixedRows:{default:0,check:"Integer"},rowMove:{default:!1,check:Boolean},rowMoveFixedRows:{default:0,check:"Integer"},rowMovePlaceholder:{default:!1,check:Boolean},colResize:{check:Boolean},selectableRows:{check:function(t){return!1===t||!0===t||"multiple"===t}},onSelect:{check:Function},onDeselect:{check:Function},onRowMove:{check:Function},onScroll:{check:Function},header:{deprecated:!0},footer:{deprecated:!0}})},ListView.prototype.readOpts=function(){return this.opts.header&&(this.opts.header_center=this.opts.header),this.opts.footer&&(this.opts.footer_left=this.opts.footer),ListView.__super__.readOpts.call(this),this.__selectableRows=this._selectableRows,this},ListView.prototype.destroy=function(){var e;return delete this.colsOrder,delete this.rowsOrder,delete this.__fillRowQ3,this.__isInDOM=null,t.scheduleCallbackCancel({call:this.__doLayoutBound}),null!=(e=this.listViewTemplate)&&e.destroy(),this.__layoutIsStopped=!1,ListView.__super__.destroy.call(this),this},ListView.prototype.getListViewClass=function(){return this.__lvClass},ListView.prototype.getGrid=function(){return this.grid},ListView.prototype.hasResizableColumns=function(){return this.__colResize},ListView.prototype.hasMovableRows=function(){return this._rowMove},ListView.prototype.isInactive=function(){return!!this.__inactive},ListView.prototype.setInactive=function(e,i){var n;return null==i&&(i="inactive"),this.__inactive=!!e,this.grid&&(this.__inactive?(t.dom.addClass(this.grid,i),this.__inactiveWaitBlock=new t.WaitBlock({element:this.grid,inactive:!0}).show()):(null!=(n=this.__inactiveWaitBlock)&&n.destroy(),this.__inactiveWaitBlock=null,t.dom.removeClass(this.grid,i))),this},ListView.prototype.render=function(){var e,i,n,o,r,s,a,l,u;for(t.util.assert(!this.grid,"ListView.render","ListView already rendered",{opts:this.opts}),o=[],i=["cui-list-view-grid",this.__lvClass],1===this._fixedCols&&(this._rowMove||this._rowMovePlaceholder)&&i.push("cui-list-view-grid-fixed-col-has-only-row-move-handle"),this._rowMovePlaceholder&&i.push("cui-list-view-has-row-move-placeholder"),this._rowMove&&i.push("cui-list-view-has-row-move"),this.__maxCols.length>0&&i.push("cui-list-view-grid-has-maximized-columns"),this.fixedColsCount>0&&i.push("cui-list-view-grid-has-fixed-cols"),this.fixedRowsCount>0&&i.push("cui-list-view-grid-has-fixed-rows"),o.push('<div class="'),o.push(i.join(" ")),o.push('">'),o.push("<style></style>"),e=function(t){return function(e){var n,r,s,a;if(3===e?o.push('<div cui-lv-quadrant="'+e+'" class="cui-drag-scroll cui-list-view-grid-quadrant cui-lv-tbody cui-list-view-grid-quadrant-'+e+" "+t.__lvClass+'-quadrant" tabindex="-1">'):o.push('<div cui-lv-quadrant="'+e+'" class="cui-drag-scroll cui-list-view-grid-quadrant cui-lv-tbody cui-list-view-grid-quadrant-'+e+" "+t.__lvClass+'-quadrant">'),2===e||3===e){for(o.push('<div class="cui-lv-tr-fill-outer"><div class="cui-lv-tr">'),r=t.__getColsFromAndTo(e),n=s=r.from,a=r.to;s<=a;n=s+=1)i=t.__getColClass(n),o.push('<div class="'+i+" cui-lv-td cui-lv-td-fill cui-list-view-grid-fill-col-"+n+'"></div>');o.push("</div></div>")}o.push("</div>")}}(this),this.fixedColsCount>0&&this.fixedRowsCount>0?(o.push('<div class="cui-list-view-grid-inner-top">'),e(0),e(1),o.push("</div>"),o.push('<div class="cui-list-view-grid-inner-bottom">'),e(2),e(3),o.push("</div>")):this.fixedColsCount>0?(o.push('<div class="cui-list-view-grid-inner-bottom">'),e(2),e(3),o.push("</div>")):this.fixedRowsCount>0?(o.push('<div class="cui-list-view-grid-inner-top">'),e(1),o.push("</div>"),o.push('<div class="cui-list-view-grid-inner-bottom">'),e(3),o.push("</div>")):e(3),o.push("</div>"),a=this.center(),a.innerHTML=o.join(""),this.grid=a.firstChild,this.quadrant=[t.dom.matchSelector(a,".cui-list-view-grid-quadrant-0")[0],t.dom.matchSelector(a,".cui-list-view-grid-quadrant-1")[0],t.dom.matchSelector(a,".cui-list-view-grid-quadrant-2")[0],t.dom.matchSelector(a,".cui-list-view-grid-quadrant-3")[0]],this.styleElement=t.dom.matchSelector(a,"style")[0],this.__fillRowQ3=t.dom.matchSelector(this.grid,".cui-list-view-grid-fills-3")[0],this.__topQuadrants=t.dom.matchSelector(a,".cui-list-view-grid-inner-top")[0],0===this.fixedColsCount&&0===this.fixedRowsCount?this.__bottomQuadrants=this.quadrant[3]:this.__bottomQuadrants=t.dom.matchSelector(a,".cui-list-view-grid-inner-bottom")[0],this.__fillCells=[],n=r=0,l=this.colsCount-1;r<=l;n=r+=1)this.__fillCells.push(t.dom.matchSelector(a,".cui-list-view-grid-fill-col-"+n)[0]);return s=function(t){return function(){return t.__syncScrolling(),"function"==typeof t._onScroll?t._onScroll():void 0}}(this),t.Events.listen({node:this.quadrant[3],type:"scroll",call:s}),this.__currentScroll={top:0,left:0},this.hasSelectableRows()&&(u="."+this.__lvClass+"-quadrant > .cui-lv-tr-outer",t.Events.listen({type:["click"],node:this.DOM,selector:u,call:function(e){return function(i){var n;n=t.dom.data(i.getCurrentTarget(),"listViewRow"),n.isSelectable()&&(i.stopImmediatePropagation(),e.selectRow(i,n))}}(this)})),this.quadrant[2]&&t.Events.listen({type:"wheel",node:this.quadrant[2],call:function(t){return function(e){var i;if(i=100,e.wheelDeltaY()>0){if(t.quadrant[3].scrollTop===t.quadrant[3].scrollHeight-t.quadrant[3].offsetHeight)return;t.quadrant[3].scrollTop+=i}else{if(!(e.wheelDeltaY()<0))return;if(0===t.quadrant[3].scrollTop)return;t.quadrant[3].scrollTop-=i}e.preventDefault(),s()}}(this)}),t.Events.listen({type:"viewport-resize",node:this.grid,call:function(t){return function(e,i){t.__hasLayout&&t.__doLayout({resetRows:!(!i.css_load&&!i.tab)})}}(this)}),t.Events.listen({type:"content-resize",node:this.DOM,call:function(e){return function(i,o){var r,s;e.__isInDOM&&(r=t.dom.closest(i.getNode(),".cui-lv-td"))&&(i.stopPropagation(),s=parseInt(r.getAttribute("row")),n=parseInt(r.getAttribute("col")),e.fixedColsCount>0&&t.dom.getAttribute(r.parentNode,"cui-lv-tr-unmeasured")||(e.__resetRowDim(s),e.__scheduleLayout()))}}(this)}),t.defaults.debug&&this.__addDebugControl(),this.isInactive()&&this.setInactive(!0),this.appendDeferredRows(),t.dom.waitForDOMInsert({node:this.DOM}).done(function(t){return function(){return t.__isInDOM=!0,t.__doLayout()}}(this)),this.DOM},ListView.prototype.__getScrolling=function(){return{top:this.quadrant[3].scrollTop,left:this.quadrant[3].scrollLeft,height:this.quadrant[3].scrollHeight}},ListView.prototype.getScrollingContainer=function(){return this.quadrant[3]},ListView.prototype.__setScrolling=function(t){return this.quadrant[3].scrollTop=t.top,this.quadrant[3].scrollLeft=t.left},ListView.prototype.__syncScrolling=function(){return this.__currentScroll=this.__getScrolling(),this.fixedColsCount>0&&(this.quadrant[2].scrollTop=this.__currentScroll.top),this.fixedRowsCount>0&&(this.quadrant[1].scrollLeft=this.__currentScroll.left),this.__fillRowQ3&&(this.__fillRowQ3.style.width="",this.__fillRowQ3.style.width=this.__getValue(this.__fillRowQ3.scrollWidth)),this},ListView.prototype.__setMargins=function(){var t,e,i,n;return n=this.quadrant[3].offsetWidth-this.quadrant[3].clientWidth,t=this.quadrant[3].offsetHeight-this.quadrant[3].clientHeight,null!=(e=this.quadrant[1])&&(e.style.marginRight=this.__getValue(n)),null!=(i=this.quadrant[2])&&(i.style.marginBottom=this.__getValue(t)),this},ListView.prototype.getSelectedRows=function(){var t,e,i,n,o,r;for(r=[],n=this.rowsOrder,t=0,e=n.length;t<e;t++)o=n[t],i=this.getListViewRow(o),i.isSelected()&&r.push(i);return r},ListView.prototype.hasSelectableRows=function(){return!!this.__selectableRows},ListView.prototype.selectRowById=function(t){return this.selectRow(null,this.getListViewRow(t),!0)},ListView.prototype.selectRowByDisplayIdx=function(t){return this.selectRowById(this.getRowIdx(t))},ListView.prototype.selectRow=function(e,i,n){var o,r,s,a,l,u;if(null==n&&(n=!1),t.util.assert(t.util.isNull(i)||i instanceof t.ListViewRow,this.__cls+".setSelectedRow","Parameter needs to be instance of CUI.ListViewRow.",{selectedRow:i}),r=new t.Deferred,l=function(t){return function(){i.isSelected()?n?r.resolve():i.deselect(e,i).done(r.resolve).fail(r.reject):i.select(e).done(r.resolve).fail(r.reject)}}(),o=function(e){return function(n){var o,s,a,u,c,h;for(null==n&&(n=!0),c=[],h=e.getSelectedRows(),s=0,a=h.length;s<a;s++)o=h[s],i===o&&n||(u=o.deselect(null,i),t.util.isPromise(u)&&c.push(u));return t.when(c).done(l).fail(r.reject)}}(this),!0===this.__selectableRows)o();else if("multiple"===this.__selectableRows)if(null!=e?e.ctrlKey():void 0)l();else if((null!=e?e.shiftKey():void 0)&&this.getSelectedRows().length>0)for(u=this.getSelectedRows().pop(),a=u.getRowIdx(),s=i.getRowIdx();s!==a;)this.getListViewRow(s).select(e),s>a?s--:s++;else o(!1);else l();return r.promise()},ListView.prototype.getCellByTarget=function(e){var i;return t.dom.is(e,".cui-lv-td")?(i={col_i:parseInt(e.getAttribute("col")),row_i:parseInt(e.getAttribute("row"))},i.display_col_i=this.getDisplayColIdx(i.col_i),i.display_row_i=this.getDisplayRowIdx(i.row_i),i):null},ListView.prototype.getRowMoveTool=function(e){return null==e&&(e={}),new t.ListViewRowMove(e)},ListView.prototype.getListViewRow=function(e){return t.dom.data(this.getRow(e)[0],"listViewRow")},ListView.prototype.getDisplayColIdx=function(t){return this.colsOrder.indexOf(parseInt(t))},ListView.prototype.getDisplayRowIdx=function(t){return this.rowsOrder.indexOf(parseInt(t))},ListView.prototype.getColIdx=function(e){return t.util.assert(t.util.isArray(this.colsOrder),"ListView["+this.listViewCounter+"].getColIdx","colsOrder Array is missing",{this:this,display_col_i:e}),this.colsOrder[e]},ListView.prototype.getRowIdx=function(t){return this.rowsOrder[t]},ListView.prototype.moveInOrderArray=function(e,i,n,o){var r,s;return r=n.indexOf(e),s=n.indexOf(i),t.util.moveInArray(r,s,n,o),null},ListView.prototype.moveRow=function(e,i,n,o){var r,s,a,l,u,c,h,d;for(null==n&&(n=!1),null==o&&(o=!0),t.util.assert(e>=this.fixedRowsCount&&i>=this.fixedRowsCount,"ListView.moveRow","from_i and to_i must not be in flexible area of the list view",{from_i:e,to_i:i,fixed_i:this.fixedRowsCount}),a=n?t.dom.insertAfter:t.dom.insertBefore,h=this.getRow(e),l=u=0,c=h.length;u<c;l=++u)d=h[l],a(this.getRow(i)[l],d);return r=this.getDisplayRowIdx(e),s=this.getDisplayRowIdx(i),this.moveInOrderArray(e,i,this.rowsOrder,n),o&&("function"==typeof this._onRowMove&&this._onRowMove(r,s,n),t.Events.trigger({type:"row_moved",node:this.grid,info:{from_i:e,to_i:i,display_from_i:r,display_to_i:s,after:n}})),this},ListView.prototype.rowAddClass=function(e,i){var n,o,r,s;if(s=this.getRow(e)){for(n=0,o=s.length;n<o;n++)r=s[n],t.dom.addClass(r,i);return this}},ListView.prototype.rowRemoveClass=function(e,i){var n,o,r,s;if(s=this.getRow(e)){for(n=0,o=s.length;n<o;n++)r=s[n],t.dom.removeClass(r,i);return this}},ListView.prototype.getColdef=function(t){return this.__cols[t]},ListView.prototype.getColsCount=function(){return this.colsCount},ListView.prototype.resetColWidth=function(t){return delete this.__manualColWidths[t],this.__resetColWidth(t),this.__doLayout({resetRows:!0}),this},ListView.prototype.setColWidth=function(t,e){return this.__manualColWidths[t]=Math.max(5,e),delete this.__colWidths[t],this.__doLayout({resetRows:!0}),this},ListView.prototype.getManualColWidth=function(t){return this.__manualColWidths[t]},ListView.prototype.getRowHeight=function(t){return this.__rows[t][0].offsetHeight},ListView.prototype.getColWidth=function(t){return this.__colWidths[t]},ListView.prototype.getCellGridRect=function(e,i){var n,o,r,s,a;return(n=null!=(a=this.__cells[e])?a[i]:void 0)?(r=t.dom.getRect(this.grid),s={top:r.top,left:r.left},o=t.dom.getDimensions(n),{left_abs:o.clientBoundingRect.left,top_abs:o.clientBoundingRect.top,left:o.clientBoundingRect.left-s.left,top:o.clientBoundingRect.top-s.top,width:o.borderBoxWidth,height:o.borderBoxHeight,contentWidthAdjust:o.contentWidthAdjust,contentHeightAdjust:o.contentHeightAdjust}):null},ListView.prototype.getRowGridRect=function(e){var i,n,o,r,s,a,l,u,c;for(n={width:0},u=this.__rows[e],s=0,a=u.length;s<a;s++)c=u[s],o=t.dom.getDimensions(c),n.width=n.width+o.borderBoxWidth,n.hasOwnProperty("height")||(n.height=o.borderBoxHeight,n.top=o.clientBoundingRect.top),n.hasOwnProperty("left")||(n.left=o.clientBoundingRect.left);return r=t.dom.getRect(this.grid),i={top:r.top,left:r.left},l={left_abs:n.left,top_abs:n.top,left:n.left-i.left,top:n.top-i.top,height:n.height},l.width=t.dom.width(this.getGrid()),l},ListView.prototype.appendRow=function(t,e){return null==e&&(e=!this.grid),e?this.__deferRow(t):this.appendRows([t])},ListView.prototype.prependRow=function(e){var i;return t.util.assert(!this.isDestroyed(),"ListView.prependRow","ListView "+this.listViewCounter+" is already destroyed."),i=++this.__maxRowIdx,this.rowsCount++,this.rowsOrder.splice(0,0,i),this.__addRow(i,e,"prepend")},ListView.prototype.replaceRow=function(t,e){return this.__addRow(t,e,"replace")},ListView.prototype.insertRowAt=function(e,i){return t.util.assert(!this.isDestroyed(),"ListView.insertRowAfter","ListView "+this.listViewCounter+" is already destroyed."),e===this.rowsCount||0===this.rowsCount?this.appendRow(i):0===e?this.prependRow(i):this.insertRowBefore(this.getRowIdx(e),i)},ListView.prototype.insertRowAfter=function(e,i){var n,o;return t.util.assert(!this.isDestroyed(),"ListView.insertRowAfter","ListView #"+this.listViewCounter+" is already destroyed."),o=this.getDisplayRowIdx(e),t.util.assert(o>-1,"ListView.insertRowAfter","ListView #"+this.listViewCounter+": Row "+e+" not found.",{row_i:e,row:i,rowsCount:this.rowsCount}),n=++this.__maxRowIdx,this.rowsCount++,this.rowsOrder.splice(o+1,0,n),this.__addRow(n,i,"after",e)},ListView.prototype.insertRowBefore=function(e,i){var n,o,r;return t.util.assert(!this.isDestroyed(),"ListView.insertRowBefore","ListView #"+this.listViewCounter+" is already destroyed."),0===(r=this.getDisplayRowIdx(e))?this.prependRow(i):(n=this.getRowIdx(r-1),o=++this.__maxRowIdx,this.rowsCount++,this.rowsOrder.splice(r,0,o),this.__addRow(o,i,"after",n))},ListView.prototype.removeAllRows=function(){var t,e,i,n;for(i=this.rowsOrder.slice(0),t=0,e=i.length;t<e;t++)n=i[t],this.removeRow(n);return this.__scheduleLayout(),this},ListView.prototype.removeDeferredRow=function(e){var i;return i=t.util.removeFromArray(e,this.__deferredRows),t.util.assert(1===i,"ListView.removeListViewRow","row not found",{listViewRow:e}),this},ListView.prototype.removeRow=function(e){var i,n,o,r,s;for(t.util.assert(null!==e&&e>=0,"ListView.removeRow","row_i must be >= 0",{row_i:e}),i=this.getDisplayRowIdx(e),t.util.assert(i>-1,"ListView.removeRow","display_row_id not found for row_i",{row_i:e}),this.rowsOrder.splice(i,1),this.rowsCount--,delete this.__colspanRows[e],r=this.getRow(e),n=0,o=r.length;n<o;n++)s=r[n],t.dom.remove(s);return delete this.__rows[e],this.__resetRowDim(e),delete this.__cells[e],this.__scheduleLayout(),this},ListView.prototype.appendDeferredRows=function(){return this.__deferredRows.length&&(this.appendRows(this.__deferredRows),this.__deferredRows=[]),this},ListView.prototype.getRow=function(t){return this.__rows[t]},ListView.prototype.getBottom=function(){return this.__bottomQuadrants},ListView.prototype.getTop=function(){return this.__topQuadrants},ListView.prototype.__scheduleLayout=function(){if(this.__isInDOM)return this.layoutIsStopped()?void(this.__layoutAfterStart=!0):(t.scheduleCallback({ms:10,call:this.__doLayoutBound}),this)},ListView.prototype.layoutIsStopped=function(){return this.__layoutIsStopped},ListView.prototype.stopLayout=function(){return!this.__layoutIsStopped&&(this.__layoutIsStopped=!0,!0)},ListView.prototype.startLayout=function(){return this.__layoutAfterStart&&(this.__layoutAfterStart=!1,this.__doLayout()),this.__layoutIsStopped=null,this},ListView.prototype.__doLayout=function(e){var i,o,r,s,a,l,u,c,h,d,p,_,f,m,g,y,v,b,w,k,D,x,M,C,O,T,L,S,I,P,F,E,B,V,R,z,A,Y,H,N,U,j;for(null==e&&(e={}),a=[],i=function(t){return function(e,i){return a.push("."+t.__lvClass+'-cell[col="'+e+'"] { width: '+i+"px !important; flex: 0 0 auto !important;}")}}(this),d=!1,h=!1,this.__colWidths=[],S=this.__fillCells,u=f=0,y=S.length;f<y;u=++f)c=S[u],r=this.getColIdx(u),M=this.__manualColWidths[r],M>0?(h=!0,i(r,M),c.style.setProperty("width",M+"px"),c.style.setProperty("flex","0 0 auto")):(n.call(this.__maxCols,r)>=0&&(d=!0),c.style.removeProperty("width"),c.style.removeProperty("flex"));for(I=this.__fillCells,u=m=0,v=I.length;m<v;u=++m)c=I[u],r=this.getColIdx(u),this.__colWidths[r]=c.offsetWidth;this.__maximize_horizontal&&(!d&&h?t.dom.addClass(this.grid,"cui-lv--max-last-col"):t.dom.removeClass(this.grid,"cui-lv--max-last-col")),this.styleElement.innerHTML=a.join("\n"),P=this.__colspanRows;for(A in P){H=P[A];for(r in H){for(s=H[r],o=t.dom.matchSelector(this.grid,"."+this.__lvClass+'-cell[row="'+A+'"][col="'+r+'"]')[0],j=0,p=g=0,F=s;g<F;p=g+=1)j+=this.__colWidths[parseInt(r)+p];l=t.dom.getDimensions(o),"border-box"===l.computedStyle.boxSizing?o.style.setProperty("width",j+"px","important"):o.style.setProperty("width",j-l.paddingHorizontal-l.borderHorizontal+"px","important")}}if(this.fixedColsCount>0)for(E=[0,2],x=0,b=E.length;x<b;x++){for(L=E[x],N=[],U=e.resetRows?".cui-lv-tr-outer":'[cui-lv-tr-unmeasured="'+this.listViewCounter+'"]',B=t.dom.matchSelector(this.grid,"."+this.__lvClass+"-quadrant[cui-lv-quadrant='"+L+"'] > "+U),C=0,w=B.length;C<w;C++)z=B[C],N[parseInt(t.dom.getAttribute(z,"row"))]=z,t.dom.removeAttribute(z,"cui-lv-tr-unmeasured");for(V=t.dom.matchSelector(this.grid,"."+this.__lvClass+"-quadrant[cui-lv-quadrant='"+(L+1)+"'] > "+U),_=O=0,k=V.length;O<k;_=++O)z=V[_],Y=parseInt(t.dom.getAttribute(z,"row")),t.dom.prepareSetDimensions(N[Y]),z.__offsetHeight=z.offsetHeight;for(R=t.dom.matchSelector(this.grid,"."+this.__lvClass+"-quadrant[cui-lv-quadrant='"+(L+1)+"'] > "+U),_=T=0,D=R.length;T<D;_=++T)z=R[_],Y=parseInt(t.dom.getAttribute(z,"row")),t.dom.setDimensions(N[Y],{borderBoxHeight:z.__offsetHeight}),delete z.__offsetHeight,t.dom.removeAttribute(z,"cui-lv-tr-unmeasured")}return this.__setMargins(),this.__addRowsOddEvenClasses(),this.__maximize_horizontal&&this.__maximize_vertical||t.Events.trigger({type:"content-resize",exclude_self:!0,node:this.DOM}),this.__hasLayout=!0,this},ListView.prototype.__addRowsOddEvenClasses=function(){return(this.rowsCount-this.fixedRowsCount)%2==0?(t.dom.addClass(this.grid,"cui-list-view-grid-rows-even"),t.dom.removeClass(this.grid,"cui-list-view-grid-rows-odd")):(t.dom.removeClass(this.grid,"cui-list-view-grid-rows-even"),t.dom.addClass(this.grid,"cui-list-view-grid-rows-odd")),this},ListView.prototype.__getValue=function(e){return isNaN(parseFloat(e))?t.util.isNull(e)?"":e:e+"px"},ListView.prototype.hideWaitBlock=function(){return this.__waitBlock&&(this.__waitBlock.destroy(),delete this.__waitBlock),this},ListView.prototype.showWaitBlock=function(){return this.__waitBlock?this:(this.__waitBlock=new t.WaitBlock({element:this.DOM}),this.__waitBlock.show(),this)},ListView.prototype.__debugRect=function(t,e){var i;return i=this.grid.rect(),this.grid.rect(!0,500,"ListView[#"+this.listViewCounter+"]."+t+" "+e+"ms "+i.width+"x"+i.height)},ListView.prototype.appendRows=function(e){var i,n,o,r,s;for(t.util.assert(!this.isDestroyed(),"ListView.appendRow","ListView "+this.listViewCounter+" is already destroyed."),i=n=0,o=e.length;n<o;i=++n)e[i],r=++this.__maxRowIdx,0===i&&(s=r),this.rowsCount++,this.rowsOrder.push(r);return this.__addRows(s,e),this},ListView.prototype.__getColsFromAndTo=function(t){switch(t){case 0:case 2:return{from:0,to:this.fixedColsCount-1};case 1:case 3:return{from:this.fixedColsCount,to:this.colsCount-1}}},ListView.prototype.__deferRow=function(t){return this.__deferredRows.push(t)},ListView.prototype.__addRow=function(t,e,i,n){return null==e&&(e=null),null==i&&(i="append"),null==n&&(n=null),this.__addRows(t,[e],i,n)},ListView.prototype.__getQuadrants=function(t){return this.getDisplayRowIdx(t)<this.fixedRowsCount?[0,1]:[2,3]},ListView.prototype.__addRows=function(e,i,n,o){var r,s,a,l,u,c,h,d,p,_,f,m,g,y,v,b,w,k,D,x,M,C,O,T,L,S,I,P,F,E,B,V,R,z;if(null==i&&(i=[]),null==n&&(n="append"),null==o&&(o=null),t.util.assert(this.grid,"ListView.__addRows","ListView.render has not been called yet.",{row_i:e,listView:this}),t.util.assert("append"===n||"prepend"===n||"after"===n||"replace"===n,"ListView.__addRows",'mode "'+n+'" not supported',{row_i:e}),"ListView["+this.listViewCounter+"].__addRows: Adding "+i.length+" rows, starting at "+e+".",m=[[],[],[],[]],r=n,"after"===r&&this.getDisplayRowIdx(e)===this.fixedRowsCount&&(n="prepend"),"replace"===n||"after"===n){switch(n){case"replace":t.util.assert(1===i.length,"ListView.__addRows",'Can only use mode "'+n+'" on one row',{listViewRows:i}),z=e,this.__resetRowDim(z);break;case"after":z=o}l=this.__rows[z],t.util.assert(l.length>=1,"ListView.__addRows","anchor row "+z+" for mode "+n+" not found.",{rows:this.__rows,row_i:z,mode:r,mode_used:n})}for(z=y=e,P=z+i.length-1;y<=P;z=y+=1)for(this.__cells[z]=[],this.__rows[z]=[],F=this.__getQuadrants(z),v=0,w=F.length;v<w;v++)if(I=F[v],f=this.__getColsFromAndTo(I),!(f.to<f.from)){for(this.fixedColsCount>0?m[I].push('<div class="cui-lv-tr-outer" cui-lv-tr-unmeasured="'+this.listViewCounter+'" row="'+z+'"><div class="cui-lv-tr">'):m[I].push('<div class="cui-lv-tr-outer" row="'+z+'"><div class="cui-lv-tr">'),d=b=f.from,E=f.to;b<=E;d=b+=1)h=this.getColIdx(d),B=this.__getColWidth(z,h),B[0],B[1],c=this.__getColClass(h),m[I].push('<div class="cui-lv-td '+c+" "+this.__lvClass+'-cell" col="'+h+'" row="'+z+'"></div>');m[I].push("</div></div>")}for(p=function(e){return function(i){var n,o,r,s,a,l,u,c,h,d;for(n=t.dom.matchSelector(i,".cui-lv-td"),c=0,l=n.length;c<l;c++)a=n[c],o=parseInt(a.getAttribute("col")),r=parseInt(a.getAttribute("row")),e.__cells[r][o]=a;for(s=t.dom.matchSelector(i,".cui-lv-tr-outer"),h=0,u=s.length;h<u;h++)d=s[h],z=parseInt(d.getAttribute("row")),e.__rows[z].push(d)}}(this),u=0,I=M=0;M<=3;I=++M)if(0!==m[I].length)if(L=document.createElement("div"),L.innerHTML=m[I].join(""),p(L),"append"!==n)if("prepend"!==n)if(R=l[u],u++,"after"!==n)"replace"===n&&(O=L.firstChild,t.dom.replaceWith(R,O));else for(;O=L.lastChild;)t.dom.insertAfter(R,O);else for(;O=L.lastChild;)this.quadrant[I].insertBefore(O,this.quadrant[I].firstChild);else if(2===I||3===I)for(;O=L.firstChild;)this.quadrant[I].insertBefore(O,this.quadrant[I].lastChild);else for(;O=L.firstChild;)this.quadrant[I].appendChild(O);if(this.fixedRowsCount>0&&(_=this.quadrant[1].childNodes,this.fixedRowsCount<_.length))for(a=this.fixedColsCount>0?[0,1]:[1],C=0,V=_.length-this.fixedRowsCount;C<V;C+=1)for(T=0,k=a.length;T<k;T++)s=a[T],this.quadrant[s+2].firstChild?this.quadrant[s+2].insertBefore(this.quadrant[s].lastChild,this.quadrant[s+2].firstChild):this.quadrant[s+2].appendChild(this.quadrant[s].lastChild);for(g=S=0,D=i.length;S<D;g=++S)x=i[g],t.util.isPromise(x)?function(t){return function(i){return x.done(function(n){return t.__appendCells(n,e+i)})}}(this)(g):this.__appendCells(x,e+g);return this.__scheduleLayout(),this},ListView.prototype.__appendCells=function(e,i){var n,o,r,s,a,l,u,c,h,d,p,_,f,m,g;for(t.util.assert(e instanceof t.ListViewRow,"ListView.addRow","listViewRow needs to be instance of ListViewRow or Deferred which returns a ListViewRow",{listViewRow:e}),e.setRowIdx(i).setListView(this),f=this.__rows[i],u=0,d=f.length;u<d;u++)g=f[u],t.dom.data(g,"listViewRow",e);for(e.addClass((e.getClass()||"")+" "+t.util.toDash(t.util.getObjectClass(e))),this._rowMove?this.getDisplayRowIdx(i)>=this.fixedRowsCount+this._rowMoveFixedRows?e.getColumns()[0]instanceof t.ListViewColumnRowMoveHandle||e.prependColumn(new t.ListViewColumnRowMoveHandle):e.getColumns()[0]instanceof t.ListViewColumnRowMoveHandlePlaceholder||e.prependColumn(new t.ListViewColumnRowMoveHandlePlaceholder):this._rowMovePlaceholder&&(e.getColumns()[0]instanceof t.ListViewColumnRowMoveHandlePlaceholder||e.prependColumn(new t.ListViewColumnRowMoveHandlePlaceholder)),n=e.getColumns(),l=0,s=c=0,p=n.length;c<p;s=++c)if(r=n[s],_=r.render(),o=this.__cells[i][s+l],t.util.assert(o,"ListView.__appendCells","Cell not found: row: "+i+" column: "+(s+l+1)+". colsCount: "+this.colsCount,{row:e}),t.util.isNull(_)||t.dom.append(o,_),r.setColumnIdx(s),r.setElement(o),a=r.getColspan(),t.util.assert(s+l+a-1<this.colsCount,"ListView.__appendCells","Colspan "+a+" exceeds cols count "+this.colsCount+", unable to append cell.",{row_i:i,col_i:s,colspan_offset:l,colspan:a,column:r,row:e,ListView:this}),a>1)for(o.setAttribute("colspan",a),this.__colspanRows[i]||(this.__colspanRows[i]={}),this.__colspanRows[i][s+l]=a,h=1,m=a;1<=m?h<m:h>m;1<=m?++h:--h)t.dom.remove(this.__cells[i][s+l+1]),delete this.__cells[i][s+l+1],l++;t.util.assert(n.length+l<=this.colsCount,"ListView.addRow","ListViewRow provided more columns ("+(n.length+l)+") than colsCount ("+this.colsCount+") is set to",{colsCount:this.colsCount,cols:n}),e.addedToListView(this.__rows[i])},ListView.prototype.__getColClass=function(e){var i,o,r;return o=null!=(r=this.__colClasses)?r[e]:void 0,i=[],t.util.isArray(o)?i.push.apply(i,o):t.util.isEmpty(o)||i.push(o),n.call(this.__maxCols,e)>=0&&i.push("cui-lv-td-max"),i.join(" ")},ListView.prototype.__resetRowDim=function(e){var i,n,o,r,s,a,l,u;if(delete this.__cellDims[e],delete this.__rowHeights[e],this.fixedColsCount>0&&this.__rows[e])for(a=this.__rows[e],o=0,s=a.length;o<s;o++)u=a[o],t.dom.setAttribute(u,"cui-lv-tr-unmeasured",this.listViewCounter);for(n=r=0,l=this.colsCount-1;0<=l?r<=l:r>=l;n=0<=l?++r:--r)i=this.getColIdx(n),this.__resetCellStyle(e,i);return this},ListView.prototype.__resetCellStyle=function(e,i){var n,o;return n=null!=(o=this.__cells[e])?o[i]:void 0,n&&t.dom.setStyleOne(n,"cssText",""),n},ListView.prototype.__resetColWidth=function(t){var e,i,n,o,r,s,a,l;for(s=this.__cellDims,n=0,r=s.length;n<r;n++)(e=s[n])&&delete e[t];for(i=o=0,a=this.rowsCount-1;0<=a?o<=a:o>=a;i=0<=a?++o:--o)l=this.getRowIdx(i),this.__resetCellStyle(l,t);return this.__fillCells[t].style.cssText="",this},ListView.prototype.__resetCellDims=function(t){return this.__cellDims=[],this.__colWidths=[],this.__rowHeights=[]},ListView.prototype.__isMaximizedCol=function(t){return n.call(this.__maxCols,t)>=0&&!this.__manualColWidths.hasOwnProperty(t)},ListView.counter=0,ListView.prototype.__getColWidth=function(t,e){var i,n,o,r,s,a,l;if((o=null!=(a=this.__colspanRows[t])?a[e]:void 0)>1){for(n=0,s=!1,i=r=e,l=e+o-1;r<=l;i=r+=1)this.__isMaximizedCol(i)&&(s=!0),n+=this.__colWidths[i];return[n,s]}return[this.__colWidths[e],this.__isMaximizedCol(e)]},ListView.prototype.__debugCall=function(e,i){var n,o,r;return t.defaults.debug?(o=function(){return(new Date).getTime()},r=o(),i(),n=o(),this.__debugRect(e,n-r)):i()},ListView.prototype.__addDebugControl=function(){return t.Events.listen({type:"contextmenu",node:this.DOM,call:function(e){return function(i){var n;if(i.altKey()&&!(i.ctrlKey()||i.shiftKey()||i.metaKey()))return i.preventDefault(),i.stopPropagation(),e.grid.rect(!0,500),function(t,e){return t+": "+(e?"ON":"OFF")},n=[{label:"ListView[#"+e.listViewCounter+"] Debug Menu"},{text:"layout",onClick:function(){return e.__debugCall("__doLayout",function(){return e.__doLayout({resetRows:!0})})}},{text:"flash",onClick:function(){return e.grid.rect(!0,1e3,"ListView[#"+e.listViewCounter+"]")}},{text:"debug",onClick:function(){return e.__debugCall("debug",function(){return console.debug("ListView[#"+e.listViewCounter+"]",e),console.debug("opts:",e.opts),console.debug("manualColWidths:",t.util.dump(e.__manualColWidths)),console.debug("colWidths:",t.util.dump(e.__colWidths),"rowHeights:",e.__rowHeights)})}},{text:"appendRow",onClick:function(){var i,n,o,r,s,a;for(s=new t.ListViewRow,a=e._cols,n=o=0,r=a.length;o<r;n=++o)a[n],i=e.getColIdx(n),s.addColumn(new t.ListViewColumn({text:e.getColdef(i)+" "+e.rowsCount}));return e.appendRow(s)}},{text:"removeRow",onClick:function(){return e.removeRow(e.getRowIdx(e.rowsCount-1))}},{text:"close",onClick:function(){return e.__control.destroy()}}],new t.Menu({auto_close_after_click:!1,itemList:{items:n},show_at_position:{top:i.pageY(),left:i.pageX()}}).show(),!1}}(this)}),this},ListView}(t.SimplePane)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function ctor(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},n={}.hasOwnProperty;t.ListViewColumn=function(n){function ListViewColumn(){return this.getColspan=e(this.getColspan,this),this.setColspan=e(this.setColspan,this),ListViewColumn.__super__.constructor.apply(this,arguments)}return i(ListViewColumn,n),ListViewColumn.prototype.readOpts=function(){return ListViewColumn.__super__.readOpts.call(this),this.__cl=this._class||"",this.__attrs=this._attrs||null},ListViewColumn.prototype.initOpts=function(){return ListViewColumn.__super__.initOpts.call(this),this.addOpts({class:{default:"",check:String},attrs:{default:null,check:"PlainObject"},text:{check:String},colspan:{check:"Integer"},element:{check:function(e){return t.util.isContent(e)||t.util.isString(e)}},onSetElement:{check:Function}})},ListViewColumn.prototype.setRow=function(t){this.listViewRow=t},ListViewColumn.prototype.getRow=function(){return this.listViewRow},ListViewColumn.prototype.setColumnIdx=function(t){return this.col_i=t,this},ListViewColumn.prototype.getColumnIdx=function(){return this.col_i},ListViewColumn.prototype.render=function(){return t.util.isUndef(this._element)?t.util.isEmpty(this._text)?null:new t.Label({text:this._text}).DOM:this._element.DOM?this._element.DOM:this._element},ListViewColumn.prototype.getAttrs=function(){return this.__attrs||{}},ListViewColumn.prototype.setElement=function(e){return this.__element=e,this.addClass(this.getClass()),this.__attrs&&t.dom.setAttributeMap(this.__element,this.__attrs),"function"==typeof this._onSetElement&&this._onSetElement(this),this.__element},ListViewColumn.prototype.getElement=function(){return this.__element},ListViewColumn.prototype.getClass=function(){return this.__cl},ListViewColumn.prototype.addClass=function(e){return this.__element?this.__element instanceof HTMLElement&&t.dom.addClass(this.__element,e):this.__cl+=" "+e,this},ListViewColumn.prototype.removeClass=function(e){return this.__element instanceof HTMLElement&&t.dom.removeClass(this.__element,e),this},ListViewColumn.prototype.setColspan=function(t){return this._colspan=t},ListViewColumn.prototype.getColspan=function(){var e;return e=t.util.isFunction(this._colspan)?parseInt(this._colspan()):parseInt(this._colspan),e>1?e:1},ListViewColumn}(t.Element)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.ListViewColumnEmpty=function(t){function ListViewColumnEmpty(){return ListViewColumnEmpty.__super__.constructor.apply(this,arguments)}return e(ListViewColumnEmpty,t),ListViewColumnEmpty.prototype.render=function(){},ListViewColumnEmpty}(t.ListViewColumn)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.ListViewHeaderColumn=function(i){function ListViewHeaderColumn(){return ListViewHeaderColumn.__super__.constructor.apply(this,arguments)}return e(ListViewHeaderColumn,i),ListViewHeaderColumn.prototype.initOpts=function(){ListViewHeaderColumn.__super__.initOpts.call(this),this.removeOpt("text"),this.addOpts({spacer:{check:Boolean},rotate_90:{check:Boolean},label:{check:function(e){return!!(t.util.isPlainObject(e)||e instanceof t.Label)}}})},ListViewHeaderColumn.prototype.readOpts=function(){return ListViewHeaderColumn.__super__.readOpts.call(this),this._label instanceof t.Label?this.__label=this._label:this._label?(this._label.rotate_90=this._rotate_90,this.__label=new t.defaults.class.Label(this._label)):void 0},ListViewHeaderColumn.prototype.setElement=function(e){var i,n;return this.__element=e,ListViewHeaderColumn.__super__.setElement.call(this,this.__element),this._rotate_90&&this.addClass("cui-lv-td-rotate-90"),this.addClass("cui-lv-th"),i=this.getRow().getListView(),i.hasResizableColumns()?"fixed"===i.getColdef(this.getColumnIdx())?this.__element:(n=t.dom.element("DIV",{class:"cui-lv-col-resize-handle"}),new t.ListViewColResize({element:n,row:this.getRow(),column:this}),t.dom.append(this.__element,n),this.__element):this.__element},ListViewHeaderColumn.prototype.render=function(){var e;return e=this._spacer?[t.dom.div("cui-tree-node-spacer")]:[],this._element?e.push(this._element):this.__label&&e.push(this.__label),e},ListViewHeaderColumn}(t.ListViewColumn)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.ListViewHeaderRow=function(t){function ListViewHeaderRow(){return ListViewHeaderRow.__super__.constructor.apply(this,arguments)}return e(ListViewHeaderRow,t),ListViewHeaderRow.prototype.isSelectable=function(){return!1},ListViewHeaderRow}(t.ListViewRow)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.ListViewRow=function(i){function ListViewRow(){return ListViewRow.__super__.constructor.apply(this,arguments)}return e(ListViewRow,i),ListViewRow.prototype.initOpts=function(){return ListViewRow.__super__.initOpts.call(this),this.addOpts({columns:{check:Array},selectable:{check:Boolean},class:{check:String}})},ListViewRow.prototype.readOpts=function(){var t,e,i,n,o;if(ListViewRow.__super__.readOpts.call(this),this._columns)for(this.columns=this._columns,o=this.columns,i=e=0,n=o.length;e<n;i=++e)(t=o[i])&&this.setColumn(i,t);else this.columns=[];return!1===this._selectable?this.setSelectable(!1):this.setSelectable(!0),this._class?this.__class=this._class:this.__class="",this.row_i=null,this.__addedToListView=!1,this.listView=null},ListViewRow.prototype.addColumn=function(e){return t.util.assert(e instanceof t.ListViewColumn,"ListViewRow.addColumn","column must be instance of ListViewColumn",{column:e}),this.columns.push(e),e.setRow(this),this},ListViewRow.prototype.setColumn=function(e,i){return t.util.assert(i instanceof t.ListViewColumn,"ListViewRow.addColumn","column must be instance of ListViewColumn",{column:i}),this.columns[e]=i,i.setRow(this),this},ListViewRow.prototype.prependColumn=function(e){return t.util.assert(e instanceof t.ListViewColumn,"ListViewRow.prependColumn","column must be instance of ListViewColumn",{column:e}),this.columns.splice(0,0,e),e.setRow(this),this},ListViewRow.prototype.setSelectable=function(t){return this.__selectable=t},ListViewRow.prototype.isSelectable=function(){if(this.listView){if(!this.listView.hasSelectableRows())return!1;if(this.getDisplayRowIdx()<this.listView.fixedRowsCount)return!1}return this.__selectable},ListViewRow.prototype.isMovable=function(t){return this.listView.hasMovableRows()},ListViewRow.prototype.moveRow=null,ListViewRow.prototype.removeColumns=function(){var t,e,i,n;for(n=this.columns,e=0,i=n.length;e<i;e++)t=n[e],t.setRow();return this.columns.splice(0)},ListViewRow.prototype.getColumns=function(){return this.columns},ListViewRow.prototype.setRowIdx=function(t){return this.row_i=t,this},ListViewRow.prototype.getDOMNodes=function(){var t;return null!=(t=this.listView)?t.getRow(this.row_i):void 0},ListViewRow.prototype.getRowIdx=function(){return this.row_i},ListViewRow.prototype.scrollIntoView=function(){var t;return null!=(t=this.getDOMNodes()[0])&&t.scrollIntoView(),this},ListViewRow.prototype.getDisplayRowIdx=function(){var t;return null!=(t=this.listView)?t.getDisplayRowIdx(this.row_i):void 0},ListViewRow.prototype.addedToListView=function(t){return this.__addedToListView=!0},ListViewRow.prototype.isAddedToListView=function(){return this.__addedToListView},ListViewRow.prototype.setListView=function(t){this.listView=t},ListViewRow.prototype.getListView=function(){return this.listView},ListViewRow.prototype.__selectableClass="cui-list-view-row-selectable",ListViewRow.prototype.__movableClass="cui-list-view-row-movable",ListViewRow.prototype.getClass=function(){var t;return t=this.__class,this.isSelectable()&&(t=this.__selectableClass+" "+t),this.isMovable()&&(t=this.__movableClass+" "+t),t},ListViewRow.prototype.setClass=function(t){this.__class=t},ListViewRow.prototype.addClass=function(t){var e;return null!=(e=this.listView)?e.rowAddClass(this.row_i,t):void 0},ListViewRow.prototype.removeClass=function(t){var e;return null!=(e=this.listView)?e.rowRemoveClass(this.row_i,t):void 0},ListViewRow.prototype.select=function(e){var i;return this.selected?void console.debug("already selected",this):this.isSelectable()?(this.selected=!0,this.listView?(this.listView.rowAddClass(this.row_i,t.ListViewRow.defaults.selected_class),"function"==typeof(i=this.listView)._onSelect&&i._onSelect(e,{originalEvent:e,listView:this.listView,row:this}),t.resolvedPromise()):void 0):void console.debug("not selectable",this)},ListViewRow.prototype.deselect=function(e){var i,n;return this.listView.hasSelectableRows()&&this.selected?(null!=(i=this.listView)&&i.rowRemoveClass(this.row_i,t.ListViewRow.defaults.selected_class),this.selected=!1,null!=(n=this.listView)&&"function"==typeof n._onDeselect&&n._onDeselect(e,{originalEvent:e,listView:this.listView,row:this}),t.resolvedPromise()):t.rejectedPromise()},ListViewRow.prototype.isSelected=function(){return!!this.selected},ListViewRow.prototype.remove=function(){return this.listView.removeRow(this.row_i)},ListViewRow.defaults={selected_class:"cui-selected"},ListViewRow}(t.Element)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function ctor(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},n={}.hasOwnProperty;t.ListViewTree=function(n){function ListViewTree(i){this.opts=null!=i?i:{},this.__actionOnNode=e(this.__actionOnNode,this),ListViewTree.__super__.constructor.call(this,this.opts),t.util.assert(this.root instanceof t.ListViewTreeNode,"new CUI.ListViewTree","opts.root must be instance of ListViewTreeNode",{opts:this.opts}),this.root.setTree(this)}return i(ListViewTree,n),ListViewTree.prototype.initOpts=function(){return ListViewTree.__super__.initOpts.call(this),this.addOpts({rowMoveWithinNodesOnly:{check:Boolean},children:{check:Array},selectable:{deprecated:!0,check:Boolean},no_hierarchy:{default:!1,check:Boolean},root:{check:function(e){return e instanceof t.ListViewRow}},onOpen:{check:Function},onClose:{check:Function}})},ListViewTree.prototype.readOpts=function(){return ListViewTree.__super__.readOpts.call(this),void 0!==this._selectable&&(t.util.assert(void 0===this._selectableRows,"new CUI.ListViewTree","opts.selectable cannot be used with opts.selectableRows, use selectableRows only.",{opts:this.opts}),this.__selectableRows=this._selectable),this},ListViewTree.prototype.getRowMoveTool=function(e){return null==e&&(e={}),e.rowMoveWithinNodesOnly=this._rowMoveWithinNodesOnly,new t.ListViewTreeRowMove(e)},ListViewTree.prototype.initListView=function(){var e;return ListViewTree.__super__.initListView.call(this),this._root?this.root=this._root:(e={},this._children?e.children=this._children:this._getChildren?e.getChildren=this._getChildren:e.children=[],this.root=new t.ListViewTreeNode(e)),this},ListViewTree.prototype.isSelectable=function(){return!!this.__selectableRows},ListViewTree.prototype.isNoHierarchy=function(){return this._no_hierarchy},ListViewTree.prototype.triggerNodeDeselect=function(e,i){var n;return n={ev:e,node:i,listView:this},"function"==typeof this._onDeselect&&this._onDeselect(e,n),t.Events.trigger({node:this,type:"row_deselected"})},ListViewTree.prototype.triggerNodeSelect=function(e,i){var n;return n={ev:e,node:i,listView:this},"function"==typeof this._onSelect&&this._onSelect(e,n),t.Events.trigger({node:this,type:"row_selected"})},ListViewTree.prototype.render=function(){var e;return e=function(e){return function(i){var n;(n=t.dom.data(t.dom.closest(i.getCurrentTarget(),".cui-lv-tree-node"),"listViewRow"))instanceof t.ListViewTreeNode&&!n.isLoading()&&!n.isLeaf()&&(i.stopImmediatePropagation(),i instanceof t.DragoverScrollEvent?i.getCount()%50==0&&e.toggleNode(i,n):e.toggleNode(i,n))}}(this),ListViewTree.__super__.render.call(this),t.Events.listen({node:this.DOM,selector:".cui-tree-node-handle",capture:!0,type:["click","dragover-scroll"],call:function(t){return function(t){return e(t)}}()}),t.Events.listen({node:this.DOM,selector:".cui-lv-tree-node",type:["click"],call:function(t){return function(t){return e(t)}}()}),this._no_hierarchy?t.dom.addClass(this.grid,"cui-list-view-tree-no-hierarchy"):t.dom.addClass(this.grid,"cui-list-view-tree-hierarchy"),this.DOM},ListViewTree.prototype.toggleNode=function(t,e){e.isOpen()?this.__runTrigger(t,"close",e):this.__runTrigger(t,"open",e)},ListViewTree.prototype.__runTrigger=function(t,e,i){t.ctrlKey()?this.__actionOnNode(t,e+"Recursively",i):this.__actionOnNode(t,e,i)},ListViewTree.prototype.__actionOnNode=function(e,i,n){var o,r,s;return o=null,s=t.setTimeout({ms:500,call:function(t){return function(){return n.showSpinner(),s=null,o=!0}}()}),this.stopLayout(),r=n[i](),r.done(function(t){return function(){switch(i){case"open":return"function"==typeof t._onOpen?t._onOpen(e,{node:n}):void 0;case"close":return"function"==typeof t._onClose?t._onClose(e,{node:n}):void 0}}}(this)),r.always(function(e){return function(){return s&&t.clearTimeout(s),o&&n.hideSpinner(),e.startLayout()}}(this)),r},ListViewTree.prototype.getNodesForMove=function(e,i,n){var o,r,s;return o=this.getListViewRow(e),s=this.getListViewRow(i),t.util.assert(o,"ListViewTree.moveRow","from_i node not found",{from_i:e}),t.util.assert(s,"ListViewTree.moveRow","to_i node not found",{to_i:i}),r=o.father!==s.father||s.is_open&&n?s.is_open&&n?s:s.father:null,r===o.father&&(r=null),[o,s,r]},ListViewTree.prototype.moveRow=function(e,i,n){var o,r,s,a,l;return a=this.getNodesForMove(e,i,n),o=a[0],l=a[1],r=a[2],s=o.moveNodeBefore(l,r,n),t.util.assert(t.util.isPromise(s),"ListViewTree.moveRow","moveNodeBefore needs to return a Promise",{promise:s}),s.done(function(s){return function(){var a,u;return a=s.getDisplayRowIdx(e),u=s.getDisplayRowIdx(i),ListViewTree.__super__.moveRow.call(s,e,i,n,!1),o.father!==l.father||l.is_open&&n?(o.father.removeChild(o),l.is_open&&n?(l.children.splice(0,0,o),o.setFather(l)):(n?l.father.children.splice(l.getChildIdx()+1,0,o):l.father.children.splice(l.getChildIdx(),0,o),o.setFather(l.father))):t.util.moveInArray(o.getChildIdx(),l.getChildIdx(),o.father.children,n),o.reload(),null!=r&&r.reload(),o.moveNodeAfter(l,r,n),"function"==typeof s._onRowMove&&s._onRowMove(a,u,n),t.Events.trigger({node:s.grid,type:"row_moved",info:{from_i:e,to_i:i,after:n}})}}(this)),s},ListViewTree.prototype.getRootChildren=function(){return this.root.children},ListViewTree.prototype.getSelectedNode=function(t){return null==t&&(t="selectedNode"),this.root[t]},ListViewTree.prototype.prependNode=function(t){return this.addNode(t,!1)},ListViewTree.prototype.addNode=function(e,i){var n;return null==i&&(i=!0),t.util.assert(e instanceof t.ListViewTreeNode,t.util.getObjectClass(this)+".addNode","Node must be instance of ListViewTreeNode",{node:e}),n=this.root.addNode(e,i),t.Events.trigger({node:this,type:"row_added",info:{node:e}}),n},ListViewTree.prototype.openTreeNodeByRowDisplayIndex=function(e){var i,n;return n=this.getRowIdx(e),i=this.getRow(n),t.dom.data(i[0],"listViewRow").open()},ListViewTree}(t.ListView),t.Events.registerEvent({bubble:!0,type:["row_removed","row_added","row_moved","row_selected","row_deselected"]})}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.ListViewTreeHeaderNode=function(i){function ListViewTreeHeaderNode(){return ListViewTreeHeaderNode.__super__.constructor.apply(this,arguments)}return e(ListViewTreeHeaderNode,i),ListViewTreeHeaderNode.prototype.initOpts=function(){return ListViewTreeHeaderNode.__super__.initOpts.call(this),this.addOpts({headers:{check:function(t){return t.length>0}}})},ListViewTreeHeaderNode.prototype.render=function(){var e,i,n,o,r;for(this.__is_rendered=!0,r=this._headers,n=i=0,o=r.length;i<o;n=++i)e=r[n],this.addColumn(new t.ListViewHeaderColumn(e));return this},ListViewTreeHeaderNode}(t.ListViewTreeNode)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function ctor(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},n={}.hasOwnProperty,o=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1};t.ListViewTreeNode=function(n){function ListViewTreeNode(){return this.update=e(this.update,this),ListViewTreeNode.__super__.constructor.apply(this,arguments)}return i(ListViewTreeNode,n),ListViewTreeNode.prototype.initOpts=function(){return ListViewTreeNode.__super__.initOpts.call(this),this.addOpts({children:{check:Array},open:{check:Boolean},html:{},colspan:{check:function(t){return t>0}},getChildren:{check:Function}})},ListViewTreeNode.prototype.readOpts=function(){return ListViewTreeNode.__super__.readOpts.call(this),this.setColspan(this._colspan),this._children&&(this.children=this.opts.children,this.initChildren()),this._open?this.do_open=!0:this.do_open=!1,this.is_open=!1,this.html=this._html,this.__loadingDeferred=null},ListViewTreeNode.prototype.setColspan=function(t){this.colspan=t},ListViewTreeNode.prototype.getColspan=function(){return this.colspan},ListViewTreeNode.prototype.getChildren=null,ListViewTreeNode.prototype.hasChildren=null,ListViewTreeNode.prototype.isLeaf=function(){return!this.children&&(!this.opts.getChildren&&(!this.getChildren||!!(this.opts.leaf||this.hasChildren&&!this.hasChildren())))},ListViewTreeNode.prototype.getClass=function(){var t;return t=ListViewTreeNode.__super__.getClass.call(this),t+=" cui-lv-tree-node"},ListViewTreeNode.prototype.isSelectable=function(){return("function"==typeof this.getTree?this.getTree().isSelectable():void 0)&&this.__selectable&&!this.isRoot()},ListViewTreeNode.prototype.getFather=function(){return this.father},ListViewTreeNode.prototype.setFather=function(e){var i;return t.util.assert(null===e||e instanceof t.ListViewTreeNode,t.util.getObjectClass(this)+".setFather","father can only be null or instanceof CUI.ListViewTreeNode",{father:e}),t.util.assert(e!==this,t.util.getObjectClass(this)+".setFather","father cannot be self",{node:this,father:e}),e&&t.util.assert(o.call(e.getPath(!0),this)<0,t.util.getObjectClass(this)+".setFather","father cannot any of the node's children",{node:this,father:e}),!e&&this.selected&&(this.setSelectedNode(null),this.selected=!1),this.father&&!e?(i=this.getTree(),this.father=e,i&&this.setTree(i)):this.father=e,this},ListViewTreeNode.prototype.isRoot=function(){return!this.father},ListViewTreeNode.prototype.setTree=function(e){return this.tree=e,t.util.assert(this.isRoot(),t.util.getObjectClass(this)+".setTree","node must be root node to set tree",{tree:this.tree,opts:this.opts}),t.util.assert(this.tree instanceof t.ListViewTree,t.util.getObjectClass(this)+".setTree","tree must be instance of ListViewTree",{tree:this.tree,opts:this.opts})},ListViewTreeNode.prototype.getRoot=function(e){return null==e&&(e=0),t.util.assert(e<100,"ListViewTreeNode.getRoot","Recursion detected."),this.father?this.father.getRoot(e+1):this},ListViewTreeNode.prototype.dump=function(t,e){var i,n,o,r,s,a,l;for(null==t&&(t=[]),null==e&&(e=0),s=[],n=0,a=e;0<=a?n<a:n>a;0<=a?++n:--n)s.push("  ");if(t.push(s.join("")+this.dumpString()),this.children)for(l=this.children,o=0,r=l.length;o<r;o++)i=l[o],i.dump(t,e+1);if(0===e)return"\n"+t.join("\n")+"\n"},ListViewTreeNode.prototype.dumpString=function(){return this.getNodeId()},ListViewTreeNode.prototype.getTree=function(e){return null==e&&(e=0),t.util.assert(e<100,"ListViewTreeNode.getTree","Recursion detected."),this.isRoot()?this.tree:this.getRoot().getTree(e+1)},ListViewTreeNode.prototype.find=function(t,e){var i,n,o,r;if(null==t&&(t=null),null==e&&(e=[]),t&&!t.call(this,this)||e.push(this),this.children)for(r=this.children,n=0,o=r.length;n<o;n++)i=r[n],i.find(t,e);return e},ListViewTreeNode.prototype.filter=function(e,i){var n,o,r,s,a,l,u,c,h,d;if(null==i&&(i=[]),d=null!=(h=this.children)?h.slice(0):void 0,this.father&&e.call(this,this))for(c=this.getChildIdx(),i.push(this),o=this.getFather(),t.ListViewTreeNode.prototype.remove.call(this,!0,!1),r=s=0,l=d.length;s<l;r=++s)n=d[r],o.children.splice(c+r,0,n),n.setFather(o);if(d)for(a=0,u=d.length;a<u;a++)n=d[a],n.filter(e,i);return i},ListViewTreeNode.prototype.getPath=function(e,i,n){return null==e&&(e=!1),null==i&&(i=[]),null==n&&(n=0),t.util.assert(n<100,"ListViewTreeNode.getPath","Recursion detected."),this.father&&this.father.getPath(!0,i,n+1),e&&i.push(this),i},ListViewTreeNode.prototype.getChildIdx=function(){var e;return this.isRoot()?"root":(e=this.father.children.indexOf(this),t.util.assert(e>-1,t.util.getObjectClass(this)+".getChildIdx()","Node not found in fathers children Array",{node:this,father:this.father,"father.children":this.father.children}),e)},ListViewTreeNode.prototype.getNodeId=function(t){var e,i;return null==t&&(t=!0),i=this.getPath(t),function(){var t,n,o;for(o=[],t=0,n=i.length;t<n;t++)e=i[t],o.push(e.getChildIdx());return o}().join(".")},ListViewTreeNode.prototype.getOpenChildNodes=function(t){var e,i,n,o;if(null==t&&(t=[]),this.children&&this.is_open)for(o=this.children,e=0,i=o.length;e<i;e++)n=o[e],t.push(n),n.getOpenChildNodes(t);return t},ListViewTreeNode.prototype.getRowsToMove=function(){return this.getOpenChildNodes()},ListViewTreeNode.prototype.isRendered=function(){var t;return!!(this.isRoot()&&(null!=(t=this.getTree())?t.getGrid():void 0)||this.__is_rendered)},ListViewTreeNode.prototype.sort=function(t,e){var i,n,o,r,s;if(null==e&&(e=0),null!=(r=this.children)?r.length:void 0){for(this.children.sort(t),s=this.children,i=0,n=s.length;i<n;i++)o=s[i],o.sort(t,e+1);return 0===e&&this.isRendered()&&this.reload(),this}},ListViewTreeNode.prototype.close=function(){return t.util.assert(this.father,"ListViewTreeNode.close()","Cannot close root node",{node:this}),t.util.assert(!this.isLoading(),"ListViewTreeNode.close","Cannot close node, during opening...",{node:this,tree:this.getTree()}),this.do_open=!1,this.father.is_open&&(this.removeFromDOM(!1),this.replaceSelf()),t.resolvedPromise()},ListViewTreeNode.prototype.removeFromDOM=function(t){var e,i,n,o,r;if(null==t&&(t=!0),this.abortLoading(),this.is_open){if(this.do_open=!0,this.children)for(o=this.children,i=0,n=o.length;i<n;i++)e=o[i],e.removeFromDOM()}else this.do_open=!1;return t&&this.__is_rendered&&(r=this.getTree(),r&&!r.isDestroyed()&&(null===this.getRowIdx()?this.isRoot()||r.removeDeferredRow(this):r.removeRow(this.getRowIdx())),this.__is_rendered=!1),this.is_open=!1,this},ListViewTreeNode.prototype.replaceSelf=function(){var e;return this.father?((e=this.getTree())&&(e.replaceRow(this.getRowIdx(),this.render()),this.selected&&e.rowAddClass(this.getRowIdx(),t.ListViewRow.defaults.selected_class)),t.resolvedPromise()):this.is_open?(this.removeFromDOM(!1),this.open()):t.resolvedPromise()},ListViewTreeNode.prototype.openRecursively=function(){return this.__actionRecursively("open")},ListViewTreeNode.prototype.closeRecursively=function(){return this.__actionRecursively("close")},ListViewTreeNode.prototype.__actionRecursively=function(e){var i,n;return i=new t.Deferred,this.isLeaf()?i.resolve().promise():("open"===e?(n=this.getLoading())||(n=this.open()):n=this.close(),n.done(function(n){return function(){var o,r,s,a,l;for(a=[],l=n.children,r=0,s=l.length;r<s;r++)o=l[r],a.push(o[e+"Recursively"]());return t.when(a).done(i.resolve).fail(i.reject)}}(this)).fail(i.reject),i.promise())},ListViewTreeNode.prototype.isOpen=function(){return!!this.is_open},ListViewTreeNode.prototype.isLoading=function(){return!!this.__loadingDeferred},ListViewTreeNode.prototype.getLoading=function(){return this.__loadingDeferred},ListViewTreeNode.prototype.abortLoading=function(){this.__loadingDeferred&&("pending"===this.__loadingDeferred.state&&this.__loadingDeferred.reject(),this.__loadingDeferred=null)},ListViewTreeNode.prototype.open=function(){var e,i,n,o,r,s;return t.util.assert(!this.isLoading(),"ListViewTreeNode.open","Cannot open node "+this.getUniqueId()+", during opening. This can happen if the same node exists multiple times in the same tree.",{node:this}),this.is_open?t.resolvedPromise():(this.is_open=!0,this.do_open=!1,e=this.__loadingDeferred=new t.Deferred,n=function(t){return function(){return"pending"===t.__loadingDeferred.state()&&t.__loadingDeferred.resolve(t),t.__loadingDeferred=null}}(this),i=function(t){return function(){return"pending"===t.__loadingDeferred.state()&&t.__loadingDeferred.reject(t),t.__loadingDeferred=null}}(this),r=function(o){return function(){if(t.util.assert(t.util.isArray(o.children),"ListViewTreeNode.open","children to be loaded must be an Array",{children:o.children,listViewTreeNode:o}),0===o.children.length)return o.isRoot()||o.replaceSelf(),void n();o.initChildren(),t.chunkWork.call(o,{items:o.children,chunk_size:5,timeout:1,call:function(i){return t.chunkWork.call(o,{items:i,chunk_size:1,timeout:-1,call:function(t){return e===o.__loadingDeferred&&o.__appendNode(t[0],!0)}})}}).done(function(){if(e===o.__loadingDeferred)return o.isRoot()||o.replaceSelf(),n()}).fail(function(){var t,n,r,s;if(e===o.__loadingDeferred){for(s=o.children,n=0,r=s.length;n<r;n++)t=s[n],t.removeFromDOM();return i()}})}}(this),this.children?r():(o=this.opts.getChildren||this.getChildren,o?(s=o.call(this),t.util.isArray(s)?(this.children=s,r()):(t.util.assert(t.util.isPromise(s),t.util.getObjectClass(this)+".open","returned children are not of type Promise or Array",{children:s}),s.done(function(t){return function(i){t.children=i,e===t.__loadingDeferred&&r()}}(this)).fail(i))):(this.isRoot()||this.replaceSelf(),n())),e.promise())},ListViewTreeNode.prototype.prependChild=function(t){return this.addNode(t,!1)},ListViewTreeNode.prototype.addChild=function(t){return this.addNode(t,!0)},ListViewTreeNode.prototype.prependSibling=function(t){var e;return e=this.getChildIdx(),this.father.addNode(t,e)},ListViewTreeNode.prototype.appendSibling=function(t){var e;return e=this.getChildIdx()+1,e>this.father.children.length-1?this.father.addNode(t):this.father.addNode(t,e)},ListViewTreeNode.prototype.initChildren=function(){var e,i,n,o,r,s,a,l,u,c;for(u=this.children,n=o=0,s=u.length;o<s;n=++o){for(l=u[n],c=this.children,e=r=0,a=c.length;r<a;e=++r)i=c[e],n!==e&&t.util.assert(i!==l,"ListViewTreeNode.initChildren","Must have every child only once.",{node:this,child:l});l.setFather(this)}},ListViewTreeNode.prototype.addNode=function(e,i){var n,o,r,s,a,l;for(null==i&&(i=!0),t.util.assert(!this.isLoading(),"ListViewTreeNode.addNode","Cannot add node, during loading.",{node:this}),this.children||(this.children=[]),t.util.assert(t.util.isArray(this.children),"Tree.addNode","Cannot add node, children needs to be an Array in node",{node:this,new_node:e}),l=this.children,r=0,s=l.length;r<s;r++)n=l[r],t.util.assert(n!==e,"ListViewTreeNode.addNode","Must have every child only once.",{node:this,child:n});if(!0===i?this.children.push(e):this.children.splice(i,0,e),e.setFather(this),this.is_open)a=this.__appendNode(e,i);else{if(this.isRoot()||!this.isRendered())return t.resolvedPromise(e);o=new t.Deferred,this.open().done(function(t){return function(){return o.resolve(e)}}()).fail(function(t){return function(){return o.reject(e)}}()),a=o.promise()}return a},ListViewTreeNode.prototype.__appendNode=function(e,i){var n,o,r,s;return null==i&&(i=!0),t.util.assert(e instanceof t.ListViewTreeNode,"ListViewTreeNode.__appendNode","node must be instance of ListViewTreeNode",{node:this,new_node:e}),t.util.assert(e.getFather()===this,"ListViewTreeNode.__appendNode","node added must be child of current node",{node:this,new_node:e}),!1===i&&(i=0),s=this.getTree(),(null!=s?s.isDestroyed():void 0)?t.rejectedPromise(e):this.isRendered()?(n=e.getChildIdx(),this.isRoot()?!0===i||1===this.children.length||i+1===this.children.length?s.appendRow(e.render()):(t.util.assert(this.children[i+1],this.__cls+".__addNode","Node not found",{children:this.children,node:this,append:i}),s.insertRowBefore(this.children[i+1].getRowIdx(),e.render())):0===n?s.insertRowAfter(this.getRowIdx(),e.render()):!0!==i?s.insertRowBefore(this.children[i+1].getRowIdx(),e.render()):(r=this.children[n-1],o=r.getOpenChildNodes(),o.length&&(r=o[o.length-1]),s.insertRowAfter(r.getRowIdx(),e.render())),e.selected&&s.rowAddClass(e.getRowIdx(),t.ListViewRow.defaults.selected_class),e.do_open?e.open():t.resolvedPromise(e)):t.resolvedPromise(e)},ListViewTreeNode.prototype.remove=function(e,i){var n,o,r,s,a;return null==e&&(e=!1),null==i&&(i=!0),r=new t.Deferred,a=null,s=function(i){return function(){var n,o;i.removeFromDOM(),null!=(n=i.father)&&n.removeChild(i,e),(o=i.getTree())?(t.Events.trigger({node:o,type:"row_removed"}),a?a.select().done(r.resolve).fail(r.reject):r.resolve()):r.resolve()}}(this),i&&!this.isRoot()&&(o=this.getFather().children,o.length>1&&(n=this.getChildIdx(),i=0===n?1:Math.min(o.length-2,n-1)),null!==i&&(a=o[i])),this.isSelected()?this.deselect().fail(r.reject).done(s):s(),r.promise()},ListViewTreeNode.prototype.removeChild=function(e,i){return null==i&&(i=!1),t.util.removeFromArray(e,this.children),0!==this.children.length||this.isRoot()||(this.is_open=!1,i||(this.children=null)),this.update(),e.setFather(null)},ListViewTreeNode.prototype.deselect=function(e,i){return this.getTree().isSelectable()?this.check_deselect(e,i).done(function(t){return function(){return t.setSelectedNode(),t.removeSelectedClass(),t.selected=!1,t.getTree().triggerNodeDeselect(e,t)}}(this)):t.resolvedPromise()},ListViewTreeNode.prototype.allowRowMove=function(){return!0},ListViewTreeNode.prototype.check_deselect=function(e,i){return t.resolvedPromise()},ListViewTreeNode.prototype.isSelected=function(){return!!this.selected},ListViewTreeNode.prototype.addSelectedClass=function(){return this.getTree().rowAddClass(this.getRowIdx(),t.ListViewRow.defaults.selected_class)},ListViewTreeNode.prototype.removeSelectedClass=function(){return this.getTree().rowRemoveClass(this.getRowIdx(),t.ListViewRow.defaults.selected_class)},ListViewTreeNode.prototype.setSelectedNode=function(t,e){return null==t&&(t=null),null==e&&(e=this.getSelectedNodeKey()),this.getRoot()[this.getSelectedNodeKey()]=t},ListViewTreeNode.prototype.getSelectedNode=function(t){var e;return null==t&&(t=this.getSelectedNodeKey()),(null!=(e=this.getRoot())?e[t]:void 0)||null},ListViewTreeNode.prototype.getSelectedNodeKey=function(){return"selectedNode"},ListViewTreeNode.prototype.select=function(e){var i,n,o,r;return i=new t.Deferred,e&&("function"==typeof this.getTree?this.getTree().isSelectable():void 0)&&"function"==typeof e.stopPropagation&&e.stopPropagation(),i.done(function(t){return function(){return t.getTree().triggerNodeSelect(e,t)}}(this)),this.isSelectable()?this.isSelected()?i.resolve().promise():(n=function(t){return function(){return t.setSelectedNode(t),t.openUpwards().done(function(){return t.addSelectedClass(),t.selected=!0,i.resolve()}).fail(i.reject)}}(this),r=this.getSelectedNode(),r&&!0===(null!=(o=this.getTree())?o.__selectableRows:void 0)?r.check_deselect(e,this).done(function(t){return function(){return r.deselect(null,t).done(function(){return n()}).fail(i.reject)}}(this)).fail(i.reject):n(),i.promise()):i.reject().promise()},ListViewTreeNode.prototype.openUpwards=function(e){var i,n;return null==e&&(e=0),i=new t.Deferred,this.isRoot()?this.isLoading()?this.getLoading().done(function(t){return function(){return i.resolve(t)}}(this)).fail(function(t){return function(){return i.reject(t)}}(this)):this.is_open?i.resolve(this):i.reject(this):(n=this.father.openUpwards(e+1),n.done(function(t){return function(){var n;return!t.is_open&&e>0?(n=t.isLoading()?t.getLoading():t.open(),n.done(function(){return i.resolve(t)}).fail(function(){return i.reject(t)})):i.resolve(t)}}(this)),n.fail(function(t){return function(){return t.do_open=!0,0===e?i.resolve(t):i.reject(t)}}(this))),i.promise()},ListViewTreeNode.prototype.level=function(){return this.isRoot()?0:this.father.level()+1},ListViewTreeNode.prototype.renderContent=function(){return t.util.isFunction(this.html)?this.html.call(this.opts,this):this.html?this.html:new t.EmptyLabel({text:"<empty>"}).DOM},ListViewTreeNode.prototype.update=function(e){var i,n;return null==e&&(e=!1),e||this.__is_rendered&&!this.isRoot()?(n=this.getTree(),i=null!=n?n.stopLayout():void 0,this.replaceSelf().done(function(t){return function(){if(i)return n.startLayout()}}())):t.resolvedPromise()},ListViewTreeNode.prototype.reload=function(){return t.util.assert(!this.isLoading(),"ListViewTreeNode.reload","Cannot reload node, during opening...",{node:this,tree:this.getTree()}),this.isRoot()?this.replaceSelf():this.is_open?(this.close(),this.do_open=!0,this.open()):(this.opts.children&&(this.children=null),this.update())},ListViewTreeNode.prototype.showSpinner=function(){return this.__is_rendered&&(t.dom.empty(this.__handleDiv),t.dom.append(this.__handleDiv,new t.Icon({icon:"spinner"}).DOM)),this},ListViewTreeNode.prototype.hideSpinner=function(){return this.__is_rendered&&(t.dom.empty(this.__handleDiv),this.__handleIcon&&t.dom.append(this.__handleDiv,new t.Icon({icon:this.__handleIcon}).DOM)),this},ListViewTreeNode.prototype.render=function(){var e,i,n,o,r,s,a,l,u,c;for(t.util.assert(!this.isRoot(),"ListViewTreeNode.render","Unable to render root node."),this.removeColumns(),r=t.dom.div("cui-tree-node level-"+this.level()),this.__is_rendered=!0,s=1,u=this.level();s<u;s+=1)t.dom.append(r,t.dom.div("cui-tree-node-spacer"));if(e=["cui-tree-node-handle"],this.is_open?(this.__handleIcon="tree_close",e.push("cui-tree-node-is-open")):this.isLeaf()?(this.__handleIcon=null,e.push("cui-tree-node-is-leaf")):(this.__handleIcon="tree_open",e.push("cui-tree-node-is-closed")),0===(null!=(c=this.children)?c.length:void 0)&&e.push("cui-tree-node-no-children"),this.__handleDiv=t.dom.div(e.join(" ")),this.__handleIcon&&t.dom.append(this.__handleDiv,new t.Icon({icon:this.__handleIcon}).DOM),t.dom.append(r,this.__handleDiv),this.prependColumn(new t.ListViewColumn({element:r,class:"cui-tree-node-column cui-tree-node-level-"+this.level(),colspan:this.getColspan()})),o=t.dom.div("cui-tree-node-content"),n=this.renderContent(),t.util.isArray(n))for(a=0,l=n.length;a<l;a++)i=n[a],t.dom.append(o,i);else t.dom.append(o,n);return t.dom.append(r,o),this},ListViewTreeNode.prototype.moveToNewFather=function(t,e){var i;return i=this.father,i.removeChild(this),t.children.splice(e,0,this),this.setFather(t),i.reload(),t.reload()},ListViewTreeNode.prototype.moveNodeBefore=function(e,i,n){return t.resolvedPromise()},ListViewTreeNode.prototype.moveNodeAfter=function(t,e,i){},ListViewTreeNode}(t.ListViewRow)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.ListViewColResize=function(i){function ListViewColResize(){return ListViewColResize.__super__.constructor.apply(this,arguments)}return e(ListViewColResize,i),ListViewColResize.prototype.initOpts=function(){return ListViewColResize.__super__.initOpts.call(this),this.removeOpt("helper"),this.addOpts({row:{mandatory:!0,check:t.ListViewRow},column:{mandatory:!0,check:t.ListViewColumn}})},ListViewColResize.prototype.readOpts=function(){ListViewColResize.__super__.readOpts.call(this),this.__row_i=this._row.getRowIdx(),this.__display_row_i=this._row.getDisplayRowIdx(),this.__listView=this._row.getListView(),this.__col_i=this._column.getColumnIdx(),t.Events.listen({type:"dblclick",node:this._element,instance:this,call:function(t){return function(e){return console.debug("list view",t.__listView,t.__col_i,t.__row_i),t.__listView.resetColWidth(t.__col_i)}}(this)})},ListViewColResize.prototype.get_axis=function(){return"x"},ListViewColResize.prototype.get_cursor=function(t){return"ew-resize"},ListViewColResize.prototype.get_helper=function(t,e,i){return this.get_marker("cui-lv-col-resize")},ListViewColResize.prototype.get_init_helper_pos=function(){var t;return t=this.__listView.getCellGridRect(this.__row_i,this.__col_i),this.__contentWidthAdjust=t.contentWidthAdjust,{left:t.left_abs,top:t.top_abs,width:t.width,height:this.__listView.getGrid().offsetHeight}},ListViewColResize.prototype.get_helper_pos=function(e,i,n){var o;return o=ListViewColResize.__super__.get_helper_pos.call(this,e,i,n),o.left=t.globalDrag.helperNodeStart.left,this.__new_width=t.globalDrag.helperNodeStart.width+n.x,o.width=this.__new_width,o},ListViewColResize.prototype.start_drag=function(t,e,i){return ListViewColResize.__super__.start_drag.call(this,t,e,i),this.__inital_width=this.__listView.getManualColWidth(this.__col_i),this},ListViewColResize.prototype.do_drag=function(e,i,n){if(ListViewColResize.__super__.do_drag.call(this,e,i,n),!t.browser.ie)return this.__setColWidth(this.__new_width)},ListViewColResize.prototype.stop_drag=function(t){return ListViewColResize.__super__.stop_drag.call(this,t),this.__inital_width?this.__listView.setColWidth(this.__col_i,this.__initial_width):this.__listView.resetColWidth(this.__col_i)},ListViewColResize.prototype.__setColWidth=function(t){return this.__listView.setColWidth(this.__col_i,t-this.__contentWidthAdjust)},ListViewColResize.prototype.end_drag=function(t){return ListViewColResize.__super__.end_drag.call(this,t),this.__setColWidth(this.__new_width)},ListViewColResize.prototype.destroy=function(){return t.Events.ignore({instance:this}),ListViewColResize.__super__.destroy.call(this)},ListViewColResize}(t.ListViewDraggable)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.ListViewColumnRowMoveHandle=function(i){function ListViewColumnRowMoveHandle(){return ListViewColumnRowMoveHandle.__super__.constructor.apply(this,arguments)}return e(ListViewColumnRowMoveHandle,i),ListViewColumnRowMoveHandle.prototype.setElement=function(e){var i;ListViewColumnRowMoveHandle.__super__.setElement.call(this,e),i=this.getRow(),i.isMovable()&&(t.ListView.defaults.row_move_handle_tooltip&&new t.Tooltip({text:t.ListView.defaults.row_move_handle_tooltip,element:e}),i.getListView().getRowMoveTool({row:i,element:e}))},ListViewColumnRowMoveHandle.prototype.render=function(){return t.dom.element("DIV",{class:"cui-drag-handle-row"})},ListViewColumnRowMoveHandle}(t.ListViewColumn)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.ListViewColumnRowMoveHandlePlaceholder=function(t){function ListViewColumnRowMoveHandlePlaceholder(){return ListViewColumnRowMoveHandlePlaceholder.__super__.constructor.apply(this,arguments)}return e(ListViewColumnRowMoveHandlePlaceholder,t),ListViewColumnRowMoveHandlePlaceholder}(t.ListViewColumnEmpty)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.ListViewDraggable=function(i){function ListViewDraggable(){return ListViewDraggable.__super__.constructor.apply(this,arguments)}return e(ListViewDraggable,i),ListViewDraggable.prototype.initOpts=function(){return ListViewDraggable.__super__.initOpts.call(this),this.removeOpt("helper"),this.addOpts({row:{mandatory:!0,check:t.ListViewRow}})},ListViewDraggable.prototype.readOpts=function(){return ListViewDraggable.__super__.readOpts.call(this),this.__row_i=this._row.getRowIdx()},ListViewDraggable.prototype.get_marker=function(e){return null==e&&(e=""),t.dom.element("DIV",{class:"cui-lv-draggable "+e})},ListViewDraggable}(t.Draggable)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.ListViewRowMove=function(i){function ListViewRowMove(){return ListViewRowMove.__super__.constructor.apply(this,arguments)}return e(ListViewRowMove,i),ListViewRowMove.prototype.initOpts=function(){return ListViewRowMove.__super__.initOpts.call(this),this.removeOpt("helper"),this.addOpts({row:{mandatory:!0,check:t.ListViewRow}})},ListViewRowMove.prototype.readOpts=function(){return ListViewRowMove.__super__.readOpts.call(this),this.__row_i=this._row.getRowIdx(),this.__display_row_i=this._row.getDisplayRowIdx(),this.__listView=this._row.getListView()},ListViewRowMove.prototype.get_helper=function(t,e,i){return this.get_marker("cui-lv-row-move")},ListViewRowMove.prototype.get_helper_contain_element=function(){return this.__listView.getBottom()},ListViewRowMove.prototype.get_axis=function(){return"y"},ListViewRowMove.prototype.get_init_helper_pos=function(t,e){var i;return i=this.__listView.getRowGridRect(this.__row_i),{top:i.top_abs,left:i.left_abs,width:i.width,height:i.height}},ListViewRowMove.prototype.init_helper=function(){return this.movableTargetDiv=this.get_marker("cui-lv-row-move-target"),t.dom.append(this.__listView.getGrid(),this.movableTargetDiv),ListViewRowMove.__super__.init_helper.call(this)},ListViewRowMove.prototype.do_drag=function(t,e,i){var n;ListViewRowMove.__super__.do_drag.call(this,t,e,i),(n=this.__listView.getCellByTarget(e))&&(n.clientX=t.clientX(),n.clientY=t.clientY(),n.display_row_i>=this.__listView.fixedRowsCount&&this.showHorizontalTargetMarker(n))},ListViewRowMove.prototype.cleanup_drag=function(e){return ListViewRowMove.__super__.cleanup_drag.call(this,e),t.dom.remove(this.movableTargetDiv),this.movableTargetDiv=null},ListViewRowMove.prototype.end_drag=function(e){var i,n;if(ListViewRowMove.__super__.end_drag.call(this,e),this.target)return i=this._row,n=this.__listView.getListViewRow(this.target.row_i),t.globalDrag.noClickKill=!0,i.moveRow?i.moveRow(this.__listView,n,this.target.after):this.__listView.moveRow(this.__row_i,this.target.row_i,this.target.after)},ListViewRowMove.prototype.showHorizontalTargetMarker=function(e){return this.showHorizontalTargetMarkerSetTarget(e),this.target.row_i===this.__row_i||this.target.before_row_i===this.__row_i&&!1===this.target.after||this.target.after_row_i===this.__row_i&&!1===this.target.before?(this.target=null,t.dom.hideElement(this.movableTargetDiv)):(t.dom.showElement(this.movableTargetDiv),t.dom.setStyle(this.movableTargetDiv,{left:this.target.left,top:this.target.top,width:this.target.width}))},ListViewRowMove.prototype.showHorizontalTargetMarkerSetTarget=function(t){var e,i;this.target={row_i:t.row_i},i=this.__listView.getRowGridRect(t.row_i),this.__display_row_i>0&&(this.target.before_row_i=this.__listView.getRowIdx(this.__display_row_i-1)),this.__display_row_i<this.__listView.rowsCount-1&&(this.target.after_row_i=this.__listView.getRowIdx(this.__display_row_i+1)),e=t.clientY-i.top_abs,e<i.height/2?(this.target.after=!1,this.target.top=i.top):(this.target.after=!0,this.target.top=i.top+i.height),this.target.width=i.width,this.target.left=i.left},ListViewRowMove}(t.ListViewDraggable)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty,n=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1};t.ListViewTreeRowMove=function(i){function ListViewTreeRowMove(){return ListViewTreeRowMove.__super__.constructor.apply(this,arguments)}return e(ListViewTreeRowMove,i),ListViewTreeRowMove.prototype.initOpts=function(){return ListViewTreeRowMove.__super__.initOpts.call(this),this.addOpts({rowMoveWithinNodesOnly:{check:Boolean}})},ListViewTreeRowMove.prototype.get_init_helper_pos=function(t,e){var i,n,o,r,s,a,l,u;for(s=ListViewTreeRowMove.__super__.get_init_helper_pos.call(this,t,e),this.blockedRows=[this.__row_i],i=this.__listView.getRowHeight(this.__row_i),a=this._row.getRowsToMove(),o=n=0,r=a.length;n<r;o=++n)l=a[o],u=l.getRowIdx(),this.blockedRows.push(u),i+=this.__listView.getRowHeight(u);return s.height=i,s},ListViewTreeRowMove.prototype.showHorizontalTargetMarker=function(e){var i,n;return this.showHorizontalTargetMarkerSetTarget(e),this.blockedAfterRows=[this.target.before_row_i],this.blockedBeforeRows=[this.target.after_row_i],n=this._row,(i=n.getChildIdx())<n.father.children.length-1&&this.blockedBeforeRows.push(n.father.children[i+1].getRowIdx()),this.allowRowMove()?(t.dom.showElement(this.movableTargetDiv),t.dom.setStyle(this.movableTargetDiv,{left:this.target.left,top:this.target.top,width:this.target.width,height:this.target.height})):(this.target=null,t.dom.hideElement(this.movableTargetDiv))},ListViewTreeRowMove.prototype.allowRowMove=function(){var t,e,i,o,r,s,a;return!0,i=this.target.row_i,!(n.call(this.blockedRows,i)>=0||(o=this.target.row_i,n.call(this.blockedAfterRows,o)>=0&&this.target.after)||(r=this.target.row_i,n.call(this.blockedBeforeRows,r)>=0&&!this.target.after))&&(s=this.__listView.getNodesForMove(this.__row_i,this.target.row_i,this.target.after),t=s[0],a=s[1],e=s[2],(!this._rowMoveWithinNodesOnly||!e)&&!!t.allowRowMove(a,e,this.target.after))},ListViewTreeRowMove}(t.ListViewRowMove)}).call(e,i(0))},function(t,e,i){(function(t){var e,n=function(t,e){function ctor(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},o={}.hasOwnProperty;e=i(197),t.GoogleMap=function(e){function GoogleMap(e){this.opts=null!=e?e:{},t.util.assert(t.GoogleMap.defaults.google_api.key,"It's necessary to add a google maps api key in order to use CUI.GoogleMap"),this.__listeners=[],GoogleMap.__super__.constructor.call(this,this.opts)}return n(GoogleMap,e),GoogleMap.defaults={google_api:{key:null,language:"en"}},GoogleMap.prototype.__getMapClassName=function(){return"cui-google-map"},GoogleMap.prototype.__buildMap=function(){var e;return e=new google.maps.Map(this.get("center"),{zoomControl:!1}),t.dom.waitForDOMInsert({node:this}).done(function(t){return function(){return google.maps.event.trigger(e,"resize"),t._zoomToFitAllMarkersOnInit?t.zoomToFitAllMarkers():(e.setCenter(t._centerPosition),e.setZoom(t._zoom)),t.__onReady()}}(this)),e},GoogleMap.prototype.__bindOnClickMapEvent=function(){return this.__listeners.push(this.__map.addListener("click",function(t){return function(e){return t.__map.setCenter(e.latLng),t.setSelectedMarkerPosition(e.latLng)}}(this)))},GoogleMap.prototype.__buildMarker=function(t){return new google.maps.Marker(t)},GoogleMap.prototype.__addMarkerToMap=function(t){if(t.setMap(this.__map),t.infoWindow)return this.__listeners.push(t.addListener("click",function(e){return function(){return t.infoWindow.open(e.__map,t)}}(this)))},GoogleMap.prototype.__removeMarker=function(t){return t.setMap(null)},GoogleMap.prototype.getSelectedMarkerPosition=function(){var t,e;if(t=null!=(e=this.__selectedMarker)?e.getPosition():void 0)return{lat:t.lat(),lng:t.lng()}},GoogleMap.prototype.setSelectedMarkerPosition=function(t){var e;return this.__selectedMarker?this.__selectedMarker.setPosition(t):(e=this._selectedMarkerOptions||{},e.position=t,e.draggable=this._clickable,this.__selectedMarker=this.addMarker(e),this.__listeners.push(this.__selectedMarker.addListener("dragend",function(t){return function(e){return t.__map.setCenter(e.latLng),"function"==typeof t._onMarkerSelected?t._onMarkerSelected(t.getSelectedMarkerPosition()):void 0}}(this)))),"function"==typeof this._onMarkerSelected?this._onMarkerSelected(this.getSelectedMarkerPosition()):void 0},GoogleMap.prototype.removeSelectedMarker=function(){if(this.__selectedMarker)return this.__removeMarker(this.__selectedMarker),delete this.__selectedMarker},GoogleMap.prototype.hideMarkers=function(){var t,e,i,n;for(n=this.__markers,t=0,e=n.length;t<e;t++)i=n[t],i.setMap(null)},GoogleMap.prototype.showMarkers=function(){var t,e,i,n;for(n=this.__markers,t=0,e=n.length;t<e;t++)i=n[t],i.setMap(this.__map)},GoogleMap.prototype.destroy=function(){var t,e,i,n,o,r,s,a;for(s=this.__listeners,t=0,i=s.length;t<i;t++)o=s[t],o.remove();for(a=this.__markers,e=0,n=a.length;e<n;e++)r=a[e],r.setMap(null);return delete this.__listeners,delete this.__selectedMarker,delete this.__bounds,GoogleMap.__super__.destroy.call(this)},GoogleMap.prototype.zoomToFitAllMarkers=function(){return t.dom.waitForDOMInsert({node:this}).done(function(t){return function(){var e,i,n,o;if(t.__markers.length>0){for(t.__bounds=new google.maps.LatLngBounds,o=t.__markers,e=0,i=o.length;e<i;e++)n=o[e],t.__bounds.extend(n.position);return t.__map.fitBounds(t.__bounds)}return t.__map.setCenter(t._centerPosition),t.__map.setZoom(t._zoom)}}(this))},GoogleMap.prototype.zoomIn=function(){return this.__map.setZoom(this.__map.getZoom()+1)},GoogleMap.prototype.zoomOut=function(){return this.__map.setZoom(this.__map.getZoom()-1)},GoogleMap.prototype.resize=function(){return google.maps.event.trigger(this.__map,"resize")},GoogleMap.prototype.getZoom=function(){return this.__map.getZoom()},GoogleMap.prototype.setZoom=function(t){return this.__map.setZoom(t)},GoogleMap.prototype.setCenter=function(t){return this.__map.setCenter(t)},GoogleMap.prototype.__addCustomOption=function(e,i,n){switch(i){case"cui_content":return e.infoWindow=t.GoogleMap.getInfoWindow(n);default:return t.util.assert(!1,"CUI.GoogleMap","Unknown option. Known options: ['cui_content']")}},GoogleMap.getInfoWindow=function(e){var i;return i=t.dom.div(),t.dom.append(i,e),new google.maps.InfoWindow({content:i})},GoogleMap}(t.Map),t.ready(function(i){return function(){var i;if(t.GoogleMap.defaults.google_api.key)return i=new t.Deferred,e(t.GoogleMap.defaults.google_api).then(function(){return i.resolve()}),i.promise()}}())}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.IconMarker=function(i){function IconMarker(e){var i;this.opts=null!=e?e:{},IconMarker.__super__.constructor.call(this,this.opts),i=new t.Template({name:"map-div-marker",map:{icon:!0,arrow:!0}}),this.registerTemplate(i),this.render()}return e(IconMarker,i),IconMarker.prototype.initOpts=function(){return IconMarker.__super__.initOpts.call(this),this.addOpts({icon:{check:String},color:{check:String},size:{check:"Integer",default:28},arrowSize:{check:"Integer",default:5},onClick:{check:Function},tooltip:{check:"PlainObject"}})},IconMarker.prototype.render=function(){var e,i,n;return i={width:this._size,height:this._size,background:this._color},e=this._onClick?new t.Button({icon:this._icon,tooltip:this._tooltip,onClick:this._onClick,appearance:"flat"}):new t.Icon({icon:this._icon}),this.append(e,"icon"),t.dom.setStyle(this.DOM,i),n={width:2*this._arrowSize,height:2*this._arrowSize,"margin-left":-this._arrowSize},t.dom.setStyle(this.get("arrow"),n)},IconMarker.prototype.toHtml=function(){return this.DOM.outerHTML},IconMarker.prototype.getAnchor=function(){return{top:this._size+this._arrowSize,left:this._size/2}},IconMarker.prototype.getSize=function(){return this._size},IconMarker}(t.DOMElement)}).call(e,i(0))},function(t,e,i){(function(t){var e,n=function(t,e){function ctor(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},o={}.hasOwnProperty;e=i(183),i(196),t.LeafletMap=function(i){function LeafletMap(e){this.opts=null!=e?e:{},t.LeafletMap.loadCSSPromise||(t.LeafletMap.loadCSSPromise=this.__loadCSS()),t.LeafletMap.defaults.tileLayerOptions.maxZoom=t.Map.defaults.maxZoom,this.__groups={},LeafletMap.__super__.constructor.call(this,this.opts)}return n(LeafletMap,i),LeafletMap.defaults={urlCss:"https://unpkg.com/leaflet@1.2.0/dist/leaflet.css",tileLayerUrl:"http://{s}.tile.osm.org/{z}/{x}/{y}.png",tileLayerOptions:{attribution:e}},LeafletMap.prototype.__getMapClassName=function(){return"cui-leaflet-map"},LeafletMap.prototype.__buildMap=function(){var e,i;return e=L.map(this.get("center"),{zoomControl:!1}),i=L.tileLayer(t.LeafletMap.defaults.tileLayerUrl,t.LeafletMap.defaults.tileLayerOptions),t.dom.waitForDOMInsert({node:this}).done(function(n){return function(){return t.LeafletMap.loadCSSPromise.done(function(){return n._zoomToFitAllMarkersOnInit?n.zoomToFitAllMarkers():e.setView(n._centerPosition,n._zoom),i.addTo(e),n.__onReady()})}}(this)),this._onClick&&e.on("click",this._onClick),this._onZoomEnd&&e.on("zoomend",this._onZoomEnd),e.on("moveend",function(t){return function(){return t.__onMoveEnd(arguments)}}(this)),e},LeafletMap.prototype.__buildMarker=function(e){var i,n,o,r,s;return e.iconName&&e.iconColor&&(n=new t.IconMarker({icon:e.iconName,color:e.iconColor}),o=n.getSize(),i=n.getAnchor(),e.icon=L.divIcon({html:n.toHtml(),iconAnchor:[i.left,i.top],iconSize:[o,o]}),delete e.iconName,delete e.iconColor),r=L.marker(e.position,e),(null!=(s=e.group)?s.type:void 0)&&this._showPolylines&&(this.__groups[e.group.type]=this.__groups[e.group.type]||[],this.__groups[e.group.type].push({marker:r,options:e.group.options}),delete e.group),r},LeafletMap.prototype.__addMarkerToMap=function(t){return t.addTo(this.__map),this.__updateGroupsPolylines()},LeafletMap.prototype.__bindOnClickMapEvent=function(){return this.__map.on("click",function(t){return function(e){if(t.setSelectedMarkerPosition(e.latlng),t.__selectedMarker)return t.__map.setView(t.getSelectedMarkerPosition())}}(this))},LeafletMap.prototype.__afterMarkerCreated=function(e,i){var n,o,r;o=i.cui_onClick,r=i.cui_onDoubleClick,o&&r&&(n=!1,o=function(e){return t.setTimeout(function(){if(!n)return i.cui_onClick(e)},200)},r=function(e){return n=!0,i.cui_onDoubleClick(e),t.setTimeout(function(){return n=!1},250)}),o&&e.on("click",o),r&&(this.__map.doubleClickZoom.disable(),e.on("dblclick",r))},LeafletMap.prototype.__removeMarker=function(t){var e,i,n,o,r;r=this.__groups;for(e in r)if(n=r[e],i=n.filter(function(e){return function(e){return e.marker===t}}()),i=i[0]){o=n.indexOf(i),n.splice(o,1);break}i&&i.polyline&&this.__map.removeLayer(i.polyline),t.off(),this.__map.removeLayer(t),t=null},LeafletMap.prototype.__updateGroupsPolylines=function(){var t,e,i;i=this.__groups;for(t in i)e=i[t],e.reduce(function(t){return function(e,i){if(i)return e.polyline?i:(e.polyline=L.polyline([e.marker.getLatLng(),i.marker.getLatLng()],{weight:1.5,color:e.options.color,dashArray:e.options.polyline}),e.polyline.addTo(t.__map),i)}}(this))},LeafletMap.prototype.getSelectedMarkerPosition=function(){var t;return null!=(t=this.__selectedMarker)?t.getLatLng():void 0},LeafletMap.prototype.setSelectedMarkerPosition=function(e){var i;if(t.Map.isValidPosition(e))return this.__selectedMarker?this.__selectedMarker.setLatLng(e):(i=this._selectedMarkerOptions||{},i.position=e,i.draggable=this._clickable,this.__selectedMarker=this.addMarker(i),this.__selectedMarker.on("dragstart",function(t){return function(){return t.__selectedMarkerPositionOnDragStart=t.getSelectedMarkerPosition()}}(this)),this.__selectedMarker.on("dragend",function(e){return function(){var i;return i=e.getSelectedMarkerPosition(),t.Map.isValidPosition(i)?"function"==typeof e._onMarkerSelected&&e._onMarkerSelected(e.getSelectedMarkerPosition()):e.setSelectedMarkerPosition(e.__selectedMarkerPositionOnDragStart),e.__map.setView(e.getSelectedMarkerPosition())}}(this))),"function"==typeof this._onMarkerSelected?this._onMarkerSelected(this.getSelectedMarkerPosition()):void 0},LeafletMap.prototype.removeSelectedMarker=function(){if(this.__selectedMarker)return this.__removeMarker(this.__selectedMarker),delete this.__selectedMarker},LeafletMap.prototype.hideMarkers=function(){var t,e,i,n;for(n=this.__markers,t=0,e=n.length;t<e;t++)i=n[t],i.setOpacity(0)},LeafletMap.prototype.showMarkers=function(){var t,e,i,n;for(n=this.__markers,t=0,e=n.length;t<e;t++)i=n[t],i.setOpacity(1)},LeafletMap.prototype.zoomToFitAllMarkers=function(){return t.dom.waitForDOMInsert({node:this}).done(function(t){return function(){var e;return t.__markers.length>0?(e=new L.featureGroup(t.__markers),t.__map.fitBounds(e.getBounds().pad(.05))):t.__map.setView(t._centerPosition,t._zoom)}}(this))},LeafletMap.prototype.zoomIn=function(){return this.__map.setZoom(this.__map.getZoom()+1)},LeafletMap.prototype.zoomOut=function(){return this.__map.setZoom(this.__map.getZoom()-1)},LeafletMap.prototype.resize=function(){return this.__map.invalidateSize()},LeafletMap.prototype.getZoom=function(){return this.__map.getZoom()},LeafletMap.prototype.setZoom=function(t){return this.__map.setZoom(t)},LeafletMap.prototype.setCenter=function(t,e){return null==e&&(e=this.getZoom()),this.__map.setView(t,e)},LeafletMap.prototype.getCenter=function(){return this.__map.getCenter()},LeafletMap.prototype.destroy=function(){var t,e,i,n,o;for(n=this.__markers,t=0,e=n.length;t<e;t++)i=n[t],this.__removeMarker(i);return null!=(o=this.__map)&&o.remove(),delete this.__selectedMarker,delete this.__groups,LeafletMap.__super__.destroy.call(this)},LeafletMap.prototype.__loadCSS=function(){var e;return e=new t.Deferred,t.LeafletMap.defaults.urlCss?(new t.CSSLoader).load({url:t.LeafletMap.defaults.urlCss}).done(function(){return e.resolve()}):e.resolve(),e.promise()},LeafletMap}(t.Map)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},n={}.hasOwnProperty;t.Template.loadTemplateText(i(216)),t.Map=function(i){function Map(e){var i,n,o,r;this.opts=null!=e?e:{},Map.__super__.constructor.call(this,this.opts),this.__mapTemplate=new t.Template({name:"map",map:{center:!0,"buttons-upper-left":!0,"buttons-upper-right":!0,"buttons-bottom-left":!0,"buttons-bottom-right":!0}}),this.append(this.__mapTemplate,"center"),t.dom.addClass(this.__mapTemplate.get("center"),this.__getMapClassName()),this.__zoomButtons=this.__getZoomButtons(),n=this.__zoomButtons,this._buttonsUpperLeft&&(n=n.concat(this._buttonsUpperLeft)),i=new t.Buttonbar({buttons:n}),t.dom.append(this.__mapTemplate.get("buttons-upper-left"),i),o=[],this._addFullscreenButton&&(r=this.__getFullscreenButtonOpts(),o.push(t.Pane.getToggleFillScreenButton(r))),this._buttonsUpperRight&&(o=o.concat(this._buttonsUpperRight)),o.length&&(i=new t.Buttonbar({buttons:o}),t.dom.append(this.__mapTemplate.get("buttons-upper-right"),i)),this._buttonsBottomRight&&(i=new t.Buttonbar({buttons:this._buttonsBottomRight}),t.dom.append(this.__mapTemplate.get("buttons-bottom-right"),i)),this._buttonsBottomLeft&&(i=new t.Buttonbar({buttons:this._buttonsBottomLeft}),t.dom.append(this.__mapTemplate.get("buttons-bottom-left"),i)),this.__markers=[],this.__map=this.__buildMap(),this._clickable&&this.__bindOnClickMapEvent(),this.addMarkers(this._markersOptions),this._selectedMarkerPosition&&this.setSelectedMarkerPosition(this._selectedMarkerPosition),this.__viewportResizeListener=t.Events.listen({type:"viewport-resize",node:this,call:function(t){return function(){return t.resize()}}(this)})}return e(Map,i),Map.defaults={maxZoom:18,minZoom:0,buttons:{fullscreen:{open:{icon:"fa-arrows-alt"},close:{icon:"fa-compress"},tooltip:"Open/Close fullscreen"},zoom:{plus:{icon:"zoom_in",tooltip:"Zoom in"},reset:{icon:"fa-dot-circle-o",tooltip:"Reset"},minus:{icon:"zoom_out",tooltip:"Zoom out"}}}},Map.prototype.initOpts=function(){return Map.__super__.initOpts.call(this),this.addOpts({centerPosition:{check:t.Map.isValidPosition,default:{lat:0,lng:0}},zoom:{check:"Integer",default:1},markersOptions:{check:Array,default:[]},clickable:{check:Boolean,default:!0},selectedMarkerPosition:{check:t.Map.isValidPosition},selectedMarkerOptions:{check:"PlainObject"},onMarkerSelected:{check:Function},zoomToFitAllMarkersOnInit:{check:Boolean,default:!1},onClick:{check:Function},onZoomEnd:{check:Function},onMoveEnd:{check:Function},onReady:{check:Function},buttonsUpperLeft:{check:Array},buttonsUpperRight:{check:Array},buttonsBottomRight:{check:Array},buttonsBottomLeft:{check:Array},showPolylines:{check:Boolean,default:!0},addFullscreenButton:{check:Boolean,default:!0}})},Map.prototype.addMarkers=function(t){var e,i,n,o;for(o=[],e=0,i=t.length;e<i;e++)n=t[e],o.push(this.addMarker(n));return o},Map.prototype.addMarker=function(t){var e,i;return i=this.__getMarkerOptions(t),e=this.__buildMarker(i),this.__afterMarkerCreated(e,t),this.__markers.push(e),this.__addMarkerToMap(e),e},Map.prototype.removeMarkers=function(t){var e,i,n,o;for(o=[],e=0,i=t.length;e<i;e++)n=t[e],o.push(this.removeMarker(n));return o},Map.prototype.removeMarker=function(t){var e;return-1!==(e=this.__markers.indexOf(t))&&(this.__markers.splice(e,1),this.__removeMarker(t))},Map.prototype.updateSelectedMarkerOptions=function(t){var e;if(this._selectedMarkerOptions=t,e=this.getSelectedMarkerPosition())return this.removeSelectedMarker(),this.setSelectedMarkerPosition(e)},Map.prototype.setButtonBar=function(e,i){var n;return n=new t.Buttonbar({buttons:e}),t.dom.append(this.__mapTemplate.get("buttons-"+i),n)},Map.prototype.getSelectedMarkerPosition=function(){return t.util.assert(!1,t.util.getObjectClass(this)+".getSelectedMarkerPosition needs to be implemented.")},Map.prototype.setSelectedMarkerPosition=function(){return t.util.assert(!1,t.util.getObjectClass(this)+".setSelectedMarkerPosition needs to be implemented.")},Map.prototype.removeSelectedMarker=function(){return t.util.assert(!1,t.util.getObjectClass(this)+".removeSelectedMarker needs to be implemented.")},Map.prototype.hideMarkers=function(){return t.util.assert(!1,t.util.getObjectClass(this)+".hideMarkers needs to be implemented.")},Map.prototype.showMarkers=function(){return t.util.assert(!1,t.util.getObjectClass(this)+".showMarkers needs to be implemented.")},Map.prototype.zoomToFitAllMarkers=function(){return t.util.assert(!1,t.util.getObjectClass(this)+".zoomToFitAllMarkers needs to be implemented.")},Map.prototype.zoomIn=function(){return t.util.assert(!1,t.util.getObjectClass(this)+".zoomIn needs to be implemented.")},Map.prototype.zoomOut=function(){return t.util.assert(!1,t.util.getObjectClass(this)+".zoomOut needs to be implemented.")},Map.prototype.resize=function(){return t.util.assert(!1,t.util.getObjectClass(this)+".resize needs to be implemented.")},Map.prototype.getZoom=function(){return t.util.assert(!1,t.util.getObjectClass(this)+".getZoom needs to be implemented.")},Map.prototype.setZoom=function(){return t.util.assert(!1,t.util.getObjectClass(this)+".setZoom needs to be implemented.")},Map.prototype.setCenter=function(){return t.util.assert(!1,t.util.getObjectClass(this)+".setCenter needs to be implemented.")},Map.prototype.getCenter=function(){return t.util.assert(!1,t.util.getObjectClass(this)+".getCenter needs to be implemented.")},Map.prototype.__addMarkerToMap=function(){return t.util.assert(!1,t.util.getObjectClass(this)+".__addMarkerToMap needs to be implemented.")},Map.prototype.__getMapClassName=function(){return t.util.assert(!1,t.util.getObjectClass(this)+".__getMapClassName needs to be implemented.")},Map.prototype.__buildMap=function(){return t.util.assert(!1,t.util.getObjectClass(this)+".__buildMap needs to be implemented.")},Map.prototype.__buildMarker=function(){return t.util.assert(!1,t.util.getObjectClass(this)+".__buildMarker needs to be implemented.")},Map.prototype.__bindOnClickMapEvent=function(){return t.util.assert(!1,t.util.getObjectClass(this)+".__bindOnClickMapEvent needs to be implemented.")},Map.prototype.__onMarkerClick=function(){return t.util.assert(!1,t.util.getObjectClass(this)+".__onMarkerClick needs to be implemented.")},Map.prototype.__removeMarker=function(){return t.util.assert(!1,t.util.getObjectClass(this)+".__removeMarker needs to be implemented.")},Map.prototype.__addCustomOption=function(t,e,i){return!1},Map.prototype.__afterMarkerCreated=function(t,e){return!1},Map.prototype.__getMarkerOptions=function(t){var e,i,n;i={};for(e in t)n=t[e],e.startsWith("cui_")?this.__addCustomOption(i,e,n):i[e]=n;return i},Map.prototype.__onReady=function(){return this.__initZoom=this.__map.getZoom(),this.__initCenter=this.__map.getCenter(),this.__disableEnableZoomButtons(),"function"==typeof this._onReady?this._onReady():void 0},Map.prototype.__onMoveEnd=function(){return this.__disableEnableZoomButtons(),"function"==typeof this._onMoveEnd?this._onMoveEnd(arguments):void 0},Map.prototype.__disableEnableZoomButtons=function(){var e,i,n,o;return n=this.__zoomButtons[0],e=this.__zoomButtons[1],o=this.__zoomButtons[2],this.__map.getZoom()===t.Map.defaults.maxZoom?n.disable():n.enable(),this.__map.getZoom()===t.Map.defaults.minZoom?o.disable():o.enable(),i=this.__map.getCenter(),this.__map.getZoom()===this.__initZoom&&Math.round(i.lat)===Math.round(this.__initCenter.lat)&&Math.round(i.lng)===Math.round(this.__initCenter.lng)?e.disable():e.enable()},Map.prototype.__getZoomButtons=function(){return[new t.Button({icon:t.Map.defaults.buttons.zoom.plus.icon,tooltip:{text:t.Map.defaults.buttons.zoom.plus.tooltip},group:"upper-left",onClick:function(t){return function(){return t.zoomIn()}}(this)}),new t.Button({icon:t.Map.defaults.buttons.zoom.reset.icon,tooltip:{text:t.Map.defaults.buttons.zoom.reset.tooltip},group:"upper-left",onClick:function(t){return function(){return t.setCenter(t.__initCenter,t.__initZoom),t.__disableEnableZoomButtons()}}(this)}),new t.Button({icon:t.Map.defaults.buttons.zoom.minus.icon,tooltip:{text:t.Map.defaults.buttons.zoom.minus.tooltip},group:"upper-left",onClick:function(t){return function(){return t.zoomOut()}}(this)})]},Map.prototype.__getFullscreenButtonOpts=function(){return{icon_inactive:new t.Icon({icon:t.Map.defaults.buttons.fullscreen.open.icon}),icon_active:new t.Icon({icon:t.Map.defaults.buttons.fullscreen.close.icon}),group:"upper-right",tooltip:{text:t.Map.defaults.buttons.fullscreen.tooltip}}},Map.prototype.destroy=function(){var t,e,i,n,o,r;for(null!=(n=this.__viewportResizeListener)&&n.destroy(),delete this.__viewportResizeListener,null!=(o=this.__mapTemplate)&&o.destroy(),delete this.__mapTemplate,r=this.__zoomButtons,e=0,i=r.length;e<i;e++)t=r[e],t.destroy();return delete this.__zoomButtons,delete this.__initZoom,delete this.__initCenter,delete this.__markers,delete this.__map,Map.__super__.destroy.call(this)},Map.isValidLatitude=function(e){return t.util.isNumber(e)&&e<=90&&e>=-90},Map.isValidLongitude=function(e){return t.util.isNumber(e)&&e<=180&&e>=-180},Map.isValidPosition=function(e){return t.Map.isValidLatitude(e.lat)&&t.Map.isValidLongitude(e.lng)},Map}(t.Pane)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},n={}.hasOwnProperty;t.Template.loadTemplateText(i(184)),t.MapInput=function(i){function MapInput(t){this.opts=null!=t?t:{},MapInput.__super__.constructor.call(this,this.opts)}return e(MapInput,i),MapInput.defaults={labels:{mapButtonTooltip:"Show map",iconButtonTooltip:"Show icon",placeholder:"Insert or paste coordinates",iconLabel:"Icon",colorLabel:"Color"},displayFormat:"ll",mapClass:t.LeafletMap,iconColors:["#b8bfc4","#80d76a","#f95b53","#ffaf0f","#57a8ff"],icons:["fa-map-marker","fa-envelope","fa-automobile","fa-home","fa-bicycle","fa-graduation-cap"]},MapInput.displayFormats={dms:"FFf",ddm:"Ff",dd:"f",ll:function(t){return t.lat.toFixed(5)+", "+t.lng.toFixed(5)}},MapInput.prototype.getTemplateKeyForRender=function(){return"center"},MapInput.prototype.initOpts=function(){return MapInput.__super__.initOpts.call(this),this.addOpts({mapOptions:{check:"PlainObject",default:{}},displayFormat:{check:function(e){return function(e){return!t.util.isNull(t.MapInput.displayFormats[e])}}(),default:t.MapInput.defaults.displayFormat}}),this.removeOpt("getValueForDisplay"),this.removeOpt("getValueForInput"),this.removeOpt("getValueForStore"),this.removeOpt("checkInput")},MapInput.prototype.readOpts=function(){return MapInput.__super__.readOpts.call(this),this._checkInput=this.__checkInput,this.__selectedMarkerOptions={}},MapInput.prototype.initValue=function(){var e,i,n;return MapInput.__super__.initValue.call(this),e=this.getValue(),this.__selectedMarkerOptions.iconName=e.iconName||t.MapInput.defaults.icons[0],this.__selectedMarkerOptions.iconColor=e.iconColor||t.MapInput.defaults.iconColors[0],n=this.__getPosition(),n&&t.Map.isValidPosition(n)?(i=this.__getFormattedPosition(n),this.setValue(i)):this.setValue("")},MapInput.prototype.getTemplate=function(){return new t.Template({name:"map-input",map:{left:!0,center:!0,right:!0}})},MapInput.prototype.getValueForDisplay=function(){return this.__getPositionForDisplay()},MapInput.prototype.getValueForInput=function(){return this.__getPositionForDisplay()},MapInput.prototype.__getPositionForDisplay=function(){var t;return t=this.__getPosition(),t?this.__getFormattedPosition(t):""},MapInput.prototype.getValueForStore=function(e){var i,n;return i={iconName:this.__selectedMarkerOptions.iconName,iconColor:this.__selectedMarkerOptions.iconColor},e?(n=t.util.parseCoordinates(e),i.position=n||""):i.position=this.__getPosition(),i},MapInput.prototype.render=function(){var e;return MapInput.__super__.render.call(this),this.addClass("cui-data-field--with-button"),this.__initMap(),t.util.isEmpty(this._placeholder)&&this.__input.setAttribute("placeholder",t.MapInput.defaults.labels.placeholder),e=new t.defaults.class.Button({icon:"fa-map-o",tooltip:{text:t.MapInput.defaults.labels.mapButtonTooltip},onClick:function(t){return function(){return t.__openMapPopover(e)}}(this)}),this.__openIconPopoverButton=new t.defaults.class.Button({class:"cui-map-icon-popover-button",icon:this.__selectedMarkerOptions.iconName,tooltip:{text:t.MapInput.defaults.labels.iconButtonTooltip},onClick:function(t){return function(){return t.__openIconPopover(t.__openIconPopoverButton)}}(this)}),this.replace(e,"right"),this.replace(this.__openIconPopoverButton,"left"),this.__updateIconOptions()},MapInput.prototype.__openMapPopover=function(e){var i;i=new t.Popover({element:e,handle_focus:!1,placement:"se",class:"cui-map-popover",pane:this.__buildMap(),onHide:function(){return i.destroy()}}),i.show()},MapInput.prototype.__updateIconOptions=function(){return this.__openIconPopoverButton.setIcon(this.__selectedMarkerOptions.iconName),t.dom.setStyleOne(this.__openIconPopoverButton.getIcon(),"color",this.__selectedMarkerOptions.iconColor)},MapInput.prototype.__openIconPopover=function(e){var i;i=new t.Popover({element:e,handle_focus:!1,placement:"se",pane:{content:this.__buildIconPopoverContent()},onHide:function(){return i.destroy()}}),i.show()},MapInput.prototype.__buildIconPopoverContent=function(){var e,i,n;return i=new t.Select({data:this.__selectedMarkerOptions,name:"iconColor",form:{label:t.MapInput.defaults.labels.colorLabel},onDataChanged:function(t){return function(){return t.storeValue(),t.__updateIconOptions()}}(this),options:function(e){return function(){var e,i,n,o,r,s;for(r=[],s=t.MapInput.defaults.iconColors,i=0,o=s.length;i<o;i++)e=s[i],n=new t.Icon({class:"css-swatch"}),t.dom.setStyle(n,{background:e}),r.push({icon:n,value:e});return r}}()}),n=new t.Select({data:this.__selectedMarkerOptions,name:"iconName",form:{label:t.MapInput.defaults.labels.iconLabel},onDataChanged:function(t){return function(){return t.storeValue(),t.__updateIconOptions()}}(this),options:function(e){return function(){var e,i,n,o,r;for(o=[],r=t.MapInput.defaults.icons,e=0,n=r.length;e<n;e++)i=r[e],o.push({icon:i,value:i});return o}}()}),e=new t.Form({fields:[n,i]}),e.start(),e},MapInput.prototype.__initMap=function(){var t;this._mapOptions.showPolylines=!1,t=this._mapOptions.onMarkerSelected,this._mapOptions.onMarkerSelected=function(e){return function(i){var n;return n=e.__getFormattedPosition({lat:i.lat,lng:i.lng}),e.setValue(n),e.triggerDataChanged(),"function"==typeof t?t():void 0}}(this)},MapInput.prototype.__buildMap=function(){var e;return this._mapOptions.selectedMarkerOptions=this.__selectedMarkerOptions,e=this.__getPosition(),e&&(this._mapOptions.selectedMarkerPosition=e,this._mapOptions.centerPosition=e),new t.MapInput.defaults.mapClass(this._mapOptions)},MapInput.prototype.__getPosition=function(){return this.getValue().position},MapInput.prototype.__getFormattedPosition=function(e){var i;return i=t.MapInput.displayFormats[this._displayFormat],t.Map.isValidPosition(e)?t.util.formatCoordinates(e,i):""},MapInput.prototype.__checkInput=function(e){return!!t.util.parseCoordinates(e)},MapInput.getDefaultDisplayFormat=function(){return t.MapInput.displayFormats[t.MapInput.defaults.displayFormat]},MapInput}(t.Input)}).call(e,i(0))},function(t,e,i){(function(t){var e,n=function(t,e){function ctor(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},o={}.hasOwnProperty;e=i(2),t.MarkdownInput=function(i){function MarkdownInput(){return MarkdownInput.__super__.constructor.apply(this,arguments)}return n(MarkdownInput,i),MarkdownInput.prototype.initOpts=function(){return MarkdownInput.__super__.initOpts.call(this),this.removeOpt("textarea"),this.addOpts({preview:{check:Boolean},preview_ms:{default:500,check:function(t){return function(t){return t>=0}}()},renderFunction:{mandatory:!0,default:function(i){return function(i){return e(i,t.defaults.marked_opts)}}(),check:Function}})},MarkdownInput.prototype.readOpts=function(){var e,i,n,o,r;for(MarkdownInput.__super__.readOpts.call(this),this._textarea=!0,this.__preview=null,this.__updatePreview=function(t){return function(){return t.updatePreview()}}(this),r={top:{}},o=["maximize","maximize_horizontal","maximize_vertical"],e=0,n=o.length;e<n;e++)i=o[e],this.hasSetOpt(i)&&(r[i]=this.getSetOpt(i));return this.__verticalLayout=new t.Pane(r)},MarkdownInput.prototype.initTemplate=function(){return this.registerTemplate(this.__verticalLayout.getLayout())},MarkdownInput.prototype.getTemplateKeyForRender=function(){return"center"},MarkdownInput.prototype.encloseSelection=function(t){var e,i,n;if(n=this.getSelection(),e=t.length,i=n.selected.split("\n"),!(i.length>1))return n.selected.startsWith(t)&&n.selected.endsWith(t)?(this.setValue(n.before+n.selected.substr(e,n.selected.length-2*e)+n.after),this.setSelection({start:n.start,end:n.end-2*e})):(this.setValue(n.before+t+n.selected+t+n.after),this.setSelection({start:n.start,end:n.end+2*e}))},MarkdownInput.prototype.makeOrderedList=function(){return this.__makeList(!1)},MarkdownInput.prototype.makeUnorderedList=function(){return this.__makeList(!0)},MarkdownInput.prototype.checkList=function(){var t;return t=this.__makeList(null,!0),console.debug("selection is type",t)},MarkdownInput.prototype.__makeList=function(e,i){var n,o,r,s,a,l,u,c,h,d,p;if(null==e&&(e=!0),null==i&&(i=!1),d=this.getSelection(),h=d.selected.split("\n"),""!==d.before&&!d.before.endsWith("\n"))return null;for(p=null,i?o=void 0:u=e?"- ":"1. ",l=[],n=0,s=h.length;n<s;n++)if(c=h[n],console.debug("row:",c),0!==c.trim().length){if(a=c.match(/^(\s*)([0-9]+\.|\*|\-|)(\s*)(.*)$/),console.debug("match",c,a),!a)return console.warn("No match, not making list.",c),null;if(null===p)p=a[1],r=a[2],o=""!==r?isNaN(parseInt(r)):null,null===o||t.util.xor(o,e)||(u=""),console.debug("rowcriteria.",p.length,r);else if(a[1]!==p){l.push(c.substring(a[1].length-p.length)),console.debug("row not matching space criteria.");continue}i||l.push(p+u+a[4])}else l.push(c);return i?null===o?"nolist":!0===o?"ul":!1===o?"ol":null:this.updateSelection(l.join("\n"))},MarkdownInput.prototype.handleSelectionChange=function(e){var i;return MarkdownInput.__super__.handleSelectionChange.call(this,e),i=this.getSelection(),console.debug("md selection change",e,t.util.dump(i)),this.checkList()},MarkdownInput.prototype.render=function(){var e;return MarkdownInput.__super__.render.call(this),e=new t.Toolbar({left:{content:[{group:"lists",icon:"fa-list-ul",onClick:function(t){return function(){return t.makeUnorderedList()}}(this)},{group:"lists",icon:"fa-list-ol",onClick:function(t){return function(){return t.makeOrderedList()}}(this)},{text:"*",onClick:function(t){return function(){return t.encloseSelection("*")}}(this)},{text:"**",onClick:function(t){return function(){return t.encloseSelection("**")}}(this)},{text:"SC",onClick:function(t){return function(){return t.handleSelectionChange()}}(this)}]}}),this.__verticalLayout.append(e,"top"),this},MarkdownInput.prototype.storeValue=function(e,i){var n;return null==i&&(i={}),n=MarkdownInput.__super__.storeValue.call(this,e,i),this.__preview?(0===this._preview_ms?this.updatePreview():t.scheduleCallback({ms:this._preview_ms,call:this.__updatePreview}),n):n},MarkdownInput.prototype.getPreview=function(){return this.__preview||(this.__preview=t.dom.element("div",{class:"cui-markdown-input-preview"}),this.updatePreview()),this.__preview},MarkdownInput.prototype.updatePreview=function(){return this.__preview.innerHTML=this.renderHTML()},MarkdownInput.prototype.renderHTML=function(){return this._renderFunction(this.getElement().value)},MarkdownInput.__escape_regexp=new RegExp("[\\"+"*-_\\![]()".split("").join("\\")+"]","g"),MarkdownInput.escape=function(e){var i,n,o,r;if(t.util.assert("string"==(o=typeof e)||"object"===o,"MarkdownInput.escape","Object needs to be typof 'string' or 'object'.",{obj:e}),"string"==typeof e)return e.replace(this.__escape_regexp,"\\$&");n={};for(i in e)r=e[i],n[i]=this.escape(r);return n},MarkdownInput}(t.Input)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.Menu=function(i){function Menu(t){this.opts=null!=t?t:{},Menu.__super__.constructor.call(this,this.opts),this._itemList&&this.setItemList(this._itemList)}return e(Menu,i),Menu.prototype.initOpts=function(){return Menu.__super__.initOpts.call(this),this.addOpts({itemList:{check:function(e){return e instanceof t.ItemList||t.util.isPlainObject(e)}},auto_close_after_click:{default:!0,check:Boolean},parent_menu:{check:t.Menu},onBeforeItemListInit:{check:Function}}),this},Menu.prototype.readOpts=function(){Menu.__super__.readOpts.call(this),this.opts.placements||(this._parent_menu?this._placements=["es","en","ws","wn"]:this._show_at_position?this._placements=["es","en","ws","wn"]:this._placements=["se","sw","ne","nw"]),this.opts.placement||(this._placement=this._placements[0])},Menu.prototype.show=function(e){return this.__event=e,t.util.assert(!this.isDestroyed(),t.util.getObjectClass(this)+".show","Element is already destroyed."),this.isShown()?(this.position(),this):this.__loading?this:(this.__itemList?(this.__loading=!0,this.__itemList.render(this,this.__event).done(function(t){return function(){return Menu.__super__.show.call(t,t.__event),t.__loading=!1}}(this))):Menu.__super__.show.call(this,this.__event),t.Events.listen({type:"keydown",instance:this,node:this.DOM,capture:!0,call:function(t){return function(e){if(!e.hasModifierKey())return 27===e.keyCode()?(t.hide(),e.stop()):void 0}}(this)}),this)},Menu.prototype.hasItems=function(t){var e;return null!=(e=this.__itemList)?e.hasItems(t):void 0},Menu.prototype.getItemList=function(){return this.__itemList},Menu.prototype.setItemList=function(e){return e instanceof t.ItemList?this.__itemList=e:(delete e.maximize,e.maximize_vertical=!1,e.maximize_horizontal=!0,e.hasOwnProperty("active_item_idx")||(e.active_item_idx=null),this.__itemList=new t.ItemList(e)),this.replace(this.__itemList),this.proxy(this.__itemList,["setActiveIdx"]),this.isShown()&&this.__itemList.render(this,this.__event).done(function(t){return function(){return t.position()}}(this)),this},Menu.prototype.isAutoCloseAfterClick=function(){return this._auto_close_after_click},Menu.prototype.destroy=function(){var t;return null!=(t=this.__itemList)&&t.destroy(),Menu.__super__.destroy.call(this)},Menu.prototype.hide=function(t){return Menu.__super__.hide.call(this,t),this},Menu.prototype.hideAll=function(t){var e;return this.hide(t),null!=(e=this._parent_menu)&&e.hideAll(t),this},Menu.prototype.getButton=function(){var e,i;return!(i=this.getOpt("element"))||i instanceof t.Button?i:(e=t.dom.data(i.DOM||i,"element"),e instanceof t.Button?e:null)},Menu}(t.Layer)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.Modal=function(i){function Modal(e){var i;this.opts=null!=e?e:{},Modal.__super__.constructor.call(this,this.opts),i=t.Pane.getToggleFillScreenButton({tooltip:this._fill_screen_button_tooltip}),this.__addHeaderButton("fill_screen_button",i),this.__addHeaderButton("cancel",{class:"ez5-modal-close-button",icon:"close",tooltip:this._cancel_tooltip||t.Modal.defaults.cancel_tooltip,appearance:t.__ng__?"normal":"flat",onClick:function(t){return function(e,n){return i.deactivate(),t.doCancel(e,!1,n)}}(this)}),this.getPane().addClass("cui-pane--window"),this._onToggleFillScreen&&t.Events.listen({type:["start-fill-screen","end-fill-screen"],node:this.getPane(),call:function(t){return function(e){return t._onToggleFillScreen.call(t,e,t)}}(this)})}return e(Modal,i),Modal.defaults={cancel_tooltip:{text:"Close Dialog"}},Modal.prototype.initOpts=function(){return Modal.__super__.initOpts.call(this),this.mergeOpt("backdrop",{default:{policy:"modal",add_bounce_class:!0,content:null}}),this.addOpts({cancel:{check:Boolean},cancel_action:{default:"destroy",check:["destroy","hide"]},cancel_tooltip:{check:"PlainObject"},onCancel:{check:Function},fill_screen_button:{check:Boolean},fill_screen_button_tooltip:{check:"PlainObject"},onToggleFillScreen:{check:Function}}),this.mergeOpt("placement",{default:"c"})},Modal.prototype.readOpts=function(){return this.opts.cancel&&t.util.isPlainObject(this.opts.pane)&&(this.opts.pane.force_header=!0),Modal.__super__.readOpts.call(this)},Modal.prototype.__addHeaderButton=function(e,i){var n;if(this["_"+e])return n=t.util.isPlainObject(i)?new t.defaults.class.Button(i):i,t.util.assert(n instanceof t.Button,"Modal.__addHeaderButton","Button needs to be instance of Button",{btn:n}),t.util.assert(this.__pane instanceof t.SimplePane,"new "+this.__cls,"opts."+e+" can only be used if opts.pane is instance of SimplePane.",{pane:this.__pane,opts:this.opts}),this.append(n,"header_right"),this},Modal.prototype.__runOnAllButtons=function(e){var i,n,o,r,s;for(s=t.dom.matchSelector(this.__layer.DOM,".cui-button,.cui-data-field"),o=0,r=s.length;o<r;o++)n=s[o],((i=t.dom.data(n,"element"))instanceof t.Button||i instanceof t.DataField)&&i[e]()},Modal.prototype.disableAllButtons=function(){return this.__runOnAllButtons("disable")},Modal.prototype.enableAllButtons=function(){return this.__runOnAllButtons("enable")},Modal.prototype.isKeyboardCancellable=function(t){return!!this._cancel||Modal.__super__.isKeyboardCancellable.call(this,t)},Modal.prototype.doCancel=function(e,i,n){var o;null==i&&(i=!1),null==n&&(n=null),this._cancel||i?(o="function"==typeof this._onCancel?this._onCancel(e,this):void 0,t.util.isPromise(o)?(n&&(n.disable(),n.startSpinner(),o.always(function(t){return function(){return n.stopSpinner(),n.enable()}}())),o.done(function(t){return function(i){return t[t._cancel_action](e,i)}}(this))):!1!==o&&this[this._cancel_action](e,o)):Modal.__super__.doCancel.call(this,e)},Modal.prototype.focusOnShow=function(e){return e===t.KeyboardEvent?this.__focused_on_show=!0:this.__focused_on_show=!1,this.DOM.focus(),this},Modal.prototype.forceFocusOnShow=function(){return!0},Modal.prototype.empty=function(t){return null==t&&(t="center"),this.getPane().empty(t),this.position(),this},Modal.prototype.append=function(t,e){return null==e&&(e="center"),this.getPane().append(t,e),this.position(),this},Modal.prototype.replace=function(t,e){return null==e&&(e="center"),this.getPane().replace(t,e),this.position(),this},Modal.prototype.setContent=function(t){return this.getPane().replace(t,"center"),this.position(),this},Modal.prototype.hide=function(t){return this.getPane().endFillScreen(!1),Modal.__super__.hide.call(this,t)},Modal}(t.LayerPane)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.MultiInput=function(i){function MultiInput(t){this.opts=null!=t?t:{},MultiInput.__super__.constructor.call(this,this.opts),this.addClass("cui-multi-input"),this._textarea&&this.addClass("cui-multi-input--textarea")}return e(MultiInput,i),MultiInput.prototype.initOpts=function(){return MultiInput.__super__.initOpts.call(this),this.addOpts({textarea:{default:!1,check:Boolean},spellcheck:{default:!1,check:Boolean},placeholder:{check:"PlainObject"},onFocus:{check:Function},onClick:{check:Function},onKeyup:{check:Function},onBlur:{check:Function},control:{mandatory:!0,check:function(e){return e instanceof t.MultiInputControl}},content_size:{default:!1,check:Boolean}})},MultiInput.prototype.readOpts=function(){return MultiInput.__super__.readOpts.call(this),this.__inputs=null},MultiInput.prototype.disable=function(){var t,e,i,n,o;if(MultiInput.__super__.disable.call(this),this.__inputs){for(n=this.__inputs,o=[],t=0,i=n.length;t<i;t++)e=n[t],o.push(e.disable());return o}},MultiInput.prototype.enable=function(){var t,e,i,n,o;if(MultiInput.__super__.enable.call(this),this.__inputs){for(n=this.__inputs,o=[],t=0,i=n.length;t<i;t++)e=n[t],o.push(e.enable());return o}},MultiInput.prototype.initValue=function(){var e,i,n,o,r;for(t.util.isNull(r=this.__data[this._name])&&(r=this.__data[this._name]={}),o=this._control.getKeys(),e=0,n=o.length;e<n;e++)i=o[e],r.hasOwnProperty(i.name)||(r[i.name]="");return this},MultiInput.prototype.setData=function(t){return MultiInput.__super__.setData.call(this,t),this.setDataOnInputs()},MultiInput.prototype.setDataOnInputs=function(){var e,i,n,o,r,s,a;if(this.__inputs){for(n=t.util.copyObject(this.getValue(),!0),r=this.__inputs,s=[],e=0,o=r.length;e<o;e++)i=r[e],i.setData(n),a=this._undo_support?this.getInitValue()[i.getName()]:this.getValue()[i.getName()],s.push(i.setCheckChangedValue(a));return s}},MultiInput.prototype.setInputVisibility=function(){var e,i,n,o,r,s,a;for(r=function(){var t,e,i,o;for(i=this._control.getKeys(),o=[],t=0,e=i.length;t<e;t++)n=i[t],o.push(n.name);return o}.call(this),this.__inputs.sort(function(e){return function(e,i){return t.util.compareIndex(r.indexOf(e.getOpt("name")),r.indexOf(i.getOpt("name")))}}()),s=!1,a=this.__inputs,e=0,o=a.length;e<o;e++)i=a[e],t.dom.append(this.__multiInputDiv,i.DOM),this._control.isEnabled(i.getName())?(i.show(),s=!0):i.hide();return s||console.warn("MulitInput.setInputVisibility: No input visible.",{input:this.__inputs,control:this._control}),t.Events.trigger({type:"content-resize",node:i.DOM})},MultiInput.prototype.getUniqueIdForLabel=function(){var t,e,i,n;for(this.__initInputs(),n=this.__inputs,t=0,i=n.length;t<i;t++)if(e=n[t],this._control.isEnabled(e.getName()))return e.getUniqueIdForLabel();return null},MultiInput.prototype.focus=function(){var t,e,i,n;for(n=this.__inputs,t=0,i=n.length;t<i;t++)if(e=n[t],this._control.isEnabled(e.getName()))return void e.focus()},MultiInput.prototype.displayValue=function(){var t,e,i,n;for(MultiInput.__super__.displayValue.call(this),n=this.__inputs,t=0,i=n.length;t<i;t++)e=n[t],e.displayValue();return this},MultiInput.prototype.__initInputs=function(){var e,i,n,o,r,s,a,l,u;if(!this.__inputs)for(this.__multiInputDiv=t.dom.div("cui-multi-input-container"),t.Events.listen({type:"multi-input-control-update",node:this.__multiInputDiv,call:function(t){return function(e){return t.setInputVisibility()}}(this)}),this.__inputs=[],l=this._control.getKeys(),e=function(e){return function(i,n){var o;return o=new t.defaults.class.Button({text:n.tag,tabindex:null,disabled:!e._control.hasUserControl(),onClick:function(t,i){return e._control.showUserControl(t,i,e.__multiInputDiv)},role:"multi-input-tag",class:"cui-multi-input-tag-button",tooltip:n.tooltip}),i.append(o,"right"),t.Events.listen({type:"data-changed",node:i,call:function(o){var r;return r=t.util.copyObject(e.getValue()),r[n.name]=i.getValue(),o.stopImmediatePropagation(),e.storeValue(r)}})}}(this),n=i=0,a=l.length;i<a;n=++i)s=l[n],r={class:"cui-multi-input-input",textarea:this._textarea,spellcheck:this._spellcheck,onBlur:this._onBlur,onClick:this._onClick,onFocus:this._onFocus,onKeyup:this._onKeyup,name:s.name,undo_support:!1,content_size:this._content_size,placeholder:null!=(u=this._placeholder)?u[s.name]:void 0},o=new t.MultiInputInput(r),o.render(),e(o,s),this.__inputs.push(o)},MultiInput.prototype.render=function(){return MultiInput.__super__.render.call(this),this.__initInputs(),this.hasData()&&this.setDataOnInputs(),this.replace(this.__multiInputDiv),this.setInputVisibility(),this},MultiInput}(t.DataFieldInput)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.MultiInputControl=function(i){function MultiInputControl(t){this.opts=null!=t?t:{},MultiInputControl.__super__.constructor.call(this,this.opts),this.__body=document.body,this.setKeys(this._keys),this.setPreferredKey(this._preferred_key)}return e(MultiInputControl,i),MultiInputControl.prototype.initOpts=function(){return MultiInputControl.__super__.initOpts.call(this),this.addOpts({preferred_key:{check:String},keys:{check:function(e){return t.util.isArray(e)&&e.length>0}},user_control:{default:!0,check:Boolean}})},MultiInputControl.prototype.setKeys=function(e){var i,n,o,r,s;if(this.__keys=[],e){for(r={},n=i=0,s=e.length;i<s;n=++i)o=e[n],t.util.assert(t.util.isString(o.name)&&!t.util.isEmpty(o.name),"new "+this.__cls,"opts.keys["+n+"].name must be non-empty String.",{key:o}),t.util.assert(t.util.isString(o.tag)&&!t.util.isEmpty(o.tag),"new "+this.__cls,"opts.keys["+n+"].tag must be non-empty String.",{key:o}),t.util.assert(t.util.isUndef(o.enabled)||t.util.isBoolean(o.enabled),"new "+this.__cls,"opts.keys["+n+"].enabled must be Boolean.",{key:o}),t.util.isUndef(r[o.name])?(r[o.name]=n,this.__keys.push({name:o.name,tag:o.tag,enabled:o.enabled,tooltip:o.tooltip,__idx:n})):t.util.assert(!1,"new "+this.__cls,"Duplicate opts.keys["+n+'].name "'+o.name+'", name already used in #'+n+".",{key:o});return this}},MultiInputControl.prototype.setPreferredKey=function(e){var i,n,o,r;if(this.__preferred_key=null,t.util.isNull(e))return this.__preferred_key;for(r=this.__keys,i=0,o=r.length;i<o;i++)n=r[i],n.name===e&&(this.__preferred_key=n);return t.util.assert(this.__preferred_key,this.__cls+".setPreferredKey",'key.name == "'+e+'" not found in keys.',{keys:this.__keys}),this.__preferred_key},MultiInputControl.prototype.getPreferredKey=function(){return this.__preferred_key},MultiInputControl.prototype.copy=function(){return this},MultiInputControl.prototype.getKeys=function(){return this.__keys},MultiInputControl.prototype.isEnabled=function(t){var e,i,n,o;for(o=this.getKeys(),e=0,n=o.length;e<n;e++)if(i=o[e],i.name===t)return i.enabled},MultiInputControl.prototype.getUserControlOptions=function(){var e,i,n,o,r,s;for(r=[],s=this.__keys,e=function(e){return r.push({active:e.enabled,onActivate:function(){return console.debug("control activate",e.tag),e.enabled=!0,t.Events.trigger({type:"multi-input-control-update"})},onDeactivate:function(i){return console.debug("control deactivate",e.tag),e.enabled=!1,t.Events.trigger({type:"multi-input-control-update"})},text:e.tag})},i=0,o=s.length;i<o;i++)n=s[i],e(n);return r},MultiInputControl.prototype.showUserControl=function(){var e;return e=new t.Options({min_checked:1,options:this.getUserControlOptions()}).start(),this.popover=new t.Modal({class:"cui-multi-input-control",onHide:function(t){return function(){return t.popover=null}}(this),pane:{footer_right:new t.Button({text:"Done",onClick:function(t){return function(){return t.popover.destroy()}}(this)}),header_left:new t.Label({text:"MultiInputControl"}),content:e}}).show()},MultiInputControl.prototype.hasUserControl=function(){return this._user_control},MultiInputControl}(t.Element),t.Events.registerEvent({type:"multi-input-control-update",sink:!0})}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},n={}.hasOwnProperty;t.Template.loadTemplateText(i(185)),t.MultiInputInput=function(i){function MultiInputInput(){return MultiInputInput.__super__.constructor.apply(this,arguments)}return e(MultiInputInput,i),MultiInputInput.prototype.getTemplate=function(){return new t.Template({name:"data-field-multi-input",map:{center:!0,right:!0}})},MultiInputInput.prototype.getTemplateKeyForRender=function(){return"center"},MultiInputInput}(t.Input)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},n={}.hasOwnProperty;t.Template.loadTemplateText(i(218)),t.MultiOutput=function(i){function MultiOutput(){return MultiOutput.__super__.constructor.apply(this,arguments)}return e(MultiOutput,i),MultiOutput.prototype.initOpts=function(){return MultiOutput.__super__.initOpts.call(this),this.addOpts({control:{mandatory:!0,check:t.MultiInputControl},showOnlyPreferredKey:{check:Boolean,default:!0}})},MultiOutput.prototype.readOpts=function(){return MultiOutput.__super__.readOpts.call(this),this.__keyTemplates={}},MultiOutput.prototype.render=function(){var e,i,n,o,r,s,a,l;if(MultiOutput.__super__.render.call(this),this._showOnlyPreferredKey)n=this._control.getPreferredKey(),t.util.assert(n,"Output.displayValue","MultiInputControl: no preferred key set.",{control:this._control}),o=new t.Label({text:this.getValue()[n.name]}),this.replace(o);else{for(s=this._control.getKeys(),i=e=0,r=s.length;e<r;i=++e)n=s[i],l=this.getValue()[n.name],t.util.isEmpty(l)||(a=this.__buildTemplateForKey(n),this.__keyTemplates[n.name]=a,this.append(a));this.__updateListener=t.Events.listen({type:"multi-input-control-update",node:this.DOM,call:function(t){return function(){return t.__hideShowElements()}}(this)}),this.__hideShowElements()}return this},MultiOutput.prototype.__buildTemplateForKey=function(e){var i,n,o;return n=new t.Label({text:this.getValue()[e.name]}),o=new t.Template({name:"data-field-multi-output",map:{center:!0,aside:!0}}),o.append(n,"center"),i=new t.defaults.class.Button({text:e.tag,tabindex:null,disabled:!this._control.hasUserControl(),role:"multi-output-tag",tooltip:e.tooltip,appearance:"flat",onClick:function(t){return function(e){return t._control.showUserControl(e,i)}}(this)}),o.append(i,"aside"),o},MultiOutput.prototype.__hideShowElements=function(){var t,e,i,n;e=this.__keyTemplates,i=[];for(t in e)n=e[t],this._control.isEnabled(t)?i.push(n.show()):i.push(n.hide());return i},MultiOutput.prototype.destroy=function(){return this.__updateListener.destroy(),delete this.__keyTemplates,MultiOutput.__super__.destroy.call(this)},MultiOutput}(t.DataField)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.ObjectDumper=function(i){function ObjectDumper(e){var i;this.opts=null!=e?e:{},ObjectDumper.__super__.constructor.call(this,this.opts),this._headers&&(i=new t.ListViewTreeHeaderNode({headers:this._headers}),this.root.children.splice(0,0,i)),this.render(),this.root.open()}return e(ObjectDumper,i),ObjectDumper.prototype.initOpts=function(){return ObjectDumper.__super__.initOpts.call(this),this.addOpts({object:{mandatory:!0,check:function(e){return!(!t.util.isArray(e)&&!t.util.isPlainObject(e))}},headers:{default:[{label:{text:"key"}},{label:{text:"value"}}],check:function(t){return 2===t.length}},do_open:{mandatory:!0,default:!1,check:Boolean},parse_json:{mandatory:!0,default:!1,check:Boolean}}),this.removeOpt("root"),this.removeOpt("cols"),this.removeOpt("colResize"),this.removeOpt("fixedRows")},ObjectDumper.prototype.readOpts=function(){return ObjectDumper.__super__.readOpts.call(this),this._cols=["auto","auto"],this._colClasses=["cui-object-dumper-key","cui-object-dumper-value"],this._headers&&(this._colResize=!0,this._fixedRows=1),this._no_hierarchy=this.__hasOnlyPlainValues(this._object)},ObjectDumper.prototype.initListView=function(){return ObjectDumper.__super__.initListView.call(this),this.root=new t.ObjectDumperNode({data:this._object,do_open:this._do_open,parse_json:this._parse_json})},ObjectDumper.prototype.__hasOnlyPlainValues=function(e){var i,n;for(i in e)if(n=e[i],t.util.isPlainObject(n)||t.util.isArray(n))return!1;return!0},ObjectDumper}(t.ListViewTree)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.ObjectDumperNode=function(i){function ObjectDumperNode(){return ObjectDumperNode.__super__.constructor.apply(this,arguments)}return e(ObjectDumperNode,i),ObjectDumperNode.prototype.initOpts=function(){return ObjectDumperNode.__super__.initOpts.call(this),this.addOpts({key:{default:"root",mandatory:!0},data:{},do_open:{mandatory:!0,default:!1,check:Boolean},parse_json:{mandatory:!0,default:!1,check:Boolean}}),this.removeOpt("colspan"),this.removeOpt("children"),this.removeOpt("getChildren")},ObjectDumperNode.prototype.readOpts=function(){if(ObjectDumperNode.__super__.readOpts.call(this),this.setData(this._data),this.__info=this.getInfoFromData(this.getData()),"root"===this._key&&(this.children=this.getNodesFromData(this.getData())),!this.isLeaf()&&this._do_open)return this.do_open=!0},ObjectDumperNode.prototype.setData=function(e){if(this._parse_json&&t.util.isString(e))try{this.__data=JSON.parse(e),t.util.isString(this.__data)&&(this.__data=e)}catch(t){t,this.__data=e}else this.__data=e;return this},ObjectDumperNode.prototype.getData=function(){return this.__data},ObjectDumperNode.prototype.getChildren=function(){return this.getNodesFromData(this.getData())},ObjectDumperNode.prototype.isLeaf=function(){return!this.__info.has_children},ObjectDumperNode.prototype.renderContent=function(){return!this.isLeaf()&&this.isOpen()||this.addColumn(new t.ListViewColumn({class:"cui-object-dumper-node-value",element:new t.Label({text:this.__info.text,multiline:!0})})),new t.Label({class:"cui-object-dumper-node-key",text:this._key,multiline:!0})},ObjectDumperNode.prototype.getClass=function(){return ObjectDumperNode.__super__.getClass.call(this)+" cui-object-dumper-node-"+this.__info.cls.toLowerCase()},ObjectDumperNode.prototype.getInfoFromData=function(e){var i;return i={},void 0===e?(i.cls="undefined",i.text="undefined"):null===e?(i.cls="null",i.text="null"):!0===e?(i.cls="boolean",i.text="true"):!1===e?(i.cls="boolean",i.text="false"):"number"==typeof e&&isNaN(e)?(i.cls="NaN",i.text="NaN"):t.util.isNumber(e)?(i.cls="number",i.text=""+e):t.util.isString(e)?(i.cls="String",i.text='"'+e+'"'):(i.cls=t.util.getObjectClass(e),t.util.isArray(e)||t.util.isPlainObject(e)?(i.has_children=!t.util.isEmptyObject(e),t.util.isArray(e)&&(i.text=i.cls+" ["+e.length+"]"),t.util.isPlainObject(e)&&(i.text=i.cls+" {"+Object.keys(e).length+"}")):(i.has_children=!0,i.text=i.cls)),i},ObjectDumperNode.prototype.getNodesFromData=function(e){var i,n,o,r,s,a,l,u,c,h;if(u=[],o=this.getInfoFromData(e),"Array"===o.cls)for(n=i=0,c=e.length;0<=c?i<c:i>c;n=0<=c?++i:--i)u.push(new t.ObjectDumperNode({key:n,data:e[n],do_open:this._do_open,parse_json:this._parse_json}));else{a=[];for(s in e)a.push(s);for(a.sort(function(t,e){return t.localeCompare(e)}),r=0,l=a.length;r<l;r++)s=a[r],h=e[s],u.push(new t.ObjectDumperNode({key:s,data:h,do_open:this._do_open,parse_json:this._parse_json}))}return u},ObjectDumperNode}(t.ListViewTreeNode)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},n={}.hasOwnProperty;t.Template.loadTemplateText(i(186)),t.Options=function(i){function Options(e){this.opts=null!=e?e:{},Options.__super__.constructor.call(this,this.opts),this._sortable&&t.dom.addClass(this.DOM,"cui-options--sortable")}return e(Options,i),Options.prototype.initOpts=function(){return Options.__super__.initOpts.call(this),this.addOpts({radio:{check:function(e){return t.util.isString(e)||t.util.isBoolean(e)}},radio_unchecked_value:{default:!1},min_checked:{check:function(e){return this._radio?0===e||1===e:t.util.isInteger(e)&&e>=0}},options:{mandatory:!0,check:function(e){return t.util.isArray(e)||t.util.isFunction(e)}},horizontal:{check:function(e){if(t.util.isBoolean(e)||t.util.isInteger(e)&&e>0)return!0}},title:{check:String},activatable:{check:Boolean},sortable:{check:Boolean},sortable_hint:{check:String},placeholder:{default:"No options available.",check:String},columns:{check:function(e){if(t.util.isInteger(e)&&e<=12)return!0},default:1}})},Options.prototype.readOpts=function(){return Options.__super__.readOpts.call(this),t.util.assert(!this._sortable||!this._left,"new CUI.Options","opts.sortable and opts.left cannot be used together.",{opts:this.opts}),t.util.assert(!this._sortable||!this._radio,"new CUI.Options","opts.sortable and opts.radio cannot be used together.",{opts:this.opts}),t.util.assert(!this._sortable||!this.opts.horizontal,"new CUI.Options","opts.sortable and opts.horizontal cannot be used together.",{opts:this.opts}),void 0===this.opts.horizontal&&(this._horizontal=!this._sortable),this._sortable&&void 0===this._activatable&&(this._activatable=!0),t.util.assert(!(this._sortable&&!this._activatable),"new CUI.Options","opts.sortable needs opts.activatable to be set.",{opts:this.opts})},Options.prototype.getTemplate=function(){return this._activatable?this.__tmpl=new t.Template({name:"options-activatable",map_prefix:"cui-options",map:{top:!0,bottom:!0,active:!0,inactive:!0}}):this.__tmpl=new t.Template({name:"options",map:{top:!0,bottom:!0,center:!0}})},Options.prototype.init=function(){switch(this._radio){case!1:this.__radio=void 0;break;case!0:this.__radio="options--"+this.getUniqueId();break;default:this.__radio=this._radio}return this.__options_data={}},Options.prototype.setData=function(e){return Options.__super__.setData.call(this,e),this._radio&&(t.util.isArray(this.getValue())?this.__radio_use_array=!0:this.__radio_use_array=!1),this.__setDataOnOptions(),this},Options.prototype.__setDataOnOptions=function(t){var e,i,n,o,r,s,a,l,u,c,h,d;if(null==t&&(t=!0),this.__checkboxes){if(t)for(c=this.__checkboxes,i=0,r=c.length;i<r;i++)e=c[i],e.callOnOthers("setData",this.__data);if(this._radio&&!this.__radio_use_array)for(h=this.__checkboxes,n=0,s=h.length;n<s;n++)e=h[n],this.__options_data[e.getName()]=this.getValue(),t&&(this._check_changed&&JSON.parse(this.getCheckChangedValue())===e.getOptValue()?e.setCheckChangedValue(e.getOptValue()):e.setCheckChangedValue(e.getOptValueUnchecked()));else for(d=this.__checkboxes,o=0,a=d.length;o<a;o++)e=d[o],l=e.getOptValue(),u=e.getOptValueUnchecked(),this.getValue().indexOf(l)>-1?this.__options_data[e.getName()]=l:this.__options_data[e.getName()]=u,t&&(this._check_changed&&JSON.parse(this.getCheckChangedValue()).indexOf(l)>-1?e.setCheckChangedValue(l):e.setCheckChangedValue(u));return this}},Options.prototype.disableOption=function(t){var e;return e=this.__getCheckboxByValue(t),e.disable(),this},Options.prototype.enableOption=function(t){var e;return e=this.__getCheckboxByValue(t),e.enable(),this},Options.prototype.__getCheckboxByValue=function(e){var i,n,o,r,s,a;for(i=null,a=this.__options,o=n=0,r=a.length;n<r;o=++n)if(s=a[o],s.value===e){i=o;break}return t.util.assert(null!==i,"CUI.Options.__getCheckboxByValue","Value "+e+" not found in CUI.Options.",{options:this.__options}),this.__checkboxes[i]},Options.prototype.getOptions=function(){return this.__options},Options.prototype.setValue=function(t,e){return null==e&&(e={}),e.__set_on_data=!0,Options.__super__.setValue.call(this,t,e)},Options.prototype.storeValue=function(t,e){return null==e&&(e={}),Options.__super__.storeValue.call(this,t,e),e.__set_on_data&&this.__setDataOnOptions(),this},Options.prototype.displayValue=function(){var t,e,i,n;for(Options.__super__.displayValue.call(this),n=this.__checkboxes,e=0,i=n.length;e<i;e++)t=n[e],t.displayValue();return this},Options.prototype.checkValue=function(e){var i,n,o,r,s,a,l,u;if(this.__radio_use_array||!this._radio){if(!t.util.isArray(e))throw new t.CheckValueError("Value must be Array.");i=e}else i=[e];for(n=0,r=i.length;n<r;n++)for(u=i[n],l=this.__options,o=0,s=l.length;o<s;o++)if(a=l[o],a.value===u)return void console.debug("value is ok.",this.hasData(),this.getData()[this._name]);throw new t.CheckValueError("Value is not in the options.")},Options.prototype.render=function(){var e,i,n,o,r,s,a,l,u,c,h,d,p,_,f,m,g,y,v,b,w,k;for(Options.__super__.render.call(this),k=this.getArrayFromOpt("options"),y=function(e){return function(){return e.__options.sort(function(i,n){var o,r;return o=t.util.idxInArray(t.util.idxInArray(i,k),e.__options_order),r=t.util.idxInArray(t.util.idxInArray(n,k),e.__options_order),t.util.compareIndex(o,r)})}}(this),a=function(t,e){var i,n,o,r;for(n=i=0,o=e.length;i<o;n=++i)if(r=e[n],r.value===t||!r.hasOwnProperty("value")&&r.text===t)return n;return-1},f=function(e){return function(i){var n,o,r,s,l,u,c;for(r=o=0,l=i.length;o<l;r=++o)n=i[r],n.___idx=r;for(i.sort(function(n,o){var r,s;return r=a(n,e.__options),-1===r&&(r=i.length+n.__idx),s=a(o,e.__options),-1===s&&(s=i.length+o.__idx),t.util.compareIndex(r,s)}),c=[],r=s=0,u=i.length;s<u;r=++s)n=i[r],c.push(delete n.___idx);return c}}(this),_=function(e){return function(){var i,n,o,r,s,l,u,c,h,d,p,_,f;for(i=e.hasData()?e.getValue():[],e.__options_order=[],n=0,l=i.length;n<l;n++)f=i[n],e.__options_order.push(a(f,k));for(h=[],o=r=0,u=k.length;r<u;o=++r)p=k[o],-1===t.util.idxInArray(o,e.__options_order)&&h.push({opt:p,idx:o});for(h.sort(function(t,e){var i,n;return i=t.opt.text.toLocaleUpperCase(),n=e.opt.text.toLocaleUpperCase(),i<n?-1:i>n?1:0}),_=[],s=0,c=h.length;s<c;s++)d=h[s],_.push(e.__options_order.push(d.idx));return _}}(this),this._sortable&&!this.__options_order&&_(),this.__options=k.slice(0),this.__options_order&&y(),this.__checkboxes=[],this.__maxChars=-1,m=this.__options,l=function(e){return function(i){var n,o,r,s,a,l;s={};for(r in i)l=i[r],s[r]=l;return t.util.assert(!t.util.isEmpty(s.text)||!t.util.isEmpty(s.content),"new "+e.__cls,"opts.options["+c+"].text|content must be set.",{opts:e.opts}),s.hasOwnProperty("value")||(t.util.assert(!t.util.isEmpty(s.text),"new "+e.__cls,"opts.options["+c+"].text must be set.",{opts:e.opts}),s.value=s.text),o=(null!=(a=s.text)?a.length:void 0)||-1,e.__maxChars<o&&(e.__maxChars=o),s.radio=e.__radio,e.__radio&&0===e._min_checked&&(1===e.__options.length?delete s.radio:s.radio_allow_null=!0),e.__radio||(s.group="group-"+e.getUniqueId()),s.onActivate=function(n,o){var r;n.hasData()&&(e._radio&&!e.__radio_use_array?e.storeValue(n.getValue(),o):(t.util.pushOntoArray(n.getOptValue(),r=e.getValue().slice(0)),f(r),e.storeValue(r,o),e._sortable&&(_(),e.reload()))),"function"==typeof i.onActivate&&i.onActivate(n,o)},s.onDeactivate=function(n,o){var r,s,a,l,u,c;if(!e._radio){for(s=0,c=e.__checkboxes,l=0,u=c.length;l<u;l++)a=c[l],a.isActive()&&s++;if(s<e._min_checked)return n.activate()}n.hasData()&&(e._radio&&!e.__radio_use_array?o.prior_activate||e.storeValue(n.getValue(),o):(t.util.removeFromArray(n.getOptValue(),r=e.getValue().slice(0)),e.storeValue(r,o),e._sortable&&(_(),e.reload()))),"function"==typeof i.onDeactivate&&i.onDeactivate(n,o)},s.undo_support=!1,s.mark_changed=e._mark_changed,s.multiline=!0,e.getName()&&(e.__radio&&!e.__radio_use_array?(s.name=e.__radio,s.group=e.__radio):(s.group="options-"+e.getUniqueId(),s.name=s.group+"--"+c),s.data=e.__options_data,s.data_not_for_others=!0),n=new t.Checkbox(s),t.Events.listen({type:"data-changed",node:n,call:function(t,e){e.element===n&&t.stopImmediatePropagation()}}),e.__checkboxes.push(n)}}(this),c=u=0,d=m.length;u<d;c=++u)e=m[c],l(e);if(this.hasData()&&this.__setDataOnOptions(),this.__checkboxes.length){for(i=this._sortable&&!t.util.isEmpty(this._sortable_hint)?new t.Label({multiline:!0,class:"cui-options-order-hint",text:this._sortable_hint}):void 0,w=t.util.isEmpty(this._title)?void 0:new t.Label({class:"cui-options-title",text:this._title}),this.replace(i,"bottom"),this.replace(w,"top"),this._horizontal?this.addClass("cui-options--horizontal"):this.addClass("cui-options--vertical"),this._columns>1&&this.addClass("cui-options--columns-"+this._columns),this._activatable?(this.empty("active"),this.empty("inactive")):this.empty("center"),g=this.__checkboxes,h=0,p=g.length;h<p;h++)n=g[h],n.start(),this.__maxChars>0&&n.setTextMaxChars(this.__maxChars),this._sortable&&n.isActive()?(s=t.dom.element("DIV",{class:"cui-options-sortable-option"}),o=t.dom.element("DIV",{class:"cui-options-sortable-drag-handle"}),r=t.dom.element("DIV",{class:"cui-drag-handle-row"}),o.appendChild(r),s.appendChild(o),s.appendChild(n.DOM)):s=n.DOM,this._activatable?n.isActive()?this.append(s,"active"):this.append(s,"inactive"):this.append(s,"center");v=this.__tmpl.map.active,b=".cui-options-sortable-drag-handle",this._sortable&&new t.Sortable({axis:"y",element:v,selector:b,sorted:function(e){return function(i,n,o){var r;return t.util.moveInArray(n,o,e.__options_order,n<o),y(),e.hasData()&&(r=e.getValue().slice(0),f(r),e.storeValue(r)),_(),e.reload()}}(this)})}else t.util.isEmpty(this._placeholder)||this.replace(new t.EmptyLabel({text:this._placeholder}),"center");return this},Options.prototype.getDefaultValue=function(){return this._radio&&!this.__radio_use_array?this._radio_unchecked_value:[]},Options}(t.DataField)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.Output=function(i){function Output(){return Output.__super__.constructor.apply(this,arguments)}return e(Output,i),Output.prototype.initOpts=function(){return Output.__super__.initOpts.call(this),this.addOpts({placeholder:{default:"",check:String},text:{check:String},markdown:{mandatory:!0,default:!1,check:Boolean},getValue:{check:Function},multiline:{check:Boolean,default:!0,mandatory:!0},allow_delete:{mandatory:!0,default:!1,check:Boolean}})},Output.prototype.readOpts=function(){var t,e,i,n;for(Output.__super__.readOpts.call(this),n=["undo_support","check_changed","mark_changed"],t=0,i=n.length;t<i;t++)e=n[t],this.removeOpt(e),this["_"+e]=!1;return this},Output.prototype.init=function(){return this.__textSpan=new t.Label({markdown:this._markdown,multiline:this._multiline,class:"cui-data-field-output-label"}),this.setText(this._text),this.__textSpan},Output.prototype.setText=function(e,i){return null==i&&(i=null),t.util.isEmpty(e)?(this.__textSpan.addClass("cui-output-empty"),e=this._placeholder):this.__textSpan.removeClass("cui-output-empty"),null===i?this.__textSpan.setText(e,this._markdown):this.__textSpan.setText(e,i)},Output.prototype.checkValue=function(){},Output.prototype.displayValue=function(){var e,i,n;return Output.__super__.displayValue.call(this),this.getName()&&(n=this.getValue(),t.util.isEmpty(n)?null!=(i=this.__deleteBtn)&&i.hide():null!=(e=this.__deleteBtn)&&e.show(),t.util.isContent(n)?this.replace(n):this.setText(n,!1)),this},Output.prototype.getValue=function(){var t;return t=Output.__super__.getValue.call(this),this._getValue?this._getValue.call(this,t,this.getData()):t},Output.prototype.render=function(){return Output.__super__.render.call(this),this.replace(this.__textSpan),this._allow_delete&&this.hasData()&&(this.addClass("cui-output--deletable"),this.__deleteBtn=new t.Button({icon:"remove",appearance:"flat",onClick:function(t){return function(){return t.setValue(null,{no_trigger:!1})}}(this)}),this.append(this.__deleteBtn)),this},Output}(t.DataFieldInput)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.OutputContent=function(i){function OutputContent(){return OutputContent.__super__.constructor.apply(this,arguments)}return e(OutputContent,i),OutputContent.prototype.initOpts=function(){return OutputContent.__super__.initOpts.call(this),this.addOpts({placeholder:{default:"",check:String},content:{check:function(e){return t.util.isElement(e)||t.util.isElement(e.DOM)}},getValue:{check:Function}})},OutputContent.prototype.setContent=function(e){return null==e&&(e=null),console.debug("setContent",this.DOM,e),e?(t.dom.removeClass(this.DOM,"cui-output-empty"),this.replace(e)):(t.dom.addClass(this.DOM,"cui-output-empty"),this.empty())},OutputContent.prototype.displayValue=function(){return OutputContent.__super__.displayValue.call(this),this.getName()&&this.setContent(this.getValue()),this},OutputContent.prototype.getValue=function(){var t;return t=OutputContent.__super__.getValue.call(this),this._getValue?this._getValue.call(this,t):t},OutputContent.prototype.render=function(){return OutputContent.__super__.render.call(this),this.setContent(this._content)},OutputContent}(t.DataFieldInput)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.LayerPane=function(i){function LayerPane(t){this.opts=null!=t?t:{},LayerPane.__super__.constructor.call(this,this.opts),this.setPane(this._pane)}return e(LayerPane,i),LayerPane.prototype.initOpts=function(){return LayerPane.__super__.initOpts.call(this),this.addOpts({pane:{mandatory:!0,default:new t.SimplePane,check:function(e){return e instanceof t.Pane||t.util.isPlainObject(e)}}})},LayerPane.prototype.getPane=function(){return this.__pane},LayerPane.prototype.setPane=function(e){return t.util.isPlainObject(e)?this.__pane=new t.SimplePane(e):this.__pane=e,this.__pane.hasHeader()&&this.__layer_root.DOM.classList.add("cui-pane--has-header"),this.__pane.hasFooter()&&this.__layer_root.DOM.classList.add("cui-pane--has-footer"),this.__pane.addClass("cui-layer-pane"),t.Layer.prototype.replace.call(this,this.__pane)},LayerPane.prototype.destroy=function(){return this.__pane.destroy(),LayerPane.__super__.destroy.call(this)},LayerPane}(t.Layer)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},n={}.hasOwnProperty;t.Template.loadTemplateText(i(187)),t.Pane=function(i){function Pane(){return Pane.__super__.constructor.apply(this,arguments)}return e(Pane,i),Pane.defaults={button_tooltip:{text:"Turn fullscreen on / off"}},Pane.prototype.__init=function(){if(Pane.__super__.__init.call(this),this.addClass("cui-pane"),this.__fill_screen_is_on=!1,this._padded)return this.addClass("cui-pane--padded")},Pane.prototype.initOpts=function(){return Pane.__super__.initOpts.call(this),this.addOpts({padded:{check:Boolean,default:!1}})},Pane.prototype.readOpts=function(){return this.initDefaultPanes(),Pane.__super__.readOpts.call(this)},Pane.prototype.hasHeader=function(){return!!this._top},Pane.prototype.hasFooter=function(){return!!this._bottom},Pane.prototype.getFillScreenState=function(){return this.__fill_screen_is_on},Pane.prototype.endFillScreen=function(e){var i;if(null==e&&(e=!0),this.getFillScreenState())return this.__fill_screen_is_on=!1,t.util.$elementIsInDOM(this.__placeholder)?(i=function(e){return function(){var i;return t.dom.insertBefore(e.__placeholder,e.DOM),i=t.dom.data(t.dom.parent(e.__placeholder),"element"),i instanceof t.Popover&&i.setVisible(!0),t.dom.remove(e.__placeholder),e.__fillscreenTmpl.destroy(),delete e.__fillscreenTmpl,t.Events.trigger({type:"end-fill-screen",node:e.DOM}),t.Events.trigger({type:"viewport-resize",node:e.DOM})}}(this),e?(t.Events.wait({type:"transitionend",node:this.__fillscreenTmpl}).always(function(t){return function(){return i()}}()),this.__fillscreenTmpl.removeClass("cui-pane-fill-screen-is-on")):i()):(this.__fillscreenTmpl.destroy(),this.__placeholder=null),this},Pane.prototype.startFillScreen=function(){var e,i,n,o,r,s,a,l,u,c,h,d,p;if(!this.getFillScreenState()){for(this.__fillscreenTmpl=new t.Template({name:"pane-fill-screen",map:{inner:!0}}),c=t.dom.getRect(this.DOM),p=t.dom.getDimensions(window),this.__placeholderTmpl=new t.Template({name:"pane-fill-screen-placeholder"}),this.__placeholder=this.__placeholderTmpl.DOM,s=this.__fillscreenTmpl.map.inner,t.dom.append(document.body,this.__fillscreenTmpl.DOM),n=t.dom.getDimensions(this.__fillscreenTmpl.DOM),o=t.dom.getDimensions(s),e={left:o.clientBoundingRect.left-n.clientBoundingRect.left+o.borderLeft+o.paddingLeft,top:o.clientBoundingRect.top-n.clientBoundingRect.top+o.borderTop+o.paddingTop,right:n.clientBoundingRect.right-o.clientBoundingRect.right+o.borderRight+o.paddingRight,bottom:n.clientBoundingRect.bottom-o.clientBoundingRect.bottom+o.borderBottom+o.paddingBottom},d={top:c.top-e.top,left:c.left-e.left,bottom:p.height-c.bottom-e.bottom,right:p.width-c.right-e.right},t.dom.remove(this.__fillscreenTmpl.DOM),t.dom.setStyle(this.__fillscreenTmpl.DOM,d),t.dom.append(document.body,this.__fillscreenTmpl.DOM),t.dom.setStyle(this.__placeholder,{width:t.dom.getDimensions(this.DOM).marginBoxWidth,height:t.dom.getDimensions(this.DOM).marginBoxHeight}),h=["position","top","left","right","bottom"],r=0,l=h.length;r<l;r++)a=h[r],t.dom.setStyleOne(this.__placeholder,a,t.dom.getComputedStyle(this.DOM)[a]);return t.dom.insertAfter(this.DOM,this.__placeholder),u=t.dom.data(t.dom.parent(this.DOM),"element"),u instanceof t.Popover&&u.setVisible(!1),this.__fillscreenTmpl.replace(this.DOM,"inner"),t.Events.wait({type:"transitionend",node:this.__fillscreenTmpl}).always(function(e){return function(){return t.Events.trigger({type:"start-fill-screen",node:e.DOM}),t.Events.trigger({type:"viewport-resize",node:e.DOM})}}(this)),this.__fillscreenTmpl.addClass("cui-pane-fill-screen-is-on"),this.__fill_screen_is_on=!0,i=function(e){return function(){if(e.getFillScreenState())return t.util.$elementIsInDOM(e.__placeholder)||e.endFillScreen(),t.setTimeout(i,50)}}(this),i(),this.__fill_screen_is_on}},Pane.prototype.toggleFillScreen=function(){return this.getFillScreenState()?this.endFillScreen():this.startFillScreen()},Pane.getToggleFillScreenButton=function(e){var i,n,o,r;null==e&&(e={}),n=t.Element.readOpts(e,"Pane.getToggleFillScreenButton",{icon_inactive:{mandatory:!0,check:function(e){return function(e){return e instanceof t.Icon||t.util.isString(e)||t.util.isPlainObject(e)}}(),default:"fa-expand"},icon_active:{mandatory:!0,check:function(e){return function(e){return e instanceof t.Icon||t.util.isString(e)||t.util.isPlainObject(e)}}(),default:"fa-compress"},group:{mandatory:!1,check:String},tooltip:{mandatory:!0,check:function(e){return function(e){return e instanceof t.Tooltip||t.util.isPlainObject(e)}}(),default:t.Pane.defaults.button_tooltip}}),t.util.isString(n.icon_inactive)&&(n.icon_inactive=new t.Icon({class:n.icon_inactive})),t.util.isString(n.icon_active)&&(n.icon_active=new t.Icon({class:n.icon_active})),o={switch:!0,onClick:function(e){return function(e,i){var n,o;return o=t.dom.closest(i.DOM,".cui-pane"),n=t.dom.data(o,"element"),n.toggleFillScreen()}}()};for(i in o)r=o[i],n[i]=r;return new t.defaults.class.Button(n)},Pane}(t.VerticalLayout),t.Events.registerEvent({type:["start-fill-screen","end-fill-screen"],sink:!0})}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.PaneFooter=function(t){function PaneFooter(){return PaneFooter.__super__.constructor.apply(this,arguments)}return e(PaneFooter,t),PaneFooter.prototype.init=function(){return PaneFooter.__super__.init.call(this),this.addClass("cui-pane-footer")},PaneFooter}(t.Toolbar)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.PaneHeader=function(t){function PaneHeader(){return PaneHeader.__super__.constructor.apply(this,arguments)}return e(PaneHeader,t),PaneHeader.prototype.init=function(){return PaneHeader.__super__.init.call(this),this.addClass("cui-pane-header")},PaneHeader}(t.Toolbar)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.PaneToolbar=function(t){function PaneToolbar(){return PaneToolbar.__super__.constructor.apply(this,arguments)}return e(PaneToolbar,t),PaneToolbar.prototype.init=function(){return PaneToolbar.__super__.init.call(this),this.addClass("cui-pane-toolbar")},PaneToolbar}(t.Toolbar)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.SimplePane=function(i){function SimplePane(){return SimplePane.__super__.constructor.apply(this,arguments)}return e(SimplePane,i),SimplePane.prototype.__init=function(){var e,i,n,o,r;for(SimplePane.__super__.__init.call(this),o=["header_left","header_center","header_right","footer_left","footer_right"],e=0,n=o.length;e<n;e++)i=o[e],(r=this["_"+i])&&this.append(r,i);if(this._title&&this.append(new t.Label({text:this._title}),"header_left"),!t.__ng__)return this.addClass("cui-simple-pane")},SimplePane.prototype.initOpts=function(){return SimplePane.__super__.initOpts.call(this),this.addOpts({title:{},header_right:{},header_center:{},header_left:{},footer_left:{},footer_right:{},content:{},force_header:{mandatory:!0,check:Boolean,default:!1},force_footer:{mandatory:!0,check:Boolean,default:!1}}),this.removeOpt("top"),this.removeOpt("bottom"),this.removeOpt("center"),this},SimplePane.prototype.readOpts=function(){return t.VerticalLayout.prototype.readOpts.call(this),this._title&&t.util.assert(!this._header_left,"new CUI.SimplePane","opts.header_left conflicts with opts.title",{opts:this.opts}),(this.forceHeader()||!(t.util.isUndef(this._header_left)&&t.util.isUndef(this._header_center)&&t.util.isUndef(this._header_right))||this._title)&&(this.__pane_header=new t.PaneHeader,this._top={content:this.__pane_header}),!this.forceFooter()&&t.util.isUndef(this._footer_left)&&t.util.isUndef(this._footer_right)||(this.__pane_footer=new t.PaneFooter,this._bottom={content:this.__pane_footer}),this._center={content:this._content},this},SimplePane.prototype.forceHeader=function(){return this._force_header},SimplePane.prototype.forceFooter=function(){return this._force_footer},SimplePane.prototype.hasHeader=function(){return!!this.__pane_header},SimplePane.prototype.hasFooter=function(){return!!this.__pane_footer},SimplePane.prototype.destroy=function(){var t,e;return null!=(t=this.__pane_header)&&t.destroy(),this.__pane_header=null,null!=(e=this.__pane_footer)&&e.destroy(),this.__pane_footer=null,SimplePane.__super__.destroy.call(this)},SimplePane.prototype.getPaneAndKey=function(e){var i,n,o;return"center"===e||"top"===e||"bottom"===e?[this.getLayout(),e]:"content"===e?[this.getLayout(),"center"]:(i=e.match(/^(.*?)_(.*)$/),t.util.assert(3===(null!=i?i.length:void 0),"SimplePane.getPaneAndKey","key "+e+" not matched.",{matched:i}),o="__pane_"+(null!=i?i[1]:void 0),n=this[o],t.util.assert(n,"SimplePane.getPaneAndKey","pane "+o+" not found."),[n,i[2]])},SimplePane.prototype.empty=function(t){var e,i,n;return null==t&&(t="center"),n=this.getPaneAndKey(t),i=n[0],e=n[1],i.empty(e),this},SimplePane.prototype.append=function(t,e){var i,n,o;return null==e&&(e="center"),o=this.getPaneAndKey(e),n=o[0],i=o[1],n.append(t,i),this},SimplePane.prototype.replace=function(t,e){var i,n,o;return null==e&&(e="center"),o=this.getPaneAndKey(e),n=o[0],i=o[1],n.replace(t,i),this},SimplePane}(t.Pane)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},n={}.hasOwnProperty;t.Template.loadTemplateText(i(188)),t.Panel=function(i){function Panel(e){this.opts=null!=e?e:{},Panel.__super__.constructor.call(this,this.opts),this.panel=new t.Template({name:"panel",map:{header:!0,content:!0}}),this.registerTemplate(this.panel),this._content_placeholder&&(this.append(this._content_placeholder,"content"),this.__has_placeholder=!0),t.util.isFunction(this._content)?this._load_on_open||this.loadContent():this._content&&this.append(this._content,"content"),this.button=new t.Button({text:this._text,class:"cui-panel-header-button",radio:this._radio,radio_allow_null:this._radio_allow_null,icon_active:this._icon_opened,icon_inactive:this._icon_closed,onActivate:function(t){return function(e,i,n){return t.__open(!i.initial_activate),"function"==typeof t._onActivate?t._onActivate(e,i,n):void 0}}(this),onDeactivate:function(t){return function(e,i,n){return t.__close(!i.initial_activate),"function"==typeof t._onDeactivate?t._onDeactivate(e,i,n):void 0}}(this)}),this.append(this.button,"header"),this._closed?this.button.deactivate():this.button.activate()}return e(Panel,i),Panel.prototype.initOpts=function(){return Panel.__super__.initOpts.call(this),this.addOpts({text:{mandatory:!0,check:String},content:{check:function(e){return t.util.isContent(e)||t.util.isString(e)}},content_placeholder:{check:function(e){return t.util.isContent(e)}},load_on_open:{check:Boolean},radio:{default:"panel-switcher",check:function(e){return t.util.isString(e)||!0===e}},radio_allow_null:{default:!0,mandatory:!0,check:Boolean},closed:{default:!0,check:Boolean},icon_opened:{default:"fa-angle-down",check:String},icon_closed:{default:"fa-angle-right",check:String},footer_right:{},footer_left:{},onFirstActivate:{check:Function},onActivate:{check:Function},onDeactivate:{check:Function}})},Panel.prototype.readOpts=function(){return Panel.__super__.readOpts.call(this),this},Panel.prototype.isClosed=function(){return t.dom.hasClass(this.DOM,"cui-panel-closed")},Panel.prototype.isOpen=function(){return!this.isClosed()},Panel.prototype.open=function(){return this.button.activate(),this},Panel.prototype.close=function(){return this.button.deactivate(),this},Panel.prototype.__close=function(e){return null==e&&(e=!0),t.dom.addClass(this.DOM,"cui-panel-closed"),e&&t.Events.trigger({type:"content-resize",node:this.DOM}),this},Panel.prototype.__open=function(e){var i;return null==e&&(e=!0),i=function(i){return function(){t.dom.removeClass(i.DOM,"cui-panel-closed"),e&&t.Events.trigger({type:"content-resize",node:i.DOM})}}(this),this._load_on_open&&!this.__content_loaded?this.loadContent().done(i):i(),this},Panel.prototype.loadContent=function(){var e,i;return i=t.util.isFunction(this._content)?this._content(this):this._content,e=new t.Deferred,t.util.isPromise(i)?i.always(function(t){return function(i){return t.setContent(i),e.resolve()}}(this)):(this.setContent(i),e.resolve()),this.__content_loaded=!0,e.promise()},Panel.prototype.setContent=function(t,e){return null==e&&(e="content"),!1===t&&this._content_placeholder?this:(this.__has_placeholder=!1,this.replace(t,e),this)},Panel.prototype.appendContent=function(t,e){return null==e&&(e="content"),this.__has_placeholder?this.setContent(t,e):this.append(t,e),this},Panel}(t.DOMElement)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.Password=function(i){function Password(){return Password.__super__.constructor.apply(this,arguments)}return e(Password,i),Password.prototype.__createElement=function(){return Password.__super__.__createElement.call(this,"password")},Password.prototype.showPassword=function(){return t.dom.setAttribute(this.__input,"type","text")},Password.prototype.hidePassword=function(){return t.dom.setAttribute(this.__input,"type","password")},Password}(t.Input)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.Popover=function(t){function Popover(){return Popover.__super__.constructor.apply(this,arguments)}return e(Popover,t),Popover.prototype.initOpts=function(){return Popover.__super__.initOpts.call(this),this.mergeOpt("placement",{default:null}),this.mergeOpt("pointer",{default:"arrow"})},Popover.prototype.readOpts=function(){var t;if(Popover.__super__.readOpts.call(this),!(null!=(t=this.opts.backdrop)?t.policy:void 0))return this._backdrop.policy="click-thru"},Popover.prototype.knownPlacements=["s","e","w","ws","wn","n","se","ne","es","en","nw","sw"],Popover.prototype.forceFocusOnShow=function(){return!1},Popover}(t.Modal)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},n={}.hasOwnProperty,o=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1};t.Template.loadTemplateText(i(189)),t.ProgressMeter=function(i){function ProgressMeter(e){this.opts=null!=e?e:{},ProgressMeter.__super__.constructor.call(this,this.opts),this.__meter=new t.Template({name:"progress-meter",map:{icon:!0,text:!0,fill:!0}}),this.registerTemplate(this.__meter),this._state?this.setState(this._state):this._states.length&&this.setState(this._states[0])}return e(ProgressMeter,i),ProgressMeter.prototype.__checkState=function(t){return o.call(this._states,t)>=0||"number"==typeof t&&t>=0&&t<=100},ProgressMeter.prototype.initOpts=function(){var e,i,n,o,r;for(ProgressMeter.__super__.initOpts.call(this),this.opts.states||(this.opts.states=Object.keys(t.defaults.ProgressMeter.states)),this.addOpts({states:{check:Array},state:{check:function(t){return function(e){return t.__checkState(e)}}(this)},css_property_percent:{default:"width",check:String},size:{default:"auto",mandatory:!0,check:["auto","mini","normal","big"]},appearance:{default:"auto",mandatory:!0,check:["auto","normal","important"]},onUpdate:{check:Function}}),n=this.opts.states,o=[],e=0,i=n.length;e<i;e++)r=n[e],o.push(this.addOpt("icon_"+r,{default:t.defaults.ProgressMeter.states[r],check:function(e){return function(e){return e instanceof t.Icon||t.util.isString(e)}}()}));return o},ProgressMeter.prototype.getState=function(){return this.__state},ProgressMeter.prototype.getMeter=function(){return this.__meter},ProgressMeter.prototype.setState=function(e){var i,n,r,s;if(t.util.assert(this.__checkState(e),"ProgressMeter.setState","state needs to be "+this._states.join(",")+" or between 0 and 100.",{state:e}),"number"==typeof e&&(e=Math.round(100*e)/100),this.__state!==e)return this.__state=e,r=this.__state,o.call(this._states,r)>=0?(n=this["_icon_"+this.__state],n instanceof t.Icon?this.__meter.replace(n,"icon"):t.util.isEmpty(n)?this.__meter.empty("icon"):this.__meter.replace(new t.Icon({icon:n}),"icon"),this.__meter.DOM.setAttribute("state",this.__state),this.__meter.empty("text"),i={},i[this._css_property_percent]=""):(this.__meter.DOM.setAttribute("state","percent"),this.__meter.empty("icon"),this.__meter.replace(Math.round(this.__state)+"%","text"),i={},i[this._css_property_percent]=this.__state+"%"),t.dom.setStyle(this.__meter.map.fill,i),null!=(s=this._onUpdate)&&s.call(this,this),this},ProgressMeter}(t.DOMElement),t.defaults.ProgressMeter={states:{waiting:"fa-hourglass",spinning:"svg-spinner cui-spin-stepped"}}}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.Select=function(i){function Select(){return Select.__super__.constructor.apply(this,arguments)}return e(Select,i),Select.defaults={not_found:"- not found -"},Select.prototype.initOpts=function(){return Select.__super__.initOpts.call(this),this.addOpts({empty_text:{check:String},not_found_text:{default:t.Select.defaults.not_found,check:String},options:{mandatory:!0,check:function(e){return t.util.isArray(e)||t.util.isFunction(e)}},group:{check:String},onShow:{check:Function},onHide:{check:Function}})},Select.prototype.init=function(){if(this.__value=null,!t.util.isFunction(this._options))return this.__loadOptions()},Select.prototype.disable=function(t){return this.__wasAutomaticDisabled=null!=t&&t,Select.__super__.disable.call(this)},Select.prototype.isDisabled=function(){return!this.__wasAutomaticDisabled&&Select.__super__.isDisabled.call(this)},Select.prototype.enableOption=function(t){var e;if(e=this.__getOptionByValue(t))return e.disabled=!1,this.displayValue()},Select.prototype.disableOption=function(t){var e;if(e=this.__getOptionByValue(t))return e.disabled=!0,this.displayValue()},Select.prototype.__getOptionByValue=function(t){var e,i,n,o;for(o=this.getOptions(),e=0,i=o.length;e<i;e++)if(n=o[e],n.value===t)return n;return null},Select.prototype.enable=function(t){return null==t&&(t=!1),t?this.__wasAutomaticDisabled?Select.__super__.enable.call(this):void 0:Select.__super__.enable.call(this)},Select.prototype.__loadOptions=function(e){var i,n,o,r;return"pending"===(null!=(o=this.__optionsPromise)?o.state():void 0)?this.__optionsPromise:(r=this.getArrayFromOpt("options",e,!0),t.util.isPromise(r)?(this.__optionsPromise=r,(i=this.getButton())&&(n=i.getIconRight(),i.setIconRight("spinner"),this.__optionsPromise.always(function(t){return function(){return i.setIconRight(n)}}()))):this.__optionsPromise=t.resolvedPromise(r),this.__optionsPromise.done(function(e){return function(i){var n,o,r,s,a,l;for(e.__options=i,n=void 0,l=e.__options,r=o=0,s=l.length;o<s;r=++o)a=l[r],a._idx=r,!t.util.isUndef(a.text)||t.util.isUndef(a.value)||a.icon||(a.text=""+a.value),t.util.isUndef(a.value)&&!t.util.isUndef(a.text)&&(a.value=a.text),t.util.isUndef(a.value)||void 0!==n||(n=a);return e._default_opt=void 0,n?(e.default_opt=n,e.__value=e.default_opt.value):console.warn("Select "+e.getName()+": did not find a value opt and no empty text is defined.",{opts:e.opts})}}(this)),this.__optionsPromise)},Select.prototype.setData=function(e){return Select.__super__.setData.call(this,e,!1),t.util.isFunction(this._options)?this.__loadOptions().done(function(t){return function(){return t.initData()}}(this)):this.initData(),this},Select.prototype.getCheckboxClass=function(){return"cui-button-select"},Select.prototype.registerLabel=function(){},Select.prototype.getButtonOpts=function(){var e;return{group:this._group,role:"select",left:!0,menu:{active_item_idx:(null!=(e=this.default_opt)?e._idx:void 0)||-1,allow_null:!t.util.isEmpty(this._empty_text),class:"cui-select-menu",onDeactivate:function(t){return function(e,i,n,o){if(!o.prior_activate&&(t.storeValue(null,o),!t.isDestroyed()))return t.displayValue(),t}}(this),onClick:function(t){return function(){var e;return null!=(e=t._onClick)?e.apply(t,arguments):void 0}}(this),onShow:function(e){return function(){var i,n,o,r;return e.__keyboardKeys=[],n=e.__checkbox.getMenu(),i=null!=n?n.getItemList():void 0,o=function(){return null!=i&&i.preSelectByKeyword(e.__keyboardKeys.join("")),e.__keyboardKeys=[]},e.__keyDownEventListener=t.Events.listen({type:"keydown",call:function(r){var s;switch(s=r.getKeyboardKey()){case"Down":null!=i&&i.preActivateNextItem();break;case"Up":null!=i&&i.preActivatePreviousItem();break;case"Return":null!=i&&i.activatePreSelectedItem(),n.hide();break;default:s&&(e.__keyboardKeys.push(s),t.scheduleCallback({ms:200,call:o}))}}}),null!=(r=e._onShow)?r.apply(e,arguments):void 0}}(this),onHide:function(t){return function(){var e,i;return null!=(e=t.__keyDownEventListener)&&e.destroy(),null!=(i=t._onHide)?i.apply(t,arguments):void 0}}(this),onActivate:function(t){return function(e,i,n,o){if(t.storeValue(t.__options[n].value,o),!t.isDestroyed())return t.displayValue(),t}}(this),items:function(t){return function(e){return t.__loadOptions(e).done(function(){return t.displayValue()})}}(this),has_items:!0}}},Select.prototype.getDefaultValue=function(){return this.default_opt?this.default_opt.value:void 0},Select.prototype.getValue=function(){return this.hasData()?Select.__super__.getValue.call(this):this.__value},Select.prototype.checkValue=function(t,e){return!0},Select.prototype.reload=function(){return t.util.isFunction(this._options)&&this.__loadOptions(),Select.__super__.reload.call(this)},Select.prototype.storeValue=function(t,e){return this.hasData()?Select.__super__.storeValue.call(this,t,e):this.__value=t,this},Select.prototype.displayValue=function(){return t.DataFieldInput.prototype.displayValue.call(this),!this.__optionsPromise&&t.util.isFunction(this._options)&&this.__loadOptions(),this.__optionsPromise.done(function(e){return function(){var i,n,o,r,s,a,l,u,c,h;for(i=null,s=null,l=e.__options,o=n=0,r=l.length;n<r;o=++n)a=l[o],null===i&&a.value===e.getValue()&&(i=a),(null!=(u=a.text)?u.length:void 0)>s&&(s=null!=(c=a.text)?c.length:void 0);return i?(i.icon?i.icon instanceof t.Icon?e.__checkbox.setIcon(i.icon.copy()):e.__checkbox.setIcon(i.icon):e.__checkbox.setIcon(null),h=i.text_selected||i.text,e.__checkbox.menuSetActiveIdx(i._idx)):(h=null!==e.getValue()||t.util.isEmpty(e._empty_text)?e._not_found_text.trim()+" "+e.getValue():e._empty_text,e.__checkbox.menuSetActiveIdx(-1)),e.__checkbox.setText(h),(null!=h?h.length:void 0)>s&&(s=h.length),e.__checkbox.setTextMaxChars(s)}}(this)),this},Select.prototype.getOptions=function(){return this.__options},Select.newSelectOrOutput=function(e){var i;return 1===e.options.length?(i={form:e.form,text:e.options[0].text},new t.Output(i)):new t.Select(e)},Select}(t.Checkbox),t.defaults.class.Select=t.Select}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},n={}.hasOwnProperty;t.Template.loadTemplateText(i(190)),t.Slider=function(i){function Slider(){return Slider.__super__.constructor.apply(this,arguments)}return e(Slider,i),Slider.prototype.initOpts=function(){return Slider.__super__.initOpts.call(this),this.addOpts({value:{check:function(e){return t.util.isInteger(e)}},min:{mandatory:!0,default:0,check:function(e){return t.util.isInteger(e)}},max:{mandatory:!0,default:100,check:function(e){return t.util.isInteger(e)}},onDragstart:{check:Function},onDragging:{check:Function},onDrop:{check:Function},onUpdate:{check:Function}})},Slider.prototype.readOpts=function(){return Slider.__super__.readOpts.call(this),this.__distance=this._max-this._min,t.util.assert(this.__distance>1,"new CUI.Slider","opts.min and opts.max need to be at least 2 apart."),this.__value=this.getDefaultValue()},Slider.prototype.getTemplate=function(){return this.__slider=new t.Template({name:"slider",map:{track:!0,track_visual:!0,handle:!0}})},Slider.prototype.initDimensions=function(){return this.__track_dim=t.dom.getDimensions(this.__track),this.__handle_dim=t.dom.getDimensions(this.__handle),this.__track_available={width:this.__track_dim.contentBoxWidth-this.__handle_dim.borderBoxWidth/2,height:this.__track_dim.contentBoxHeight-this.__handle_dim.borderBoxHeight/2}},Slider.prototype.render=function(){return Slider.__super__.render.call(this),this.__handle=this.__slider.map.handle,this.__track=this.__slider.map.track,new t.Draggable({element:this.__handle,helper:null,dragstart:function(t){return function(e,i){return t.initDimensions(),t.addClass("cui-slider--dragging"),t.__last_diff_x=0,t.__start_value=t.__value,"function"==typeof t._onDragstart?t._onDragstart(t,t.__start_value):void 0}}(this),dragstop:function(t){return function(){return t.setValue(t.__start_value),t.removeClass("cui-slider--dragging"),"function"==typeof t._onDrop?t._onDrop(t):void 0}}(this),dragend:function(t){return function(){return t.removeClass("cui-slider--dragging"),"function"==typeof t._onDrop?t._onDrop(t):void 0}}(this),dragging:function(t){return function(e,i){var n,o,r,s;return n=i.dragDiff.bare_x-t.__last_diff_x,t.__last_diff_x=i.dragDiff.bare_x,o=t.__track_available.width/t.__distance,r=i.dragDiff.bare_y/5,s=r>1?Math.min(1,o*r):o,t.setValue(t.__value+n/s),"function"==typeof t._onDragging?t._onDragging(t,t.getValue()):void 0}}(this)}),t.Events.listen({type:"click",node:this.__slider.map.track_visual,call:function(t){return function(e){var i,n;t.initDimensions(),n=t.__track_dim.clientBoundingRect.left,i=e.getNativeEvent().clientX,t.setValue((i-n)/t.__track_available.width*t.__distance)}}(this)})},Slider.prototype.getValue=function(){return this.hasData()?Slider.__super__.getValue.call(this):this.__value},Slider.prototype.getHandle=function(){return this.__slider.map.handle},Slider.prototype.setValue=function(t,e){var i;return null==e&&(e={}),i=Math.round(Math.min(Math.max(this._min,t),this._max)),this.__value=i,void 0===e.no_trigger&&(e.no_trigger=!1),Slider.__super__.setValue.call(this,this.__value,e),this},Slider.prototype.getDefaultValue=function(){return void 0===this._value?this._min:this._value},Slider.prototype.displayValue=function(){var e;return e=this.getValue()/this._max*100,t.dom.setStyle(this.__handle,{left:e+"%"}),"function"==typeof this._onUpdate?this._onUpdate(this,this.getValue()):void 0},Slider.prototype.checkValue=function(e,i){if(e<this._min||e>this._max)throw new t.CheckValueError("value needs to be between "+this._min+" and "+this._max);return this},Slider}(t.DataField)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},n={}.hasOwnProperty;t.Template.loadTemplateText(i(191)),t.StickyHeader=function(i){function StickyHeader(e){this.opts=null!=e?e:{},StickyHeader.__super__.constructor.call(this,this.opts),this.header=new t.Template({name:"sticky-header",map:{center:!0}}),this.registerTemplate(this.header),this.addClass("cui-sticky-header-level-"+this._level),t.util.isEmpty(this._text)?this.replace(this._content,"center"):this.replace(t.dom.text(this._text),"center"),this._control.addStickyHeader(this)}return e(StickyHeader,i),StickyHeader.prototype.initOpts=function(){return StickyHeader.__super__.initOpts.call(this),this.addOpts({control:{mandatory:!0,check:t.StickyHeaderControl},text:{check:String},content:{},level:{default:0,check:function(t){return 0===t||1===t||2===t}}})},StickyHeader.prototype.getLevel=function(){return this._level},StickyHeader}(t.DOMElement)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.StickyHeaderControl=function(i){function StickyHeaderControl(e){var i;this.opts=null!=e?e:{},StickyHeaderControl.__super__.constructor.call(this,this.opts),null!=(i=t.dom.data(this._element,"stickyHeaderControl"))&&i.destroy(),t.dom.data(this._element,"stickyHeaderControl",this),this.__control=t.dom.div("cui-sticky-header-control"),t.Events.listen({instance:this,type:"viewport-resize",node:this._element,call:function(t){return function(){return t.__positionControl()}}(this)}),this.__positionControl(),t.dom.append(this._element,this.__control),this.headers=[],this.newStickyHeaders=[],this.__hiddenHeaders=[],this.__positioned=!1,t.Events.listen({node:this._element,type:"scroll",instance:this,call:function(t){return function(e){t.position()}}(this)})}return e(StickyHeaderControl,i),StickyHeaderControl.prototype.initOpts=function(){return StickyHeaderControl.__super__.initOpts.call(this),this.addOpts({element:{mandatory:!0,check:function(e){return t.util.isElement(e)}}})},StickyHeaderControl.prototype.__positionControl=function(){var e;e=t.dom.getDimensions(this._element),t.dom.setStyle(this.__control,{left:e.clientBoundingRect.left,top:e.clientBoundingRect.top}),t.dom.setDimension(this.__control,"marginBoxWidth",e.clientWidth)},StickyHeaderControl.prototype.isInDOM=function(){return this.__control&&t.dom.isInDOM(this.__control)},StickyHeaderControl.prototype.addStickyHeader=function(e){return t.util.assert(!this.__positioned||t.dom.isInDOM(this.__control),this.__cls+".addStickyHeader","StickyHeaderControl is not in DOM tree anymore. Cannot add a new CUI.StickyHeader."),t.util.assert(e instanceof t.StickyHeader,this.__cls+".addStickyHeader","Needs to be instance of StickyHeader but is "+t.util.getObjectClass(e),{stickyHeader:e}),this.newStickyHeaders.push(e)},StickyHeaderControl.prototype.initNewStickyHeaders=function(){var e,i,n,o,r,s,a,l,u;for(a=[],u=this.newStickyHeaders,n=0,r=u.length;n<r;n++)l=u[n],e=l.DOM,i={stickyHeader:l,level:l.getLevel(),node:e.cloneNode(!0)},this.headers.push(i),a.push(i),i.node.style.visiblity="hidden",t.dom.prepend(this.__control,i.node);for(this.newStickyHeaders.splice(0),o=0,s=a.length;o<s;o++)i=a[o],i.dimInControl=t.dom.getDimensions(i.node),this.__control.removeChild(i.node),i.node.style.visiblity="";return this},StickyHeaderControl.prototype.destroy=function(){return t.dom.removeData(this._element,"stickyHeaderControl"),t.Events.ignore({instance:this}),t.dom.remove(this.__control),this.__headers=null,this.newStickyHeaders=null},StickyHeaderControl.prototype.position=function(){var e,i,n,o,r,s,a,l,u,c,h,d,p,_,f,m,g,y,v,b,w,k,D,x,M,C,O;if(this.isInDOM()){for(this.__positioned=!0,this.initNewStickyHeaders(),D=this._element.scrollTop,M=[],i=0,v=this.headers,a=l=0,h=v.length;l<h;a=++l){for(n=v[a],i=0,s=u=0,b=n.level;u<b&&null!==(x=M[s]);s=u+=1)i+=M[s].dimInControl.marginBoxHeight;if(!(n.stickyHeader.DOM.offsetTop<D+i+n.dimInControl.marginTop)){for(g=n,O=0,f=0,d=M.length;f<d&&null!==(x=M[f]);f++)O+=x.dimInControl.marginBoxHeight;break}for(M[n.level]=n,s=c=n.level+1,w=M.length;c<w;s=c+=1)M[s]=null}for(g?(e=g.stickyHeader.DOM.offsetTop-D-O,e-=g.dimInControl.marginTop):e=0,k=this.__hiddenHeaders,m=0,p=k.length;m<p;m++)o=k[m],o.style.visibility="";for(this.__hiddenHeaders.splice(0),t.dom.empty(this.__control),C=0,a=y=0,_=M.length;y<_&&null!==(x=M[a]);a=++y)t.dom.prepend(this.__control,x.node),e<0&&x.level===g.level&&(C+=e),r=x.stickyHeader.DOM,r.style.visibility="hidden",this.__hiddenHeaders.push(r),x.node.style.top=C+"px",C+=x.dimInControl.marginBoxHeight;return t.dom.setStyle(this.__control,{height:C}),this}},StickyHeaderControl}(t.Element)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.Table=function(i){function Table(e){var i,n,o,r,s,a,l,u,c,h,d,p;if(this.opts=null!=e?e:{},Table.__super__.constructor.call(this,this.opts),i=[],"mini"===this._size&&i.push("cui-table--mini"),this._class&&i.push(this._class),this._flex&&i.push("cui-table--flex"),this._bordered&&i.push("cui-table--bordered"),this.__table=t.dom.table(i.join(" ")),this.registerDOMElement(this.__table,!1),t.Layout.prototype.maximizeAddClasses.call(this),this._header){for(o=t.dom.tr("cui-table-header"),u=this.__columns,r=0,a=u.length;r<a;r++)n=u[r],p=n.text?n.text:n.name,d=t.dom.th("cui-table-th "+n.__class),d.textContent=p,o.appendChild(d);this.__table.appendChild(o)}for(c=this._rows,s=0,l=c.length;s<l;s++)h=c[s],this.addRow(h)}return e(Table,i),Table.prototype.initOpts=function(){var e;return Table.__super__.initOpts.call(this),e=function(e){return function(e,i){var n,o,r,s;if(!t.util.isArray(e))return!1;for(r=o=0,s=e.length;o<s;r=++o)if(n=e[r],i)e[r]=t.Element.readOpts(n,"new CUI.Table",i);else if(!t.util.isPlainObject(n))return!1;return!0}}(),this.addOpts({class:{check:String},header:{mandatory:!0,default:!0,check:Boolean},bordered:{default:!1,check:Boolean},columns:{check:function(t){return e(t,{class:{mandatory:!0,check:String,default:""},name:{mandatory:!0,check:String},text:{check:String}})}},key_value:{mandatory:!0,default:!1,check:Boolean},rows:{mandatory:!0,default:[],check:function(e){return t.util.isArray(e)}},flex:{default:!1,check:Boolean},size:{mandatory:!0,default:"normal",check:["normal","mini"]},maximize:{check:Boolean},maximize_horizontal:{check:Boolean},maximize_vertical:{check:Boolean}})},Table.prototype.readOpts=function(){var e,i,n,o;for(Table.__super__.readOpts.call(this),this._key_value?(t.util.assert(!this._columns&&!this.opts.hasOwnProperty("header"),"new CUI.Table","opts.key_value cannot be set together with opts.header or opts.columns.",{opts:this.opts}),this._header=!1,this.__columns=[{name:"key"},{name:"value"}]):this.__columns=t.util.copyObject(this._columns,!0),o=this.__columns,i=0,n=o.length;i<n;i++)e=o[i],e.name?e.__class=" cui-td--"+e.name:e.__class="",t.util.isEmpty(e.class)||(e.__class+=" "+e.class);return t.Layout.prototype.maximizeReadOpts.call(this),this},Table.prototype.addRow=function(e){var i,n,o,r,s,a,l,u;for(l=t.dom.tr("cui-table-row"),s=this.__columns,n=o=0,r=s.length;o<r;n=++o)i=s[n],a=t.dom.td("cui-table-td"+i.__class),u=e[i.name],void 0===u&&(u=e[n]),t.util.isString(u)?(t.dom.addClass(a,"cui-td--text-content"),a.textContent=u):t.dom.append(a,u),l.appendChild(a);return this.__table.appendChild(l),this},Table.keyValueRowsFromMap=function(t){var e,i,n;i=[];for(e in t)n=t[e],i.push({key:e,value:n});return i},Table}(t.DOMElement)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},n={}.hasOwnProperty;t.Template.loadTemplateText(i(192)),t.Tab=function(i){function Tab(e){var i;this.opts=null!=e?e:{},Tab.__super__.constructor.call(this,this.opts),i=t.util.isEmpty(this._name)?null:"ez-tab-"+t.util.toClass(this._name),this.__body=new t.Template({name:"tab-body",class:i}),this.registerTemplate(this.__body),this._content_placeholder&&(this.append(this._content_placeholder),this.__has_placeholder=!0),t.util.isFunction(this._content)?this._load_on_show||this.loadContent():this._content&&this.append(this._content),this.__activations=0}return e(Tab,i),Tab.prototype.initButton=function(e){return t.util.assert(e instanceof t.Tabs,"Tab.initButton","Parameter #1 need to be instance of Tabs.",{tabs:e}),this.__button=new t.Button({role:"tab-header",radio:"tabs--"+e.getUniqueId(),class:"cui-tab-header-button",disabled:this._disabled,qa:this._qa?this._qa+"-button":void 0,id:this._button_id,size:"normal",group:"tabs",text:this._text,attr:{tab:this._name},active:!1,onActivate:function(e){return function(i){return e.__activations++,e._load_on_show&&!e.__content_loaded&&e.loadContent(),e.show(),1===e.__activations&&"function"==typeof e._onFirstActivate&&e._onFirstActivate(e),"function"==typeof e._onActivate&&e._onActivate(e),t.Events.trigger({type:"tab_activate",node:e.DOM})}}(this),onDeactivate:function(e){return function(i){return e.hide(),"function"==typeof e._onDeactivate&&e._onDeactivate(e),t.Events.trigger({type:"tab_deactivate",node:e.DOM})}}(this)}),this},Tab.prototype.initOpts=function(){return Tab.__super__.initOpts.call(this),this.addOpts({name:{check:String},button_id:{check:String},text:{mandatory:!0,check:String},disabled:{mandatory:!0,default:!1,check:Boolean},content:{mandatory:!0,check:function(e){return t.util.isContent(e)||t.util.isString(e)}},onFirstActivate:{check:Function},onActivate:{check:Function},onDeactivate:{check:Function},content_placeholder:{check:function(e){return t.util.isContent(e)}},load_on_show:{check:Boolean}})},Tab.prototype.loadContent=function(){return t.Panel.prototype.loadContent.call(this)},Tab.prototype.setContent=function(e){return t.Panel.prototype.setContent.call(this,e,!1)},Tab.prototype.appendContent=function(e){return t.Panel.prototype.appendContent.call(this,e,!1)},Tab.prototype.getText=function(){return this._text},Tab.prototype.hide=function(){return t.dom.addClass(this.DOM,"cui-tab-hidden"),this},Tab.prototype.show=function(){return t.dom.removeClass(this.DOM,"cui-tab-hidden"),t.__ng__&&t.Events.trigger({type:"viewport-resize",node:this.DOM,info:{tab:!0}}),this},Tab.prototype.destroy=function(){return t.Events.trigger({type:"tab_destroy",node:this.DOM}),this.__button.destroy(),Tab.__super__.destroy.call(this)},Tab.prototype.disable=function(){return this.__button.disable(),this},Tab.prototype.enable=function(){return this.__button.enable(),this},Tab.prototype.activate=function(){return this.__button.activate(),this},Tab.prototype.deactivate=function(){return this.__button.deactivate(),this},Tab.prototype.isActive=function(){return this.__button.isActive()},Tab.prototype.getButton=function(){return this.__button},Tab.prototype.getBody=function(){return this.DOM},Tab}(t.DOMElement),t.ready(function(e){return function(){return t.Events.registerEvent({type:"tab_destroy"}),t.Events.registerEvent({type:"tab_deactivate"}),t.Events.registerEvent({type:"tab_activate"})}}())}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},n={}.hasOwnProperty;t.Template.loadTemplateText(i(193)),t.Tabs=function(i){function Tabs(){return Tabs.__super__.constructor.apply(this,arguments)}return e(Tabs,i),Tabs.defaults={overflow_button_tooltip:null},Tabs.prototype.initOpts=function(){return Tabs.__super__.initOpts.call(this),this.removeOpt("header_center"),this.removeOpt("content"),this.removeOpt("force_footer"),this.removeOpt("force_header"),this.addOpts({tabs:{mandatory:!0,check:function(e){return t.util.isArray(e)&&e.length>0}},active_idx:{check:"Integer"},appearance:{check:["normal","mini"]},orientation:{check:["vertical","horizontal"],mandatory:!0,default:"horizontal"}})},Tabs.prototype.forceHeader=function(){return!0},Tabs.prototype.forceFooter=function(){return!0},Tabs.prototype.__checkOverflowButton=function(){var e,i;if(this.__maximize_horizontal)return e=t.dom.getDimensions(this.__header),e.scrollWidth>e.clientWidth?(this.__overflowBtn.show(),t.dom.addClass(this.__pane_header.DOM,"cui-tabs-pane-header--overflow"),this.__dragscroll=new t.Dragscroll({element:this.__buttonbar.DOM,scroll_element:this.__header})):(null!=(i=this.__dragscroll)&&i.destroy(),this.__dragscroll=null,this.__overflowBtn.hide(),t.dom.removeClass(this.__pane_header.DOM,"cui-tabs-pane-header--overflow")),this},Tabs.prototype.__setActiveMarker=function(){var e,i,n;return(e=null!=(n=this.getActiveTab())?n.getButton().DOM:void 0)?(t.dom.showElement(this.__tabs_marker),i=t.dom.getDimensions(e),t.dom.setStyle(this.__tabs_marker,{left:i.offsetLeft,width:i.borderBoxWidth}),this):void t.dom.hideElement(this.__tabs_marker)},Tabs.prototype.init=function(){var e,i,n,o,r,s,a;for(Tabs.__super__.init.call(this),this.__tabs_marker=t.dom.element("DIV",{class:"cui-tabs-active-marker"}),this.__tabs_bodies=new t.Template({name:"tabs-bodies"}),t.dom.addClass(this.__pane_header.DOM,"cui-tabs-pane-header"),"mini"===this._appearance&&t.dom.addClass(this.__pane_header.DOM,"cui-tabs-pane-header--mini"),this.addClass("cui-tabs--"+this._orientation),this.__buttonbar=new t.Buttonbar,r="center",this.__pane_header.append(this.__buttonbar,r),this.__pane_header.append(this.__tabs_marker,r),this.__header=this.__pane_header[r](),t.Events.listen({type:"scroll",node:this.__header,call:function(e){return function(i){var n;return n=t.dom.getDimensions(e.__header),t.dom.setClass(e.__pane_header.DOM,"cui-tabs-pane-header--scroll-at-end",n.horizontalScrollbarAtEnd),t.dom.setClass(e.__pane_header.DOM,"cui-tabs-pane-header--scroll-at-start",n.horizontalScrollbarAtStart)}}(this)}),this.__overflowBtn=new t.Button({icon:"ellipsis_h",class:"cui-tab-header-button-overflow",icon_right:!1,size:"mini"===this._appearance?"mini":void 0,tooltip:{text:t.Tabs.defaults.overflow_button_tooltip},menu:{items:function(t){return function(){var e,i,n,o,r,s;for(e=[],r=t.__tabs,i=function(i){return e.push({text:i.getText(),active:i===t.getActiveTab(),onClick:function(){return i.activate()}})},n=0,o=r.length;n<o;n++)s=r[n],i(s);return e}}(this)}}),this.__overflowBtn.hide(),this.__pane_header.prepend(this.__overflowBtn,"right"),this.getLayout().append(this.__tabs_bodies,"center"),"mini"===this._appearance&&this.addClass("cui-tabs--mini"),t.__ng__||this.__maximize_horizontal&&this.__maximize_vertical||t.Events.listen({node:this.getLayout(),type:"content-resize",call:function(t){return function(e,i){return e.stopPropagation(),t.__doLayout()}}(this)}),this.__tabs=[],s=this._tabs,n=i=0,o=s.length;i<o;n=++i)(a=s[n])&&(a instanceof t.Tab?e=this.addTab(a):t.util.isPlainObject(a)?e=this.addTab(new t.Tab(a)):t.util.assert(!1,"new "+this.__cls,"opts.tabs["+n+"] must be PlainObject or Tab but is "+t.util.getObjectClass(a),{opts:this.opts}),"mini"===this._appearance&&e.getButton().setSize("mini"));return this.__tabs[this._active_idx||0].activate(),t.dom.waitForDOMInsert({node:this.getLayout()}).done(function(e){return function(){if(!e.isDestroyed())return t.Events.listen({node:e.getLayout(),type:"viewport-resize",call:function(){return e.__checkOverflowButton(),e.__setActiveMarker()}}),t.util.assert(t.dom.isInDOM(e.getLayout().DOM),"Tabs getting DOM insert event without being in DOM."),e.__checkOverflowButton(),e.__setActiveMarker(),t.__ng__?void 0:e.__doLayout()}}(this)),this.addClass("cui-tabs"),this.__max_width=-1,this.__max_height=-1,this},Tabs.prototype.setFooterRight=function(t){return this.replace(t,"footer_right")},Tabs.prototype.setFooterLeft=function(t){return this.replace(t,"footer_left")},Tabs.prototype.__doLayout=function(){if(!this.__maximize_horizontal||!this.__maximize_vertical)return this.__measureAndSetBodyWidth()&&t.Events.trigger({type:"content-resize",node:this.DOM.parentNode}),this},Tabs.prototype.addTab=function(e){return t.util.assert(e instanceof t.Tab,this.__cls+".addTab","Tab must be instance of Tab but is "+t.util.getObjectClass(e),{tab:e}),this.hasTab(e)||(this.__tabs.push(e),t.Events.listen({node:e,type:"tab_activate",call:function(i){return function(){return i.__overflowBtn.isShown()&&t.dom.scrollIntoView(e.getButton().DOM),t.__ng__&&(i._maximize_vertical||t.dom.setStyle(i.__tabs[0].DOM,{marginLeft:-100*t.util.idxInArray(e,i.__tabs)+"%"})),i.__active_tab=e,i.__setActiveMarker(),t.dom.setAttribute(i.DOM,"active-tab-idx",t.util.idxInArray(e,i.__tabs))}}(this)}),t.Events.listen({node:e,type:"tab_deactivate",call:function(e){return function(){return e.__active_tab=null,t.dom.setAttribute(e.DOM,"active-tab-idx","")}}(this)}),t.Events.listen({node:e,type:"tab_destroy",call:function(i){return function(){var n,o;return n=i.__tabs.indexOf(e),t.util.removeFromArray(e,i.__tabs),n--,null!=(o=i.__tabs[n])?o.activate():void 0}}(this)})),e.hide(),e.initButton(this),this.__buttonbar.addButton(e.getButton()),this.__tabs_bodies.append(e),e},Tabs.prototype.__measureAndSetBodyWidth=function(){var e,i,n,o,r,s,a,l,u,c,h,d,p,_,f,m,g,y,v;for(p=t.dom.parents(this.DOM),i=0,s=p.length;i<s;i++)if(d=p[i],d.scrollTop||d.scrollLeft){g={node:d,top:d.scrollTop,left:d.scrollLeft};break}for(_=this.__tabs,n=0,a=_.length;n<a;n++)v=_[n],t.dom.setStyle(v.getBody(),{"min-width":"",height:""});for(t.dom.setStyle(this.__tabs_bodies.DOM,{"min-width":"",height:""}),h=-1,c=-1,f=this.__tabs,o=0,l=f.length;o<l;o++)v=f[o],e={width:t.dom.getDimensions(v.getBody()).marginBoxWidth,height:t.dom.getDimensions(v.getBody()).marginBoxHeight},e.width>h&&(h=e.width),e.height>c&&(c=e.height);for(t.dom.setStyle(this.__tabs_bodies.DOM,{"min-width":h,height:c}),m=this.__tabs,r=0,u=m.length;r<u;r++)v=m[r],t.dom.setStyle(v.getBody(),{"min-width":h,height:c});return this.max_width!==this.__max_width||this.max_height!==this.__max_height?(this.__max_width=h,this.__max_height=c,y=!0):y=!1,g&&(g.node.scrollTop=g.top,g.node.scrollLeft=g.left),y},Tabs.prototype.hasTab=function(t){return this.getTab(t)},Tabs.prototype.getTab=function(e){var i,n,o,r,s;if(i=null,t.util.isString(e)){for(r=this.__tabs,n=0,o=r.length;n<o;n++)if(s=r[n],s._name===e){i=s;break}}else e instanceof t.Tab?this.__tabs.indexOf(e)>-1&&(i=e):i=this.__tabs[e];return i},Tabs.prototype.getActiveTab=function(){return this.__active_tab},Tabs.prototype.activate=function(t){var e;return e=this.getTab(t),e.activate(),this},Tabs}(t.SimplePane)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.Toolbar=function(i){function Toolbar(){return Toolbar.__super__.constructor.apply(this,arguments)}return e(Toolbar,i),Toolbar.prototype.init=function(){return Toolbar.__super__.init.call(this),this.addClass("cui-toolbar")},Toolbar.prototype.initOpts=function(){if(Toolbar.__super__.initOpts.call(this),t.__ng__)return this.removeOpt("maximize"),this.removeOpt("maximize_horizontal"),this.removeOpt("maximize_vertical"),this.addOpts({maximize_horizontal:{default:!0,mandatory:!0,check:Boolean}})},Toolbar.prototype.hasFlexHandles=function(){return!1},Toolbar.prototype.getPanes=function(){return["left","right"]},Toolbar}(t.HorizontalLayout)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.Tooltip=function(i){function Tooltip(e){if(this.opts=null!=e?e:{},Tooltip.__super__.constructor.call(this,this.opts),t.util.assert(t.util.xor(this._text,this._content),"new "+this.__cls,"One of opts.text or opts.content must be set.",{opts:this.opts}),this.__dummyInst=function(t){return function(){}}(),this._on_hover)return t.Events.listen({type:"mouseenter",instance:this.__dummyInst,node:this.__element,call:function(e){return function(i){t.globalDrag||(!0===e._on_hover||e._on_hover(e))&&e.showTimeout(null,i)}}(this)}),t.Events.listen({type:"mouseleave",instance:this.__dummyInst,node:this.__element,call:function(e){return function(i){t.globalDrag?e.hide(i):e.hideTimeout(null,i)}}(this)}),void t.dom.addClass(this.__element,"cui-dom-element-has-tooltip-on-hover");this._on_click&&(t.dom.addClass(this.__element,"cui-dom-element-has-tooltip-on-click"),t.Events.listen({type:"click",instance:this.__dummyInst,node:this.__element,call:function(t){return function(e){e.hasModifierKey()||t.show()}}(this)}))}return e(Tooltip,i),Tooltip.prototype.initOpts=function(){Tooltip.__super__.initOpts.call(this),this.mergeOpts({element:{mandatory:!0}}),this.addOpts({text:{check:function(e){return t.util.isString(e)||t.util.isFunction(e)}},markdown:{mandatory:!0,default:!1,check:Boolean},content:{check:function(e){return t.util.isString(e)||t.util.isFunction(e)||t.util.isElement(e)||t.util.isArray(e)||t.util.isElement(null!=e?e.DOM:void 0)}},on_click:{mandatory:!0,default:!1,check:Boolean},on_hover:{check:function(e){return t.util.isBoolean(e)||t.util.isFunction(e)}}})},Tooltip.prototype.readOpts=function(){return this.opts.hasOwnProperty("on_hover")||(this.opts.on_hover=!this.opts.on_click),this.opts.on_click&&(this.opts.backdrop||(this.opts.backdrop={}),this.opts.backdrop.policy||(this.opts.backdrop.policy="click")),t.util.isUndef(this.opts.backdrop)&&(this.opts.backdrop=!1),this.opts.pointer="arrow",this.opts.check_for_element=!0,this.opts.placement=this.opts.placement||"n",Tooltip.__super__.readOpts.call(this),t.util.assert(!(this._on_click&&this._on_hover),"new CUI.Tooltip","opts.on_click and opts.on_hover cannot be used together.",{opts:this.opts}),this},Tooltip.current=null,Tooltip.prototype.setElement=function(){},Tooltip.prototype.focusOnHide=function(t){},Tooltip.prototype.focusOnShow=function(t){},Tooltip.prototype.showTimeout=function(e,i){return null==e&&(e=this._show_ms),t.Tooltip.current?(this.show(i),t.resolvedPromise()):(t.Tooltip.current=this,Tooltip.__super__.showTimeout.call(this,e,i))},Tooltip.prototype.hideTimeout=function(e,i){return null==e&&(e=this._show_ms),t.Tooltip.current=null,Tooltip.__super__.hideTimeout.call(this,i)},Tooltip.prototype.hide=function(e){return t.Tooltip.current=null,Tooltip.__super__.hide.call(this,e)},Tooltip.prototype.show=function(e){return t.Tooltip.current&&t.Tooltip.current!==this&&t.Tooltip.current.hide(e),t.Tooltip.current=this,this.__static?Tooltip.__super__.show.call(this,e):this.fillContent().done(function(t){return function(){return Tooltip.__super__.show.call(t,e)}}(this)),this},Tooltip.prototype.getElementOpenClass=function(){return null},Tooltip.prototype.fillContent=function(){var e,i,n,o;return e=new t.Deferred,e.fail(function(t){return function(){if(!t.__pane.isDestroyed())return t.__pane.empty("center")}}(this)),n=function(n){return function(o){return t.util.isEmpty(o)?e.reject():i(new t.Label({markdown:n._markdown,text:o,multiline:!0}))}}(this),i=function(t){return function(i){return!i||t.__pane.isDestroyed()?e.reject():(t.__pane.replace(i,"center"),e.resolve())}}(this),t.util.isFunction(this._text)?(o=this._text.call(this,this),t.util.isPromise(o)?(o.done(function(t){return n(t)}),o.fail(function(){return e.reject()})):n(o)):t.util.isFunction(this._content)?(o=this._content.call(this,this),t.util.isPromise(o)?(o.done(function(t){return i(t)}),o.fail(function(t){return e.reject(t)})):i(o)):t.util.isEmpty(this._text)?i(this._content):n(this._text),t.util.isFunction(this._text)||t.util.isFunction(this._content)?this.__static=!1:this.__static=!0,e.promise()},Tooltip.prototype.preventOverflow=function(){return Tooltip.__super__.preventOverflow.call(this),t.dom.width(this.DOM,this.__layer_dim._css_width)},Tooltip.prototype.resetLayer=function(){return Tooltip.__super__.resetLayer.call(this),t.dom.setStyleOne(this.DOM,"max-width",this.__viewport.width/2)},Tooltip.prototype.destroy=function(){return t.Events.ignore({instance:this.__dummyInst}),Tooltip.__super__.destroy.call(this),t.dom.removeClass(this.__element,"cui-dom-element-has-tooltip-on-hover cui-dom-element-has-tooltip-on-click")},Tooltip}(t.LayerPane)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},n={}.hasOwnProperty,o=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1};t.Template.loadTemplateText(i(194)),t.VerticalLayout=function(t){function VerticalLayout(){return VerticalLayout.__super__.constructor.apply(this,arguments)}return e(VerticalLayout,t),VerticalLayout.prototype.getName=function(){var t;return this.hasFlexHandles()?"vertical-layout":(t=this.getPanes(),2===t.length?"vertical-layout-top-center-bottom":o.call(t,"top")>=0?"vertical-layout-top-center":o.call(t,"bottom")>=0?"vertical-layout-center-bottom":"vertical-layout-center")},VerticalLayout.prototype.getMapPrefix=function(){return"cui-vertical-layout"},VerticalLayout.prototype.hasFlexHandles=function(){var t,e;return!!((null!=(t=this._top)?t.flexHandle:void 0)||(null!=(e=this._bottom)?e.flexHandle:void 0))},VerticalLayout.prototype.getPanes=function(){var t;return this.hasFlexHandles()?["top","bottom"]:(t=[],this._top&&t.push("top"),this._bottom&&t.push("bottom"),t)},VerticalLayout.prototype.getSupportedPanes=function(){return["top","bottom"]},VerticalLayout}(t.Layout)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.VerticalList=function(t){function VerticalList(){return VerticalList.__super__.constructor.apply(this,arguments)}return e(VerticalList,t),VerticalList.prototype.initOpts=function(){return VerticalList.__super__.initOpts.call(this),this.mergeOpt("maximize",{default:!1}),this.removeOpt("center"),this.addOpts({content:{}})},VerticalList.prototype.readOpts=function(){return VerticalList.__super__.readOpts.call(this),this._center={content:this._content}},VerticalList.prototype.getSupportedPanes=function(){return[]},VerticalList}(t.VerticalLayout)}).call(e,i(0))},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},n={}.hasOwnProperty;t.Template.loadTemplateText(i(195)),t.WaitBlock=function(i){function WaitBlock(e){this.opts=null!=e?e:{},WaitBlock.__super__.constructor.call(this,this.opts),this._inactive&&t.dom.addClass(this.DOM,"cui-wait-block-inactive"),this._fullscreen&&t.dom.addClass(this.DOM,"cui-wait-block-fullscreen")}return e(WaitBlock,i),WaitBlock.prototype.initOpts=function(){return WaitBlock.__super__.initOpts.call(this),this.mergeOpt("icon",{check:function(e){return e instanceof t.Icon||t.util.isString(e)}}),this.removeOpt("header"),this.removeOpt("content"),this.addOpts({inactive:{check:Boolean},element:{check:function(e){return t.util.isElement(e)||t.util.isElement(e.DOM)}},fullscreen:{check:Boolean},appearance:{check:["invisible-background"]}})},WaitBlock.prototype.readOpts=function(){return WaitBlock.__super__.readOpts.call(this),t.util.assert(t.util.xor(this._element,this._fullscreen),"new CUI.WaitBlock","opts.element or opt.fullscreen needs to be set.",{opts:this.opts}),this._fullscreen?this.__element=document.body:this._element.DOM?this.__element=this._element.DOM:this.__element=this._element,this._inactive||this.opts.hasOwnProperty("icon")||(this._icon="spinner"),this.__shown=!1,this.__savedPosition=null,this},WaitBlock.prototype.getTemplateName=function(){return"wait-block"},WaitBlock.prototype.show=function(){return t.dom.isPositioned(this.__element)?this.__savedPosition=null:(this.__savedPosition=t.dom.getComputedStyle(this.__element).position,t.dom.setStyleOne(this.__element,"position","relative")),t.dom.addClass(this.__element.DOM,"cui-wait-block-active"),this._fullscreen,t.dom.append(this.__element,this.DOM),this.__shown=!0,this},WaitBlock.prototype.isShown=function(){return!!this.__shown},WaitBlock.prototype.hide=function(){return this.isShown()?(t.dom.remove(this.DOM),null!==this.__savedPosition&&t.dom.setStyleOne(this.__element,"position",this.__savedPosition),t.dom.removeClass(this.__element,"cui-wait-block-active"),this.__shown=!1,this.__savedPosition=null,this):this},WaitBlock.prototype.destroy=function(){return this.hide(),WaitBlock.__super__.destroy.call(this)},WaitBlock}(t.Block)}).call(e,i(0))},,,,,,,function(t,e){var i;i=function(){function CoordinateNumber(t){t=this.normalizeCoordinateNumbers(t),this.degrees=t[0],this.minutes=t[1],this.seconds=t[2],this.milliseconds=t[3],this.sign=this.normalizedSignOf(this.degrees),this.degrees=Math.abs(this.degrees)}return CoordinateNumber.prototype.normalizeCoordinateNumbers=function(t){var e,i,n,o,r;for(r=[0,0,0,0],i=n=0,o=t.length;n<o;i=++n)e=t[i],r[i]=parseFloat(e);return r},CoordinateNumber.prototype.normalizedSignOf=function(t){return t>=0?1:-1},CoordinateNumber.prototype.detectSpecialFormats=function(){if(this.degreesCanBeSpecial()){if(this.degreesCanBeMilliseconds())return this.degreesAsMilliseconds();if(this.degreesCanBeDegreesMinutesAndSeconds())return this.degreesAsDegreesMinutesAndSeconds();if(this.degreesCanBeDegreesAndMinutes())return this.degreesAsDegreesAndMinutes()}},CoordinateNumber.prototype.degreesCanBeSpecial=function(){var t;return t=!1,this.minutes||this.seconds||(t=!0),t},CoordinateNumber.prototype.degreesCanBeMilliseconds=function(){return this.degrees>909090},CoordinateNumber.prototype.degreesAsMilliseconds=function(){return this.milliseconds=this.degrees,this.degrees=0},CoordinateNumber.prototype.degreesCanBeDegreesMinutesAndSeconds=function(){return this.degrees>9090},CoordinateNumber.prototype.degreesAsDegreesMinutesAndSeconds=function(){var t;return t=Math.floor(this.degrees/1e4),this.minutes=Math.floor((this.degrees-1e4*t)/100),this.seconds=Math.floor(this.degrees-1e4*t-100*this.minutes),this.degrees=t},CoordinateNumber.prototype.degreesCanBeDegreesAndMinutes=function(){return this.degrees>360},CoordinateNumber.prototype.degreesAsDegreesAndMinutes=function(){var t;return t=Math.floor(this.degrees/100),this.minutes=this.degrees-100*t,this.degrees=t},CoordinateNumber.prototype.toDecimal=function(){return this.sign*(this.degrees+this.minutes/60+this.seconds/3600+this.milliseconds/36e5)},CoordinateNumber}(),t.exports=i},function(t,e,i){var n,o,r;r=i(162),n=i(160),o=function(){function Coordinates(t){this.coordinates=t,this.latitudeNumbers=null,this.longitudeNumbers=null,this.validate(),this.parse()}return Coordinates.prototype.validate=function(){var t;return t=new r,t.validate(this.coordinates)},Coordinates.prototype.parse=function(){return this.groupCoordinateNumbers(),this.latitude=this.extractLatitude(),this.longitude=this.extractLongitude()},Coordinates.prototype.groupCoordinateNumbers=function(){var t,e;return t=this.extractCoordinateNumbers(this.coordinates),e=t.length/2,this.latitudeNumbers=t.slice(0,e),this.longitudeNumbers=t.slice(0-e)},Coordinates.prototype.extractCoordinateNumbers=function(t){return t.match(/-?\d+(\.\d+)?/g)},Coordinates.prototype.extractLatitude=function(){var t;return t=this.coordinateNumbersToDecimal(this.latitudeNumbers),this.latitudeIsNegative()&&(t*=-1),t},Coordinates.prototype.extractLongitude=function(){var t;return t=this.coordinateNumbersToDecimal(this.longitudeNumbers),this.longitudeIsNegative()&&(t*=-1),t},Coordinates.prototype.coordinateNumbersToDecimal=function(t){var e;return e=new n(t),e.detectSpecialFormats(),e.toDecimal()},Coordinates.prototype.latitudeIsNegative=function(){return this.coordinates.match(/s/i)},Coordinates.prototype.longitudeIsNegative=function(){return this.coordinates.match(/w/i)},Coordinates.prototype.getLatitude=function(){return this.latitude},Coordinates.prototype.getLongitude=function(){return this.longitude},Coordinates}(),t.exports=o},function(t,e){var i;i=function(){function Validator(){}return Validator.prototype.isValid=function(t){var e;e=!0;try{return this.validate(t),e}catch(t){return t,e=!1}},Validator.prototype.validate=function(t){return this.checkContainsNoLetters(t),this.checkValidOrientation(t),this.checkNumbers(t)},Validator.prototype.checkContainsNoLetters=function(t){if(/(?![neswd])[a-z]/i.test(t))throw new Error("Coordinate contains invalid alphanumeric characters.")},Validator.prototype.checkValidOrientation=function(t){if(!/^[^nsew]*[ns]?[^nsew]*[ew]?[^nsew]*$/i.test(t))throw new Error("Invalid cardinal direction.")},Validator.prototype.checkNumbers=function(t){var e;return e=t.match(/-?\d+(\.\d+)?/g),this.checkAnyCoordinateNumbers(e),this.checkEvenCoordinateNumbers(e),this.checkMaximumCoordinateNumbers(e)},Validator.prototype.checkAnyCoordinateNumbers=function(t){if(0===t.length)throw new Error("Could not find any coordinate number")},Validator.prototype.checkEvenCoordinateNumbers=function(t){if(t.length%2)throw new Error("Uneven count of latitude/longitude numbers")},Validator.prototype.checkMaximumCoordinateNumbers=function(t){if(t.length>6)throw new Error("Too many coordinate numbers")},Validator}(),t.exports=i},,,,,function(t,e){function Coords(){}function formatcoords(){var t=new Coords;return t.init.apply(t,arguments),t}Coords.prototype.init=function(){if(!arguments.length)throw new Error("no arguments");if(arguments[0].lat&&arguments[0].lng)this.lat=arguments[0].lat,this.lon=arguments[0].lng;else if("string"==typeof arguments[0]){var t=arguments[0].split(",");this.lat=parseFloat(t[0].trim()),this.lon=parseFloat(t[1].trim())}else if("[object Array]"===Object.prototype.toString.call(arguments[0])){var e=arguments[0];!0===arguments[1]?(this.lat=e[1],this.lon=e[0]):(this.lat=e[0],this.lon=e[1])}else!0===arguments[2]?(this.lat=arguments[1],this.lon=arguments[0]):(this.lat=arguments[0],this.lon=arguments[1]);this.compute()},Coords.prototype.compute=function(){function computeFor(t){var e={};return e.initValue=t,e.degrees=Math.abs(t),e.degreesInt=Math.floor(e.degrees),e.degreesFrac=e.degrees-e.degreesInt,e.secondsTotal=3600*e.degreesFrac,e.minutes=e.secondsTotal/60,e.minutesInt=Math.floor(e.minutes),e.seconds=e.secondsTotal-60*e.minutesInt,e}this.north=this.lat>0,this.east=this.lon>0,this.latValues=computeFor(this.lat),this.lonValues=computeFor(this.lon)};var i={FFf:"DD MM ss X",Ff:"DD mm X",f:"dd X"},n={degrees:"°",minutes:"′",seconds:"″"};Coords.prototype.format=function(t,e){function formatFor(i,o){var r=t;return r=r.replace(/DD/g,i.degreesInt+n.degrees),r=r.replace(/dd/g,i.degrees.toFixed(e.decimalPlaces)+n.degrees),r=r.replace(/D/g,i.degreesInt),r=r.replace(/d/g,i.degrees.toFixed(e.decimalPlaces)),r=r.replace(/MM/g,i.minutesInt+n.minutes),r=r.replace(/mm/g,i.minutes.toFixed(e.decimalPlaces)+n.minutes),r=r.replace(/M/g,i.minutesInt),r=r.replace(/m/g,i.minutes.toFixed(e.decimalPlaces)),r=r.replace(/ss/g,i.seconds.toFixed(e.decimalPlaces)+n.seconds),r=r.replace(/s/g,i.seconds.toFixed(e.decimalPlaces)),r=r.replace(/-/g,i.initValue<0?"-":""),r=r.replace(/X/g,o)}if("object"==typeof t){e=t,t="FFf"}if(void 0===t&&(t="FFf"),void 0===e&&(e={}),"string"==typeof e){e={latLonSeparator:e}}void 0===e.latLonSeparator&&(e.latLonSeparator=" "),void 0===e.decimalPlaces?e.decimalPlaces=5:e.decimalPlaces=parseInt(e.decimalPlaces),Object.keys(i).indexOf(t)>-1&&(t=i[t]);var o=formatFor(this.latValues,this.north?"N":"S"),r=formatFor(this.lonValues,this.east?"E":"W");return o+e.latLonSeparator+r},t.exports=formatcoords},function(t,e,i){var n;n=i(0),i(52),i(51),i(22),i(23),i(25),i(24),i(35),i(36),i(50),i(26),i(27),i(30),i(31),i(34),i(32),i(33),i(29),i(38),i(42),i(40),i(43),i(37),i(41),i(44),i(39),i(28),i(18),i(16),i(49),i(45),i(48),i(47),i(20),i(19),i(21),i(217),i(55),i(46),i(56),i(57),i(98),i(99),i(97),i(141),i(53),i(153),i(54),i(66),i(89),i(151),i(152),i(90),i(149),i(133),i(132),i(137),i(136),i(135),i(134),i(147),i(148),i(122),i(65),i(61),i(59),i(64),i(63),i(60),i(62),i(140),i(150),i(100),i(106),i(105),i(104),i(108),i(107),i(101),i(102),i(103),i(110),i(111),i(112),i(113),i(109),i(114),i(96),i(121),i(138),i(92),i(120),i(83),i(82),i(81),i(79),i(80),i(93),i(95),i(94),i(91),i(70),i(71),i(72),i(139),i(124),i(123),i(125),i(58),i(129),i(127),i(128),i(130),i(131),i(126),i(86),i(85),i(84),i(88),i(87),i(68),i(69),i(67),i(142),i(144),i(145),i(73),i(146),i(74),i(75),i(76),i(77),i(78),i(143),i(118),i(115),i(117),i(119),i(116),i(17),i(14),t.exports=n},function(t,e){t.exports='\x3c!--\n * coffeescript-ui - Coffeescript User Interface System (CUI)\n * Copyright (c) 2013 - 2016 Programmfabrik GmbH\n * MIT Licence\n * https://github.com/programmfabrik/coffeescript-ui, http://www.coffeescript-ui.org\n--\x3e\n\n<div data-template="data-field"></div>\n'},function(t,e){t.exports='\x3c!--\n * coffeescript-ui - Coffeescript User Interface System (CUI)\n * Copyright (c) 2013 - 2016 Programmfabrik GmbH\n * MIT Licence\n * https://github.com/programmfabrik/coffeescript-ui, http://www.coffeescript-ui.org\n--\x3e\n\n<div data-template="layer-root" class="cui-layer-root"></div>\n<div data-template="layer" class="cui-layer"></div>\n<div data-template="layer-backdrop" class="cui-layer-backdrop"></div>\n<div data-template="layer-pointer" class="cui-layer-pointer"></div>\n\n'},function(t,e){t.exports='\x3c!--\n * coffeescript-ui - Coffeescript User Interface System (CUI)\n * Copyright (c) 2013 - 2016 Programmfabrik GmbH\n * MIT Licence\n * https://github.com/programmfabrik/coffeescript-ui, http://www.coffeescript-ui.org\n--\x3e\n\n<div data-template="block" class="cui-block">\n\t<div class="cui-block-header"></div>\n\t<div class="cui-block-content"></div>\n</div>'},function(t,e){t.exports='\x3c!--\n * coffeescript-ui - Coffeescript User Interface System (CUI)\n * Copyright (c) 2013 - 2016 Programmfabrik GmbH\n * MIT Licence\n * https://github.com/programmfabrik/coffeescript-ui, http://www.coffeescript-ui.org\n--\x3e\n\n<div data-template="border-layout" class="cui-vertical-layout cui-layout" data-cui-absolute-container="column">\n\t<div class="cui-border-layout-north cui-vertical-layout-top"></div>\n\t<div data-cui-flex-handle="pane: .cui-border-layout-north; name: north; direction: column;"  data-cui-absolute-set="top"></div>\n\t<div class="cui-border-layout-main cui-vertical-layout-center" data-cui-absolute-set="top,bottom">\n\t\t<div class="cui-border-layout-row cui-horizontal-layout cui-maximize cui-maximize-vertical cui-maximize-horizontal cui-layout" data-cui-absolute-container="row" >\n\t\t\t<div class="cui-border-layout-west cui-horizontal-layout-left"></div>\n\t\t\t<div data-cui-flex-handle="pane: .cui-border-layout-west; name: west; direction: row;" data-cui-absolute-set="left"></div>\n\t\t\t<div class="cui-border-layout-center cui-horizontal-layout-center" data-cui-absolute-set="left,right"></div>\n\t\t\t<div data-cui-flex-handle="pane: .cui-border-layout-east; name: east; direction: row;" data-cui-absolute-set="right"></div>\n\t\t\t<div class="cui-border-layout-east cui-horizontal-layout-right"></div>\n\t\t</div>\n\t</div>\n\t<div data-cui-flex-handle="pane: .cui-border-layout-south; name: south; direction: column;" data-cui-absolute-set="bottom"></div>\n\t<div class="cui-border-layout-south cui-vertical-layout-bottom" ></div>\n</div>\n'},function(t,e){t.exports='\x3c!--\n * coffeescript-ui - Coffeescript User Interface System (CUI)\n * Copyright (c) 2013 - 2016 Programmfabrik GmbH\n * MIT Licence\n * https://github.com/programmfabrik/coffeescript-ui, http://www.coffeescript-ui.org\n--\x3e\n\n<div data-template="button">\n    <div class="cui-button-left"></div><div class="cui-button-center"></div><div class="cui-button-right"></div>\n</div>\n<div data-template="button-left-center">\n    <div class="cui-button-left"></div><div class="cui-button-center"></div>\n</div>\n<div data-template="button-center-right" class="cui-button-center-right">\n    <div class="cui-button-center"></div><div class="cui-button-right"></div>\n</div>\n<div data-template="button-center" class="cui-button-center">\n    <div class="cui-button-center"></div>\n</div>\n'},function(t,e){t.exports='\x3c!--\n * coffeescript-ui - Coffeescript User Interface System (CUI)\n * Copyright (c) 2013 - 2016 Programmfabrik GmbH\n * MIT Licence\n * https://github.com/programmfabrik/coffeescript-ui, http://www.coffeescript-ui.org\n--\x3e\n\n<a data-template="buttonHref">\n    <div class="cui-button-left"></div>\n    <div class="cui-button-center"></div>\n    <div class="cui-button-right"></div>\n</a>\n'},function(t,e){t.exports='\x3c!--\n * coffeescript-ui - Coffeescript User Interface System (CUI)\n * Copyright (c) 2013 - 2016 Programmfabrik GmbH\n * MIT Licence\n * https://github.com/programmfabrik/coffeescript-ui, http://www.coffeescript-ui.org\n--\x3e\n\n<a data-template="buttonHref-ng">\n\t<div class="cui-button-visual">\n\t\t<div class="cui-button-left"></div>\n\t\t<div class="cui-button-center"></div>\n\t\t<div class="cui-button-right"></div>\n\t</div>\n</a>\n'},function(t,e){t.exports='\x3c!--\n * coffeescript-ui - Coffeescript User Interface System (CUI)\n * Copyright (c) 2013 - 2016 Programmfabrik GmbH\n * MIT Licence\n * https://github.com/programmfabrik/coffeescript-ui, http://www.coffeescript-ui.org\n--\x3e\n\n<div data-template="button-ng">\n\t<div class="cui-button-visual">\n\t\t<div class="cui-button-left"></div><div class="cui-button-center"></div><div class="cui-button-right"></div>\n\t</div>\n</div>\n<div data-template="button-left-center-ng">\n\t<div class="cui-button-visual">\n\t\t<div class="cui-button-left"></div><div class="cui-button-center"></div>\n\t</div>\n</div>\n<div data-template="button-left-ng">\n\t<div class="cui-button-visual">\n\t\t<div class="cui-button-left"></div>\n\t</div>\n</div>\n<div data-template="button-center-right-ng">\n\t<div class="cui-button-visual">\n\t\t<div class="cui-button-center"></div><div class="cui-button-right"></div>\n\t</div>\n</div>\n<div data-template="button-center-ng">\n\t<div class="cui-button-visual">\n\t\t<div class="cui-button-center"></div>\n\t</div>\n</div>\n'},function(t,e){t.exports='\x3c!--\n * coffeescript-ui - Coffeescript User Interface System (CUI)\n * Copyright (c) 2013 - 2016 Programmfabrik GmbH\n * MIT Licence\n * https://github.com/programmfabrik/coffeescript-ui, http://www.coffeescript-ui.org\n--\x3e\n\n<div data-template="buttonbar">\n</div>\n'},function(t,e){t.exports='\x3c!--\n * coffeescript-ui - Coffeescript User Interface System (CUI)\n * Copyright (c) 2013 - 2016 Programmfabrik GmbH\n * MIT Licence\n * https://github.com/programmfabrik/coffeescript-ui, http://www.coffeescript-ui.org\n--\x3e\n\n<div data-template="date-time" class="cui-date-time-popover-inner">\n\t<div class="cui-date-time-header">\n\t\t<div class="cui-date-time-header-left"></div>\n\t\t<div class="cui-date-time-header-center"></div>\n\t\t<div class="cui-date-time-header-right"></div>\n\t</div>\n\t<div class="cui-date-time-browser">\n\t\t<div class="cui-date-time-calendar"></div>\n\t\t<div class="cui-date-time-clock">\n\t\t\t<div class="cui-date-time-analog-clock">\n\t\t\t\t<div class="cui-date-time-face">\n\t\t\t\t\t<div class="cui-date-time-hour"></div>\n\t\t\t\t\t<div class="cui-date-time-minute"></div>\n\t\t\t\t\t<div class="cui-date-time-second"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="cui-date-time-hour-minute"></div>\n\t\t\t<div class="cui-date-time-digi-clock cui-date-time-digi-clock"></div>\n\t\t</div>\n\t</div>\n\t\x3c!--\n\t<table class="cui-date-time-timezone-display-table">\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<div class="cui-date-time-timezone"></div>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<div class="cui-date-time-timezone-display"></div>\n\t\t\t</td>\n\t\t</tr>\n\t</table>--\x3e\n</div>\n<div data-template="date-time-input">\n\t<div class="cui-data-field-center" data-slot="center"></div>\n\t<div class="cui-data-field-right" data-slot="right"></div>\n</div>\n'},function(t,e){t.exports='\x3c!--\n * coffeescript-ui - Coffeescript User Interface System (CUI)\n * Copyright (c) 2013 - 2016 Programmfabrik GmbH\n * MIT Licence\n * https://github.com/programmfabrik/coffeescript-ui, http://www.coffeescript-ui.org\n--\x3e\n\n<label for="cui-file-upload-button" data-template="file-upload-button">\n    <div class="cui-button-left"></div><div class="cui-button-center"></div><div class="cui-button-right"></div>\n</label>\n<label for="cui-file-upload-button" data-template="file-upload-button-ng">\n\t<div class="cui-button-visual">\n\t\t<div class="cui-button-left"></div><div class="cui-button-center"></div><div class="cui-button-right"></div>\n\t</div>\n</label>\n'},function(t,e){t.exports='\x3c!--\n * coffeescript-ui - Coffeescript User Interface System (CUI)\n * Copyright (c) 2013 - 2016 Programmfabrik GmbH\n * MIT Licence\n * https://github.com/programmfabrik/coffeescript-ui, http://www.coffeescript-ui.org\n--\x3e\n\n<div data-template="horizontal-layout" data-cui-absolute-container="row">\n\t<div class="cui-horizontal-layout-left"></div>\n\t<div data-cui-flex-handle="pane: .cui-horizontal-layout-left; name: left; direction: horizontal;" data-cui-absolute-set="left"></div>\n\t<div class="cui-horizontal-layout-center" data-cui-absolute-set="left,right"></div>\n\t<div data-cui-flex-handle="pane: .cui-horizontal-layout-right; name: right; direction: horizontal;" data-cui-absolute-set="right"></div>\n\t<div class="cui-horizontal-layout-right"></div>\n</div>\n<div data-template="horizontal-layout-left-center-right" data-cui-absolute-container="row">\n\t<div class="cui-horizontal-layout-left"></div>\n\t<div class="cui-horizontal-layout-center" data-cui-absolute-set="left,right"></div>\n\t<div class="cui-horizontal-layout-right"></div>\n</div>\n<div data-template="horizontal-layout-center-right" data-cui-absolute-container="row">\n\t<div class="cui-horizontal-layout-center" data-cui-absolute-set="right"></div>\n\t<div class="cui-horizontal-layout-right"></div>\n</div>\n<div data-template="horizontal-layout-left-center" data-cui-absolute-container="row">\n\t<div class="cui-horizontal-layout-left" data-cui-absolute-set="left"></div>\n\t<div class="cui-horizontal-layout-center"></div>\n</div>\n<div data-template="horizontal-layout-center" data-cui-absolute-container="row">\n\t<div class="cui-horizontal-layout-center"></div>\n</div>\n\n\n'},function(t,e){t.exports='\x3c!--\n * coffeescript-ui - Coffeescript User Interface System (CUI)\n * Copyright (c) 2013 - 2016 Programmfabrik GmbH\n * MIT Licence\n * https://github.com/programmfabrik/coffeescript-ui, http://www.coffeescript-ui.org\n--\x3e\n\n<div data-template="item-list-body" class="cui-item-list-body"></div>\n'},function(t,e){t.exports='\x3c!--\n * coffeescript-ui - Coffeescript User Interface System (CUI)\n * Copyright (c) 2013 - 2016 Programmfabrik GmbH\n * MIT Licence\n * https://github.com/programmfabrik/coffeescript-ui, http://www.coffeescript-ui.org\n--\x3e\n\n<div data-template="label" class="cui-label">\n\t<div class="cui-label-icon"></div>\n\t<div class="cui-label-content"></div>\n</div>\n<div data-template="label-no-icon">\n\t<div class="cui-label-content"></div>\n</div>\n<div data-template="label-rotate-90" class="cui-label-rotate-90">\n\t<div class="cui-label-transform">\n\t\t<div class="cui-label-icon"></div>\n\t\t<div class="cui-label-content"></div>\n\t</div>\n</div>'},function(t,e){t.exports='&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'},function(t,e){t.exports='<div data-template="map-input">\n    <div class="cui-data-field-left" data-slot="left"></div>\n    <div class="cui-data-field-center" data-slot="center"></div>\n    <div class="cui-data-field-right" data-slot="right"></div>\n</div>\n\n<div class="cui-icon-marker-container" data-template="map-div-marker">\n    <div data-slot="icon"></div>\n    <div class="cui-icon-marker-arrow" data-slot="arrow"></div>\n</div>'},function(t,e){t.exports='\x3c!--\n * coffeescript-ui - Coffeescript User Interface System (CUI)\n * Copyright (c) 2013 - 2016 Programmfabrik GmbH\n * MIT Licence\n * https://github.com/programmfabrik/coffeescript-ui, http://www.coffeescript-ui.org\n--\x3e\n\n<div data-template="data-field-multi-input">\n\t<div class="cui-data-field-multi-input-center"></div>\n\t<div class="cui-data-field-multi-input-right"></div>\n</div>\n'},function(t,e){t.exports='\x3c!--\n * coffeescript-ui - Coffeescript User Interface System (CUI)\n * Copyright (c) 2013 - 2016 Programmfabrik GmbH\n * MIT Licence\n * https://github.com/programmfabrik/coffeescript-ui, http://www.coffeescript-ui.org\n--\x3e\n\n<div data-template="options-activatable" class="cui-options-activatable">\n\t<div class="cui-options-top"></div>\n\t<div class="cui-options-center">\n\t\t<div class="cui-options-active"></div>\n\t\t<div class="cui-options-inactive"></div>\n\t</div>\n\t<div class="cui-options-bottom"></div>\n</div>\n<div data-template="options" class="cui-options">\n\t<div class="cui-options-top"></div>\n\t<div class="cui-options-center"></div>\n\t<div class="cui-options-bottom"></div>\n</div>\n'},function(t,e){t.exports='\x3c!--\n * coffeescript-ui - Coffeescript User Interface System (CUI)\n * Copyright (c) 2013 - 2016 Programmfabrik GmbH\n * MIT Licence\n * https://github.com/programmfabrik/coffeescript-ui, http://www.coffeescript-ui.org\n--\x3e\n\n<div data-template="pane-fill-screen" class="cui-pane-fill-screen">\n\t<div class="cui-pane-fill-screen">\n\t\t<div class="cui-pane-fill-screen-inner"><div style="background-color: black; height:100%;"></div></div>\n\t</div>\n</div>\n<div data-template="pane-fill-screen-placeholder">Placeholder</div>\n'},function(t,e){t.exports='\x3c!--\n * coffeescript-ui - Coffeescript User Interface System (CUI)\n * Copyright (c) 2013 - 2016 Programmfabrik GmbH\n * MIT Licence\n * https://github.com/programmfabrik/coffeescript-ui, http://www.coffeescript-ui.org\n--\x3e\n\n<div data-template="panel" class="cui-panel">\n\t<div class="cui-panel-header">\n\t</div>\n\t<div class="cui-panel-body">\n\t\t<div class="cui-panel-content"></div>\n\t</div>\n</div>'},function(t,e){t.exports='\x3c!--\n * coffeescript-ui - Coffeescript User Interface System (CUI)\n * Copyright (c) 2013 - 2016 Programmfabrik GmbH\n * MIT Licence\n * https://github.com/programmfabrik/coffeescript-ui, http://www.coffeescript-ui.org\n--\x3e\n\n<div data-template="progress-meter" class="cui-progress-meter">\n\t<div class="cui-progress-meter-bar">\n\t\t<div class="cui-progress-meter-fill-background"></div>\n\t\t<div class="cui-progress-meter-fill">\n\t\t\t<div class="cui-progress-meter-fill-inner"></div>\n\t\t</div>\n\t\t<div class="cui-progress-meter-text"></div>\n\t\t<div class="cui-progress-meter-icon"></div>\n\t</div>\n</div>'},function(t,e){t.exports="<div data-template='slider'>\n\t<div data-slot='track_visual' class='cui-slider-track-visual'></div>\n\t<div data-slot='track' class='cui-slider-track'>\n\t\t<div data-slot='handle' class='cui-slider-handle'></div>\n\t</div>\n</div>\n\n"},function(t,e){t.exports='\x3c!--\n * coffeescript-ui - Coffeescript User Interface System (CUI)\n * Copyright (c) 2013 - 2016 Programmfabrik GmbH\n * MIT Licence\n * https://github.com/programmfabrik/coffeescript-ui, http://www.coffeescript-ui.org\n--\x3e\n\n<div data-template="sticky-header" class="cui-sticky-header">\n\t<div class="cui-sticky-header-center"></div>\n</div>'},function(t,e){t.exports='\x3c!--\n * coffeescript-ui - Coffeescript User Interface System (CUI)\n * Copyright (c) 2013 - 2016 Programmfabrik GmbH\n * MIT Licence\n * https://github.com/programmfabrik/coffeescript-ui, http://www.coffeescript-ui.org\n--\x3e\n\n<div data-template="tab-body" class="cui-tab-body"></div>\n'},function(t,e){t.exports='\x3c!--\n * coffeescript-ui - Coffeescript User Interface System (CUI)\n * Copyright (c) 2013 - 2016 Programmfabrik GmbH\n * MIT Licence\n * https://github.com/programmfabrik/coffeescript-ui, http://www.coffeescript-ui.org\n--\x3e\n\n<div data-template="tabs-bodies" class="cui-tabs-bodies"></div>'},function(t,e){t.exports='\x3c!--\n * coffeescript-ui - Coffeescript User Interface System (CUI)\n * Copyright (c) 2013 - 2016 Programmfabrik GmbH\n * MIT Licence\n * https://github.com/programmfabrik/coffeescript-ui, http://www.coffeescript-ui.org\n--\x3e\n\n<div data-template="vertical-layout" data-cui-absolute-container="column">\n\t<div class="cui-vertical-layout-top"></div>\n\t<div data-cui-flex-handle="pane: .cui-vertical-layout-top; name: top; direction: vertical;" data-cui-absolute-set="top"></div>\n\t<div class="cui-vertical-layout-center" data-cui-absolute-set="top,bottom"></div>\n\t<div data-cui-flex-handle="pane: .cui-vertical-layout-bottom; name: bottom; direction: vertical;" data-cui-absolute-set="bottom"></div>\n\t<div class="cui-vertical-layout-bottom"></div>\n</div>\n<div data-template="vertical-layout-top-center-bottom" data-cui-absolute-container="column">\n\t<div class="cui-vertical-layout-top"></div>\n\t<div class="cui-vertical-layout-center" data-cui-absolute-set="top,bottom"></div>\n\t<div class="cui-vertical-layout-bottom"></div>\n</div>\n<div data-template="vertical-layout-top-center" data-cui-absolute-container="column">\n\t<div class="cui-vertical-layout-top"></div>\n\t<div class="cui-vertical-layout-center" data-cui-absolute-set="top"></div>\n</div>\n<div data-template="vertical-layout-center-bottom" data-cui-absolute-container="column">\n\t<div class="cui-vertical-layout-center" data-cui-absolute-set="bottom"></div>\n\t<div class="cui-vertical-layout-bottom"></div>\n</div>\n<div data-template="vertical-layout-center" data-cui-absolute-container="column">\n\t<div class="cui-vertical-layout-center"></div>\n</div>\n'},function(t,e){t.exports='\x3c!--\n * coffeescript-ui - Coffeescript User Interface System (CUI)\n * Copyright (c) 2013 - 2016 Programmfabrik GmbH\n * MIT Licence\n * https://github.com/programmfabrik/coffeescript-ui, http://www.coffeescript-ui.org\n--\x3e\n\n<div data-template="wait-block" class="cui-wait-block">\n\t<div class="cui-wait-block-glass"></div>\n\t<div class="cui-wait-block-inner">\n\t\t<div class="cui-wait-block-header"></div>\n\t\t<div class="cui-wait-block-content"></div>\n\t</div>\n</div>'},function(t,e,i){/* @preserve
 * Leaflet 1.3.1, a JS library for interactive maps. http://leafletjs.com
 * (c) 2010-2017 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */
!function(t,i){i(e)}(0,function($t){"use strict";function i(t){var e,i,n,o;for(i=1,n=arguments.length;i<n;i++){o=arguments[i];for(e in o)t[e]=o[e]}return t}function e(t,e){var i=Array.prototype.slice;if(t.bind)return t.bind.apply(t,i.call(arguments,1));var n=i.call(arguments,2);return function(){return t.apply(e,n.length?n.concat(i.call(arguments)):arguments)}}function n(t){return t._leaflet_id=t._leaflet_id||++ee,t._leaflet_id}function o(t,e,i){var n,o,r,s;return s=function(){n=!1,o&&(r.apply(i,o),o=!1)},r=function(){n?o=arguments:(t.apply(i,arguments),setTimeout(s,e),n=!0)}}function s(t,e,i){var n=e[1],o=e[0],r=n-o;return t===n&&i?t:((t-o)%r+r)%r+o}function r(){return!1}function a(t,e){var i=Math.pow(10,void 0===e?6:e);return Math.round(t*i)/i}function h(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function u(t){return h(t).split(/\s+/)}function l(t,e){t.hasOwnProperty("options")||(t.options=t.options?te(t.options):{});for(var i in e)t.options[i]=e[i];return t.options}function c(t,e,i){var n=[];for(var o in t)n.push(encodeURIComponent(i?o.toUpperCase():o)+"="+encodeURIComponent(t[o]));return(e&&-1!==e.indexOf("?")?"&":"?")+n.join("&")}function _(t,e){return t.replace(ie,function(t,i){var n=e[i];if(void 0===n)throw new Error("No value provided for variable "+t);return"function"==typeof n&&(n=n(e)),n})}function d(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1}function p(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}function m(t){var e=+new Date,i=Math.max(0,16-(e-re));return re=e+i,window.setTimeout(t,i)}function f(t,i,n){if(!n||se!==m)return se.call(window,e(t,i));t.call(i)}function g(t){t&&ae.call(window,t)}function v(){}function y(t){if("undefined"!=typeof L&&L&&L.Mixin){t=ne(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}function x(t,e,i){this.x=i?Math.round(t):t,this.y=i?Math.round(e):e}function w(t,e,i){return t instanceof x?t:ne(t)?new x(t[0],t[1]):void 0===t||null===t?t:"object"==typeof t&&"x"in t&&"y"in t?new x(t.x,t.y):new x(t,e,i)}function P(t,e){if(t)for(var i=e?[t,e]:t,n=0,o=i.length;n<o;n++)this.extend(i[n])}function b(t,e){return!t||t instanceof P?t:new P(t,e)}function T(t,e){if(t)for(var i=e?[t,e]:t,n=0,o=i.length;n<o;n++)this.extend(i[n])}function z(t,e){return t instanceof T?t:new T(t,e)}function M(t,e,i){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==i&&(this.alt=+i)}function C(t,e,i){return t instanceof M?t:ne(t)&&"object"!=typeof t[0]?3===t.length?new M(t[0],t[1],t[2]):2===t.length?new M(t[0],t[1]):null:void 0===t||null===t?t:"object"==typeof t&&"lat"in t?new M(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new M(t,e,i)}function Z(t,e,i,n){if(ne(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3]);this._a=t,this._b=e,this._c=i,this._d=n}function S(t,e,i,n){return new Z(t,e,i,n)}function E(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function k(t,e){var i,n,o,r,s,a,l="";for(i=0,o=t.length;i<o;i++){for(n=0,r=(s=t[i]).length;n<r;n++)a=s[n],l+=(n?"L":"M")+a.x+" "+a.y;l+=e?Je?"z":"x":""}return l||"M0 0"}function I(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}function A(t,e,i,n){return"touchstart"===e?O(t,i,n):"touchmove"===e?W(t,i,n):"touchend"===e&&H(t,i,n),this}function B(t,e,i){var n=t["_leaflet_"+e+i];return"touchstart"===e?t.removeEventListener(ti,n,!1):"touchmove"===e?t.removeEventListener(ei,n,!1):"touchend"===e&&(t.removeEventListener(ii,n,!1),t.removeEventListener(ni,n,!1)),this}function O(t,i,n){var o=e(function(t){if("mouse"!==t.pointerType&&t.MSPOINTER_TYPE_MOUSE&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE){if(!(oi.indexOf(t.target.tagName)<0))return;$(t)}j(t,i)});t["_leaflet_touchstart"+n]=o,t.addEventListener(ti,o,!1),si||(document.documentElement.addEventListener(ti,R,!0),document.documentElement.addEventListener(ei,D,!0),document.documentElement.addEventListener(ii,N,!0),document.documentElement.addEventListener(ni,N,!0),si=!0)}function R(t){ri[t.pointerId]=t,ai++}function D(t){ri[t.pointerId]&&(ri[t.pointerId]=t)}function N(t){delete ri[t.pointerId],ai--}function j(t,e){t.touches=[];for(var i in ri)t.touches.push(ri[i]);t.changedTouches=[t],e(t)}function W(t,e,i){var n=function(t){(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons)&&j(t,e)};t["_leaflet_touchmove"+i]=n,t.addEventListener(ei,n,!1)}function H(t,e,i){var n=function(t){j(t,e)};t["_leaflet_touchend"+i]=n,t.addEventListener(ii,n,!1),t.addEventListener(ni,n,!1)}function F(t,e,i){function n(t){var e;if(We){if(!xe||"mouse"===t.pointerType)return;e=ai}else e=t.touches.length;if(!(e>1)){var i=Date.now(),n=i-(r||i);s=t.touches?t.touches[0]:t,a=n>0&&n<=l,r=i}}function o(t){if(a&&!s.cancelBubble){if(We){if(!xe||"mouse"===t.pointerType)return;var i,n,o={};for(n in s)i=s[n],o[n]=i&&i.bind?i.bind(s):i;s=o}s.type="dblclick",e(s),r=null}}var r,s,a=!1,l=250;return t[ci+li+i]=n,t[ci+ui+i]=o,t[ci+"dblclick"+i]=e,t.addEventListener(li,n,!1),t.addEventListener(ui,o,!1),t.addEventListener("dblclick",e,!1),this}function U(t,e){var i=t[ci+li+e],n=t[ci+ui+e],o=t[ci+"dblclick"+e];return t.removeEventListener(li,i,!1),t.removeEventListener(ui,n,!1),xe||t.removeEventListener("dblclick",o,!1),this}function V(t,e,i,n){if("object"==typeof e)for(var o in e)G(t,o,e[o],i);else for(var r=0,s=(e=u(e)).length;r<s;r++)G(t,e[r],i,n);return this}function q(t,e,i,n){if("object"==typeof e)for(var o in e)K(t,o,e[o],i);else if(e)for(var r=0,s=(e=u(e)).length;r<s;r++)K(t,e[r],i,n);else{for(var a in t[hi])K(t,a,t[hi][a]);delete t[hi]}return this}function G(t,e,i,o){var r=e+n(i)+(o?"_"+n(o):"");if(t[hi]&&t[hi][r])return this;var s=function(e){return i.call(o||t,e||window.event)},a=s;We&&0===e.indexOf("touch")?A(t,e,s,r):!Ze||"dblclick"!==e||!F||We&&Ie?"addEventListener"in t?"mousewheel"===e?t.addEventListener("onwheel"in t?"wheel":"mousewheel",s,!1):"mouseenter"===e||"mouseleave"===e?(s=function(e){e=e||window.event,ot(t,e)&&a(e)},t.addEventListener("mouseenter"===e?"mouseover":"mouseout",s,!1)):("click"===e&&Ce&&(s=function(t){st(t,a)}),t.addEventListener(e,s,!1)):"attachEvent"in t&&t.attachEvent("on"+e,s):F(t,s,r),t[hi]=t[hi]||{},t[hi][r]=s}function K(t,e,i,o){var r=e+n(i)+(o?"_"+n(o):""),s=t[hi]&&t[hi][r];if(!s)return this;We&&0===e.indexOf("touch")?B(t,e,r):!Ze||"dblclick"!==e||!U||We&&Ie?"removeEventListener"in t?"mousewheel"===e?t.removeEventListener("onwheel"in t?"wheel":"mousewheel",s,!1):t.removeEventListener("mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,s,!1):"detachEvent"in t&&t.detachEvent("on"+e,s):U(t,r),t[hi][r]=null}function Y(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,nt(t),this}function X(t){return G(t,"mousewheel",Y),this}function J(t){return V(t,"mousedown touchstart dblclick",Y),G(t,"click",et),this}function $(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Q(t){return $(t),Y(t),this}function tt(t,e){if(!e)return new x(t.clientX,t.clientY);var i=e.getBoundingClientRect(),n=i.width/e.offsetWidth||1,o=i.height/e.offsetHeight||1;return new x(t.clientX/n-i.left-e.clientLeft,t.clientY/o-i.top-e.clientTop)}function it(t){return xe?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/di:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}function et(t){pi[t.type]=!0}function nt(t){var e=pi[t.type];return pi[t.type]=!1,e}function ot(t,e){var i=e.relatedTarget;if(!i)return!0;try{for(;i&&i!==t;)i=i.parentNode}catch(t){return!1}return i!==t}function st(t,e){var i=t.timeStamp||t.originalEvent&&t.originalEvent.timeStamp,n=fe&&i-fe;n&&n>100&&n<500||t.target._simulatedClick&&!t._simulated?Q(t):(fe=i,e(t))}function rt(t){return"string"==typeof t?document.getElementById(t):t}function at(t,e){var i=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!i||"auto"===i)&&document.defaultView){var n=document.defaultView.getComputedStyle(t,null);i=n?n[e]:null}return"auto"===i?null:i}function ht(t,e,i){var n=document.createElement(t);return n.className=e||"",i&&i.appendChild(n),n}function ut(t){var e=t.parentNode;e&&e.removeChild(t)}function lt(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function ct(t){var e=t.parentNode;e.lastChild!==t&&e.appendChild(t)}function _t(t){var e=t.parentNode;e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function dt(t,e){if(void 0!==t.classList)return t.classList.contains(e);var i=gt(t);return i.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(i)}function pt(t,e){if(void 0!==t.classList)for(var i=u(e),n=0,o=i.length;n<o;n++)t.classList.add(i[n]);else if(!dt(t,e)){var r=gt(t);ft(t,(r?r+" ":"")+e)}}function mt(t,e){void 0!==t.classList?t.classList.remove(e):ft(t,h((" "+gt(t)+" ").replace(" "+e+" "," ")))}function ft(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function gt(t){return void 0===t.className.baseVal?t.className:t.className.baseVal}function vt(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&yt(t,e)}function yt(t,e){var i=!1,n="DXImageTransform.Microsoft.Alpha";try{i=t.filters.item(n)}catch(t){if(1===e)return}e=Math.round(100*e),i?(i.Enabled=100!==e,i.Opacity=e):t.style.filter+=" progid:"+n+"(opacity="+e+")"}function xt(t){for(var e=document.documentElement.style,i=0;i<t.length;i++)if(t[i]in e)return t[i];return!1}function wt(t,e,i){var n=e||new x(0,0);t.style[fi]=(Re?"translate("+n.x+"px,"+n.y+"px)":"translate3d("+n.x+"px,"+n.y+"px,0)")+(i?" scale("+i+")":"")}function Lt(t,e){t._leaflet_pos=e,Ye?wt(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function Pt(t){return t._leaflet_pos||new x(0,0)}function bt(){V(window,"dragstart",$)}function Tt(){q(window,"dragstart",$)}function zt(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(Mt(),vi=t,bi=t.style.outline,t.style.outline="none",V(window,"keydown",Mt))}function Mt(){vi&&(vi.style.outline=bi,vi=void 0,bi=void 0,q(window,"keydown",Mt))}function Ct(t,e){if(!e||!t.length)return t.slice();var i=e*e;return t=kt(t,i),t=St(t,i)}function Zt(t,e,i){return Math.sqrt(Rt(t,e,i,!0))}function St(t,e){var i=t.length,n=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(i);n[0]=n[i-1]=1,Et(t,n,e,0,i-1);var o,r=[];for(o=0;o<i;o++)n[o]&&r.push(t[o]);return r}function Et(t,e,i,n,o){var r,s,a,l=0;for(s=n+1;s<=o-1;s++)(a=Rt(t[s],t[n],t[o],!0))>l&&(r=s,l=a);l>i&&(e[r]=1,Et(t,e,i,n,r),Et(t,e,i,r,o))}function kt(t,e){for(var i=[t[0]],n=1,o=0,r=t.length;n<r;n++)Ot(t[n],t[o])>e&&(i.push(t[n]),o=n);return o<r-1&&i.push(t[r-1]),i}function It(t,e,i,n,o){var r,s,a,l=n?Ii:Bt(t,i),u=Bt(e,i);for(Ii=u;;){if(!(l|u))return[t,e];if(l&u)return!1;a=Bt(s=At(t,e,r=l||u,i,o),i),r===l?(t=s,l=a):(e=s,u=a)}}function At(t,e,i,n,o){var r,s,a=e.x-t.x,l=e.y-t.y,u=n.min,c=n.max;return 8&i?(r=t.x+a*(c.y-t.y)/l,s=c.y):4&i?(r=t.x+a*(u.y-t.y)/l,s=u.y):2&i?(r=c.x,s=t.y+l*(c.x-t.x)/a):1&i&&(r=u.x,s=t.y+l*(u.x-t.x)/a),new x(r,s,o)}function Bt(t,e){var i=0;return t.x<e.min.x?i|=1:t.x>e.max.x&&(i|=2),t.y<e.min.y?i|=4:t.y>e.max.y&&(i|=8),i}function Ot(t,e){var i=e.x-t.x,n=e.y-t.y;return i*i+n*n}function Rt(t,e,i,n){var o,r=e.x,s=e.y,a=i.x-r,l=i.y-s,u=a*a+l*l;return u>0&&((o=((t.x-r)*a+(t.y-s)*l)/u)>1?(r=i.x,s=i.y):o>0&&(r+=a*o,s+=l*o)),a=t.x-r,l=t.y-s,n?a*a+l*l:new x(r,s)}function Dt(t){return!ne(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]}function Nt(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Dt(t)}function jt(t,e,i){var n,o,r,s,a,l,u,c,h,d=[1,4,2,8];for(o=0,u=t.length;o<u;o++)t[o]._code=Bt(t[o],e);for(s=0;s<4;s++){for(c=d[s],n=[],o=0,r=(u=t.length)-1;o<u;r=o++)a=t[o],l=t[r],a._code&c?l._code&c||((h=At(l,a,c,e,i))._code=Bt(h,e),n.push(h)):(l._code&c&&((h=At(l,a,c,e,i))._code=Bt(h,e),n.push(h)),n.push(a));t=n}return t}function Wt(t,e){var i,n,o,r,s="Feature"===t.type?t.geometry:t,a=s?s.coordinates:null,l=[],u=e&&e.pointToLayer,c=e&&e.coordsToLatLng||Ht;if(!a&&!s)return null;switch(s.type){case"Point":return i=c(a),u?u(t,i):new Ji(i);case"MultiPoint":for(o=0,r=a.length;o<r;o++)i=c(a[o]),l.push(u?u(t,i):new Ji(i));return new qi(l);case"LineString":case"MultiLineString":return n=Ft(a,"LineString"===s.type?0:1,c),new en(n,e);case"Polygon":case"MultiPolygon":return n=Ft(a,"Polygon"===s.type?1:2,c),new nn(n,e);case"GeometryCollection":for(o=0,r=s.geometries.length;o<r;o++){var h=Wt({geometry:s.geometries[o],type:"Feature",properties:t.properties},e);h&&l.push(h)}return new qi(l);default:throw new Error("Invalid GeoJSON object.")}}function Ht(t){return new M(t[1],t[0],t[2])}function Ft(t,e,i){for(var n,o=[],r=0,s=t.length;r<s;r++)n=e?Ft(t[r],e-1,i):(i||Ht)(t[r]),o.push(n);return o}function Ut(t,e){return e="number"==typeof e?e:6,void 0!==t.alt?[a(t.lng,e),a(t.lat,e),a(t.alt,e)]:[a(t.lng,e),a(t.lat,e)]}function Vt(t,e,i,n){for(var o=[],r=0,s=t.length;r<s;r++)o.push(e?Vt(t[r],e-1,i,n):Ut(t[r],n));return!e&&i&&o.push(o[0]),o}function qt(t,e){return t.feature?i({},t.feature,{geometry:e}):Gt(e)}function Gt(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}function Kt(t,e){return new on(t,e)}function Yt(t,e){return new _n(t,e)}function Xt(t){return $e?new gn(t):null}function Jt(t){return Je||Xe?new wn(t):null}var Qt=Object.freeze;Object.freeze=function(t){return t};var te=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}(),ee=0,ie=/\{ *([\w_-]+) *\}/g,ne=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},oe="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",re=0,se=window.requestAnimationFrame||p("RequestAnimationFrame")||m,ae=window.cancelAnimationFrame||p("CancelAnimationFrame")||p("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)},le=(Object.freeze||Object)({freeze:Qt,extend:i,create:te,bind:e,lastId:ee,stamp:n,throttle:o,wrapNum:s,falseFn:r,formatNum:a,trim:h,splitWords:u,setOptions:l,getParamString:c,template:_,isArray:ne,indexOf:d,emptyImageUrl:oe,requestFn:se,cancelFn:ae,requestAnimFrame:f,cancelAnimFrame:g});v.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},n=e.__super__=this.prototype,o=te(n);o.constructor=e,e.prototype=o;for(var r in this)this.hasOwnProperty(r)&&"prototype"!==r&&"__super__"!==r&&(e[r]=this[r]);return t.statics&&(i(e,t.statics),delete t.statics),t.includes&&(y(t.includes),i.apply(null,[o].concat(t.includes)),delete t.includes),o.options&&(t.options=i(te(o.options),t.options)),i(o,t),o._initHooks=[],o.callInitHooks=function(){if(!this._initHooksCalled){n.callInitHooks&&n.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=o._initHooks.length;t<e;t++)o._initHooks[t].call(this)}},e},v.include=function(t){return i(this.prototype,t),this},v.mergeOptions=function(t){return i(this.prototype.options,t),this},v.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),i="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i),this};var ue={on:function(t,e,i){if("object"==typeof t)for(var n in t)this._on(n,t[n],e);else for(var o=0,r=(t=u(t)).length;o<r;o++)this._on(t[o],e,i);return this},off:function(t,e,i){if(t)if("object"==typeof t)for(var n in t)this._off(n,t[n],e);else for(var o=0,r=(t=u(t)).length;o<r;o++)this._off(t[o],e,i);else delete this._events;return this},_on:function(t,e,i){this._events=this._events||{};var n=this._events[t];n||(n=[],this._events[t]=n),i===this&&(i=void 0);for(var o={fn:e,ctx:i},r=n,s=0,a=r.length;s<a;s++)if(r[s].fn===e&&r[s].ctx===i)return;r.push(o)},_off:function(t,e,i){var n,o,s;if(this._events&&(n=this._events[t]))if(e){if(i===this&&(i=void 0),n)for(o=0,s=n.length;o<s;o++){var a=n[o];if(a.ctx===i&&a.fn===e)return a.fn=r,this._firingCount&&(this._events[t]=n=n.slice()),void n.splice(o,1)}}else{for(o=0,s=n.length;o<s;o++)n[o].fn=r;delete this._events[t]}},fire:function(t,e,n){if(!this.listens(t,n))return this;var o=i({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var r=this._events[t];if(r){this._firingCount=this._firingCount+1||1;for(var s=0,a=r.length;s<a;s++){var l=r[s];l.fn.call(l.ctx||this,o)}this._firingCount--}}return n&&this._propagateEvent(o),this},listens:function(t,e){var i=this._events&&this._events[t];if(i&&i.length)return!0;if(e)for(var n in this._eventParents)if(this._eventParents[n].listens(t,e))return!0;return!1},once:function(t,i,n){if("object"==typeof t){for(var o in t)this.once(o,t[o],i);return this}var r=e(function(){this.off(t,i,n).off(t,r,n)},this);return this.on(t,i,n).on(t,r,n)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[n(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[n(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,i({layer:t.target,propagatedFrom:t.target},t),!0)}};ue.addEventListener=ue.on,ue.removeEventListener=ue.clearAllEventListeners=ue.off,ue.addOneTimeEventListener=ue.once,ue.fireEvent=ue.fire,ue.hasEventListeners=ue.listens;var ce=v.extend(ue),he=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};x.prototype={clone:function(){return new x(this.x,this.y)},add:function(t){return this.clone()._add(w(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(w(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new x(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new x(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=he(this.x),this.y=he(this.y),this},distanceTo:function(t){var e=(t=w(t)).x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},equals:function(t){return(t=w(t)).x===this.x&&t.y===this.y},contains:function(t){return t=w(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+a(this.x)+", "+a(this.y)+")"}},P.prototype={extend:function(t){return t=w(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new x((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new x(this.min.x,this.max.y)},getTopRight:function(){return new x(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,i;return(t="number"==typeof t[0]||t instanceof x?w(t):b(t))instanceof P?(e=t.min,i=t.max):e=i=t,e.x>=this.min.x&&i.x<=this.max.x&&e.y>=this.min.y&&i.y<=this.max.y},intersects:function(t){t=b(t);var e=this.min,i=this.max,n=t.min,o=t.max,r=o.x>=e.x&&n.x<=i.x,s=o.y>=e.y&&n.y<=i.y;return r&&s},overlaps:function(t){t=b(t);var e=this.min,i=this.max,n=t.min,o=t.max,r=o.x>e.x&&n.x<i.x,s=o.y>e.y&&n.y<i.y;return r&&s},isValid:function(){return!(!this.min||!this.max)}},T.prototype={extend:function(t){var e,i,n=this._southWest,o=this._northEast;if(t instanceof M)e=t,i=t;else{if(!(t instanceof T))return t?this.extend(C(t)||z(t)):this;if(e=t._southWest,i=t._northEast,!e||!i)return this}return n||o?(n.lat=Math.min(e.lat,n.lat),n.lng=Math.min(e.lng,n.lng),o.lat=Math.max(i.lat,o.lat),o.lng=Math.max(i.lng,o.lng)):(this._southWest=new M(e.lat,e.lng),this._northEast=new M(i.lat,i.lng)),this},pad:function(t){var e=this._southWest,i=this._northEast,n=Math.abs(e.lat-i.lat)*t,o=Math.abs(e.lng-i.lng)*t;return new T(new M(e.lat-n,e.lng-o),new M(i.lat+n,i.lng+o))},getCenter:function(){return new M((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new M(this.getNorth(),this.getWest())},getSouthEast:function(){return new M(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof M||"lat"in t?C(t):z(t);var e,i,n=this._southWest,o=this._northEast;return t instanceof T?(e=t.getSouthWest(),i=t.getNorthEast()):e=i=t,e.lat>=n.lat&&i.lat<=o.lat&&e.lng>=n.lng&&i.lng<=o.lng},intersects:function(t){t=z(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),o=t.getNorthEast(),r=o.lat>=e.lat&&n.lat<=i.lat,s=o.lng>=e.lng&&n.lng<=i.lng;return r&&s},overlaps:function(t){t=z(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),o=t.getNorthEast(),r=o.lat>e.lat&&n.lat<i.lat,s=o.lng>e.lng&&n.lng<i.lng;return r&&s},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=z(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}},M.prototype={equals:function(t,e){return!!t&&(t=C(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+a(this.lat,t)+", "+a(this.lng,t)+")"},distanceTo:function(t){return pe.distance(this,C(t))},wrap:function(){return pe.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,i=e/Math.cos(Math.PI/180*this.lat);return z([this.lat-e,this.lng-i],[this.lat+e,this.lng+i])},clone:function(){return new M(this.lat,this.lng,this.alt)}};var de={latLngToPoint:function(t,e){var i=this.projection.project(t),n=this.scale(e);return this.transformation._transform(i,n)},pointToLatLng:function(t,e){var i=this.scale(e),n=this.transformation.untransform(t,i);return this.projection.unproject(n)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,i=this.scale(t);return new P(this.transformation.transform(e.min,i),this.transformation.transform(e.max,i))},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?s(t.lng,this.wrapLng,!0):t.lng;return new M(this.wrapLat?s(t.lat,this.wrapLat,!0):t.lat,e,t.alt)},wrapLatLngBounds:function(t){var e=t.getCenter(),i=this.wrapLatLng(e),n=e.lat-i.lat,o=e.lng-i.lng;if(0===n&&0===o)return t;var r=t.getSouthWest(),s=t.getNorthEast();return new T(new M(r.lat-n,r.lng-o),new M(s.lat-n,s.lng-o))}},pe=i({},de,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var i=Math.PI/180,n=t.lat*i,o=e.lat*i,r=Math.sin((e.lat-t.lat)*i/2),s=Math.sin((e.lng-t.lng)*i/2),a=r*r+Math.cos(n)*Math.cos(o)*s*s,l=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));return this.R*l}}),_e={R:6378137,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,i=this.MAX_LATITUDE,n=Math.max(Math.min(i,t.lat),-i),o=Math.sin(n*e);return new x(this.R*t.lng*e,this.R*Math.log((1+o)/(1-o))/2)},unproject:function(t){var e=180/Math.PI;return new M((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:function(){var t=6378137*Math.PI;return new P([-t,-t],[t,t])}()};Z.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new x((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};var fe,me,ge,ye,ve=i({},pe,{code:"EPSG:3857",projection:_e,transformation:function(){var t=.5/(Math.PI*_e.R);return S(t,.5,-t,.5)}()}),be=i({},ve,{code:"EPSG:900913"}),we=document.documentElement.style,ke="ActiveXObject"in window,De=ke&&!document.addEventListener,xe="msLaunchUri"in navigator&&!("documentMode"in document),Me=I("webkit"),Ce=I("android"),Oe=I("android 2")||I("android 3"),Te=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Le=Ce&&I("Google")&&Te<537&&!("AudioNode"in window),Se=!!window.opera,Ie=I("chrome"),Pe=I("gecko")&&!Me&&!Se&&!ke,Fe=!Ie&&I("safari"),Ee=I("phantom"),Be="OTransition"in we,Ve=0===navigator.platform.indexOf("Win"),Re=ke&&"transition"in we,ze="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Oe,Ae="MozPerspective"in we,Ye=!window.L_DISABLE_3D&&(Re||ze||Ae)&&!Be&&!Ee,He="undefined"!=typeof orientation||I("mobile"),Ne=He&&Me,Ue=He&&ze,je=!window.PointerEvent&&window.MSPointerEvent,We=!(!window.PointerEvent&&!je),Ze=!window.L_NO_TOUCH&&(We||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),qe=He&&Se,Ge=He&&Pe,Ke=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,$e=!!document.createElement("canvas").getContext,Je=!(!document.createElementNS||!E("svg").createSVGRect),Xe=!Je&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(t){return!1}}(),Qe=(Object.freeze||Object)({ie:ke,ielt9:De,edge:xe,webkit:Me,android:Ce,android23:Oe,androidStock:Le,opera:Se,chrome:Ie,gecko:Pe,safari:Fe,phantom:Ee,opera12:Be,win:Ve,ie3d:Re,webkit3d:ze,gecko3d:Ae,any3d:Ye,mobile:He,mobileWebkit:Ne,mobileWebkit3d:Ue,msPointer:je,pointer:We,touch:Ze,mobileOpera:qe,mobileGecko:Ge,retina:Ke,canvas:$e,svg:Je,vml:Xe}),ti=je?"MSPointerDown":"pointerdown",ei=je?"MSPointerMove":"pointermove",ii=je?"MSPointerUp":"pointerup",ni=je?"MSPointerCancel":"pointercancel",oi=["INPUT","SELECT","OPTION"],ri={},si=!1,ai=0,li=je?"MSPointerDown":We?"pointerdown":"touchstart",ui=je?"MSPointerUp":We?"pointerup":"touchend",ci="_leaflet_",hi="_leaflet_events",di=Ve&&Ie?2*window.devicePixelRatio:Pe?window.devicePixelRatio:1,pi={},_i=(Object.freeze||Object)({on:V,off:q,stopPropagation:Y,disableScrollPropagation:X,disableClickPropagation:J,preventDefault:$,stop:Q,getMousePosition:tt,getWheelDelta:it,fakeStop:et,skipped:nt,isExternalTarget:ot,addListener:V,removeListener:q}),fi=xt(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),mi=xt(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),gi="webkitTransition"===mi||"OTransition"===mi?mi+"End":"transitionend";if("onselectstart"in document)me=function(){V(window,"selectstart",$)},ge=function(){q(window,"selectstart",$)};else{var yi=xt(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);me=function(){if(yi){var t=document.documentElement.style;ye=t[yi],t[yi]="none"}},ge=function(){yi&&(document.documentElement.style[yi]=ye,ye=void 0)}}var vi,bi,wi=(Object.freeze||Object)({TRANSFORM:fi,TRANSITION:mi,TRANSITION_END:gi,get:rt,getStyle:at,create:ht,remove:ut,empty:lt,toFront:ct,toBack:_t,hasClass:dt,addClass:pt,removeClass:mt,setClass:ft,getClass:gt,setOpacity:vt,testProp:xt,setTransform:wt,setPosition:Lt,getPosition:Pt,disableTextSelection:me,enableTextSelection:ge,disableImageDrag:bt,enableImageDrag:Tt,preventOutline:zt,restoreOutline:Mt}),ki=ce.extend({run:function(t,e,i,n){this.stop(),this._el=t,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(n||.5,.2),this._startPos=Pt(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=f(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,i=1e3*this._duration;e<i?this._runFrame(this._easeOut(e/i),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var i=this._startPos.add(this._offset.multiplyBy(t));e&&i._round(),Lt(this._el,i),this.fire("step")},_complete:function(){g(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Di=ce.extend({options:{crs:ve,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,i){i=l(this,i),this._initContainer(t),this._initLayout(),this._onResize=e(this._onResize,this),this._initEvents(),i.maxBounds&&this.setMaxBounds(i.maxBounds),void 0!==i.zoom&&(this._zoom=this._limitZoom(i.zoom)),i.center&&void 0!==i.zoom&&this.setView(C(i.center),i.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this.callInitHooks(),this._zoomAnimated=mi&&Ye&&!qe&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),V(this._proxy,gi,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,n){return e=void 0===e?this._zoom:this._limitZoom(e),t=this._limitCenter(C(t),e,this.options.maxBounds),n=n||{},this._stop(),this._loaded&&!n.reset&&!0!==n&&(void 0!==n.animate&&(n.zoom=i({animate:n.animate},n.zoom),n.pan=i({animate:n.animate,duration:n.duration},n.pan)),this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,n.zoom):this._tryAnimatedPan(t,n.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(t,e),this)},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(Ye?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(Ye?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,i){var n=this.getZoomScale(e),o=this.getSize().divideBy(2),r=(t instanceof x?t:this.latLngToContainerPoint(t)).subtract(o).multiplyBy(1-1/n),s=this.containerPointToLatLng(o.add(r));return this.setView(s,e,{zoom:i})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():z(t);var i=w(e.paddingTopLeft||e.padding||[0,0]),n=w(e.paddingBottomRight||e.padding||[0,0]),o=this.getBoundsZoom(t,!1,i.add(n));if((o="number"==typeof e.maxZoom?Math.min(e.maxZoom,o):o)===1/0)return{center:t.getCenter(),zoom:o};var r=n.subtract(i).divideBy(2),s=this.project(t.getSouthWest(),o),a=this.project(t.getNorthEast(),o);return{center:this.unproject(s.add(a).divideBy(2).add(r),o),zoom:o}},fitBounds:function(t,e){if(!(t=z(t)).isValid())throw new Error("Bounds are not valid.");var i=this._getBoundsCenterZoom(t,e);return this.setView(i.center,i.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(t=w(t).round(),e=e||{},!t.x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ki,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){pt(this._mapPane,"leaflet-pan-anim");var i=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,i,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,i){function n(t){var e=(g*g-m*m+(t?-1:1)*b*b*y*y)/(2*(t?g:m)*b*y),i=Math.sqrt(e*e+1)-e;return i<1e-9?-18:Math.log(i)}function o(t){return(Math.exp(t)-Math.exp(-t))/2}function s(t){return(Math.exp(t)+Math.exp(-t))/2}function r(t){return o(t)/s(t)}function a(t){return m*(s(w)/s(w+v*t))}function h(t){return m*(s(w)*r(w+v*t)-o(w))/b}function u(t){return 1-Math.pow(1-t,1.5)}function l(){var i=(Date.now()-k)/x,n=u(i)*D;i<=1?(this._flyToFrame=f(l,this),this._move(this.unproject(c.add(d.subtract(c).multiplyBy(h(n)/y)),_),this.getScaleZoom(m/a(n),_),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}if(!1===(i=i||{}).animate||!Ye)return this.setView(t,e,i);this._stop();var c=this.project(this.getCenter()),d=this.project(t),p=this.getSize(),_=this._zoom;t=C(t),e=void 0===e?_:e;var m=Math.max(p.x,p.y),g=m*this.getZoomScale(_,e),y=d.distanceTo(c)||1,v=1.42,b=v*v,w=n(0),k=Date.now(),D=(n(1)-w)/v,x=i.duration?1e3*i.duration:1e3*D*.8;return this._moveStart(!0,i.noMoveStart),l.call(this),this},flyToBounds:function(t,e){var i=this._getBoundsCenterZoom(t,e);return this.flyTo(i.center,i.zoom,e)},setMaxBounds:function(t){return(t=z(t)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var i=this.getCenter(),n=this._limitCenter(i,this._zoom,z(t));return i.equals(n)||this.panTo(n,e),this._enforcingBounds=!1,this},invalidateSize:function(t){if(!this._loaded)return this;t=i({animate:!1,pan:!0},!0===t?{animate:!0}:t);var n=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var o=this.getSize(),r=n.divideBy(2).round(),s=o.divideBy(2).round(),a=r.subtract(s);return a.x||a.y?(t.animate&&t.pan?this.panBy(a):(t.pan&&this._rawPanBy(a),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(e(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:n,newSize:o})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=i({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var n=e(this._handleGeolocationResponse,this),o=e(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(n,o,t):navigator.geolocation.getCurrentPosition(n,o,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,i=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+i+"."})},_handleGeolocationResponse:function(t){var e=new M(t.coords.latitude,t.coords.longitude),i=e.toBounds(t.coords.accuracy),n=this._locateOptions;if(n.setView){var o=this.getBoundsZoom(i);this.setView(e,n.maxZoom?Math.min(o,n.maxZoom):o)}var r={latlng:e,bounds:i,timestamp:t.timestamp};for(var s in t.coords)"number"==typeof t.coords[s]&&(r[s]=t.coords[s]);this.fire("locationfound",r)},addHandler:function(t,e){if(!e)return this;var i=this[t]=new e(this);return this._handlers.push(i),this.options[t]&&i.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),ut(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)ut(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var i=ht("div","leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),e||this._mapPane);return t&&(this._panes[t]=i),i},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds();return new T(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,i){t=z(t),i=w(i||[0,0]);var n=this.getZoom()||0,o=this.getMinZoom(),r=this.getMaxZoom(),s=t.getNorthWest(),a=t.getSouthEast(),l=this.getSize().subtract(i),u=b(this.project(a,n),this.project(s,n)).getSize(),c=Ye?this.options.zoomSnap:1,h=l.x/u.x,d=l.y/u.y,p=e?Math.max(h,d):Math.min(h,d);return n=this.getScaleZoom(p,n),c&&(n=Math.round(n/(c/100))*(c/100),n=e?Math.ceil(n/c)*c:Math.floor(n/c)*c),Math.max(o,Math.min(r,n))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new x(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var i=this._getTopLeftPoint(t,e);return new P(i,i.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var i=this.options.crs;return e=void 0===e?this._zoom:e,i.scale(t)/i.scale(e)},getScaleZoom:function(t,e){var i=this.options.crs;e=void 0===e?this._zoom:e;var n=i.zoom(t*i.scale(e));return isNaN(n)?1/0:n},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(C(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(w(t),e)},layerPointToLatLng:function(t){var e=w(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(C(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(C(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(z(t))},distance:function(t,e){return this.options.crs.distance(C(t),C(e))},containerPointToLayerPoint:function(t){return w(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return w(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(w(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(C(t)))},mouseEventToContainerPoint:function(t){return tt(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=rt(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");V(e,"scroll",this._onScroll,this),this._containerId=n(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ye,pt(t,"leaflet-container"+(Ze?" leaflet-touch":"")+(Ke?" leaflet-retina":"")+(De?" leaflet-oldie":"")+(Fe?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=at(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Lt(this._mapPane,new x(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(pt(t.markerPane,"leaflet-zoom-hide"),pt(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){Lt(this._mapPane,new x(0,0));var i=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var n=this._zoom!==e;this._moveStart(n,!1)._move(t,e)._moveEnd(n),this.fire("viewreset"),i&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,i){void 0===e&&(e=this._zoom);var n=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(n||i&&i.pinch)&&this.fire("zoom",i),this.fire("move",i)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return g(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){Lt(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[n(this._container)]=this;var e=t?q:V;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),Ye&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){g(this._resizeRequest),this._resizeRequest=f(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var i,o=[],r="mouseout"===e||"mouseover"===e,s=t.target||t.srcElement,a=!1;s;){if((i=this._targets[n(s)])&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(i)){a=!0;break}if(i&&i.listens(e,!0)){if(r&&!ot(s,t))break;if(o.push(i),r)break}if(s===this._container)break;s=s.parentNode}return o.length||a||r||!ot(s,t)||(o=[this]),o},_handleDOMEvent:function(t){if(this._loaded&&!nt(t)){var e=t.type;"mousedown"!==e&&"keypress"!==e||zt(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,n){if("click"===t.type){var o=i({},t);o.type="preclick",this._fireDOMEvent(o,o.type,n)}if(!t._stopped&&(n=(n||[]).concat(this._findEventTargets(t,e))).length){var r=n[0];"contextmenu"===e&&r.listens(e,!0)&&$(t);var s={originalEvent:t};if("keypress"!==t.type){var a=r.getLatLng&&(!r._radius||r._radius<=10);s.containerPoint=a?this.latLngToContainerPoint(r.getLatLng()):this.mouseEventToContainerPoint(t),s.layerPoint=this.containerPointToLayerPoint(s.containerPoint),s.latlng=a?r.getLatLng():this.layerPointToLatLng(s.layerPoint)}for(var l=0;l<n.length;l++)if(n[l].fire(e,s,!0),s.originalEvent._stopped||!1===n[l].options.bubblingMouseEvents&&-1!==d(this._mouseEvents,e))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return Pt(this._mapPane)||new x(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var i=this.getSize()._divideBy(2);return this.project(t,e)._subtract(i)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,i){var n=this._getNewPixelOrigin(i,e);return this.project(t,e)._subtract(n)},_latLngBoundsToNewLayerBounds:function(t,e,i){var n=this._getNewPixelOrigin(i,e);return b([this.project(t.getSouthWest(),e)._subtract(n),this.project(t.getNorthWest(),e)._subtract(n),this.project(t.getSouthEast(),e)._subtract(n),this.project(t.getNorthEast(),e)._subtract(n)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,i){if(!i)return t;var n=this.project(t,e),o=this.getSize().divideBy(2),r=new P(n.subtract(o),n.add(o)),s=this._getBoundsOffset(r,i,e);return s.round().equals([0,0])?t:this.unproject(n.add(s),e)},_limitOffset:function(t,e){if(!e)return t;var i=this.getPixelBounds(),n=new P(i.min.add(t),i.max.add(t));return t.add(this._getBoundsOffset(n,e))},_getBoundsOffset:function(t,e,i){var n=b(this.project(e.getNorthEast(),i),this.project(e.getSouthWest(),i)),o=n.min.subtract(t.min),r=n.max.subtract(t.max);return new x(this._rebound(o.x,-r.x),this._rebound(o.y,-r.y))},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),i=this.getMaxZoom(),n=Ye?this.options.zoomSnap:1;return n&&(t=Math.round(t/n)*n),Math.max(e,Math.min(i,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){mt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var i=this._getCenterOffset(t)._trunc();return!(!0!==(e&&e.animate)&&!this.getSize().contains(i)||(this.panBy(i,e),0))},_createAnimProxy:function(){var t=this._proxy=ht("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(t){var e=fi,i=this._proxy.style[e];wt(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),i===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",function(){var t=this.getCenter(),e=this.getZoom();wt(this._proxy,this.project(t,e),this.getZoomScale(e,1))},this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ut(this._proxy),delete this._proxy},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,i){if(this._animatingZoom)return!0;if(i=i||{},!this._zoomAnimated||!1===i.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var n=this.getZoomScale(e),o=this._getCenterOffset(t)._divideBy(1-1/n);return!(!0!==i.animate&&!this.getSize().contains(o)||(f(function(){this._moveStart(!0,!1)._animateZoom(t,e,!0)},this),0))},_animateZoom:function(t,i,n,o){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=i,pt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:i,noUpdate:o}),setTimeout(e(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&mt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),f(function(){this._moveEnd(!0)},this))}}),xi=v.extend({options:{position:"topright"},initialize:function(t){l(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),i=this.getPosition(),n=t._controlCorners[i];return pt(e,"leaflet-control"),-1!==i.indexOf("bottom")?n.insertBefore(e,n.firstChild):n.appendChild(e),this},remove:function(){return this._map?(ut(this._container),this.onRemove&&this.onRemove(this._map),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Mi=function(t){return new xi(t)};Di.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){function t(t,o){var r=i+t+" "+i+o;e[t+o]=ht("div",r,n)}var e=this._controlCorners={},i="leaflet-",n=this._controlContainer=ht("div",i+"control-container",this._container);t("top","left"),t("top","right"),t("bottom","left"),t("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)ut(this._controlCorners[t]);ut(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ci=xi.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,i,n){return i<n?-1:n<i?1:0}},initialize:function(t,e,i){l(this,i),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var n in t)this._addLayer(t[n],n);for(n in e)this._addLayer(e[n],n,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return xi.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(n(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){pt(this._container,"leaflet-control-layers-expanded"),this._form.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._form.clientHeight?(pt(this._form,"leaflet-control-layers-scrollbar"),this._form.style.height=t+"px"):mt(this._form,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return mt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=ht("div",t),i=this.options.collapsed;e.setAttribute("aria-haspopup",!0),J(e),X(e);var n=this._form=ht("form",t+"-list");i&&(this._map.on("click",this.collapse,this),Ce||V(e,{mouseenter:this.expand,mouseleave:this.collapse},this));var o=this._layersLink=ht("a",t+"-toggle",e);o.href="#",o.title="Layers",Ze?(V(o,"click",Q),V(o,"click",this.expand,this)):V(o,"focus",this.expand,this),i||this.expand(),this._baseLayersList=ht("div",t+"-base",n),this._separator=ht("div",t+"-separator",n),this._overlaysList=ht("div",t+"-overlays",n),e.appendChild(n)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&n(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,i,n){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:i,overlay:n}),this.options.sortLayers&&this._layers.sort(e(function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;lt(this._baseLayersList),lt(this._overlaysList),this._layerControlInputs=[];var t,e,i,n,o=0;for(i=0;i<this._layers.length;i++)n=this._layers[i],this._addItem(n),e=e||n.overlay,t=t||!n.overlay,o+=n.overlay?0:1;return this.options.hideSingleBase&&(t=t&&o>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(n(t.target)),i=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;i&&this._map.fire(i,e)},_createRadioElement:function(t,e){var i='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",n=document.createElement("div");return n.innerHTML=i,n.firstChild},_addItem:function(t){var e,i=document.createElement("label"),o=this._map.hasLayer(t.layer);t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=o):e=this._createRadioElement("leaflet-base-layers",o),this._layerControlInputs.push(e),e.layerId=n(t.layer),V(e,"click",this._onInputClick,this);var r=document.createElement("span");r.innerHTML=" "+t.name;var s=document.createElement("div");return i.appendChild(s),s.appendChild(e),s.appendChild(r),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(i),this._checkDisabledLayers(),i},_onInputClick:function(){var t,e,i=this._layerControlInputs,n=[],o=[];this._handlingClick=!0;for(var r=i.length-1;r>=0;r--)t=i[r],e=this._getLayer(t.layerId).layer,t.checked?n.push(e):t.checked||o.push(e);for(r=0;r<o.length;r++)this._map.hasLayer(o[r])&&this._map.removeLayer(o[r]);for(r=0;r<n.length;r++)this._map.hasLayer(n[r])||this._map.addLayer(n[r]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,i=this._layerControlInputs,n=this._map.getZoom(),o=i.length-1;o>=0;o--)t=i[o],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&n<e.options.minZoom||void 0!==e.options.maxZoom&&n>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),Oi=xi.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",i=ht("div",e+" leaflet-bar"),n=this.options;return this._zoomInButton=this._createButton(n.zoomInText,n.zoomInTitle,e+"-in",i,this._zoomIn),this._zoomOutButton=this._createButton(n.zoomOutText,n.zoomOutTitle,e+"-out",i,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),i},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,i,n,o){var r=ht("a",i,n);return r.innerHTML=t,r.href="#",r.title=e,r.setAttribute("role","button"),r.setAttribute("aria-label",e),J(r),V(r,"click",Q),V(r,"click",o,this),V(r,"click",this._refocusOnMap,this),r},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";mt(this._zoomInButton,e),mt(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMinZoom())&&pt(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMaxZoom())&&pt(this._zoomInButton,e)}});Di.mergeOptions({zoomControl:!0}),Di.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Oi,this.addControl(this.zoomControl))});var Ti=xi.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e=ht("div","leaflet-control-scale"),i=this.options;return this._addScales(i,"leaflet-control-scale-line",e),t.on(i.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),e},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,i){t.metric&&(this._mScale=ht("div",e,i)),t.imperial&&(this._iScale=ht("div",e,i))},_update:function(){var t=this._map,e=t.getSize().y/2,i=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(i)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),i=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,i,e/t)},_updateImperial:function(t){var e,i,n,o=3.2808399*t;o>5280?(e=o/5280,i=this._getRoundNum(e),this._updateScale(this._iScale,i+" mi",i/e)):(n=this._getRoundNum(o),this._updateScale(this._iScale,n+" ft",n/o))},_updateScale:function(t,e,i){t.style.width=Math.round(this.options.maxWidth*i)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),i=t/e;return i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:1,e*i}}),Li=xi.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){l(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=ht("div","leaflet-control-attribution"),J(this._container);for(var e in t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var i=[];this.options.prefix&&i.push(this.options.prefix),t.length&&i.push(t.join(", ")),this._container.innerHTML=i.join(" | ")}}});Di.mergeOptions({attributionControl:!0}),Di.addInitHook(function(){this.options.attributionControl&&(new Li).addTo(this)}),xi.Layers=Ci,xi.Zoom=Oi,xi.Scale=Ti,xi.Attribution=Li,Mi.layers=function(t,e,i){return new Ci(t,e,i)},Mi.zoom=function(t){return new Oi(t)},Mi.scale=function(t){return new Ti(t)},Mi.attribution=function(t){return new Li(t)};var Si=v.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Si.addTo=function(t,e){return t.addHandler(e,this),this};var Ii,Pi={Events:ue},Fi=Ze?"touchstart mousedown":"mousedown",Ei={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},Bi={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},Vi=ce.extend({options:{clickTolerance:3},initialize:function(t,e,i,n){l(this,n),this._element=t,this._dragStartTarget=e||t,this._preventOutline=i},enable:function(){this._enabled||(V(this._dragStartTarget,Fi,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Vi._dragging===this&&this.finishDrag(),q(this._dragStartTarget,Fi,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!dt(this._element,"leaflet-zoom-anim")&&!(Vi._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(Vi._dragging=this,this._preventOutline&&zt(this._element),bt(),me(),this._moving)))){this.fire("down");var e=t.touches?t.touches[0]:t;this._startPoint=new x(e.clientX,e.clientY),V(document,Bi[t.type],this._onMove,this),V(document,Ei[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled)if(t.touches&&t.touches.length>1)this._moved=!0;else{var e=t.touches&&1===t.touches.length?t.touches[0]:t,i=new x(e.clientX,e.clientY).subtract(this._startPoint);(i.x||i.y)&&(Math.abs(i.x)+Math.abs(i.y)<this.options.clickTolerance||($(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=Pt(this._element).subtract(i),pt(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),pt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(i),this._moving=!0,g(this._animRequest),this._lastEvent=t,this._animRequest=f(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),Lt(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){mt(document.body,"leaflet-dragging"),this._lastTarget&&(mt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var t in Bi)q(document,Bi[t],this._onMove,this),q(document,Ei[t],this._onUp,this);Tt(),ge(),this._moved&&this._moving&&(g(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,Vi._dragging=!1}}),Ri=(Object.freeze||Object)({simplify:Ct,pointToSegmentDistance:Zt,closestPointOnSegment:function(t,e,i){return Rt(t,e,i)},clipSegment:It,_getEdgeIntersection:At,_getBitCode:Bt,_sqClosestPointOnSegment:Rt,isFlat:Dt,_flat:Nt}),zi=(Object.freeze||Object)({clipPolygon:jt}),Ai={project:function(t){return new x(t.lng,t.lat)},unproject:function(t){return new M(t.y,t.x)},bounds:new P([-180,-90],[180,90])},Yi={R:6378137,R_MINOR:6356752.314245179,bounds:new P([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,i=this.R,n=t.lat*e,o=this.R_MINOR/i,r=Math.sqrt(1-o*o),s=r*Math.sin(n),a=Math.tan(Math.PI/4-n/2)/Math.pow((1-s)/(1+s),r/2);return n=-i*Math.log(Math.max(a,1e-10)),new x(t.lng*e*i,n)},unproject:function(t){for(var e,i=180/Math.PI,n=this.R,o=this.R_MINOR/n,r=Math.sqrt(1-o*o),s=Math.exp(-t.y/n),a=Math.PI/2-2*Math.atan(s),l=0,u=.1;l<15&&Math.abs(u)>1e-7;l++)e=r*Math.sin(a),e=Math.pow((1-e)/(1+e),r/2),a+=u=Math.PI/2-2*Math.atan(s*e)-a;return new M(a*i,t.x*i/n)}},Hi=(Object.freeze||Object)({LonLat:Ai,Mercator:Yi,SphericalMercator:_e}),Ni=i({},pe,{code:"EPSG:3395",projection:Yi,transformation:function(){var t=.5/(Math.PI*Yi.R);return S(t,.5,-t,.5)}()}),Ui=i({},pe,{code:"EPSG:4326",projection:Ai,transformation:S(1/180,1,-1/180,.5)}),ji=i({},de,{projection:Ai,transformation:S(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var i=e.lng-t.lng,n=e.lat-t.lat;return Math.sqrt(i*i+n*n)},infinite:!0});de.Earth=pe,de.EPSG3395=Ni,de.EPSG3857=ve,de.EPSG900913=be,de.EPSG4326=Ui,de.Simple=ji;var Wi=ce.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[n(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[n(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var i=this.getEvents();e.on(i,this),this.once("remove",function(){e.off(i,this)},this)}this.onAdd(e),this.getAttribution&&e.attributionControl&&e.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}});Di.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=n(t);return this._layers[e]?this:(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var e=n(t);return this._layers[e]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return!!t&&n(t)in this._layers},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},_addLayers:function(t){for(var e=0,i=(t=t?ne(t)?t:[t]:[]).length;e<i;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[n(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=n(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,i=this._getZoomSpan();for(var n in this._zoomBoundLayers){var o=this._zoomBoundLayers[n].options;t=void 0===o.minZoom?t:Math.min(t,o.minZoom),e=void 0===o.maxZoom?e:Math.max(e,o.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,i!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Zi=Wi.extend({initialize:function(t,e){l(this,e),this._layers={};var i,n;if(t)for(i=0,n=t.length;i<n;i++)this.addLayer(t[i])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,i,n=Array.prototype.slice.call(arguments,1);for(e in this._layers)(i=this._layers[e])[t]&&i[t].apply(i,n);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return n(t)}}),qi=Zi.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Zi.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Zi.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new T;for(var e in this._layers){var i=this._layers[e];t.extend(i.getBounds?i.getBounds():i.getLatLng())}return t}}),Gi=v.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(t){l(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var i=this._getIconUrl(t);if(!i){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var n=this._createImg(i,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(n,t),n},_setIconStyles:function(t,e){var i=this.options,n=i[e+"Size"];"number"==typeof n&&(n=[n,n]);var o=w(n),r=w("shadow"===e&&i.shadowAnchor||i.iconAnchor||o&&o.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(i.className||""),r&&(t.style.marginLeft=-r.x+"px",t.style.marginTop=-r.y+"px"),o&&(t.style.width=o.x+"px",t.style.height=o.y+"px")},_createImg:function(t,e){return e=e||document.createElement("img"),e.src=t,e},_getIconUrl:function(t){return Ke&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}}),Ki=Gi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return Ki.imagePath||(Ki.imagePath=this._detectIconPath()),(this.options.imagePath||Ki.imagePath)+Gi.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=ht("div","leaflet-default-icon-path",document.body),e=at(t,"background-image")||at(t,"backgroundImage");return document.body.removeChild(t),e=null===e||0!==e.indexOf("url")?"":e.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),$i=Si.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new Vi(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),pt(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&mt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,i=e._map,n=this._marker.options.autoPanSpeed,o=this._marker.options.autoPanPadding,r=L.DomUtil.getPosition(e._icon),s=i.getPixelBounds(),a=i.getPixelOrigin(),l=b(s.min._subtract(a).add(o),s.max._subtract(a).subtract(o));if(!l.contains(r)){var u=w((Math.max(l.max.x,r.x)-l.max.x)/(s.max.x-l.max.x)-(Math.min(l.min.x,r.x)-l.min.x)/(s.min.x-l.min.x),(Math.max(l.max.y,r.y)-l.max.y)/(s.max.y-l.max.y)-(Math.min(l.min.y,r.y)-l.min.y)/(s.min.y-l.min.y)).multiplyBy(n);i.panBy(u,{animate:!1}),this._draggable._newPos._add(u),this._draggable._startPos._add(u),L.DomUtil.setPosition(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=f(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(g(this._panRequest),this._panRequest=f(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,i=e._shadow,n=Pt(e._icon),o=e._map.layerPointToLatLng(n);i&&Lt(i,n),e._latlng=o,t.latlng=o,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){g(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Ji=Wi.extend({options:{icon:new Ki,interactive:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",bubblingMouseEvents:!1},initialize:function(t,e){l(this,e),this._latlng=C(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=C(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),i=t.icon.createIcon(this._icon),n=!1;i!==this._icon&&(this._icon&&this._removeIcon(),n=!0,t.title&&(i.title=t.title),"IMG"===i.tagName&&(i.alt=t.alt||"")),pt(i,e),t.keyboard&&(i.tabIndex="0"),this._icon=i,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var o=t.icon.createShadow(this._shadow),r=!1;o!==this._shadow&&(this._removeShadow(),r=!0),o&&(pt(o,e),o.alt=""),this._shadow=o,t.opacity<1&&this._updateOpacity(),n&&this.getPane().appendChild(this._icon),this._initInteraction(),o&&r&&this.getPane("shadowPane").appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),ut(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ut(this._shadow),this._shadow=null},_setPos:function(t){Lt(this._icon,t),this._shadow&&Lt(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(pt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),$i)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new $i(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;vt(this._icon,t),this._shadow&&vt(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}}),Xi=Wi.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return l(this,t),this._renderer&&this._renderer._updateStyle(this),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),Qi=Xi.extend({options:{fill:!0,radius:10},initialize:function(t,e){l(this,e),this._latlng=C(t),this._radius=this.options.radius},setLatLng:function(t){return this._latlng=C(t),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return Xi.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,i=this._clickTolerance(),n=[t+i,e+i];this._pxBounds=new P(this._point.subtract(n),this._point.add(n))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}}),tn=Qi.extend({initialize:function(t,e,n){if("number"==typeof e&&(e=i({},n,{radius:e})),l(this,e),this._latlng=C(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new T(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Xi.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,i=this._map,n=i.options.crs;if(n.distance===pe.distance){var o=Math.PI/180,r=this._mRadius/pe.R/o,s=i.project([e+r,t]),a=i.project([e-r,t]),l=s.add(a).divideBy(2),u=i.unproject(l).lat,c=Math.acos((Math.cos(r*o)-Math.sin(e*o)*Math.sin(u*o))/(Math.cos(e*o)*Math.cos(u*o)))/o;(isNaN(c)||0===c)&&(c=r/Math.cos(Math.PI/180*e)),this._point=l.subtract(i.getPixelOrigin()),this._radius=isNaN(c)?0:l.x-i.project([u,t-c]).x,this._radiusY=l.y-s.y}else{var h=n.unproject(n.project(this._latlng).subtract([this._mRadius,0]));this._point=i.latLngToLayerPoint(this._latlng),this._radius=this._point.x-i.latLngToLayerPoint(h).x}this._updateBounds()}}),en=Xi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){l(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,i,n=1/0,o=null,r=Rt,s=0,a=this._parts.length;s<a;s++)for(var l=this._parts[s],u=1,c=l.length;u<c;u++){var h=r(t,e=l[u-1],i=l[u],!0);h<n&&(n=h,o=r(t,e,i))}return o&&(o.distance=Math.sqrt(n)),o},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,i,n,o,r,s,a=this._rings[0],l=a.length;if(!l)return null;for(t=0,e=0;t<l-1;t++)e+=a[t].distanceTo(a[t+1])/2;if(0===e)return this._map.layerPointToLatLng(a[0]);for(t=0,n=0;t<l-1;t++)if(o=a[t],r=a[t+1],i=o.distanceTo(r),(n+=i)>e)return s=(n-e)/i,this._map.layerPointToLatLng([r.x-s*(r.x-o.x),r.y-s*(r.y-o.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=C(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new T,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Dt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],i=Dt(t),n=0,o=t.length;n<o;n++)i?(e[n]=C(t[n]),this._bounds.extend(e[n])):e[n]=this._convertLatLngs(t[n]);return e},_project:function(){var t=new P;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t);var e=this._clickTolerance(),i=new x(e,e);this._bounds.isValid()&&t.isValid()&&(t.min._subtract(i),t.max._add(i),this._pxBounds=t)},_projectLatlngs:function(t,e,i){var n,o,r=t[0]instanceof M,s=t.length;if(r){for(o=[],n=0;n<s;n++)o[n]=this._map.latLngToLayerPoint(t[n]),i.extend(o[n]);e.push(o)}else for(n=0;n<s;n++)this._projectLatlngs(t[n],e,i)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else{var e,i,n,o,r,s,a,l=this._parts;for(e=0,n=0,o=this._rings.length;e<o;e++)for(i=0,r=(a=this._rings[e]).length;i<r-1;i++)(s=It(a[i],a[i+1],t,i,!0))&&(l[n]=l[n]||[],l[n].push(s[0]),s[1]===a[i+1]&&i!==r-2||(l[n].push(s[1]),n++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,i=0,n=t.length;i<n;i++)t[i]=Ct(t[i],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var i,n,o,r,s,a,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(i=0,r=this._parts.length;i<r;i++)for(n=0,o=(s=(a=this._parts[i]).length)-1;n<s;o=n++)if((e||0!==n)&&Zt(t,a[o],a[n])<=l)return!0;return!1}});en._flat=Nt;var nn=en.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,i,n,o,r,s,a,l,u=this._rings[0],c=u.length;if(!c)return null;for(r=s=a=0,t=0,e=c-1;t<c;e=t++)i=u[t],n=u[e],o=i.y*n.x-n.y*i.x,s+=(i.x+n.x)*o,a+=(i.y+n.y)*o,r+=3*o;return l=0===r?u[0]:[s/r,a/r],this._map.layerPointToLatLng(l)},_convertLatLngs:function(t){var e=en.prototype._convertLatLngs.call(this,t),i=e.length;return i>=2&&e[0]instanceof M&&e[0].equals(e[i-1])&&e.pop(),e},_setLatLngs:function(t){en.prototype._setLatLngs.call(this,t),Dt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Dt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,i=new x(e,e);if(t=new P(t.min.subtract(i),t.max.add(i)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var n,o=0,r=this._rings.length;o<r;o++)(n=jt(this._rings[o],t,!0)).length&&this._parts.push(n)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,i,n,o,r,s,a,l,u=!1;if(!this._pxBounds.contains(t))return!1;for(o=0,a=this._parts.length;o<a;o++)for(r=0,s=(l=(e=this._parts[o]).length)-1;r<l;s=r++)i=e[r],n=e[s],i.y>t.y!=n.y>t.y&&t.x<(n.x-i.x)*(t.y-i.y)/(n.y-i.y)+i.x&&(u=!u);return u||en.prototype._containsPoint.call(this,t,!0)}}),on=qi.extend({initialize:function(t,e){l(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,i,n,o=ne(t)?t:t.features;if(o){for(e=0,i=o.length;e<i;e++)((n=o[e]).geometries||n.geometry||n.features||n.coordinates)&&this.addData(n);return this}var r=this.options;if(r.filter&&!r.filter(t))return this;var s=Wt(t,r);return s?(s.feature=Gt(t),s.defaultOptions=s.options,this.resetStyle(s),r.onEachFeature&&r.onEachFeature(t,s),this.addLayer(s)):this},resetStyle:function(t){return t.options=i({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){"function"==typeof e&&(e=e(t.feature)),t.setStyle&&t.setStyle(e)}}),rn={toGeoJSON:function(t){return qt(this,{type:"Point",coordinates:Ut(this.getLatLng(),t)})}};Ji.include(rn),tn.include(rn),Qi.include(rn),en.include({toGeoJSON:function(t){var e=!Dt(this._latlngs),i=Vt(this._latlngs,e?1:0,!1,t);return qt(this,{type:(e?"Multi":"")+"LineString",coordinates:i})}}),nn.include({toGeoJSON:function(t){var e=!Dt(this._latlngs),i=e&&!Dt(this._latlngs[0]),n=Vt(this._latlngs,i?2:e?1:0,!0,t);return e||(n=[n]),qt(this,{type:(i?"Multi":"")+"Polygon",coordinates:n})}}),Zi.include({toMultiPoint:function(t){var e=[];return this.eachLayer(function(i){e.push(i.toGeoJSON(t).geometry.coordinates)}),qt(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===e)return this.toMultiPoint(t);var i="GeometryCollection"===e,n=[];return this.eachLayer(function(e){if(e.toGeoJSON){var o=e.toGeoJSON(t);if(i)n.push(o.geometry);else{var r=Gt(o);"FeatureCollection"===r.type?n.push.apply(n,r.features):n.push(r)}}}),i?qt(this,{geometries:n,type:"GeometryCollection"}):{type:"FeatureCollection",features:n}}});var sn=Kt,an=Wi.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,i){this._url=t,this._bounds=z(e),l(this,i)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(pt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ut(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&ct(this._image),this},bringToBack:function(){return this._map&&_t(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=z(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,i=this._image=t?this._url:ht("img");pt(i,"leaflet-image-layer"),this._zoomAnimated&&pt(i,"leaflet-zoom-animated"),this.options.className&&pt(i,this.options.className),i.onselectstart=r,i.onmousemove=r,i.onload=e(this.fire,this,"load"),i.onerror=e(this._overlayOnError,this,"error"),this.options.crossOrigin&&(i.crossOrigin=""),this.options.zIndex&&this._updateZIndex(),t?this._url=i.src:(i.src=this._url,i.alt=this.options.alt)},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),i=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;wt(this._image,i,e)},_reset:function(){var t=this._image,e=new P(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),i=e.getSize();Lt(t,e.min),t.style.width=i.x+"px",t.style.height=i.y+"px"},_updateOpacity:function(){vt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)}}),ln=an.extend({options:{autoplay:!0,loop:!0},_initImage:function(){var t="VIDEO"===this._url.tagName,i=this._image=t?this._url:ht("video");if(pt(i,"leaflet-image-layer"),this._zoomAnimated&&pt(i,"leaflet-zoom-animated"),i.onselectstart=r,i.onmousemove=r,i.onloadeddata=e(this.fire,this,"load"),t){for(var n=i.getElementsByTagName("source"),o=[],s=0;s<n.length;s++)o.push(n[s].src);this._url=n.length>0?o:[i.src]}else{ne(this._url)||(this._url=[this._url]),i.autoplay=!!this.options.autoplay,i.loop=!!this.options.loop;for(var a=0;a<this._url.length;a++){var l=ht("source");l.src=this._url[a],i.appendChild(l)}}}}),un=Wi.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){l(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&vt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&vt(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(vt(this._container,0),this._removeTimeout=setTimeout(e(ut,void 0,this._container),200)):ut(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=C(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ct(this._container),this},bringToBack:function(){return this._map&&_t(this._container),this},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=w(this.options.offset),i=this._getAnchor();this._zoomAnimated?Lt(this._container,t.add(i)):e=e.add(t).add(i);var n=this._containerBottom=-e.y,o=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=n+"px",this._container.style.left=o+"px"}},_getAnchor:function(){return[0,0]}}),cn=un.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){un.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Xi||this._source.on("preclick",Y))},onRemove:function(t){un.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Xi||this._source.off("preclick",Y))},getEvents:function(){var t=un.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=ht("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),i=this._wrapper=ht("div",t+"-content-wrapper",e);if(this._contentNode=ht("div",t+"-content",i),J(i),X(this._contentNode),V(i,"contextmenu",Y),this._tipContainer=ht("div",t+"-tip-container",e),this._tip=ht("div",t+"-tip",this._tipContainer),this.options.closeButton){var n=this._closeButton=ht("a",t+"-close-button",e);n.href="#close",n.innerHTML="&#215;",V(n,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var i=t.offsetWidth;i=Math.min(i,this.options.maxWidth),i=Math.max(i,this.options.minWidth),e.width=i+1+"px",e.whiteSpace="",e.height="";var n=t.offsetHeight,o=this.options.maxHeight;o&&n>o?(e.height=o+"px",pt(t,"leaflet-popup-scrolled")):mt(t,"leaflet-popup-scrolled"),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),i=this._getAnchor();Lt(this._container,e.add(i))},_adjustPan:function(){if(!(!this.options.autoPan||this._map._panAnim&&this._map._panAnim._inProgress)){var t=this._map,e=parseInt(at(this._container,"marginBottom"),10)||0,i=this._container.offsetHeight+e,n=this._containerWidth,o=new x(this._containerLeft,-i-this._containerBottom);o._add(Pt(this._container));var r=t.layerPointToContainerPoint(o),s=w(this.options.autoPanPadding),a=w(this.options.autoPanPaddingTopLeft||s),l=w(this.options.autoPanPaddingBottomRight||s),u=t.getSize(),c=0,h=0;r.x+n+l.x>u.x&&(c=r.x+n-u.x+l.x),r.x-c-a.x<0&&(c=r.x-a.x),r.y+i+l.y>u.y&&(h=r.y+i-u.y+l.y),r.y-h-a.y<0&&(h=r.y-a.y),(c||h)&&t.fire("autopanstart").panBy([c,h])}},_onCloseButtonClick:function(t){this._close(),Q(t)},_getAnchor:function(){return w(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});Di.mergeOptions({closePopupOnClick:!0}),Di.include({openPopup:function(t,e,i){return t instanceof cn||(t=new cn(i).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),Wi.include({bindPopup:function(t,e){return t instanceof cn?(l(t,e),this._popup=t,t._source=this):(this._popup&&!e||(this._popup=new cn(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){if(t instanceof Wi||(e=t,t=this),t instanceof qi)for(var i in this._layers){t=this._layers[i];break}return e||(e=t.getCenter?t.getCenter():t.getLatLng()),this._popup&&this._map&&(this._popup._source=t,this._popup.update(),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;this._popup&&this._map&&(Q(t),e instanceof Xi?this.openPopup(t.layer||t.target,t.latlng):this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var hn=un.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){un.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){un.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=un.prototype.getEvents.call(this);return Ze&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ht("div",t)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e=this._map,i=this._container,n=e.latLngToContainerPoint(e.getCenter()),o=e.layerPointToContainerPoint(t),r=this.options.direction,s=i.offsetWidth,a=i.offsetHeight,l=w(this.options.offset),u=this._getAnchor();"top"===r?t=t.add(w(-s/2+l.x,-a+l.y+u.y,!0)):"bottom"===r?t=t.subtract(w(s/2-l.x,-l.y,!0)):"center"===r?t=t.subtract(w(s/2+l.x,a/2-u.y+l.y,!0)):"right"===r||"auto"===r&&o.x<n.x?(r="right",t=t.add(w(l.x+u.x,u.y-a/2+l.y,!0))):(r="left",t=t.subtract(w(s+u.x-l.x,a/2-u.y-l.y,!0))),mt(i,"leaflet-tooltip-right"),mt(i,"leaflet-tooltip-left"),mt(i,"leaflet-tooltip-top"),mt(i,"leaflet-tooltip-bottom"),pt(i,"leaflet-tooltip-"+r),Lt(i,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&vt(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return w(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});Di.include({openTooltip:function(t,e,i){return t instanceof hn||(t=new hn(i).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),Wi.include({bindTooltip:function(t,e){return t instanceof hn?(l(t,e),this._tooltip=t,t._source=this):(this._tooltip&&!e||(this._tooltip=new hn(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",i={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?i.add=this._openTooltip:(i.mouseover=this._openTooltip,i.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(i.mousemove=this._moveTooltip),Ze&&(i.click=this._openTooltip)),this[e](i),this._tooltipHandlersAdded=!t}},openTooltip:function(t,e){if(t instanceof Wi||(e=t,t=this),t instanceof qi)for(var i in this._layers){t=this._layers[i];break}return e||(e=t.getCenter?t.getCenter():t.getLatLng()),this._tooltip&&this._map&&(this._tooltip._source=t,this._tooltip.update(),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(pt(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(mt(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e,i,n=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),i=this._map.containerPointToLayerPoint(e),n=this._map.layerPointToLatLng(i)),this._tooltip.setLatLng(n)}});var dn=Gi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),i=this.options;if(e.innerHTML=!1!==i.html?i.html:"",i.bgPos){var n=w(i.bgPos);e.style.backgroundPosition=-n.x+"px "+-n.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});Gi.Default=Ki;var pn=Wi.extend({options:{tileSize:256,opacity:1,updateWhenIdle:He,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){l(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),ut(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ct(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(_t(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=o(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof x?t:new x(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,i=this.getPane().children,n=-t(-1/0,1/0),o=0,r=i.length;o<r;o++)e=i[o].style.zIndex,i[o]!==this._container&&e&&(n=t(n,+e));isFinite(n)&&(this.options.zIndex=n+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!De){vt(this._container,this.options.opacity);var t=+new Date,e=!1,i=!1;for(var n in this._tiles){var o=this._tiles[n];if(o.current&&o.loaded){var r=Math.min(1,(t-o.loaded)/200);vt(o.el,r),r<1?e=!0:(o.active?i=!0:this._onOpaqueTile(o),o.active=!0)}}i&&!this._noPrune&&this._pruneTiles(),e&&(g(this._fadeFrame),this._fadeFrame=f(this._updateOpacity,this))}},_onOpaqueTile:r,_initContainer:function(){this._container||(this._container=ht("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var i in this._levels)this._levels[i].el.children.length||i===t?(this._levels[i].el.style.zIndex=e-Math.abs(t-i),this._onUpdateLevel(i)):(ut(this._levels[i].el),this._removeTilesAtZoom(i),this._onRemoveLevel(i),delete this._levels[i]);var n=this._levels[t],o=this._map;return n||((n=this._levels[t]={}).el=ht("div","leaflet-tile-container leaflet-zoom-animated",this._container),n.el.style.zIndex=e,n.origin=o.project(o.unproject(o.getPixelOrigin()),t).round(),n.zoom=t,this._setZoomTransform(n,o.getCenter(),o.getZoom()),n.el.offsetWidth,this._onCreateLevel(n)),this._level=n,n}},_onUpdateLevel:r,_onRemoveLevel:r,_onCreateLevel:r,_pruneTiles:function(){if(this._map){var t,e,i=this._map.getZoom();if(i>this.options.maxZoom||i<this.options.minZoom)this._removeAllTiles();else{for(t in this._tiles)(e=this._tiles[t]).retain=e.current;for(t in this._tiles)if((e=this._tiles[t]).current&&!e.active){var n=e.coords;this._retainParent(n.x,n.y,n.z,n.z-5)||this._retainChildren(n.x,n.y,n.z,n.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)ut(this._levels[t].el),this._onRemoveLevel(t),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,i,n){var o=Math.floor(t/2),r=Math.floor(e/2),s=i-1,a=new x(+o,+r);a.z=+s;var l=this._tileCoordsToKey(a),u=this._tiles[l];return u&&u.active?(u.retain=!0,!0):(u&&u.loaded&&(u.retain=!0),s>n&&this._retainParent(o,r,s,n))},_retainChildren:function(t,e,i,n){for(var o=2*t;o<2*t+2;o++)for(var r=2*e;r<2*e+2;r++){var s=new x(o,r);s.z=i+1;var a=this._tileCoordsToKey(s),l=this._tiles[a];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),i+1<n&&this._retainChildren(o,r,i+1,n))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,i,n){var o=this._clampZoom(Math.round(e));(void 0!==this.options.maxZoom&&o>this.options.maxZoom||void 0!==this.options.minZoom&&o<this.options.minZoom)&&(o=void 0);var r=this.options.updateWhenZooming&&o!==this._tileZoom;n&&!r||(this._tileZoom=o,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==o&&this._update(t),i||this._pruneTiles(),this._noPrune=!!i),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var i in this._levels)this._setZoomTransform(this._levels[i],t,e)},_setZoomTransform:function(t,e,i){var n=this._map.getZoomScale(i,t.zoom),o=t.origin.multiplyBy(n).subtract(this._map._getNewPixelOrigin(e,i)).round();Ye?wt(t.el,o,n):Lt(t.el,o)},_resetGrid:function(){var t=this._map,e=t.options.crs,i=this._tileSize=this.getTileSize(),n=this._tileZoom,o=this._map.getPixelWorldBounds(this._tileZoom);o&&(this._globalTileRange=this._pxBoundsToTileRange(o)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],n).x/i.x),Math.ceil(t.project([0,e.wrapLng[1]],n).x/i.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],n).y/i.x),Math.ceil(t.project([e.wrapLat[1],0],n).y/i.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,i=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),n=e.getZoomScale(i,this._tileZoom),o=e.project(t,this._tileZoom).floor(),r=e.getSize().divideBy(2*n);return new P(o.subtract(r),o.add(r))},_update:function(t){var e=this._map;if(e){var i=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var n=this._getTiledPixelBounds(t),o=this._pxBoundsToTileRange(n),r=o.getCenter(),s=[],a=this.options.keepBuffer,l=new P(o.getBottomLeft().subtract([a,-a]),o.getTopRight().add([a,-a]));if(!(isFinite(o.min.x)&&isFinite(o.min.y)&&isFinite(o.max.x)&&isFinite(o.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var u in this._tiles){var c=this._tiles[u].coords;c.z===this._tileZoom&&l.contains(new x(c.x,c.y))||(this._tiles[u].current=!1)}if(Math.abs(i-this._tileZoom)>1)this._setView(t,i);else{for(var h=o.min.y;h<=o.max.y;h++)for(var d=o.min.x;d<=o.max.x;d++){var p=new x(d,h);if(p.z=this._tileZoom,this._isValidTile(p)){var _=this._tiles[this._tileCoordsToKey(p)];_?_.current=!0:s.push(p)}}if(s.sort(function(t,e){return t.distanceTo(r)-e.distanceTo(r)}),0!==s.length){this._loading||(this._loading=!0,this.fire("loading"));var f=document.createDocumentFragment();for(d=0;d<s.length;d++)this._addTile(s[d],f);this._level.el.appendChild(f)}}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var i=this._globalTileRange;if(!e.wrapLng&&(t.x<i.min.x||t.x>i.max.x)||!e.wrapLat&&(t.y<i.min.y||t.y>i.max.y))return!1}if(!this.options.bounds)return!0;var n=this._tileCoordsToBounds(t);return z(this.options.bounds).overlaps(n)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,i=this.getTileSize(),n=t.scaleBy(i),o=n.add(i);return[e.unproject(n,t.z),e.unproject(o,t.z)]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),i=new T(e[0],e[1]);return this.options.noWrap||(i=this._map.wrapLatLngBounds(i)),i},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),i=new x(+e[0],+e[1]);return i.z=+e[2],i},_removeTile:function(t){var e=this._tiles[t];e&&(Le||e.el.setAttribute("src",oe),ut(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){pt(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=r,t.onmousemove=r,De&&this.options.opacity<1&&vt(t,this.options.opacity),Ce&&!Oe&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,i){var n=this._getTilePos(t),o=this._tileCoordsToKey(t),r=this.createTile(this._wrapCoords(t),e(this._tileReady,this,t));this._initTile(r),this.createTile.length<2&&f(e(this._tileReady,this,t,null,r)),Lt(r,n),this._tiles[o]={el:r,coords:t,current:!0},i.appendChild(r),this.fire("tileloadstart",{tile:r,coords:t})},_tileReady:function(t,i,n){if(this._map){i&&this.fire("tileerror",{error:i,tile:n,coords:t});var o=this._tileCoordsToKey(t);(n=this._tiles[o])&&(n.loaded=+new Date,this._map._fadeAnimated?(vt(n.el,0),g(this._fadeFrame),this._fadeFrame=f(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),i||(pt(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),De||!this._map._fadeAnimated?f(this._pruneTiles,this):setTimeout(e(this._pruneTiles,this),250)))}},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new x(this._wrapX?s(t.x,this._wrapX):t.x,this._wrapY?s(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new P(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}}),_n=pn.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,(e=l(this,e)).detectRetina&&Ke&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),Ce||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url=t,e||this.redraw(),this},createTile:function(t,i){var n=document.createElement("img");return V(n,"load",e(this._tileOnLoad,this,i,n)),V(n,"error",e(this._tileOnError,this,i,n)),this.options.crossOrigin&&(n.crossOrigin=""),n.alt="",n.setAttribute("role","presentation"),n.src=this.getTileUrl(t),n},getTileUrl:function(t){var e={r:Ke?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var n=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=n),e["-y"]=n}return _(this._url,i(e,this.options))},_tileOnLoad:function(t,i){De?setTimeout(e(t,this,null,i),0):t(null,i)},_tileOnError:function(t,e,i){var n=this.options.errorTileUrl;n&&e.getAttribute("src")!==n&&(e.src=n),t(i,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom,i=this.options.zoomReverse,n=this.options.zoomOffset;return i&&(t=e-t),t+n},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=r,e.onerror=r,e.complete||(e.src=oe,ut(e),delete this._tiles[t]))}}),fn=_n.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var n=i({},this.defaultWmsParams);for(var o in e)o in this.options||(n[o]=e[o]);var r=(e=l(this,e)).detectRetina&&Ke?2:1,s=this.getTileSize();n.width=s.x*r,n.height=s.y*r,this.wmsParams=n},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,_n.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),i=this._crs,n=b(i.project(e[0]),i.project(e[1])),o=n.min,r=n.max,s=(this._wmsVersion>=1.3&&this._crs===Ui?[o.y,o.x,r.y,r.x]:[o.x,o.y,r.x,r.y]).join(","),a=L.TileLayer.prototype.getTileUrl.call(this,t);return a+c(this.wmsParams,a,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+s},setParams:function(t,e){return i(this.wmsParams,t),e||this.redraw(),this}});_n.WMS=fn,Yt.wms=function(t,e){return new fn(t,e)};var mn=Wi.extend({options:{padding:.1,tolerance:0},initialize:function(t){l(this,t),n(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&pt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var i=this._map.getZoomScale(e,this._zoom),n=Pt(this._container),o=this._map.getSize().multiplyBy(.5+this.options.padding),r=this._map.project(this._center,e),s=this._map.project(t,e).subtract(r),a=o.multiplyBy(-i).add(n).add(o).subtract(s);Ye?wt(this._container,a,i):Lt(this._container,a)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),i=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new P(i,i.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),gn=mn.extend({getEvents:function(){var t=mn.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){mn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");V(t,"mousemove",o(this._onMouseMove,32,this),this),V(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),V(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_destroyContainer:function(){delete this._ctx,ut(this._container),q(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){this._redrawBounds=null;for(var t in this._layers)this._layers[t]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){this._drawnLayers={},mn.prototype._update.call(this);var t=this._bounds,e=this._container,i=t.getSize(),n=Ke?2:1;Lt(e,t.min),e.width=n*i.x,e.height=n*i.y,e.style.width=i.x+"px",e.style.height=i.y+"px",Ke&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){mn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[n(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,i=e.next,n=e.prev;i?i.prev=n:this._drawLast=n,n?n.next=i:this._drawFirst=i,delete t._order,delete this._layers[L.stamp(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(t.options.dashArray){var e,i=t.options.dashArray.split(","),n=[];for(e=0;e<i.length;e++)n.push(Number(i[e]));t.options._dashArray=n}},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||f(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new P,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var i=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,i.x,i.y),this._ctx.clip()}this._drawing=!0;for(var n=this._drawFirst;n;n=n.next)t=n.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var i,n,o,r,s=t._parts,a=s.length,l=this._ctx;if(a){for(this._drawnLayers[t._leaflet_id]=t,l.beginPath(),i=0;i<a;i++){for(n=0,o=s[i].length;n<o;n++)r=s[i][n],l[n?"lineTo":"moveTo"](r.x,r.y);e&&l.closePath()}this._fillStroke(l,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,i=this._ctx,n=Math.max(Math.round(t._radius),1),o=(Math.max(Math.round(t._radiusY),1)||n)/n;this._drawnLayers[t._leaflet_id]=t,1!==o&&(i.save(),i.scale(1,o)),i.beginPath(),i.arc(e.x,e.y/o,n,0,2*Math.PI,!1),1!==o&&i.restore(),this._fillStroke(i,t)}},_fillStroke:function(t,e){var i=e.options;i.fill&&(t.globalAlpha=i.fillOpacity,t.fillStyle=i.fillColor||i.color,t.fill(i.fillRule||"evenodd")),i.stroke&&0!==i.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=i.opacity,t.lineWidth=i.weight,t.strokeStyle=i.color,t.lineCap=i.lineCap,t.lineJoin=i.lineJoin,t.stroke())},_onClick:function(t){for(var e,i,n=this._map.mouseEventToLayerPoint(t),o=this._drawFirst;o;o=o.next)(e=o.layer).options.interactive&&e._containsPoint(n)&&!this._map._draggableMoved(e)&&(i=e);i&&(et(t),this._fireEvent([i],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(mt(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null)},_handleMouseHover:function(t,e){for(var i,n,o=this._drawFirst;o;o=o.next)(i=o.layer).options.interactive&&i._containsPoint(e)&&(n=i);n!==this._hoveredLayer&&(this._handleMouseOut(t),n&&(pt(this._container,"leaflet-interactive"),this._fireEvent([n],t,"mouseover"),this._hoveredLayer=n)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t)},_fireEvent:function(t,e,i){this._map._fireDOMEvent(e,i||e.type,t)},_bringToFront:function(t){var e=t._order,i=e.next,n=e.prev;i&&(i.prev=n,n?n.next=i:i&&(this._drawFirst=i),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t))},_bringToBack:function(t){var e=t._order,i=e.next,n=e.prev;n&&(n.next=i,i?i.prev=n:n&&(this._drawLast=n),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}}),yn=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),vn={_initContainer:function(){this._container=ht("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(mn.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=yn("shape");pt(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=yn("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[n(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;ut(e),t.removeInteractiveTarget(e),delete this._layers[n(t)]},_updateStyle:function(t){var e=t._stroke,i=t._fill,n=t.options,o=t._container;o.stroked=!!n.stroke,o.filled=!!n.fill,n.stroke?(e||(e=t._stroke=yn("stroke")),o.appendChild(e),e.weight=n.weight+"px",e.color=n.color,e.opacity=n.opacity,n.dashArray?e.dashStyle=ne(n.dashArray)?n.dashArray.join(" "):n.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=n.lineCap.replace("butt","flat"),e.joinstyle=n.lineJoin):e&&(o.removeChild(e),t._stroke=null),n.fill?(i||(i=t._fill=yn("fill")),o.appendChild(i),i.color=n.fillColor||n.color,i.opacity=n.fillOpacity):i&&(o.removeChild(i),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),i=Math.round(t._radius),n=Math.round(t._radiusY||i);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+i+","+n+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){ct(t._container)},_bringToBack:function(t){_t(t._container)}},bn=Xe?yn:E,wn=mn.extend({getEvents:function(){var t=mn.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=bn("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=bn("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ut(this._container),q(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){mn.prototype._update.call(this);var t=this._bounds,e=t.getSize(),i=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,i.setAttribute("width",e.x),i.setAttribute("height",e.y)),Lt(i,t.min),i.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=bn("path");t.options.className&&pt(e,t.options.className),t.options.interactive&&pt(e,"leaflet-interactive"),this._updateStyle(t),this._layers[n(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){ut(t._path),t.removeInteractiveTarget(t._path),delete this._layers[n(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,i=t.options;e&&(i.stroke?(e.setAttribute("stroke",i.color),e.setAttribute("stroke-opacity",i.opacity),e.setAttribute("stroke-width",i.weight),e.setAttribute("stroke-linecap",i.lineCap),e.setAttribute("stroke-linejoin",i.lineJoin),i.dashArray?e.setAttribute("stroke-dasharray",i.dashArray):e.removeAttribute("stroke-dasharray"),i.dashOffset?e.setAttribute("stroke-dashoffset",i.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),i.fill?(e.setAttribute("fill",i.fillColor||i.color),e.setAttribute("fill-opacity",i.fillOpacity),e.setAttribute("fill-rule",i.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,k(t._parts,e))},_updateCircle:function(t){var e=t._point,i=Math.max(Math.round(t._radius),1),n="a"+i+","+(Math.max(Math.round(t._radiusY),1)||i)+" 0 1,0 ",o=t._empty()?"M0 0":"M"+(e.x-i)+","+e.y+n+2*i+",0 "+n+2*-i+",0 ";this._setPath(t,o)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){ct(t._path)},_bringToBack:function(t){_t(t._path)}});Xe&&wn.include(vn),Di.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this.options.preferCanvas&&Xt()||Jt()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=wn&&Jt({pane:t})||gn&&Xt({pane:t}),this._paneRenderers[t]=e),e}});var kn=nn.extend({initialize:function(t,e){nn.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=z(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});wn.create=bn,wn.pointsToPath=k,on.geometryToLayer=Wt,on.coordsToLatLng=Ht,on.coordsToLatLngs=Ft,on.latLngToCoords=Ut,on.latLngsToCoords=Vt,on.getFeature=qt,on.asFeature=Gt,Di.mergeOptions({boxZoom:!0});var Dn=Si.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){V(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){q(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ut(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),me(),bt(),this._startPoint=this._map.mouseEventToContainerPoint(t),V(document,{contextmenu:Q,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=ht("div","leaflet-zoom-box",this._container),pt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new P(this._point,this._startPoint),i=e.getSize();Lt(this._box,e.min),this._box.style.width=i.x+"px",this._box.style.height=i.y+"px"},_finish:function(){this._moved&&(ut(this._box),mt(this._container,"leaflet-crosshair")),ge(),Tt(),q(document,{contextmenu:Q,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(e(this._resetState,this),0);var i=new T(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(i).fire("boxzoomend",{boxZoomBounds:i})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}});Di.addInitHook("addHandler","boxZoom",Dn),Di.mergeOptions({doubleClickZoom:!0});var xn=Si.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,i=e.getZoom(),n=e.options.zoomDelta,o=t.originalEvent.shiftKey?i-n:i+n;"center"===e.options.doubleClickZoom?e.setZoom(o):e.setZoomAround(t.containerPoint,o)}});Di.addInitHook("addHandler","doubleClickZoom",xn),Di.mergeOptions({dragging:!0,inertia:!Oe,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Mn=Si.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new Vi(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}pt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){mt(this._map._container,"leaflet-grab"),mt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=z(this._map.options.maxBounds);this._offsetLimit=b(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,i=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(i),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),i=this._initialWorldOffset,n=this._draggable._newPos.x,o=(n-e+i)%t+e-i,r=(n+e+i)%t-e-i,s=Math.abs(o+i)<Math.abs(r+i)?o:r;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=s},_onDragEnd:function(t){var e=this._map,i=e.options,n=!i.inertia||this._times.length<2;if(e.fire("dragend",t),n)e.fire("moveend");else{this._prunePositions(+new Date);var o=this._lastPos.subtract(this._positions[0]),r=(this._lastTime-this._times[0])/1e3,s=i.easeLinearity,a=o.multiplyBy(s/r),l=a.distanceTo([0,0]),u=Math.min(i.inertiaMaxSpeed,l),c=a.multiplyBy(u/l),h=u/(i.inertiaDeceleration*s),d=c.multiplyBy(-h/2).round();d.x||d.y?(d=e._limitOffset(d,e.options.maxBounds),f(function(){e.panBy(d,{duration:h,easeLinearity:s,noMoveStart:!0,animate:!0})})):e.fire("moveend")}}});Di.addInitHook("addHandler","dragging",Mn),Di.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Cn=Si.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),V(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),q(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,i=t.scrollTop||e.scrollTop,n=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(n,i)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,i,n=this._panKeys={},o=this.keyCodes;for(e=0,i=o.left.length;e<i;e++)n[o.left[e]]=[-1*t,0];for(e=0,i=o.right.length;e<i;e++)n[o.right[e]]=[t,0];for(e=0,i=o.down.length;e<i;e++)n[o.down[e]]=[0,t];for(e=0,i=o.up.length;e<i;e++)n[o.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,i,n=this._zoomKeys={},o=this.keyCodes;for(e=0,i=o.zoomIn.length;e<i;e++)n[o.zoomIn[e]]=t;for(e=0,i=o.zoomOut.length;e<i;e++)n[o.zoomOut[e]]=-t},_addHooks:function(){V(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){q(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,i=t.keyCode,n=this._map;if(i in this._panKeys){if(n._panAnim&&n._panAnim._inProgress)return;e=this._panKeys[i],t.shiftKey&&(e=w(e).multiplyBy(3)),n.panBy(e),n.options.maxBounds&&n.panInsideBounds(n.options.maxBounds)}else if(i in this._zoomKeys)n.setZoom(n.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[i]);else{if(27!==i||!n._popup||!n._popup.options.closeOnEscapeKey)return;n.closePopup()}Q(t)}}});Di.addInitHook("addHandler","keyboard",Cn),Di.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var On=Si.extend({addHooks:function(){V(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){q(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var i=it(t),n=this._map.options.wheelDebounceTime;this._delta+=i,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var o=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(e(this._performZoom,this),o),Q(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),i=this._map.options.zoomSnap||0;t._stop();var n=this._delta/(4*this._map.options.wheelPxPerZoomLevel),o=4*Math.log(2/(1+Math.exp(-Math.abs(n))))/Math.LN2,r=i?Math.ceil(o/i)*i:o,s=t._limitZoom(e+(this._delta>0?r:-r))-e;this._delta=0,this._startTime=null,s&&("center"===t.options.scrollWheelZoom?t.setZoom(e+s):t.setZoomAround(this._lastMousePos,e+s))}});Di.addInitHook("addHandler","scrollWheelZoom",On),Di.mergeOptions({tap:!0,tapTolerance:15});var Tn=Si.extend({addHooks:function(){V(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){q(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if($(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var i=t.touches[0],n=i.target;this._startPos=this._newPos=new x(i.clientX,i.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&pt(n,"leaflet-active"),this._holdTimeout=setTimeout(e(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",i))},this),1e3),this._simulateEvent("mousedown",i),V(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),q(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],i=e.target;i&&i.tagName&&"a"===i.tagName.toLowerCase()&&mt(i,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new x(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,e){var i=document.createEvent("MouseEvents");i._simulated=!0,e.target._simulatedClick=!0,i.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(i)}});Ze&&!We&&Di.addInitHook("addHandler","tap",Tn),Di.mergeOptions({touchZoom:Ze&&!Oe,bounceAtZoomLimits:!0});var Ln=Si.extend({addHooks:function(){pt(this._map._container,"leaflet-touch-zoom"),V(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){mt(this._map._container,"leaflet-touch-zoom"),q(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var i=e.mouseEventToContainerPoint(t.touches[0]),n=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(i.add(n)._divideBy(2))),this._startDist=i.distanceTo(n),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),V(document,"touchmove",this._onTouchMove,this),V(document,"touchend",this._onTouchEnd,this),$(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var i=this._map,n=i.mouseEventToContainerPoint(t.touches[0]),o=i.mouseEventToContainerPoint(t.touches[1]),r=n.distanceTo(o)/this._startDist;if(this._zoom=i.getScaleZoom(r,this._startZoom),!i.options.bounceAtZoomLimits&&(this._zoom<i.getMinZoom()&&r<1||this._zoom>i.getMaxZoom()&&r>1)&&(this._zoom=i._limitZoom(this._zoom)),"center"===i.options.touchZoom){if(this._center=this._startLatLng,1===r)return}else{var s=n._add(o)._divideBy(2)._subtract(this._centerPoint);if(1===r&&0===s.x&&0===s.y)return;this._center=i.unproject(i.project(this._pinchStartLatLng,this._zoom).subtract(s),this._zoom)}this._moved||(i._moveStart(!0,!1),this._moved=!0),g(this._animRequest);var a=e(i._move,i,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=f(a,this,!0),$(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,g(this._animRequest),q(document,"touchmove",this._onTouchMove),q(document,"touchend",this._onTouchEnd),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});Di.addInitHook("addHandler","touchZoom",Ln),Di.BoxZoom=Dn,Di.DoubleClickZoom=xn,Di.Drag=Mn,Di.Keyboard=Cn,Di.ScrollWheelZoom=On,Di.Tap=Tn,Di.TouchZoom=Ln;var Sn=window.L;window.L=$t,Object.freeze=Qt,$t.version="1.3.1",$t.noConflict=function(){return window.L=Sn,this},$t.Control=xi,$t.control=Mi,$t.Browser=Qe,$t.Evented=ce,$t.Mixin=Pi,$t.Util=le,$t.Class=v,$t.Handler=Si,$t.extend=i,$t.bind=e,$t.stamp=n,$t.setOptions=l,$t.DomEvent=_i,$t.DomUtil=wi,$t.PosAnimation=ki,$t.Draggable=Vi,$t.LineUtil=Ri,$t.PolyUtil=zi,$t.Point=x,$t.point=w,$t.Bounds=P,$t.bounds=b,$t.Transformation=Z,$t.transformation=S,$t.Projection=Hi,$t.LatLng=M,$t.latLng=C,$t.LatLngBounds=T,$t.latLngBounds=z,$t.CRS=de,$t.GeoJSON=on,$t.geoJSON=Kt,$t.geoJson=sn,$t.Layer=Wi,$t.LayerGroup=Zi,$t.layerGroup=function(t,e){return new Zi(t,e)},$t.FeatureGroup=qi,$t.featureGroup=function(t){return new qi(t)},$t.ImageOverlay=an,$t.imageOverlay=function(t,e,i){return new an(t,e,i)},$t.VideoOverlay=ln,$t.videoOverlay=function(t,e,i){return new ln(t,e,i)},$t.DivOverlay=un,$t.Popup=cn,$t.popup=function(t,e){return new cn(t,e)},$t.Tooltip=hn,$t.tooltip=function(t,e){return new hn(t,e)},$t.Icon=Gi,$t.icon=function(t){return new Gi(t)},$t.DivIcon=dn,$t.divIcon=function(t){return new dn(t)},$t.Marker=Ji,$t.marker=function(t,e){return new Ji(t,e)},$t.TileLayer=_n,$t.tileLayer=Yt,$t.GridLayer=pn,$t.gridLayer=function(t){return new pn(t)},$t.SVG=wn,$t.svg=Jt,$t.Renderer=mn,$t.Canvas=gn,$t.canvas=Xt,$t.Path=Xi,$t.CircleMarker=Qi,$t.circleMarker=function(t,e){return new Qi(t,e)},$t.Circle=tn,$t.circle=function(t,e,i){return new tn(t,e,i)},$t.Polyline=en,$t.polyline=function(t,e){return new en(t,e)},$t.Polygon=nn,$t.polygon=function(t,e){return new nn(t,e)},$t.Rectangle=kn,$t.rectangle=function(t,e){return new kn(t,e)},$t.Map=Di,$t.map=function(t,e){return new Di(t,e)}})},function(t,e){var i="__googleMapsApiOnLoadCallback",n=["channel","client","key","language","region","v"],o=null;t.exports=function(t){return t=t||{},o||(o=new Promise(function(e,o){var r=setTimeout(function(){window[i]=function(){},o(new Error("Could not load the Google Maps API"))},t.timeout||1e4);window[i]=function(){null!==r&&clearTimeout(r),e(window.google.maps),delete window[i]};var s=document.createElement("script"),a=["callback="+i];n.forEach(function(e){t[e]&&a.push(e+"="+t[e])}),t.libraries&&t.libraries.length&&a.push("libraries="+t.libraries.join(",")),s.src="https://maps.googleapis.com/maps/api/js?"+a.join("&"),document.body.appendChild(s)})),o}},function(t,e,i){function webpackContext(t){return i(webpackContextResolve(t))}function webpackContextResolve(t){var e=n[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}var n={"./de":5,"./de-at":3,"./de-at.js":3,"./de-ch":4,"./de-ch.js":4,"./de.js":5,"./en-au":6,"./en-au.js":6,"./en-ca":7,"./en-ca.js":7,"./en-gb":8,"./en-gb.js":8,"./en-ie":9,"./en-ie.js":9,"./en-il":219,"./en-il.js":219,"./en-nz":10,"./en-nz.js":10,"./es":12,"./es-do":11,"./es-do.js":11,"./es-us":220,"./es-us.js":220,"./es.js":12,"./it":13,"./it.js":13};webpackContext.keys=function webpackContextKeys(){return Object.keys(n)},webpackContext.resolve=webpackContextResolve,t.exports=webpackContext,webpackContext.id=198},function(t,e){t.exports='<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg xmlns="http://www.w3.org/2000/svg"><symbol id="svg-arrow-right" viewBox="0 0 31.49 31.49"><path d="M21.205 5.007a1.112 1.112 0 0 0-1.587 0 1.12 1.12 0 0 0 0 1.571l8.047 8.047H1.111A1.106 1.106 0 0 0 0 15.737c0 .619.492 1.127 1.111 1.127h26.554l-8.047 8.032c-.429.444-.429 1.159 0 1.587a1.112 1.112 0 0 0 1.587 0l9.952-9.952a1.093 1.093 0 0 0 0-1.571l-9.952-9.953z" fill="#1e201d"/></symbol><symbol id="svg-close" viewBox="0 0 12 12"><title>close</title><path d="M3.975 5.475L0 1.5S0 0 1.5 0l4.343 4.343C8.663 1.837 10.5 0 10.5 0S12 0 12 1.5L7.657 5.843C10.163 8.663 12 10.5 12 10.5s0 1.5-1.5 1.5L6.157 7.657C3.337 10.163 1.5 12 1.5 12S0 12 0 10.5l4.343-4.343z" fill-rule="evenodd"/></symbol><symbol id="svg-drupal" viewBox="0 0 14 14"><title>drupal</title><path d="M6.634 8.668a2.21 2.21 0 1 1 0 4.419 2.21 2.21 0 0 1 0-4.419zm2.747-.421a2.912 2.912 0 0 0 2.037-3.426c1.459 1.566 2.328 3.293 1.394 5.588-.675 1.66-2.182 3.029-4.004 3.591a3.8 3.8 0 0 0 .573-5.753zM6.886 5.45a1.69 1.69 0 1 1 3.38 0 1.69 1.69 0 0 1-3.38 0zm-3.163 7.878C1.098 11.734.2 8.684 1.196 6.218 2.681 2.54 6.698 3.99 6.316 0c.75.911 1.7 1.745 2.652 2.566A2.91 2.91 0 0 0 6.18 7.1a3.805 3.805 0 0 0-2.457 6.228z" fill-rule="evenodd"/></symbol><symbol id="svg-easydb" viewBox="0 0 24 24"><title>easydb</title><g fill-rule="evenodd"><path d="M3 21c-1.87-2.38-3-5.539-3-10 0-2.468 1.136-5.623 3-8v18" fill="currentColor"/><path d="M19 17h-4V8.38L19 7v10zm-6 0H9V8.38L13 7v10zM11.3 0A11.42 11.42 0 0 0 7 .837l.002 22.328A11.43 11.43 0 0 0 11.3 24C17.762 24 23 18.627 23 12S17.762 0 11.3 0z"/></g></symbol><symbol id="svg-external-link" viewBox="0 0 12 12"><title>external-link</title><g fill-rule="evenodd"><path d="M6.707 4H1v7h7V5.293l-1 1V10H2V5h3.707l1-1z"/><path d="M10 2v4.494c0 .665-.094.705-.557.242L8 5.293l-2.5 2.5L4.207 6.5l2.5-2.5-1.443-1.443C4.798 2.091 4.835 2 5.506 2H10zM2.793 6.5L5.5 9.207l2.5-2.5.736.736C9.832 8.539 11 8.046 11 6.494V1H5.506c-1.56 0-2.046 1.167-.949 2.264L5.293 4l-2.5 2.5z" fill="currentColor"/></g></symbol><symbol id="svg-falcon-io" viewBox="0 0 14 14"><title>falcon-io</title><path d="M13.69 11.43c-1.353-.296-2.558-1.153-3.496-2.395-.202.094-.903.524-2.903.393-2.336-.153-3.689-2.03-3.689-2.03 2.664.309 5.414.058 5.823.018-.056-.23-.127-.468-.156-.71-.745.014-4.039.047-6.017-.519C1.036 5.555 0 3 0 3c3.89.206 9.66 1.187 11.505 1.562.328.066.581.337.579.672-.018 3.038.947 4.8 1.839 5.895.148.187.089.386-.233.302z" fill-rule="nonzero"/></symbol><symbol id="svg-folder-shared-upload" viewBox="0 0 15 19"><title>folder-shared-upload</title><g fill-rule="evenodd"><path d="M5 16H2c-1.276 0-2-.724-2-2V4c0-1.276.724-2 2-2h3c2 0 2 2 2 2h6c1.276 0 2 .724 2 2v8c0 1.276-.724 2-2 2h-3v-1h3c1 0 1-1 1-1V6c0-1-1-1-1-1H7S6 5 6 4 5 3 5 3H2S1 3 1 4v10s0 1 1 1h3v1z"/><path d="M5.333 8.5h-1.86c-.5 0-.473.5-.473 1v1.692l.75-.865V9.5H4v.538L5.333 8.5zm4.334 0H11.5c.5 0 .5.5.5 1v1.693l-.75-.866V9.5H11v.539L9.666 8.5zM5 8a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm5 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zM9 18H6v-5H3.5l4-4.5 4 4.5H9z"/></g></symbol><symbol id="svg-folder-shared" viewBox="0 0 15 19"><title>folder-shared</title><g fill-rule="evenodd"><path d="M2 2C.724 2 0 2.724 0 4v10c0 1.276.724 2 2 2h11c1.276 0 2-.724 2-2V6c0-1.276-.724-2-2-2H7s0-2-2-2H2zm0 1h3s1 0 1 1 1 1 1 1h6s1 0 1 1v8s0 1-1 1H2c-1 0-1-1-1-1V4c0-1 1-1 1-1z"/><path d="M5 8a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm-1.526.5H6.5C7 8.5 7 9 7 9.5V12h-.75V9.5H6V14h-.75v-2h-.5v2H4V9.5h-.25V12H3V9.5c0-.5-.026-1 .474-1zM10 8a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm-1.526.5H11.5c.5 0 .5.5.5 1V12h-.75V9.5H11V14h-.75v-2h-.5v2H9V9.5h-.25V12H8V9.5c0-.5-.027-1 .473-1z"/></g></symbol><symbol id="svg-folder-upload" viewBox="0 0 15 19"><title>folder-upload</title><g fill-rule="evenodd"><path d="M5 16H2c-1.276 0-2-.724-2-2V4c0-1.276.724-2 2-2h3c2 0 2 2 2 2h6c1.276 0 2 .724 2 2v8c0 1.276-.724 2-2 2h-3v-1h3c1 0 1-1 1-1V6c0-1-1-1-1-1H7S6 5 6 4 5 3 5 3H2S1 3 1 4v10s0 1 1 1h3v1z"/><path d="M9 18H6v-5H3.5l4-4.5 4 4.5H9z"/></g></symbol><symbol id="svg-folder" viewBox="0 0 15 19"><title>folder</title><path d="M2 2C.724 2 0 2.724 0 4v10c0 1.276.724 2 2 2h11c1.276 0 2-.724 2-2V6c0-1.276-.724-2-2-2H7s0-2-2-2H2zm0 1h3s1 0 1 1 1 1 1 1h6s1 0 1 1v8s0 1-1 1H2c-1 0-1-1-1-1V4c0-1 1-1 1-1z" fill-rule="evenodd"/></symbol><symbol id="svg-grid" viewBox="0 0 16 13"><title>grid</title><path d="M1 1h4v3H1V1zm5 0h4v3H6V1zm5 0h4v3h-4V1zM1 5h4v3H1V5zm5 0h4v3H6V5zm5 0h4v3h-4V5zM1 9h4v3H1V9zm5 0h4v3H6V9zm5 0h4v3h-4V9z" fill-rule="evenodd"/></symbol><symbol id="svg-hierarchy" viewBox="0 0 14 14"><title>hierarchy</title><g fill-rule="evenodd"><path d="M2 4.25a.249.249 0 0 0 .176-.074l1.75-1.75A.249.249 0 0 0 4 2.25.252.252 0 0 0 3.75 2H.25a.252.252 0 0 0-.25.25c0 .066.027.129.074.176l1.75 1.75c.047.047.11.074.176.074zM4 12.25a.249.249 0 0 0 .176-.074l1.75-1.75A.249.249 0 0 0 6 10.25a.252.252 0 0 0-.25-.25h-3.5a.252.252 0 0 0-.25.25c0 .066.027.129.074.176l1.75 1.75c.047.047.11.074.176.074zM3 8.25a.249.249 0 0 0 .176-.074l1.75-1.75A.249.249 0 0 0 5 6.25.252.252 0 0 0 4.75 6h-3.5a.252.252 0 0 0-.25.25c0 .066.027.129.074.176l1.75 1.75c.047.047.11.074.176.074zM5 2h9v2H5zM6 6h8v2H6zM7 10h7v2H7z"/></g></symbol><symbol id="svg-info-circle" viewBox="0 0 14 14"><title>info-circle</title><g fill-rule="evenodd"><path d="M7 13A6 6 0 1 0 7 1a6 6 0 0 0 0 12zm0 1A7 7 0 1 1 7 0a7 7 0 0 1 0 14z"/><path d="M6 3h2v2H6V3zm2 3H6v5h2V6z"/></g></symbol><symbol id="svg-inherit" viewBox="-110 -59.7 345.5 345.5"><style>.st0{display:none;fill:#535b6b}</style><path id="plus" class="st0" d="M62.7-59.3C-32.7-59.3-110 18-110 113.4s77.3 172.7 172.7 172.7 172.7-77.3 172.7-172.7c.1-95.3-77.3-172.7-172.7-172.7zm103.9 199.8H89.7v76.8h-54v-76.9h-76.9v-54h76.9V9.6h54v76.8h76.9v54.1z"/><path d="M57 28.4L-98.7 184.1c-3.7 3.7-3.7 9.5 0 13.2s9.5 3.7 13.2 0L63.6 48.2l149.1 149.1c3.7 3.7 9.5 3.7 13.2 0 1.8-1.8 2.8-4.2 2.8-6.6 0-2.4-.9-4.8-2.8-6.6L70.2 28.4c-3.6-3.6-9.6-3.6-13.2 0z"/></symbol><symbol id="svg-merge-icon" viewBox="-27 -143.2 512 512"><style>.st0,.st1{fill:#39f}.st1{display:none}</style><path class="st0" d="M363.3 200.7c-6.2-15-15.1-28.3-26.6-39.8l-57.6-57.6c-4.6-4.6-8.2-10-10.7-16.1-2.5-6-3.8-12.4-3.8-18.9V-4.1h69.8L228-110.5 121.7-4.1h69.8v72.4c0 6.5-1.3 12.9-3.8 18.9-2.5 6-6.1 11.5-10.7 16.1l-57.6 57.6c-11.5 11.5-20.4 24.8-26.6 39.8-6.2 15-9.3 30.8-9.3 47V320h73.2v-72.4c0-6.5 1.3-12.9 3.8-19 2.5-6 6.1-11.4 10.7-16l57-56.9 56.9 56.9c4.6 4.6 8.2 10 10.7 16s3.8 12.4 3.8 19V320h73.2v-72.4c-.2-16.2-3.3-32-9.5-46.9z"/><path class="st1" d="M229-144.2c-141.2 0-256 114.8-256 256s114.8 256 256 256 256-114.8 256-256-114.8-256-256-256zm0 468.1c-117 0-212.1-95.2-212.1-212.1S112-100.3 229-100.3 441.1-5.2 441.1 111.8 346 323.9 229 323.9z"/></symbol><symbol id="svg-multiple" viewBox="0 0 10 12"><title>multiple</title><g fill-rule="evenodd"><path d="M8 8h2V0H4v2h1V1h4v6H8v1z"/><path d="M6 10h2V2H2v2h1V3h4v6H6v1z"/><path d="M1 11h4V5H1v6zM0 4h6v8H0V4z"/></g></symbol><symbol id="svg-popup" viewBox="0 0 15 14"><title>popup</title><g fill-rule="evenodd"><path d="M4 4H1v9h10v-3h-1v2H2V5h2V4z"/><path d="M4 1h10v9H4V1zm1 8h8V3H5v6z"/></g></symbol><symbol id="svg-remove-icon" viewBox="-27 -143.2 512 512"><style>.st0{fill:#c33}</style><path class="st0" d="M229-143.2c-141.2 0-256 114.8-256 256s114.8 256 256 256 256-114.8 256-256-114.8-256-256-256zm0 468.1c-117 0-212.1-95.2-212.1-212.1S112-99.3 229-99.3 441.1-4.2 441.1 112.8 346 324.9 229 324.9z"/><path class="st0" d="M328.1 13.7c-8.6-8.6-22.5-8.6-31 0l-68 68-68-68c-8.6-8.6-22.5-8.6-31 0s-8.6 22.5 0 31l68 68-68 68c-8.6 8.6-8.6 22.5 0 31 4.3 4.3 9.9 6.4 15.5 6.4s11.2-2.1 15.5-6.4l68-68 68 68c4.3 4.3 9.9 6.4 15.5 6.4s11.2-2.1 15.5-6.4c8.6-8.6 8.6-22.5 0-31l-68-68 68-68c8.5-8.5 8.5-22.4 0-31z"/></symbol><symbol id="svg-reset" viewBox="0 0 12 12"><title>reset</title><path d="M4 0v6L0 3l4-3zm0 2h5c3 0 3 3 3 3v3c0 3-3 3-3 3H2V9h7c1 0 1-1 1-1V5c0-1-1-1-1-1H4V2z" fill-rule="evenodd"/></symbol><symbol id="svg-rows" viewBox="0 0 16 13"><title>rows</title><path d="M5 1h10v3H5V1zM1 1h3v3H1V1zm0 4h3v3H1V5zm0 4h3v3H1V9zm4-4h10v3H5V5zm0 4h10v3H5V9z" fill-rule="evenodd"/></symbol><symbol id="svg-select-all" viewBox="0 0 15 15"><title>select-all</title><g fill-rule="evenodd"><path d="M0 1h1v1H0V1zm3-1h1v1H3V0zm2 0h1v1H5V0zm2 0h1v1H7V0zm2 0h1v1H9V0zm2 0h1v1h-1V0zm2 0h2v1h-2V0zM0 0h2v1H0V0zm0 14h2v1H0v-1zm5 0h1v1H5v-1zm-2 0h1v1H3v-1zm4 0h1v1H7v-1zm2 0h1v1H9v-1zm2 0h1v1h-1v-1zm2 0h2v1h-2v-1zm1-13h1v1h-1V1zm0 2h1v1h-1V3zm0 2h1v1h-1V5zm0 2h1v1h-1V7zm0 2h1v1h-1V9zm0 2h1v1h-1v-1zM0 3h1v1H0V3zm0 2h1v1H0V5zm0 2h1v1H0V7zm0 2h1v1H0V9zm0 2h1v1H0v-1zm0 2h1v1H0v-1zm14 0h1v1h-1v-1zM3 3h4v4H3zM8 3h4v4H8zM8 8h4v4H8zM3 8h4v4H3z"/></g></symbol><symbol id="svg-spinner" viewBox="0 0 14 14"><title>spinner</title><path d="M4.11 10.89c0-.554-.446-1-1-1-.547 0-1 .446-1 1 0 .547.453 1 1 1 .554 0 1-.453 1-1zM8 12.5c0-.555-.445-1-1-1-.555 0-1 .445-1 1 0 .555.445 1 1 1 .555 0 1-.445 1-1zM2.5 7c0-.555-.445-1-1-1-.555 0-1 .445-1 1 0 .555.445 1 1 1 .555 0 1-.445 1-1zm9.39 3.89c0-.554-.452-1-1-1-.554 0-1 .446-1 1 0 .547.446 1 1 1 .548 0 1-.453 1-1zM4.36 3.11c0-.688-.563-1.25-1.25-1.25-.688 0-1.25.562-1.25 1.25 0 .687.562 1.25 1.25 1.25.687 0 1.25-.563 1.25-1.25zM13.5 7c0-.555-.445-1-1-1-.555 0-1 .445-1 1 0 .555.445 1 1 1 .555 0 1-.445 1-1zm-5-5.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0zm4.14 1.61c0-.962-.788-1.75-1.75-1.75-.968 0-1.75.788-1.75 1.75 0 .968.782 1.75 1.75 1.75.962 0 1.75-.782 1.75-1.75z" fill-rule="evenodd"/></symbol><symbol id="svg-table" viewBox="0 0 15 13"><title>table</title><path d="M6 6v2h3V6H6zm0-1V3H5v2H2v1h3v2H2v1h3v2h1V9h3v2h1V9h3v3h1V3h-1v2h-3V3H9v2H6zm7 1v2h-3V6h3zM1 3h1v9H1V3zm1 8h11v1H2v-1zM1 1h13v2H1V1z" fill-rule="evenodd"/></symbol><symbol id="svg-tag-o" viewBox="0 0 13 13"><title>tag-o</title><g fill-rule="evenodd"><path d="M1.065 1.258c.02-.064.027 2.825.027 3.112 0 .5.13 1.086.356 1.324.523.54 6.142 6.155 6.343 6.343l-.072-.061a.388.388 0 0 0-.048-.034.24.24 0 0 0 .058.017.197.197 0 0 0-.062.03c.17-.14 3.325-3.254 3.692-3.632.195-.202.573-.611.573-.611-.036.054-.13-.166-.215-.256-.167-.175-5.84-5.86-5.84-5.86a6.77 6.77 0 0 0-.48-.304c-.225-.117-.417-.179-.481-.179-.26 0-.686-.007-1.847-.027-1.133-.02-1.572-.028-1.813-.028a.978.978 0 0 0-.191.166zM4.916.054c.603 0 1.45.544 1.693.762.195.217 5.96 5.87 6.227 6.257.28.374.143 1.026 0 1.25-.13.265-4.038 4.097-4.479 4.462-.488.396-1.116.152-1.31 0-.189-.174-5.79-5.746-6.392-6.365C.055 5.789 0 4.675 0 4.352V1.088C0 .652.601 0 1.256 0c.602 0 3.061.054 3.66.054z"/><path d="M3.436 3a.436.436 0 1 0-.872 0 .436.436 0 0 0 .872 0zM2 3a1 1 0 1 1 2 0 1 1 0 0 1-2 0z"/></g></symbol><symbol id="svg-trash" viewBox="0 0 13 13"><title>trash</title><g fill-rule="evenodd"><path d="M1 11.5c0 .634.3 1.084.776 1.322.27.135.528.178.724.178h8c.634 0 1.084-.3 1.322-.776.135-.27.178-.528.178-.724V3h.5V2H.5v1H1v8.5zM2 3h9v8.5c0 .054-.02.17-.072.276-.075.15-.187.224-.428.224h-8a.702.702 0 0 1-.276-.072C2.074 11.853 2 11.74 2 11.5V3z"/><path d="M4.61 1.621C4.717 1.194 4.862 1 5 1h3c.138 0 .283.194.39.621.032.127.055.256.073.379H4.537c.018-.123.041-.252.073-.379zM3.5 2.5V3h6v-.5a4.84 4.84 0 0 0-.14-1.121C9.154.556 8.737 0 8 0H5c-.737 0-1.154.556-1.36 1.379a4.84 4.84 0 0 0-.123.767A4.505 4.505 0 0 0 3.5 2.5zM7 4v7h1V4H7zm2 0v7h1V4H9zM5 4v7h1V4H5zM3 4v7h1V4H3z"/></g></symbol><symbol id="svg-typo3" viewBox="0 0 14 14"><title>typo3</title><path d="M10.456 9.648C8.896 12.15 7 14 5.876 14 3.446 14 0 6.674 0 3.446c0-.508.109-.907.29-1.16C1.125 1.27 3.736.47 5.912.217c-.254.217-.435.471-.435 1.233 0 2.067 2.611 8.28 4.389 8.28.216 0 .382-.022.59-.083zM9.32 0c2.249 0 4.498.363 4.498 1.632 0 2.575-1.632 5.695-2.466 5.695-1.487 0-3.337-4.135-3.337-6.202C8.016.182 8.379 0 9.32 0z" fill-rule="nonzero"/></symbol></svg>'},function(t,e){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},,,,,,,,,,,,,,,function(t,e){t.exports='<div data-template="map">\n    <div class="cui-map-zoom-buttons">\n        <div data-slot="buttons-upper-left" class="buttons-upper-left"></div>\n        <div data-slot="buttons-upper-right" class="buttons-upper-right"></div>\n    </div>\n    <div data-slot="center"></div>\n    <div>\n        <div data-slot="buttons-bottom-left" class="buttons-bottom-left"></div>\n        <div data-slot="buttons-bottom-right" class="buttons-bottom-right"></div>\n    </div>\n</div>'},function(t,e,i){(function(t){var e=function(t,e){function ctor(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return ctor.prototype=e.prototype,t.prototype=new ctor,t.__super__=e.prototype,t},i={}.hasOwnProperty;t.DataFieldProxy=function(i){function DataFieldProxy(){return DataFieldProxy.__super__.constructor.apply(this,arguments)}return e(DataFieldProxy,i),DataFieldProxy.prototype.readOpts=function(){return DataFieldProxy.__super__.readOpts.call(this),this.__element=null},DataFieldProxy.prototype.initOpts=function(){return DataFieldProxy.__super__.initOpts.call(this),this.addOpts({call_others:{default:!0,check:Boolean},element:{mandatory:!0,check:function(e){return t.util.isContent(e)}},getDefaultValue:{check:Function}})},DataFieldProxy.prototype.getFields=function(){var e,i,n,o,r,s,a,l;if(o=[],!this._call_others)return o;if(this.__element)l=this.__element;else{if(t.util.isFunction(this._element))return o;l=this._element}if(l instanceof t.DOMElement){if(l.isDestroyed())return o;e=l.DOM}else e=l;for(a=t.dom.matchSelector(e,"[cui-data-field-name]"),r=0,s=a.length;r<s;r++)n=a[r],(i=t.dom.data(n,"element"))&&o.push(i);return o},DataFieldProxy.prototype.remove=function(){return this.__detach(),DataFieldProxy.__super__.remove.call(this)},DataFieldProxy.prototype.__detach=function(){return this.__element?(t.Events.ignore({type:"data-changed",node:this.__element}),this.__element.DOM?t.dom.remove(this.__element.DOM):t.dom.remove(this.__element),this.__element=null,this):this},DataFieldProxy.prototype.destroy=function(){return this.__detach(),DataFieldProxy.__super__.destroy.call(this)},DataFieldProxy.prototype.render=function(){return t.util.isFunction(this._element)?this.__element=this._element.call(this,this):this.__element=this._element,this.replace(this.__element),t.Events.listen({type:"data-changed",node:this.__element,call:function(e){return function(i,n){return i.stopImmediatePropagation(),n.element=e,t.Events.trigger({type:"data-changed",node:e.DOM,info:n})}}(this)}),DataFieldProxy.__super__.render.call(this),this},DataFieldProxy.prototype.setCheckChangedValue=function(){},DataFieldProxy.prototype.initData=function(){},DataFieldProxy}(t.DataField),t.DataFieldProxy}).call(e,i(0))},function(t,e){t.exports='\x3c!--\n * coffeescript-ui - Coffeescript User Interface System (CUI)\n * Copyright (c) 2013 - 2016 Programmfabrik GmbH\n * MIT Licence\n * https://github.com/programmfabrik/coffeescript-ui, http://www.coffeescript-ui.org\n--\x3e\n\n<div class="cui-data-field-multi-output" data-template="data-field-multi-output">\n\t<div class="cui-data-field-multi-output-center"></div>\n\t<div class="cui-data-field-multi-output-aside"></div>\n</div>\n'},function(t,e,i){!function(t,e){e(i(1))}(0,function(t){"use strict";return t.defineLocale("en-il",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}})})},function(t,e,i){!function(t,e){e(i(1))}(0,function(t){"use strict";var e="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),i="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_");return t.defineLocale("es-us",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(t,n){return t?/-MMM-/.test(n)?i[t.month()]:e[t.month()]:e},monthsParseExact:!0,weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"MM/DD/YYYY",LL:"MMMM [de] D [de] YYYY",LLL:"MMMM [de] D [de] YYYY h:mm A",LLLL:"dddd, MMMM [de] D [de] YYYY h:mm A"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[mañana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:0,doy:6}})})}])});